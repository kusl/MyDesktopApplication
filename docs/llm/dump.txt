===============================================================================
PROJECT EXPORT
Generated: Wed Dec 24 08:02:07 PM CST 2025
Project Path: /home/kushal/src/dotnet/MyDesktopApplication
===============================================================================

DIRECTORY STRUCTURE:
===================

.
├── docs
│   ├── llm
│   │   ├── claude.md
│   │   ├── commands.txt
│   │   ├── dump.txt
│   │   └── output.txt
│   ├── memory.md
│   └── thoughts.md
├── .github
│   ├── workflows
│   │   └── build-and-release.yml
│   └── dependabot.yml
├── src
│   ├── MyDesktopApplication.Android
│   │   ├── Converters
│   │   │   └── Converters.cs
│   │   ├── Resources
│   │   │   ├── drawable
│   │   │   │   ├── icon.png
│   │   │   │   └── icon.xml
│   │   │   ├── mipmap-hdpi
│   │   │   ├── mipmap-mdpi
│   │   │   ├── mipmap-xhdpi
│   │   │   ├── mipmap-xxhdpi
│   │   │   ├── mipmap-xxxhdpi
│   │   │   └── values
│   │   │       ├── strings.xml
│   │   │       └── styles.xml
│   │   ├── Views
│   │   │   ├── MainView.axaml
│   │   │   └── MainView.axaml.cs
│   │   ├── AndroidManifest.xml
│   │   ├── App.axaml
│   │   ├── App.cs
│   │   ├── MainActivity.cs
│   │   └── MyDesktopApplication.Android.csproj
│   ├── MyDesktopApplication.Core
│   │   ├── Entities
│   │   │   ├── Country.cs
│   │   │   ├── EntityBase.cs
│   │   │   ├── GameState.cs
│   │   │   ├── QuestionType.cs
│   │   │   └── TodoItem.cs
│   │   ├── Interfaces
│   │   │   ├── IGameStateRepository.cs
│   │   │   ├── IRepository.cs
│   │   │   └── ITodoRepository.cs
│   │   └── MyDesktopApplication.Core.csproj
│   ├── MyDesktopApplication.Desktop
│   │   ├── Assets
│   │   │   └── avalonia-logo.ico
│   │   ├── Converters
│   │   │   └── Converters.cs
│   │   ├── Models
│   │   ├── ViewModels
│   │   │   ├── MainWindowViewModel.cs
│   │   │   └── ViewModelBase.cs
│   │   ├── Views
│   │   │   ├── MainWindow.axaml
│   │   │   └── MainWindow.axaml.cs
│   │   ├── App.axaml
│   │   ├── App.axaml.cs
│   │   ├── app.manifest
│   │   ├── appsettings.json
│   │   ├── MyDesktopApplication.Desktop.csproj
│   │   └── Program.cs
│   ├── MyDesktopApplication.Infrastructure
│   │   ├── Data
│   │   │   ├── AppDbContext.cs
│   │   │   └── DesignTimeDbContextFactory.cs
│   │   ├── Repositories
│   │   │   ├── GameStateRepository.cs
│   │   │   ├── Repository.cs
│   │   │   └── TodoRepository.cs
│   │   ├── DependencyInjection.cs
│   │   └── MyDesktopApplication.Infrastructure.csproj
│   └── MyDesktopApplication.Shared
│       ├── Data
│       │   ├── CountryData.cs
│       │   └── MotivationalMessages.cs
│       ├── DTOs
│       │   └── TodoItemDto.cs
│       ├── ViewModels
│       │   ├── CountryQuizViewModel.cs
│       │   ├── MainViewModel.cs
│       │   └── ViewModelBase.cs
│       └── MyDesktopApplication.Shared.csproj
├── tests
│   ├── MyDesktopApplication.Core.Tests
│   │   ├── GameStateTests.cs
│   │   ├── MyDesktopApplication.Core.Tests.csproj
│   │   ├── QuestionTypeTests.cs
│   │   └── TodoItemTests.cs
│   ├── MyDesktopApplication.Integration.Tests
│   │   ├── MyDesktopApplication.Integration.Tests.csproj
│   │   └── TodoRepositoryTests.cs
│   └── MyDesktopApplication.UI.Tests
│       ├── MainWindowViewModelTests.cs
│       └── MyDesktopApplication.UI.Tests.csproj
├── consolidate-github-actions.sh
├── Directory.Build.props
├── Directory.Packages.props
├── export.sh
├── fix-all-issues.sh
├── fix-ui-and-precision.sh
├── .gitattributes
├── .gitignore
├── MyDesktopApplication.slnx
└── README.md


FILE CONTENTS:
==============

================================================================================
FILE: consolidate-github-actions.sh
SIZE: 13.44 KB
MODIFIED: 2025-12-24 19:42:29
================================================================================

#!/bin/bash
set -euo pipefail

# =============================================================================
# Consolidate GitHub Actions into a Single Workflow
# =============================================================================
# This script:
# 1. Removes ci.yml, build.yml, release.yml
# 2. Creates a single unified workflow
# 3. Every push creates a full release 1.0.$GITHUB_RUN_NUMBER
# 4. No more git tags needed
# 5. No more pre-releases
# =============================================================================

echo "=============================================="
echo "  Consolidating GitHub Actions Workflows"
echo "=============================================="
echo ""

# Navigate to project root
cd "$(dirname "$0")"

# Create .github/workflows directory if it doesn't exist
mkdir -p .github/workflows

# Remove old workflow files
echo "Removing old workflow files..."
rm -f .github/workflows/ci.yml
rm -f .github/workflows/build.yml
rm -f .github/workflows/release.yml
rm -f .github/workflows/nightly.yml
rm -f .github/workflows/mobile.yml
echo "✓ Old workflows removed"

# Create the unified workflow
echo "Creating unified workflow..."

cat > .github/workflows/build-and-release.yml << 'WORKFLOW_EOF'
# =============================================================================
# Unified Build & Release Workflow
# =============================================================================
# Every push to master/main creates a full release 1.0.{run_number}
# No git tags required - GitHub run number auto-increments
# =============================================================================

name: Build & Release

on:
  push:
    branches: [master, main]
  pull_request:
    branches: [master, main]
  workflow_dispatch:

env:
  DOTNET_VERSION: '10.0.x'
  DOTNET_NOLOGO: true
  DOTNET_CLI_TELEMETRY_OPTOUT: true

jobs:
  # ===========================================================================
  # Build & Test
  # ===========================================================================
  build-and-test:
    name: Build & Test
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout
        uses: actions/checkout@v6
        
      - name: Setup .NET
        uses: actions/setup-dotnet@v5
        with:
          dotnet-version: ${{ env.DOTNET_VERSION }}
          
      - name: Cache NuGet packages
        uses: actions/cache@v5
        with:
          path: ~/.nuget/packages
          key: ${{ runner.os }}-nuget-${{ hashFiles('**/*.csproj', '**/Directory.Packages.props') }}
          restore-keys: |
            ${{ runner.os }}-nuget-
            
      - name: Restore (Desktop + Tests only)
        shell: bash
        run: |
          dotnet restore src/MyDesktopApplication.Core/MyDesktopApplication.Core.csproj
          dotnet restore src/MyDesktopApplication.Infrastructure/MyDesktopApplication.Infrastructure.csproj
          dotnet restore src/MyDesktopApplication.Shared/MyDesktopApplication.Shared.csproj
          dotnet restore src/MyDesktopApplication.Desktop/MyDesktopApplication.Desktop.csproj
          dotnet restore tests/MyDesktopApplication.Core.Tests/MyDesktopApplication.Core.Tests.csproj
          dotnet restore tests/MyDesktopApplication.Integration.Tests/MyDesktopApplication.Integration.Tests.csproj
          dotnet restore tests/MyDesktopApplication.UI.Tests/MyDesktopApplication.UI.Tests.csproj
          
      - name: Build
        shell: bash
        run: |
          dotnet build src/MyDesktopApplication.Desktop/MyDesktopApplication.Desktop.csproj -c Release --no-restore
          
      - name: Test
        shell: bash
        run: |
          dotnet test tests/MyDesktopApplication.Core.Tests/MyDesktopApplication.Core.Tests.csproj -c Release --no-build --verbosity normal
          dotnet test tests/MyDesktopApplication.Integration.Tests/MyDesktopApplication.Integration.Tests.csproj -c Release --no-build --verbosity normal
          dotnet test tests/MyDesktopApplication.UI.Tests/MyDesktopApplication.UI.Tests.csproj -c Release --no-build --verbosity normal

  # ===========================================================================
  # Build Desktop Binaries (Matrix)
  # ===========================================================================
  build-desktop:
    name: Build ${{ matrix.name }}
    needs: build-and-test
    if: github.event_name == 'push' && (github.ref == 'refs/heads/master' || github.ref == 'refs/heads/main')
    runs-on: ${{ matrix.os }}
    
    strategy:
      fail-fast: false
      matrix:
        include:
          - name: Windows x64
            os: windows-latest
            rid: win-x64
            artifact: MyDesktopApplication-win-x64
            
          - name: Windows ARM64
            os: windows-latest
            rid: win-arm64
            artifact: MyDesktopApplication-win-arm64
            
          - name: Linux x64
            os: ubuntu-latest
            rid: linux-x64
            artifact: MyDesktopApplication-linux-x64
            
          - name: Linux ARM64
            os: ubuntu-latest
            rid: linux-arm64
            artifact: MyDesktopApplication-linux-arm64
            
          - name: macOS x64
            os: macos-13
            rid: osx-x64
            artifact: MyDesktopApplication-osx-x64
            
          - name: macOS ARM64
            os: macos-latest
            rid: osx-arm64
            artifact: MyDesktopApplication-osx-arm64
    
    steps:
      - name: Checkout
        uses: actions/checkout@v6
        
      - name: Setup .NET
        uses: actions/setup-dotnet@v5
        with:
          dotnet-version: ${{ env.DOTNET_VERSION }}
          
      - name: Cache NuGet packages
        uses: actions/cache@v5
        with:
          path: ~/.nuget/packages
          key: ${{ runner.os }}-nuget-${{ hashFiles('**/*.csproj', '**/Directory.Packages.props') }}
          restore-keys: |
            ${{ runner.os }}-nuget-
            
      - name: Publish
        shell: bash
        run: |
          dotnet publish src/MyDesktopApplication.Desktop/MyDesktopApplication.Desktop.csproj \
            -c Release \
            -r ${{ matrix.rid }} \
            --self-contained true \
            -p:PublishSingleFile=true \
            -p:IncludeNativeLibrariesForSelfExtract=true \
            -p:Version=1.0.${{ github.run_number }} \
            -p:AssemblyVersion=1.0.${{ github.run_number }}.0 \
            -p:FileVersion=1.0.${{ github.run_number }}.0 \
            -o ./publish/${{ matrix.artifact }}
            
      - name: Upload Artifact
        uses: actions/upload-artifact@v6
        with:
          name: ${{ matrix.artifact }}
          path: ./publish/${{ matrix.artifact }}
          retention-days: 30

  # ===========================================================================
  # Build Android APK
  # ===========================================================================
  build-android:
    name: Build Android
    needs: build-and-test
    if: github.event_name == 'push' && (github.ref == 'refs/heads/master' || github.ref == 'refs/heads/main')
    runs-on: ubuntu-latest
    timeout-minutes: 30
    
    steps:
      - name: Checkout
        uses: actions/checkout@v6
        
      - name: Setup .NET
        uses: actions/setup-dotnet@v5
        with:
          dotnet-version: ${{ env.DOTNET_VERSION }}
          
      - name: Setup Java
        uses: actions/setup-java@v4
        with:
          distribution: 'temurin'
          java-version: '17'
          
      - name: Install Android Workload
        run: dotnet workload install android
        
      - name: Cache NuGet packages
        uses: actions/cache@v5
        with:
          path: ~/.nuget/packages
          key: ${{ runner.os }}-android-nuget-${{ hashFiles('**/*.csproj', '**/Directory.Packages.props') }}
          restore-keys: |
            ${{ runner.os }}-android-nuget-
            
      - name: Restore Android Project
        run: dotnet restore src/MyDesktopApplication.Android/MyDesktopApplication.Android.csproj
        
      - name: Build Android APK
        shell: bash
        run: |
          dotnet publish src/MyDesktopApplication.Android/MyDesktopApplication.Android.csproj \
            -c Release \
            -f net10.0-android \
            -p:AndroidPackageFormat=apk \
            -p:AndroidUseAapt2Daemon=false \
            -p:_Aapt2DaemonMaxInstanceCount=1 \
            -p:ApplicationVersion=${{ github.run_number }} \
            -p:ApplicationDisplayVersion=1.0.${{ github.run_number }} \
            -o ./publish/android
            
      - name: Upload Android APK
        uses: actions/upload-artifact@v6
        with:
          name: MyDesktopApplication-android
          path: ./publish/android/**/*.apk
          retention-days: 30

  # ===========================================================================
  # Create Release
  # ===========================================================================
  create-release:
    name: Create Release 1.0.${{ github.run_number }}
    needs: [build-desktop, build-android]
    if: github.event_name == 'push' && (github.ref == 'refs/heads/master' || github.ref == 'refs/heads/main')
    runs-on: ubuntu-latest
    permissions:
      contents: write
    
    steps:
      - name: Download All Artifacts
        uses: actions/download-artifact@v7
        with:
          path: ./artifacts
          
      - name: List Downloaded Artifacts
        run: find ./artifacts -type f | head -50
        
      - name: Create Archives
        shell: bash
        run: |
          cd artifacts
          
          # Create archives for each platform
          for dir in */; do
            name="${dir%/}"
            echo "Processing: $name"
            
            if [[ "$name" == *"win"* ]]; then
              # Windows: create .zip
              zip -r "../${name}-v1.0.${{ github.run_number }}.zip" "$dir"
            elif [[ "$name" == *"android"* ]]; then
              # Android: copy APK directly
              find "$dir" -name "*.apk" -exec cp {} "../MyDesktopApplication-v1.0.${{ github.run_number }}.apk" \;
            else
              # Linux/macOS: create .tar.gz
              tar -czvf "../${name}-v1.0.${{ github.run_number }}.tar.gz" "$dir"
            fi
          done
          
          cd ..
          echo ""
          echo "Release assets:"
          ls -la *.zip *.tar.gz *.apk 2>/dev/null || echo "(no assets found)"
          
      - name: Create GitHub Release
        uses: softprops/action-gh-release@v2
        with:
          tag_name: v1.0.${{ github.run_number }}
          name: Release 1.0.${{ github.run_number }}
          body: |
            ## MyDesktopApplication v1.0.${{ github.run_number }}
            
            **Build:** #${{ github.run_number }}
            **Commit:** ${{ github.sha }}
            **Date:** ${{ github.event.head_commit.timestamp }}
            
            ### Downloads
            
            | Platform | File |
            |----------|------|
            | Windows x64 | `MyDesktopApplication-win-x64-v1.0.${{ github.run_number }}.zip` |
            | Windows ARM64 | `MyDesktopApplication-win-arm64-v1.0.${{ github.run_number }}.zip` |
            | Linux x64 | `MyDesktopApplication-linux-x64-v1.0.${{ github.run_number }}.tar.gz` |
            | Linux ARM64 | `MyDesktopApplication-linux-arm64-v1.0.${{ github.run_number }}.tar.gz` |
            | macOS x64 (Intel) | `MyDesktopApplication-osx-x64-v1.0.${{ github.run_number }}.tar.gz` |
            | macOS ARM64 (Apple Silicon) | `MyDesktopApplication-osx-arm64-v1.0.${{ github.run_number }}.tar.gz` |
            | Android | `MyDesktopApplication-v1.0.${{ github.run_number }}.apk` |
            
            ### Changes
            
            See commit history for details.
          draft: false
          prerelease: false
          files: |
            *.zip
            *.tar.gz
            *.apk
          generate_release_notes: true
WORKFLOW_EOF

echo "✓ Unified workflow created: .github/workflows/build-and-release.yml"

# Update Android .csproj with dynamic versioning support (if needed)
ANDROID_CSPROJ="src/MyDesktopApplication.Android/MyDesktopApplication.Android.csproj"
if [ -f "$ANDROID_CSPROJ" ]; then
    echo ""
    echo "Checking Android project versioning..."
    
    # Check if dynamic versioning is already set up
    if ! grep -q "ApplicationVersion Condition" "$ANDROID_CSPROJ" 2>/dev/null; then
        echo "Note: Android project uses static versioning."
        echo "The workflow passes -p:ApplicationVersion and -p:ApplicationDisplayVersion"
        echo "which will override the static values in the .csproj file."
    fi
    echo "✓ Android versioning configured"
fi

echo ""
echo "=============================================="
echo "  Consolidation Complete!"
echo "=============================================="
echo ""
echo "What changed:"
echo "  • Removed: ci.yml, build.yml, release.yml"
echo "  • Created: build-and-release.yml (unified)"
echo ""
echo "New behavior:"
echo "  • Every push to master/main creates Release 1.0.{run_number}"
echo "  • No git tags required"
echo "  • No pre-releases"
echo "  • Pull requests only run build & test"
echo ""
echo "Action versions used:"
echo "  • actions/checkout@v6"
echo "  • actions/setup-dotnet@v5"
echo "  • actions/setup-java@v4"
echo "  • actions/cache@v5"
echo "  • actions/upload-artifact@v6"
echo "  • actions/download-artifact@v7"
echo "  • softprops/action-gh-release@v2"
echo ""
echo "To apply:"
echo "  git add .github/workflows/"
echo "  git commit -m 'Consolidate workflows: auto-release 1.0.x on every push'"
echo "  git push"
echo ""






================================================================================
FILE: Directory.Build.props
SIZE: 1.46 KB
MODIFIED: 2025-12-21 22:03:31
================================================================================

<Project>
  <PropertyGroup>
    <!-- Target Framework Configuration -->
    <TargetFramework>net10.0</TargetFramework>
    <LangVersion>latest</LangVersion>
    <Nullable>enable</Nullable>
    <ImplicitUsings>enable</ImplicitUsings>
    
    <!-- Central Package Management -->
    <ManagePackageVersionsCentrally>true</ManagePackageVersionsCentrally>
    
    <!-- Code Quality -->
    <TreatWarningsAsErrors>false</TreatWarningsAsErrors>
    <WarningsAsErrors>NU1605</WarningsAsErrors>
    <NoWarn>$(NoWarn);CS1591</NoWarn>
    
    <!-- Build Configuration -->
    <GenerateDocumentationFile>true</GenerateDocumentationFile>
    <EnableNETAnalyzers>true</EnableNETAnalyzers>
    <AnalysisLevel>latest</AnalysisLevel>
  </PropertyGroup>

  <!-- ANDROID AAPT2 DAEMON FIX - Prevents infinite hangs on Linux -->
  <PropertyGroup Condition="$(TargetFramework.Contains('android'))">
    <AndroidUseAapt2Daemon>false</AndroidUseAapt2Daemon>
    <_Aapt2DaemonMaxInstanceCount>1</_Aapt2DaemonMaxInstanceCount>
    <AndroidAapt2CompileExtraArgs>--no-crunch</AndroidAapt2CompileExtraArgs>
    <UseInterpreter Condition="'$(Configuration)' == 'Debug'">true</UseInterpreter>
    <AndroidResourceDesignerMaxParallelism>1</AndroidResourceDesignerMaxParallelism>
  </PropertyGroup>

  <!-- Common metadata -->
  <PropertyGroup>
    <Authors>Kushal</Authors>
    <Company>MyDesktopApplication</Company>
    <Copyright>Copyright © 2025</Copyright>
    <RepositoryType>git</RepositoryType>
  </PropertyGroup>
</Project>


================================================================================
FILE: Directory.Packages.props
SIZE: 4.28 KB
MODIFIED: 2025-12-21 19:29:49
================================================================================

<Project>
  <PropertyGroup>
    <ManagePackageVersionsCentrally>true</ManagePackageVersionsCentrally>
    <CentralPackageTransitivePinningEnabled>true</CentralPackageTransitivePinningEnabled>
  </PropertyGroup>
  
  <ItemGroup Label="Avalonia">
    <PackageVersion Include="Avalonia" Version="11.3.10 " />
    <PackageVersion Include="Avalonia.Desktop" Version="11.3.10 " />
    <PackageVersion Include="Avalonia.Themes.Fluent" Version="11.3.10 " />
    <PackageVersion Include="Avalonia.Fonts.Inter" Version="11.3.10 " />
    <PackageVersion Include="Avalonia.Diagnostics" Version="11.3.10 " />
    <PackageVersion Include="Avalonia.Android" Version="11.3.10 " />
    <PackageVersion Include="Avalonia.Headless" Version="11.3.10 " />
    <PackageVersion Include="Avalonia.Headless.XUnit" Version="11.3.10 " />
  </ItemGroup>
  
  <ItemGroup Label="MVVM">
    <PackageVersion Include="CommunityToolkit.Mvvm" Version="8.4.0" />
  </ItemGroup>
  
  <ItemGroup Label="EntityFramework">
    <PackageVersion Include="Microsoft.EntityFrameworkCore" Version="10.0.1" />
    <PackageVersion Include="Microsoft.EntityFrameworkCore.Sqlite" Version="10.0.1" />
    <PackageVersion Include="Microsoft.EntityFrameworkCore.Design" Version="10.0.1" />
    <PackageVersion Include="Npgsql.EntityFrameworkCore.PostgreSQL" Version="10.0.1" />
    <PackageVersion Include="Microsoft.EntityFrameworkCore.InMemory" Version="10.0.1" />
    <PackageVersion Include="Dapper" Version="2.1.35" />
  </ItemGroup>
  
  <ItemGroup Label="Configuration">
    <PackageVersion Include="Microsoft.Extensions.Configuration" Version="10.0.1" />
    <PackageVersion Include="Microsoft.Extensions.Configuration.Json" Version="10.0.1" />
    <PackageVersion Include="Microsoft.Extensions.Configuration.EnvironmentVariables" Version="10.0.1" />
    <PackageVersion Include="Microsoft.Extensions.Configuration.Binder" Version="10.0.1" />
  </ItemGroup>
  
  <ItemGroup Label="DependencyInjection">
    <PackageVersion Include="Microsoft.Extensions.DependencyInjection" Version="10.0.1" />
    <PackageVersion Include="Microsoft.Extensions.DependencyInjection.Abstractions" Version="10.0.1" />
  </ItemGroup>
  
  <ItemGroup Label="Logging">
    <PackageVersion Include="Microsoft.Extensions.Logging" Version="10.0.1" />
    <PackageVersion Include="Microsoft.Extensions.Logging.Abstractions" Version="10.0.1" />
    <PackageVersion Include="Microsoft.Extensions.Logging.Console" Version="10.0.1" />
    <PackageVersion Include="Serilog" Version="4.2.0" />
    <PackageVersion Include="Serilog.Extensions.Logging" Version="9.0.0" />
    <PackageVersion Include="Serilog.Sinks.Console" Version="6.0.0" />
    <PackageVersion Include="Serilog.Sinks.File" Version="6.0.0" />
  </ItemGroup>
  
  <ItemGroup Label="OpenTelemetry">
    <PackageVersion Include="OpenTelemetry" Version="1.11.2" />
    <PackageVersion Include="OpenTelemetry.Extensions.Hosting" Version="1.11.2" />
    <PackageVersion Include="OpenTelemetry.Exporter.Console" Version="1.11.2" />
    <PackageVersion Include="OpenTelemetry.Exporter.OpenTelemetryProtocol" Version="1.11.2" />
    <PackageVersion Include="OpenTelemetry.Instrumentation.Http" Version="1.11.0" />
  </ItemGroup>
  
  <ItemGroup Label="Validation">
    <PackageVersion Include="FluentValidation" Version="12.1.1" />
    <PackageVersion Include="FluentValidation.DependencyInjectionExtensions" Version="12.1.1" />
  </ItemGroup>
  
  <ItemGroup Label="Testing - All BSD/MIT Licensed (Free of Cost)">
    <!-- xUnit - Apache 2.0 License -->
    <PackageVersion Include="xunit" Version="2.9.3" />
    <PackageVersion Include="xunit.runner.visualstudio" Version="3.1.5" />
    <PackageVersion Include="Microsoft.NET.Test.Sdk" Version="18.0.1" />
    
    <!-- Shouldly - BSD-3-Clause License (replaces FluentAssertions) -->
    <PackageVersion Include="Shouldly" Version="4.3.0" />
    
    <!-- NSubstitute - BSD-3-Clause License -->
    <PackageVersion Include="NSubstitute" Version="5.3.0" />
    
    <!-- Bogus - MIT License -->
    <PackageVersion Include="Bogus" Version="35.6.1" />
    
    <!-- Testcontainers - MIT License -->
    <PackageVersion Include="Testcontainers" Version="4.3.0" />
    <PackageVersion Include="Testcontainers.PostgreSql" Version="4.3.0" />
    
    <!-- Coverage -->
    <PackageVersion Include="coverlet.collector" Version="6.0.4" />
  </ItemGroup>
</Project>


================================================================================
FILE: export.sh
SIZE: 8.50 KB
MODIFIED: 2025-12-21 09:35:12
================================================================================

#!/bin/bash
# =============================================================================
# Complete Project Export for LLM Analysis
# =============================================================================
# Exports all relevant source files, configs, and documentation for AI review.
# Excludes: binaries, build outputs, IDE files, packages, git internals
# =============================================================================

set -e

OUTPUT_DIR="docs/llm"
OUTPUT_FILE="$OUTPUT_DIR/dump.txt"
PROJECT_PATH="$(pwd)"

# File extensions to include (comprehensive list for .NET/Avalonia projects)
# Source code
SOURCE_EXTS="cs|fs|vb"
# XAML/Avalonia UI
XAML_EXTS="axaml|xaml|paml"
# Project/Build files
PROJECT_EXTS="csproj|fsproj|vbproj|slnx|sln|props|targets|tasks"
# Config files
CONFIG_EXTS="json|yaml|yml|xml|config|settings"
# Documentation
DOC_EXTS="md|txt|rst|adoc"
# Scripts
SCRIPT_EXTS="sh|ps1|psm1|cmd|bat"
# Web/Style (in case of Avalonia web or styling)
STYLE_EXTS="css|scss|sass|less"
# Data/Templates
DATA_EXTS="sql|csv|resx|resources"
# Docker/CI
DEVOPS_EXTS="dockerfile|dockerignore|editorconfig|gitignore|gitattributes"

# Combine all extensions
ALL_EXTS="$SOURCE_EXTS|$XAML_EXTS|$PROJECT_EXTS|$CONFIG_EXTS|$DOC_EXTS|$SCRIPT_EXTS|$STYLE_EXTS|$DATA_EXTS"

# Directories to exclude
EXCLUDE_DIRS="bin|obj|.git|.vs|.idea|.vscode|node_modules|packages|TestResults|coverage|publish|artifacts|.nuget|wwwroot/lib"

# Files to exclude (patterns)
EXCLUDE_FILES="*.Designer.cs|*.g.cs|*.g.i.cs|AssemblyInfo.cs|*.min.js|*.min.css|package-lock.json|*.lock|*.bak"

echo "=============================================="
echo "  Project Export for LLM Analysis"
echo "=============================================="
echo ""
echo "Project Path: $PROJECT_PATH"
echo "Output File:  $OUTPUT_FILE"
echo ""

mkdir -p "$OUTPUT_DIR"

# Start output file
{
    echo "==============================================================================="
    echo "PROJECT EXPORT"
    echo "Generated: $(date)"
    echo "Project Path: $PROJECT_PATH"
    echo "==============================================================================="
    echo ""
} > "$OUTPUT_FILE"

# Directory structure
echo "Generating directory structure..."
{
    echo "DIRECTORY STRUCTURE:"
    echo "==================="
    echo ""
    # Try tree first, fall back to find
    if command -v tree &> /dev/null; then
        tree -a -I "$EXCLUDE_DIRS" --noreport --dirsfirst 2>/dev/null || echo "(tree command failed)"
    else
        find . -type d \( -name "bin" -o -name "obj" -o -name ".git" -o -name ".vs" -o -name ".idea" -o -name "node_modules" -o -name "packages" -o -name "TestResults" \) -prune -o -type f -print | sed 's|[^/]*/|  |g' | sort
    fi
    echo ""
    echo ""
} >> "$OUTPUT_FILE"

# Build the find command dynamically
echo "Collecting files..."

# Create a temporary file for the file list
TMPFILE=$(mktemp)

# Find all relevant files
find . -type f \( \
    -iname "*.cs" -o \
    -iname "*.fs" -o \
    -iname "*.vb" -o \
    -iname "*.axaml" -o \
    -iname "*.xaml" -o \
    -iname "*.paml" -o \
    -iname "*.csproj" -o \
    -iname "*.fsproj" -o \
    -iname "*.vbproj" -o \
    -iname "*.slnx" -o \
    -iname "*.sln" -o \
    -iname "*.props" -o \
    -iname "*.targets" -o \
    -iname "*.json" -o \
    -iname "*.yaml" -o \
    -iname "*.yml" -o \
    -iname "*.xml" -o \
    -iname "*.config" -o \
    -iname "*.md" -o \
    -iname "*.txt" -o \
    -iname "*.sh" -o \
    -iname "*.ps1" -o \
    -iname "*.cmd" -o \
    -iname "*.bat" -o \
    -iname "*.sql" -o \
    -iname "*.resx" -o \
    -iname "*.css" -o \
    -iname "*.scss" -o \
    -iname "*.manifest" -o \
    -iname "*.ico" -o \
    -iname "Dockerfile" -o \
    -iname "docker-compose*.yml" -o \
    -iname ".editorconfig" -o \
    -iname ".gitignore" -o \
    -iname ".gitattributes" -o \
    -iname "global.json" -o \
    -iname "nuget.config" -o \
    -iname "Directory.Build.props" -o \
    -iname "Directory.Build.targets" -o \
    -iname "Directory.Packages.props" \
    \) \
    ! -path "*/bin/*" \
    ! -path "*/obj/*" \
    ! -path "*/docs/*" \
    ! -path "*/.git/*" \
    ! -path "*/.vs/*" \
    ! -path "*/.idea/*" \
    ! -path "*/.vscode/*" \
    ! -path "*/node_modules/*" \
    ! -path "*/packages/*" \
    ! -path "*/TestResults/*" \
    ! -path "*/coverage/*" \
    ! -path "*/publish/*" \
    ! -path "*/artifacts/*" \
    ! -path "*/.nuget/*" \
    ! -name "*.Designer.cs" \
    ! -name "*.g.cs" \
    ! -name "*.g.i.cs" \
    ! -name "*.min.js" \
    ! -name "*.min.css" \
    ! -name "package-lock.json" \
    ! -name "*.bak" \
    2>/dev/null | sort > "$TMPFILE"

FILE_COUNT=$(wc -l < "$TMPFILE")
echo "Found $FILE_COUNT files to export"
echo ""

# Add file contents header
{
    echo "FILE CONTENTS:"
    echo "=============="
    echo ""
} >> "$OUTPUT_FILE"

# Process each file
COUNTER=0
SKIPPED=0

while IFS= read -r file; do
    COUNTER=$((COUNTER + 1))
    FILENAME="${file#./}"
    
    # Skip binary files (check if file is text)
    if file "$file" | grep -qE "binary|executable|data|image"; then
        # For some files we want to note they exist but not dump contents
        if [[ "$file" =~ \.(ico|png|jpg|jpeg|gif|bmp|svg|woff|woff2|ttf|eot)$ ]]; then
            SKIPPED=$((SKIPPED + 1))
            echo "Skipping binary ($COUNTER/$FILE_COUNT): $FILENAME"
            {
                echo "================================================================================"
                echo "FILE: $FILENAME"
                echo "TYPE: [BINARY FILE - Contents not exported]"
                echo "================================================================================"
                echo ""
            } >> "$OUTPUT_FILE"
            continue
        fi
    fi
    
    # Get file info
    FILESIZE=$(stat -c%s "$file" 2>/dev/null || stat -f%z "$file" 2>/dev/null || echo "0")
    MODIFIED=$(stat -c%y "$file" 2>/dev/null | cut -d'.' -f1 || stat -f"%Sm" -t "%Y-%m-%d %H:%M:%S" "$file" 2>/dev/null || echo "unknown")
    
    # Skip very large files (>500KB) - they're probably not source code
    if [ "$FILESIZE" -gt 512000 ]; then
        SKIPPED=$((SKIPPED + 1))
        echo "Skipping large file ($COUNTER/$FILE_COUNT): $FILENAME ($(echo "scale=0; $FILESIZE/1024" | bc)KB)"
        {
            echo "================================================================================"
            echo "FILE: $FILENAME"
            echo "SIZE: $(echo "scale=2; $FILESIZE/1024" | bc) KB"
            echo "TYPE: [LARGE FILE - Contents not exported, exceeds 500KB limit]"
            echo "================================================================================"
            echo ""
        } >> "$OUTPUT_FILE"
        continue
    fi
    
    echo "Processing ($COUNTER/$FILE_COUNT): $FILENAME"
    
    {
        echo "================================================================================"
        echo "FILE: $FILENAME"
        echo "SIZE: $(echo "scale=2; $FILESIZE/1024" | bc 2>/dev/null || echo "0.00") KB"
        echo "MODIFIED: $MODIFIED"
        echo "================================================================================"
        echo ""
        cat "$file" 2>/dev/null || echo "[ERROR: Could not read file]"
        echo ""
        echo ""
    } >> "$OUTPUT_FILE"
    
done < "$TMPFILE"

# Cleanup
rm -f "$TMPFILE"

# Summary
EXPORTED=$((COUNTER - SKIPPED))
{
    echo "==============================================================================="
    echo "EXPORT COMPLETED: $(date)"
    echo "Total Files Found: $FILE_COUNT"
    echo "Files Exported: $EXPORTED"
    echo "Files Skipped: $SKIPPED (binary or large files)"
    echo "Output File: $PROJECT_PATH/$OUTPUT_FILE"
    echo "==============================================================================="
} >> "$OUTPUT_FILE"

# Final output
OUTPUT_SIZE=$(stat -c%s "$OUTPUT_FILE" 2>/dev/null || stat -f%z "$OUTPUT_FILE" 2>/dev/null || echo "0")

echo ""
echo "=============================================="
echo "  Export Complete!"
echo "=============================================="
echo ""
echo "Output file:    $OUTPUT_FILE"
echo "Files exported: $EXPORTED"
echo "Files skipped:  $SKIPPED"
echo "Output size:    $(echo "scale=2; $OUTPUT_SIZE/1024" | bc 2>/dev/null || echo "?") KB"
echo ""
echo "File types included:"
echo "  • Source code: .cs, .fs, .vb"
echo "  • UI/XAML: .axaml, .xaml, .paml"
echo "  • Projects: .csproj, .slnx, .sln, .props, .targets"
echo "  • Config: .json, .yaml, .yml, .xml, .config"
echo "  • Docs: .md, .txt"
echo "  • Scripts: .sh, .ps1, .cmd, .bat"
echo "  • Other: .sql, .resx, .css, .scss, Dockerfile, etc."
echo ""


================================================================================
FILE: fix-all-issues.sh
SIZE: 50.87 KB
MODIFIED: 2025-12-24 19:58:10
================================================================================

#!/bin/bash
# =============================================================================
# fix-all-issues.sh - Comprehensive fixes for MyDesktopApplication
# =============================================================================
# Fixes:
# 1. Answer highlighting - only highlight the selected answer (not both)
# 2. Remove emojis from UI buttons (Next Round, etc.) - use plain text
# 3. Fix Android versioning for proper updates via Obtanium
# =============================================================================

set -e
cd "$(dirname "$0")"

echo "=============================================="
echo "  MyDesktopApplication - Comprehensive Fix"
echo "=============================================="
echo ""

# -----------------------------------------------------------------------------
# Cleanup: Kill stuck processes and clean build artifacts
# -----------------------------------------------------------------------------
echo "[1/8] Cleaning up stuck processes and build artifacts..."
pkill -9 aapt2 2>/dev/null || true
pkill -9 VBCSCompiler 2>/dev/null || true
dotnet clean --verbosity quiet 2>/dev/null || true
find . -type d -name "obj" -exec rm -rf {} + 2>/dev/null || true
find . -type d -name "bin" -exec rm -rf {} + 2>/dev/null || true
echo "✓ Cleanup complete"

# -----------------------------------------------------------------------------
# Fix 1: Update CountryQuizViewModel - Only highlight selected answer
# -----------------------------------------------------------------------------
echo "[2/8] Updating CountryQuizViewModel (answer highlighting fix)..."

cat > src/MyDesktopApplication.Shared/ViewModels/CountryQuizViewModel.cs << 'EOF'
using System.Collections.ObjectModel;
using CommunityToolkit.Mvvm.ComponentModel;
using CommunityToolkit.Mvvm.Input;
using MyDesktopApplication.Core.Entities;
using MyDesktopApplication.Core.Interfaces;
using MyDesktopApplication.Shared.Data;

namespace MyDesktopApplication.Shared.ViewModels;

/// <summary>
/// ViewModel for the Country Quiz game.
/// Shared between Desktop and Android platforms.
/// </summary>
public partial class CountryQuizViewModel : ViewModelBase
{
    private readonly Random _random = new();
    private readonly List<Country> _countries;
    private readonly IGameStateRepository? _gameStateRepository;
    private GameState _gameState = new();

    // Backing fields for country references (not observable - we expose flat properties)
    private Country? _country1;
    private Country? _country2;

    // Observable properties for UI binding
    [ObservableProperty] private string _questionText = "Loading...";
    [ObservableProperty] private string _country1Name = "";
    [ObservableProperty] private string _country2Name = "";
    [ObservableProperty] private string _country1Flag = "";
    [ObservableProperty] private string _country2Flag = "";
    [ObservableProperty] private string _country1Value = "";
    [ObservableProperty] private string _country2Value = "";
    [ObservableProperty] private string _resultMessage = "";
    [ObservableProperty] private bool _hasAnswered;
    
    // Answer state - FIX: Only highlight the selected answer
    [ObservableProperty] private bool _isCountry1Correct;
    [ObservableProperty] private bool _isCountry1Wrong;
    [ObservableProperty] private bool _isCountry2Correct;
    [ObservableProperty] private bool _isCountry2Wrong;
    
    // Score tracking
    [ObservableProperty] private int _currentScore;
    [ObservableProperty] private int _currentStreak;
    [ObservableProperty] private int _bestStreak;
    [ObservableProperty] private int _totalQuestions;
    
    // Question type selection
    [ObservableProperty] private QuestionType _selectedQuestionType = QuestionType.Population;
    [ObservableProperty] private ObservableCollection<QuestionType> _questionTypes = new();

    // Computed properties for UI display
    public string ScoreText => $"Score: {CurrentScore}";
    public string StreakText => $"Streak: {CurrentStreak}";
    public string BestStreakText => $"Best: {BestStreak}";
    public string AccuracyText => TotalQuestions > 0
        ? $"Accuracy: {(double)CurrentScore / TotalQuestions * 100:N1}%"
        : "Accuracy: --";

    /// <summary>
    /// Constructor with dependency injection for game state persistence.
    /// </summary>
    public CountryQuizViewModel(IGameStateRepository gameStateRepository) : this()
    {
        _gameStateRepository = gameStateRepository;
    }

    /// <summary>
    /// Parameterless constructor for design-time and default initialization.
    /// </summary>
    public CountryQuizViewModel()
    {
        _countries = CountryData.GetAllCountries().ToList();
        foreach (QuestionType qt in Enum.GetValues<QuestionType>())
        {
            QuestionTypes.Add(qt);
        }
        GenerateNewQuestion();
    }

    /// <summary>
    /// Initialize async - loads persisted game state from database.
    /// </summary>
    public async Task InitializeAsync()
    {
        if (_gameStateRepository != null)
        {
            try
            {
                _gameState = await _gameStateRepository.GetOrCreateAsync("default");
                CurrentScore = _gameState.CurrentScore;
                CurrentStreak = _gameState.CurrentStreak;
                BestStreak = _gameState.BestStreak;
            }
            catch (Exception ex)
            {
                System.Diagnostics.Debug.WriteLine($"Error loading game state: {ex.Message}");
            }
        }
    }

    /// <summary>
    /// Handle country selection.
    /// FIX: Only highlight the answer the user selected, not both answers.
    /// </summary>
    [RelayCommand]
    private async Task SelectCountry(string countryParam)
    {
        if (HasAnswered || _country1 == null || _country2 == null)
            return;

        if (!int.TryParse(countryParam, out int countryNumber))
            return;

        HasAnswered = true;
        TotalQuestions++;

        var value1 = SelectedQuestionType.GetValue(_country1);
        var value2 = SelectedQuestionType.GetValue(_country2);

        Country1Value = SelectedQuestionType.FormatValue(value1);
        Country2Value = SelectedQuestionType.FormatValue(value2);

        bool isCorrect;
        
        // FIX: Only highlight the selected answer
        // Reset all states first
        IsCountry1Correct = false;
        IsCountry1Wrong = false;
        IsCountry2Correct = false;
        IsCountry2Wrong = false;

        if (countryNumber == 1)
        {
            // User selected Country 1
            isCorrect = value1 >= value2;
            // Only set state for Country 1 (the selected one)
            IsCountry1Correct = isCorrect;
            IsCountry1Wrong = !isCorrect;
            // Do NOT set Country 2 state - leave it unhighlighted
        }
        else
        {
            // User selected Country 2
            isCorrect = value2 >= value1;
            // Only set state for Country 2 (the selected one)
            IsCountry2Correct = isCorrect;
            IsCountry2Wrong = !isCorrect;
            // Do NOT set Country 1 state - leave it unhighlighted
        }

        if (isCorrect)
        {
            CurrentScore++;
            CurrentStreak++;
            if (CurrentStreak > BestStreak)
                BestStreak = CurrentStreak;
            ResultMessage = GetCorrectMessage();
        }
        else
        {
            CurrentStreak = 0;
            ResultMessage = GetIncorrectMessage();
        }

        // Persist game state
        _gameState.CurrentScore = CurrentScore;
        _gameState.CurrentStreak = CurrentStreak;
        _gameState.BestStreak = BestStreak;
        _gameState.RecordAnswer(isCorrect);

        if (_gameStateRepository != null)
        {
            try
            {
                await _gameStateRepository.UpdateAsync(_gameState);
            }
            catch (Exception ex)
            {
                System.Diagnostics.Debug.WriteLine($"Error saving game state: {ex.Message}");
            }
        }

        OnPropertyChanged(nameof(ScoreText));
        OnPropertyChanged(nameof(StreakText));
        OnPropertyChanged(nameof(BestStreakText));
        OnPropertyChanged(nameof(AccuracyText));
    }

    /// <summary>
    /// Start a new round with new countries.
    /// </summary>
    [RelayCommand]
    private void NextRound()
    {
        GenerateNewQuestion();
    }

    /// <summary>
    /// Change the question type and generate a new question.
    /// </summary>
    [RelayCommand]
    private void ChangeQuestionType(QuestionType newType)
    {
        SelectedQuestionType = newType;
        GenerateNewQuestion();
    }

    /// <summary>
    /// Reset the game to initial state.
    /// </summary>
    [RelayCommand]
    private async Task ResetGame()
    {
        CurrentScore = 0;
        CurrentStreak = 0;
        TotalQuestions = 0;
        
        _gameState.CurrentScore = 0;
        _gameState.CurrentStreak = 0;
        
        if (_gameStateRepository != null)
        {
            try
            {
                await _gameStateRepository.UpdateAsync(_gameState);
            }
            catch (Exception ex)
            {
                System.Diagnostics.Debug.WriteLine($"Error resetting game state: {ex.Message}");
            }
        }
        
        OnPropertyChanged(nameof(ScoreText));
        OnPropertyChanged(nameof(StreakText));
        OnPropertyChanged(nameof(AccuracyText));
        
        GenerateNewQuestion();
    }

    private void GenerateNewQuestion()
    {
        HasAnswered = false;
        IsCountry1Correct = false;
        IsCountry1Wrong = false;
        IsCountry2Correct = false;
        IsCountry2Wrong = false;
        Country1Value = "";
        Country2Value = "";
        ResultMessage = "";

        // Pick two different random countries
        var indices = Enumerable.Range(0, _countries.Count)
            .OrderBy(_ => _random.Next())
            .Take(2)
            .ToList();
        
        _country1 = _countries[indices[0]];
        _country2 = _countries[indices[1]];

        Country1Name = _country1.Name;
        Country2Name = _country2.Name;
        Country1Flag = _country1.Flag;
        Country2Flag = _country2.Flag;

        QuestionText = $"Which country has a higher {SelectedQuestionType.GetLabel()}?";
    }

    // FIX: Remove emojis - use plain text messages instead
    private string GetCorrectMessage()
    {
        var messages = new[]
        {
            "Correct!",
            "Well done!",
            "Great job!",
            "Excellent!",
            CurrentStreak >= 5 ? $"{CurrentStreak} in a row!" : "Keep it up!"
        };
        return messages[_random.Next(messages.Length)];
    }

    private string GetIncorrectMessage()
    {
        return "Not quite! The correct answer is shown above.";
    }
}
EOF

echo "✓ CountryQuizViewModel updated"

# -----------------------------------------------------------------------------
# Fix 2: Update Android MainView.axaml - Remove emojis, fix button text
# -----------------------------------------------------------------------------
echo "[3/8] Updating Android MainView.axaml (remove emojis)..."

cat > src/MyDesktopApplication.Android/Views/MainView.axaml << 'EOF'
<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:MyDesktopApplication.Shared.ViewModels"
             xmlns:conv="using:MyDesktopApplication.Android.Converters"
             x:Class="MyDesktopApplication.Android.Views.MainView"
             x:DataType="vm:CountryQuizViewModel">

    <UserControl.Resources>
        <conv:QuestionTypeLabelConverter x:Key="QuestionTypeLabelConverter"/>
        <conv:AnswerStateToBackgroundConverter x:Key="AnswerStateBgConverter"/>
        <conv:AnswerStateToForegroundConverter x:Key="AnswerStateFgConverter"/>
    </UserControl.Resources>

    <ScrollViewer>
        <StackPanel Margin="16" Spacing="12">
            
            <!-- Header with Score -->
            <Border Background="#1E3A5F" CornerRadius="12" Padding="16">
                <Grid ColumnDefinitions="*,Auto">
                    <StackPanel>
                        <TextBlock Text="Country Quiz" 
                                   FontSize="24" FontWeight="Bold" Foreground="White"/>
                        <TextBlock Text="{Binding AccuracyText}" 
                                   FontSize="14" Foreground="#B0C4DE"/>
                    </StackPanel>
                    <StackPanel Grid.Column="1" HorizontalAlignment="Right">
                        <TextBlock Text="{Binding ScoreText}" 
                                   FontSize="18" FontWeight="SemiBold" Foreground="White"/>
                        <TextBlock Text="{Binding StreakText}" 
                                   FontSize="14" Foreground="#90EE90"/>
                        <TextBlock Text="{Binding BestStreakText}" 
                                   FontSize="12" Foreground="#FFD700"/>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- Question Type Selector -->
            <Border Background="#2D4A6A" CornerRadius="8" Padding="12">
                <StackPanel>
                    <TextBlock Text="Category:" FontSize="14" Foreground="#B0C4DE" Margin="0,0,0,8"/>
                    <ComboBox ItemsSource="{Binding QuestionTypes}"
                              SelectedItem="{Binding SelectedQuestionType}"
                              HorizontalAlignment="Stretch"
                              MinHeight="48">
                        <ComboBox.ItemTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding Converter={StaticResource QuestionTypeLabelConverter}}"
                                           FontSize="16"/>
                            </DataTemplate>
                        </ComboBox.ItemTemplate>
                    </ComboBox>
                </StackPanel>
            </Border>

            <!-- Question Text -->
            <TextBlock Text="{Binding QuestionText}"
                       FontSize="20" FontWeight="SemiBold"
                       TextAlignment="Center" TextWrapping="Wrap"
                       Foreground="White" Margin="0,8"/>

            <!-- Country Cards - Full Width for Easy Tapping -->
            <Button Command="{Binding SelectCountryCommand}"
                    CommandParameter="1"
                    HorizontalAlignment="Stretch"
                    HorizontalContentAlignment="Stretch"
                    MinHeight="80"
                    Padding="0"
                    CornerRadius="12">
                <Button.Background>
                    <MultiBinding Converter="{StaticResource AnswerStateBgConverter}">
                        <Binding Path="IsCountry1Correct"/>
                        <Binding Path="IsCountry1Wrong"/>
                    </MultiBinding>
                </Button.Background>
                <Border Padding="16" HorizontalAlignment="Stretch">
                    <Grid ColumnDefinitions="Auto,*,Auto">
                        <TextBlock Text="{Binding Country1Flag}" 
                                   FontSize="40" VerticalAlignment="Center"/>
                        <StackPanel Grid.Column="1" Margin="16,0" VerticalAlignment="Center">
                            <TextBlock Text="{Binding Country1Name}" 
                                       FontSize="20" FontWeight="SemiBold">
                                <TextBlock.Foreground>
                                    <MultiBinding Converter="{StaticResource AnswerStateFgConverter}">
                                        <Binding Path="IsCountry1Correct"/>
                                        <Binding Path="IsCountry1Wrong"/>
                                    </MultiBinding>
                                </TextBlock.Foreground>
                            </TextBlock>
                            <TextBlock Text="{Binding Country1Value}"
                                       FontSize="14" Foreground="#B0C4DE"
                                       IsVisible="{Binding HasAnswered}"/>
                        </StackPanel>
                        <TextBlock Grid.Column="2" Text="[1]" 
                                   FontSize="14" Foreground="#666"
                                   VerticalAlignment="Center"/>
                    </Grid>
                </Border>
            </Button>

            <!-- VS Separator -->
            <TextBlock Text="VS" FontSize="16" FontWeight="Bold"
                       TextAlignment="Center" Foreground="#666"/>

            <Button Command="{Binding SelectCountryCommand}"
                    CommandParameter="2"
                    HorizontalAlignment="Stretch"
                    HorizontalContentAlignment="Stretch"
                    MinHeight="80"
                    Padding="0"
                    CornerRadius="12">
                <Button.Background>
                    <MultiBinding Converter="{StaticResource AnswerStateBgConverter}">
                        <Binding Path="IsCountry2Correct"/>
                        <Binding Path="IsCountry2Wrong"/>
                    </MultiBinding>
                </Button.Background>
                <Border Padding="16" HorizontalAlignment="Stretch">
                    <Grid ColumnDefinitions="Auto,*,Auto">
                        <TextBlock Text="{Binding Country2Flag}" 
                                   FontSize="40" VerticalAlignment="Center"/>
                        <StackPanel Grid.Column="1" Margin="16,0" VerticalAlignment="Center">
                            <TextBlock Text="{Binding Country2Name}" 
                                       FontSize="20" FontWeight="SemiBold">
                                <TextBlock.Foreground>
                                    <MultiBinding Converter="{StaticResource AnswerStateFgConverter}">
                                        <Binding Path="IsCountry2Correct"/>
                                        <Binding Path="IsCountry2Wrong"/>
                                    </MultiBinding>
                                </TextBlock.Foreground>
                            </TextBlock>
                            <TextBlock Text="{Binding Country2Value}"
                                       FontSize="14" Foreground="#B0C4DE"
                                       IsVisible="{Binding HasAnswered}"/>
                        </StackPanel>
                        <TextBlock Grid.Column="2" Text="[2]" 
                                   FontSize="14" Foreground="#666"
                                   VerticalAlignment="Center"/>
                    </Grid>
                </Border>
            </Button>

            <!-- Result Message -->
            <TextBlock Text="{Binding ResultMessage}"
                       FontSize="18" FontWeight="SemiBold"
                       TextAlignment="Center"
                       Foreground="#90EE90"
                       IsVisible="{Binding HasAnswered}"
                       Margin="0,8"/>

            <!-- Next Round Button - NO EMOJIS -->
            <Button Content="Next Round"
                    Command="{Binding NextRoundCommand}"
                    IsVisible="{Binding HasAnswered}"
                    HorizontalAlignment="Stretch"
                    MinHeight="56"
                    FontSize="18"
                    FontWeight="SemiBold"
                    Background="#4CAF50"
                    Foreground="White"
                    CornerRadius="12"/>

            <!-- Reset Button -->
            <Button Content="Reset Game"
                    Command="{Binding ResetGameCommand}"
                    HorizontalAlignment="Stretch"
                    MinHeight="48"
                    FontSize="14"
                    Background="#666"
                    Foreground="White"
                    CornerRadius="8"
                    Margin="0,16,0,0"/>
                    
        </StackPanel>
    </ScrollViewer>
</UserControl>
EOF

echo "✓ Android MainView.axaml updated"

# -----------------------------------------------------------------------------
# Fix 3: Update Android Converters with proper answer state handling
# -----------------------------------------------------------------------------
echo "[4/8] Updating Android Converters..."

cat > src/MyDesktopApplication.Android/Converters/Converters.cs << 'EOF'
using System;
using System.Collections.Generic;
using System.Globalization;
using Avalonia.Data.Converters;
using Avalonia.Media;
using MyDesktopApplication.Core.Entities;

namespace MyDesktopApplication.Android.Converters;

/// <summary>
/// Converts QuestionType enum to human-readable label.
/// </summary>
public class QuestionTypeLabelConverter : IValueConverter
{
    public static readonly QuestionTypeLabelConverter Instance = new();

    public object? Convert(object? value, Type targetType, object? parameter, CultureInfo culture)
    {
        if (value is QuestionType qt)
        {
            return qt.GetLabel();
        }
        return value?.ToString() ?? "";
    }

    public object? ConvertBack(object? value, Type targetType, object? parameter, CultureInfo culture)
    {
        throw new NotSupportedException();
    }
}

/// <summary>
/// Converts answer state (IsCorrect, IsWrong) to background color.
/// Only colors the selected answer - unselected answers stay default.
/// </summary>
public class AnswerStateToBackgroundConverter : IMultiValueConverter
{
    public static readonly AnswerStateToBackgroundConverter Instance = new();

    public object? Convert(IList<object?> values, Type targetType, object? parameter, CultureInfo culture)
    {
        if (values.Count >= 2 && values[0] is bool isCorrect && values[1] is bool isWrong)
        {
            if (isCorrect)
                return new SolidColorBrush(Color.FromRgb(76, 175, 80)); // Green #4CAF50
            if (isWrong)
                return new SolidColorBrush(Color.FromRgb(244, 67, 54)); // Red #F44336
        }
        // Default - not selected or not answered yet
        return new SolidColorBrush(Color.FromRgb(45, 74, 106)); // Dark blue #2D4A6A
    }
}

/// <summary>
/// Converts answer state to foreground (text) color.
/// </summary>
public class AnswerStateToForegroundConverter : IMultiValueConverter
{
    public static readonly AnswerStateToForegroundConverter Instance = new();

    public object? Convert(IList<object?> values, Type targetType, object? parameter, CultureInfo culture)
    {
        if (values.Count >= 2 && values[0] is bool isCorrect && values[1] is bool isWrong)
        {
            if (isCorrect || isWrong)
                return new SolidColorBrush(Colors.White);
        }
        // Default text color
        return new SolidColorBrush(Colors.White);
    }
}
EOF

echo "✓ Android Converters updated"

# -----------------------------------------------------------------------------
# Fix 4: Update Desktop MainWindow.axaml - Remove emojis
# -----------------------------------------------------------------------------
echo "[5/8] Updating Desktop MainWindow.axaml (remove emojis)..."

cat > src/MyDesktopApplication.Desktop/Views/MainWindow.axaml << 'EOF'
<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:MyDesktopApplication.Desktop.ViewModels"
        xmlns:conv="using:MyDesktopApplication.Desktop.Converters"
        x:Class="MyDesktopApplication.Desktop.Views.MainWindow"
        x:DataType="vm:MainWindowViewModel"
        Title="Country Quiz"
        Width="800" Height="600"
        MinWidth="600" MinHeight="500"
        Background="#1a1a2e">

    <Window.Resources>
        <conv:QuestionTypeLabelConverter x:Key="QuestionTypeLabelConverter"/>
        <conv:AnswerStateToBackgroundConverter x:Key="AnswerStateBgConverter"/>
        <conv:AnswerStateToForegroundConverter x:Key="AnswerStateFgConverter"/>
    </Window.Resources>

    <Grid Margin="24">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Border Grid.Row="0" Background="#16213e" CornerRadius="12" Padding="20" Margin="0,0,0,16">
            <Grid ColumnDefinitions="*,Auto">
                <StackPanel>
                    <TextBlock Text="Country Quiz" FontSize="28" FontWeight="Bold" Foreground="White"/>
                    <TextBlock Text="{Binding AccuracyText}" FontSize="14" Foreground="#a0a0a0"/>
                </StackPanel>
                <StackPanel Grid.Column="1" HorizontalAlignment="Right">
                    <TextBlock Text="{Binding ScoreText}" FontSize="20" FontWeight="SemiBold" Foreground="White"/>
                    <TextBlock Text="{Binding StreakText}" FontSize="14" Foreground="#90EE90"/>
                    <TextBlock Text="{Binding BestStreakText}" FontSize="12" Foreground="#FFD700"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Question Type Selector -->
        <Border Grid.Row="1" Background="#16213e" CornerRadius="8" Padding="16" Margin="0,0,0,16">
            <StackPanel Orientation="Horizontal" Spacing="12">
                <TextBlock Text="Category:" FontSize="14" Foreground="#a0a0a0" VerticalAlignment="Center"/>
                <ComboBox ItemsSource="{Binding QuestionTypes}"
                          SelectedItem="{Binding SelectedQuestionType}"
                          MinWidth="200">
                    <ComboBox.ItemTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding Converter={StaticResource QuestionTypeLabelConverter}}"/>
                        </DataTemplate>
                    </ComboBox.ItemTemplate>
                </ComboBox>
            </StackPanel>
        </Border>

        <!-- Main Game Area -->
        <Border Grid.Row="2" Background="#16213e" CornerRadius="12" Padding="24">
            <StackPanel VerticalAlignment="Center" Spacing="20">
                
                <!-- Question -->
                <TextBlock Text="{Binding QuestionText}"
                           FontSize="24" FontWeight="SemiBold"
                           TextAlignment="Center" TextWrapping="Wrap"
                           Foreground="White"/>

                <!-- Country Cards -->
                <Grid ColumnDefinitions="*,Auto,*">
                    <!-- Country 1 -->
                    <Button Grid.Column="0"
                            Command="{Binding SelectCountryCommand}"
                            CommandParameter="1"
                            HorizontalAlignment="Stretch"
                            VerticalAlignment="Stretch"
                            MinHeight="150"
                            Padding="0"
                            CornerRadius="12">
                        <Button.Background>
                            <MultiBinding Converter="{StaticResource AnswerStateBgConverter}">
                                <Binding Path="IsCountry1Correct"/>
                                <Binding Path="IsCountry1Wrong"/>
                            </MultiBinding>
                        </Button.Background>
                        <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center" Margin="16">
                            <TextBlock Text="{Binding Country1Flag}" FontSize="48" TextAlignment="Center"/>
                            <TextBlock Text="{Binding Country1Name}" FontSize="20" FontWeight="SemiBold" TextAlignment="Center">
                                <TextBlock.Foreground>
                                    <MultiBinding Converter="{StaticResource AnswerStateFgConverter}">
                                        <Binding Path="IsCountry1Correct"/>
                                        <Binding Path="IsCountry1Wrong"/>
                                    </MultiBinding>
                                </TextBlock.Foreground>
                            </TextBlock>
                            <TextBlock Text="{Binding Country1Value}"
                                       FontSize="14" Foreground="#a0a0a0" TextAlignment="Center"
                                       IsVisible="{Binding HasAnswered}"/>
                        </StackPanel>
                    </Button>

                    <!-- VS -->
                    <TextBlock Grid.Column="1" Text="VS" FontSize="20" FontWeight="Bold"
                               VerticalAlignment="Center" Foreground="#666" Margin="20,0"/>

                    <!-- Country 2 -->
                    <Button Grid.Column="2"
                            Command="{Binding SelectCountryCommand}"
                            CommandParameter="2"
                            HorizontalAlignment="Stretch"
                            VerticalAlignment="Stretch"
                            MinHeight="150"
                            Padding="0"
                            CornerRadius="12">
                        <Button.Background>
                            <MultiBinding Converter="{StaticResource AnswerStateBgConverter}">
                                <Binding Path="IsCountry2Correct"/>
                                <Binding Path="IsCountry2Wrong"/>
                            </MultiBinding>
                        </Button.Background>
                        <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center" Margin="16">
                            <TextBlock Text="{Binding Country2Flag}" FontSize="48" TextAlignment="Center"/>
                            <TextBlock Text="{Binding Country2Name}" FontSize="20" FontWeight="SemiBold" TextAlignment="Center">
                                <TextBlock.Foreground>
                                    <MultiBinding Converter="{StaticResource AnswerStateFgConverter}">
                                        <Binding Path="IsCountry2Correct"/>
                                        <Binding Path="IsCountry2Wrong"/>
                                    </MultiBinding>
                                </TextBlock.Foreground>
                            </TextBlock>
                            <TextBlock Text="{Binding Country2Value}"
                                       FontSize="14" Foreground="#a0a0a0" TextAlignment="Center"
                                       IsVisible="{Binding HasAnswered}"/>
                        </StackPanel>
                    </Button>
                </Grid>

                <!-- Result -->
                <TextBlock Text="{Binding ResultMessage}"
                           FontSize="20" FontWeight="SemiBold"
                           TextAlignment="Center"
                           Foreground="#90EE90"
                           IsVisible="{Binding HasAnswered}"/>

                <!-- Next Round Button - NO EMOJIS -->
                <Button Content="Next Round"
                        Command="{Binding NextRoundCommand}"
                        IsVisible="{Binding HasAnswered}"
                        HorizontalAlignment="Center"
                        MinWidth="200" MinHeight="48"
                        FontSize="16" FontWeight="SemiBold"
                        Background="#4CAF50"
                        Foreground="White"
                        CornerRadius="8"/>
            </StackPanel>
        </Border>

        <!-- Footer -->
        <StackPanel Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,16,0,0" Spacing="16">
            <Button Content="Reset Game"
                    Command="{Binding ResetGameCommand}"
                    MinWidth="120"
                    Background="#666"
                    Foreground="White"/>
        </StackPanel>
    </Grid>
</Window>
EOF

echo "✓ Desktop MainWindow.axaml updated"

# -----------------------------------------------------------------------------
# Fix 5: Update Desktop Converters
# -----------------------------------------------------------------------------
echo "[6/8] Updating Desktop Converters..."

cat > src/MyDesktopApplication.Desktop/Converters/Converters.cs << 'EOF'
using System;
using System.Collections.Generic;
using System.Globalization;
using Avalonia.Data.Converters;
using Avalonia.Media;
using MyDesktopApplication.Core.Entities;

namespace MyDesktopApplication.Desktop.Converters;

/// <summary>
/// Converts QuestionType enum to human-readable label.
/// </summary>
public class QuestionTypeLabelConverter : IValueConverter
{
    public static readonly QuestionTypeLabelConverter Instance = new();

    public object? Convert(object? value, Type targetType, object? parameter, CultureInfo culture)
    {
        if (value is QuestionType qt)
        {
            return qt.GetLabel();
        }
        return value?.ToString() ?? "";
    }

    public object? ConvertBack(object? value, Type targetType, object? parameter, CultureInfo culture)
    {
        throw new NotSupportedException();
    }
}

/// <summary>
/// Converts answer state (IsCorrect, IsWrong) to background color.
/// Only colors the selected answer - unselected answers stay default.
/// </summary>
public class AnswerStateToBackgroundConverter : IMultiValueConverter
{
    public static readonly AnswerStateToBackgroundConverter Instance = new();

    public object? Convert(IList<object?> values, Type targetType, object? parameter, CultureInfo culture)
    {
        if (values.Count >= 2 && values[0] is bool isCorrect && values[1] is bool isWrong)
        {
            if (isCorrect)
                return new SolidColorBrush(Color.FromRgb(76, 175, 80)); // Green #4CAF50
            if (isWrong)
                return new SolidColorBrush(Color.FromRgb(244, 67, 54)); // Red #F44336
        }
        // Default - not selected or not answered yet
        return new SolidColorBrush(Color.FromRgb(30, 58, 95)); // Dark blue #1E3A5F
    }
}

/// <summary>
/// Converts answer state to foreground (text) color.
/// </summary>
public class AnswerStateToForegroundConverter : IMultiValueConverter
{
    public static readonly AnswerStateToForegroundConverter Instance = new();

    public object? Convert(IList<object?> values, Type targetType, object? parameter, CultureInfo culture)
    {
        if (values.Count >= 2 && values[0] is bool isCorrect && values[1] is bool isWrong)
        {
            if (isCorrect || isWrong)
                return new SolidColorBrush(Colors.White);
        }
        // Default text color
        return new SolidColorBrush(Colors.White);
    }
}
EOF

echo "✓ Desktop Converters updated"

# -----------------------------------------------------------------------------
# Fix 6: Update Desktop MainWindowViewModel to match shared patterns
# -----------------------------------------------------------------------------
echo "[7/8] Updating Desktop MainWindowViewModel..."

cat > src/MyDesktopApplication.Desktop/ViewModels/MainWindowViewModel.cs << 'EOF'
using System.Collections.ObjectModel;
using CommunityToolkit.Mvvm.ComponentModel;
using CommunityToolkit.Mvvm.Input;
using MyDesktopApplication.Core.Entities;
using MyDesktopApplication.Core.Interfaces;
using MyDesktopApplication.Shared.Data;

namespace MyDesktopApplication.Desktop.ViewModels;

/// <summary>
/// ViewModel for the Desktop main window.
/// Implements the same quiz logic as CountryQuizViewModel for consistency.
/// </summary>
public partial class MainWindowViewModel : ViewModelBase
{
    private readonly Random _random = new();
    private readonly List<Country> _countries;
    private readonly IGameStateRepository? _gameStateRepository;
    private GameState _gameState = new();

    private Country? _country1;
    private Country? _country2;

    [ObservableProperty] private string _greeting = "Welcome to Country Quiz!";
    [ObservableProperty] private string _questionText = "Loading...";
    [ObservableProperty] private string _country1Name = "";
    [ObservableProperty] private string _country2Name = "";
    [ObservableProperty] private string _country1Flag = "";
    [ObservableProperty] private string _country2Flag = "";
    [ObservableProperty] private string _country1Value = "";
    [ObservableProperty] private string _country2Value = "";
    [ObservableProperty] private string _resultMessage = "";
    [ObservableProperty] private bool _hasAnswered;

    // Answer states - only highlight selected answer
    [ObservableProperty] private bool _isCountry1Correct;
    [ObservableProperty] private bool _isCountry1Wrong;
    [ObservableProperty] private bool _isCountry2Correct;
    [ObservableProperty] private bool _isCountry2Wrong;

    // Scores
    [ObservableProperty] private int _currentScore;
    [ObservableProperty] private int _highScore;
    [ObservableProperty] private int _currentStreak;
    [ObservableProperty] private int _bestStreak;
    [ObservableProperty] private int _totalQuestions;

    [ObservableProperty] private QuestionType _selectedQuestionType = QuestionType.Population;

    public ObservableCollection<QuestionType> QuestionTypes { get; } = new(Enum.GetValues<QuestionType>());

    public string ScoreText => $"Score: {CurrentScore}";
    public string StreakText => $"Streak: {CurrentStreak}";
    public string BestStreakText => $"Best: {BestStreak}";
    public string AccuracyText => TotalQuestions > 0
        ? $"Accuracy: {(double)CurrentScore / TotalQuestions * 100:N1}%"
        : "Accuracy: --";

    public MainWindowViewModel()
    {
        _countries = CountryData.GetAllCountries().ToList();
        GenerateNewQuestion();
    }

    public MainWindowViewModel(IGameStateRepository gameStateRepository) : this()
    {
        _gameStateRepository = gameStateRepository;
    }

    public async Task InitializeAsync()
    {
        if (_gameStateRepository != null)
        {
            try
            {
                _gameState = await _gameStateRepository.GetOrCreateAsync("default");
                CurrentScore = _gameState.CurrentScore;
                CurrentStreak = _gameState.CurrentStreak;
                BestStreak = _gameState.BestStreak;
                HighScore = _gameState.HighScore;
                OnPropertyChanged(nameof(ScoreText));
                OnPropertyChanged(nameof(StreakText));
                OnPropertyChanged(nameof(BestStreakText));
            }
            catch (Exception ex)
            {
                System.Diagnostics.Debug.WriteLine($"Error loading game state: {ex.Message}");
            }
        }
    }

    [RelayCommand]
    private async Task SelectCountry(string countryParam)
    {
        if (HasAnswered || _country1 == null || _country2 == null)
            return;

        if (!int.TryParse(countryParam, out int countryNumber))
            return;

        HasAnswered = true;
        TotalQuestions++;

        var value1 = SelectedQuestionType.GetValue(_country1);
        var value2 = SelectedQuestionType.GetValue(_country2);

        Country1Value = SelectedQuestionType.FormatValue(value1);
        Country2Value = SelectedQuestionType.FormatValue(value2);

        // FIX: Only highlight the selected answer
        IsCountry1Correct = false;
        IsCountry1Wrong = false;
        IsCountry2Correct = false;
        IsCountry2Wrong = false;

        bool isCorrect;
        if (countryNumber == 1)
        {
            isCorrect = value1 >= value2;
            IsCountry1Correct = isCorrect;
            IsCountry1Wrong = !isCorrect;
        }
        else
        {
            isCorrect = value2 >= value1;
            IsCountry2Correct = isCorrect;
            IsCountry2Wrong = !isCorrect;
        }

        if (isCorrect)
        {
            CurrentScore++;
            CurrentStreak++;
            if (CurrentStreak > BestStreak)
                BestStreak = CurrentStreak;
            if (CurrentScore > HighScore)
                HighScore = CurrentScore;
            ResultMessage = GetCorrectMessage();
        }
        else
        {
            CurrentStreak = 0;
            ResultMessage = GetIncorrectMessage();
        }

        _gameState.CurrentScore = CurrentScore;
        _gameState.CurrentStreak = CurrentStreak;
        _gameState.BestStreak = BestStreak;
        _gameState.HighScore = HighScore;
        _gameState.RecordAnswer(isCorrect);

        if (_gameStateRepository != null)
        {
            try
            {
                await _gameStateRepository.UpdateAsync(_gameState);
            }
            catch (Exception ex)
            {
                System.Diagnostics.Debug.WriteLine($"Error saving game state: {ex.Message}");
            }
        }

        OnPropertyChanged(nameof(ScoreText));
        OnPropertyChanged(nameof(StreakText));
        OnPropertyChanged(nameof(BestStreakText));
        OnPropertyChanged(nameof(AccuracyText));
    }

    [RelayCommand]
    private void NextRound()
    {
        GenerateNewQuestion();
    }

    [RelayCommand]
    private async Task ResetGame()
    {
        CurrentScore = 0;
        CurrentStreak = 0;
        TotalQuestions = 0;

        _gameState.CurrentScore = 0;
        _gameState.CurrentStreak = 0;

        if (_gameStateRepository != null)
        {
            try
            {
                await _gameStateRepository.UpdateAsync(_gameState);
            }
            catch (Exception ex)
            {
                System.Diagnostics.Debug.WriteLine($"Error resetting game state: {ex.Message}");
            }
        }

        OnPropertyChanged(nameof(ScoreText));
        OnPropertyChanged(nameof(StreakText));
        OnPropertyChanged(nameof(AccuracyText));

        GenerateNewQuestion();
    }

    private void GenerateNewQuestion()
    {
        HasAnswered = false;
        IsCountry1Correct = false;
        IsCountry1Wrong = false;
        IsCountry2Correct = false;
        IsCountry2Wrong = false;
        Country1Value = "";
        Country2Value = "";
        ResultMessage = "";

        var indices = Enumerable.Range(0, _countries.Count)
            .OrderBy(_ => _random.Next())
            .Take(2)
            .ToList();

        _country1 = _countries[indices[0]];
        _country2 = _countries[indices[1]];

        Country1Name = _country1.Name;
        Country2Name = _country2.Name;
        Country1Flag = _country1.Flag;
        Country2Flag = _country2.Flag;

        QuestionText = $"Which country has a higher {SelectedQuestionType.GetLabel()}?";
    }

    private string GetCorrectMessage()
    {
        var messages = new[]
        {
            "Correct!",
            "Well done!",
            "Great job!",
            "Excellent!",
            CurrentStreak >= 5 ? $"{CurrentStreak} in a row!" : "Keep it up!"
        };
        return messages[_random.Next(messages.Length)];
    }

    private string GetIncorrectMessage()
    {
        return "Not quite! The correct answer is shown above.";
    }
}
EOF

echo "✓ Desktop MainWindowViewModel updated"

# -----------------------------------------------------------------------------
# Fix 7: Update GitHub Actions workflow for proper Android versioning
# -----------------------------------------------------------------------------
echo "[8/8] Updating GitHub Actions workflow for Android versioning..."

mkdir -p .github/workflows

cat > .github/workflows/build-and-release.yml << 'EOF'
name: Build and Release

on:
  push:
    branches: [master, main]
  pull_request:
    branches: [master, main]

env:
  DOTNET_VERSION: '10.0.x'
  DOTNET_NOLOGO: true
  DOTNET_CLI_TELEMETRY_OPTOUT: true

jobs:
  build-and-test:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v6

      - name: Setup .NET
        uses: actions/setup-dotnet@v5
        with:
          dotnet-version: ${{ env.DOTNET_VERSION }}

      - name: Cache NuGet packages
        uses: actions/cache@v5
        with:
          path: ~/.nuget/packages
          key: ${{ runner.os }}-nuget-${{ hashFiles('**/*.csproj', '**/Directory.Packages.props') }}
          restore-keys: ${{ runner.os }}-nuget-

      - name: Restore
        run: dotnet restore

      - name: Build
        run: dotnet build --configuration Release --no-restore

      - name: Test
        run: dotnet test --configuration Release --no-build --verbosity normal

  build-desktop:
    needs: build-and-test
    if: github.event_name == 'push' && (github.ref == 'refs/heads/master' || github.ref == 'refs/heads/main')
    strategy:
      matrix:
        include:
          - os: windows-latest
            rid: win-x64
            artifact: MyDesktopApplication-win-x64
          - os: windows-latest
            rid: win-arm64
            artifact: MyDesktopApplication-win-arm64
          - os: ubuntu-latest
            rid: linux-x64
            artifact: MyDesktopApplication-linux-x64
          - os: ubuntu-latest
            rid: linux-arm64
            artifact: MyDesktopApplication-linux-arm64
          - os: macos-latest
            rid: osx-x64
            artifact: MyDesktopApplication-osx-x64
          - os: macos-latest
            rid: osx-arm64
            artifact: MyDesktopApplication-osx-arm64
    runs-on: ${{ matrix.os }}
    steps:
      - name: Checkout
        uses: actions/checkout@v6

      - name: Setup .NET
        uses: actions/setup-dotnet@v5
        with:
          dotnet-version: ${{ env.DOTNET_VERSION }}

      - name: Publish
        run: |
          dotnet publish src/MyDesktopApplication.Desktop/MyDesktopApplication.Desktop.csproj \
            --configuration Release \
            --runtime ${{ matrix.rid }} \
            --self-contained true \
            -p:PublishSingleFile=true \
            -p:Version=1.0.${{ github.run_number }} \
            -p:AssemblyVersion=1.0.${{ github.run_number }}.0 \
            -p:FileVersion=1.0.${{ github.run_number }}.0 \
            --output ./publish/${{ matrix.artifact }}

      - name: Upload artifact
        uses: actions/upload-artifact@v6
        with:
          name: ${{ matrix.artifact }}
          path: ./publish/${{ matrix.artifact }}

  build-android:
    needs: build-and-test
    if: github.event_name == 'push' && (github.ref == 'refs/heads/master' || github.ref == 'refs/heads/main')
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v6

      - name: Setup .NET
        uses: actions/setup-dotnet@v5
        with:
          dotnet-version: ${{ env.DOTNET_VERSION }}

      - name: Setup Java
        uses: actions/setup-java@v4
        with:
          distribution: 'temurin'
          java-version: '21'

      - name: Install Android workload
        run: dotnet workload install android

      - name: Build Android APK
        run: |
          dotnet publish src/MyDesktopApplication.Android/MyDesktopApplication.Android.csproj \
            --configuration Release \
            -p:ApplicationVersion=${{ github.run_number }} \
            -p:ApplicationDisplayVersion="1.0.${{ github.run_number }}" \
            --output ./publish/android

      - name: Find and rename APK
        run: |
          mkdir -p ./publish/final
          APK=$(find ./publish/android -name "*.apk" | head -1)
          if [ -n "$APK" ]; then
            cp "$APK" "./publish/final/MyDesktopApplication-1.0.${{ github.run_number }}.apk"
          fi

      - name: Upload Android artifact
        uses: actions/upload-artifact@v6
        with:
          name: MyDesktopApplication-android
          path: ./publish/final/*.apk

  release:
    needs: [build-desktop, build-android]
    if: github.event_name == 'push' && (github.ref == 'refs/heads/master' || github.ref == 'refs/heads/main')
    runs-on: ubuntu-latest
    permissions:
      contents: write
    steps:
      - name: Download all artifacts
        uses: actions/download-artifact@v7
        with:
          path: ./artifacts

      - name: Prepare release assets
        run: |
          mkdir -p ./release
          
          # Package desktop builds
          for dir in ./artifacts/MyDesktopApplication-*; do
            if [ -d "$dir" ] && [[ "$dir" != *"android"* ]]; then
              name=$(basename "$dir")
              if [[ "$name" == *"win"* ]]; then
                cd "$dir" && zip -r "../../release/${name}-1.0.${{ github.run_number }}.zip" . && cd ../..
              else
                cd "$dir" && tar -czvf "../../release/${name}-1.0.${{ github.run_number }}.tar.gz" . && cd ../..
              fi
            fi
          done
          
          # Copy Android APK
          if [ -d "./artifacts/MyDesktopApplication-android" ]; then
            cp ./artifacts/MyDesktopApplication-android/*.apk ./release/ 2>/dev/null || true
          fi
          
          ls -la ./release/

      - name: Create Release
        uses: softprops/action-gh-release@v2
        with:
          tag_name: v1.0.${{ github.run_number }}
          name: Release 1.0.${{ github.run_number }}
          body: |
            ## Release 1.0.${{ github.run_number }}
            
            ### Downloads
            - **Windows x64**: MyDesktopApplication-win-x64-1.0.${{ github.run_number }}.zip
            - **Windows ARM64**: MyDesktopApplication-win-arm64-1.0.${{ github.run_number }}.zip
            - **Linux x64**: MyDesktopApplication-linux-x64-1.0.${{ github.run_number }}.tar.gz
            - **Linux ARM64**: MyDesktopApplication-linux-arm64-1.0.${{ github.run_number }}.tar.gz
            - **macOS x64**: MyDesktopApplication-osx-x64-1.0.${{ github.run_number }}.tar.gz
            - **macOS ARM64**: MyDesktopApplication-osx-arm64-1.0.${{ github.run_number }}.tar.gz
            - **Android**: MyDesktopApplication-1.0.${{ github.run_number }}.apk
            
            ### Changes
            - Auto-release from commit ${{ github.sha }}
          files: ./release/*
          draft: false
          prerelease: false
          generate_release_notes: true
EOF

echo "✓ GitHub Actions workflow updated"

# -----------------------------------------------------------------------------
# Build and verify
# -----------------------------------------------------------------------------
echo ""
echo "=============================================="
echo "  Building and Verifying..."
echo "=============================================="

dotnet restore
if ! dotnet build --configuration Release; then
    echo ""
    echo "=============================================="
    echo "  BUILD FAILED - Check errors above"
    echo "=============================================="
    exit 1
fi

if ! dotnet test --configuration Release --no-build; then
    echo ""
    echo "=============================================="
    echo "  TESTS FAILED - Check errors above"
    echo "=============================================="
    exit 1
fi

echo ""
echo "=============================================="
echo "  All Fixes Applied Successfully!"
echo "=============================================="
echo ""
echo "Changes made:"
echo "  1. Answer highlighting - only the selected answer is highlighted"
echo "     - Green for correct selection"
echo "     - Red for wrong selection"
echo "     - Other answer stays neutral (not highlighted)"
echo ""
echo "  2. Removed all emojis from UI"
echo "     - Next Round button now shows plain text"
echo "     - Result messages use plain text"
echo "     - No more [x] placeholders on Android"
echo ""
echo "  3. Fixed Android versioning for Obtanium updates"
echo "     - ApplicationVersion (VersionCode) = github.run_number"
echo "     - ApplicationDisplayVersion = 1.0.{run_number}"
echo "     - Each build has incrementing version"
echo "     - Updates will work without uninstall"
echo ""
echo "To deploy:"
echo "  git add -A"
echo "  git commit -m 'Fix answer highlighting, remove emojis, fix Android versioning'"
echo "  git push"
echo ""
EOF


================================================================================
FILE: fix-ui-and-precision.sh
SIZE: 37.79 KB
MODIFIED: 2025-12-24 19:20:29
================================================================================

#!/bin/bash
#
# fix-ui-and-precision.sh
# Fixes UI layout issues and value display precision
# Idempotent - safe to run multiple times
#

set -e
cd "$(dirname "$0")"

echo "=============================================="
echo "  UI & Precision Fix Script"
echo "=============================================="

# -----------------------------------------------------------------------------
# 1. Kill stuck processes
# -----------------------------------------------------------------------------
echo "[1/7] Cleaning up stuck processes..."
pkill -f "VBCSCompiler" 2>/dev/null || true
pkill -f "aapt2" 2>/dev/null || true
dotnet build-server shutdown 2>/dev/null || true

# -----------------------------------------------------------------------------
# 2. Clean build artifacts
# -----------------------------------------------------------------------------
echo "[2/7] Cleaning build artifacts..."
rm -rf bin obj src/*/bin src/*/obj tests/*/bin tests/*/obj 2>/dev/null || true

# -----------------------------------------------------------------------------
# 3. Delete old unnecessary shell scripts
# -----------------------------------------------------------------------------
echo "[3/7] Removing old shell scripts..."
rm -f fix-all-errors.sh 2>/dev/null || true
rm -f fix-android-code.sh 2>/dev/null || true
rm -f fix-avalonia-version.sh 2>/dev/null || true
rm -f fix-updateasync-error.sh 2>/dev/null || true
rm -f convert-to-country-quiz.sh 2>/dev/null || true
rm -f repair-project.sh 2>/dev/null || true
rm -f setup-all.sh 2>/dev/null || true
rm -f setup-project.sh 2>/dev/null || true
rm -f setup-android-sdk.sh 2>/dev/null || true
rm -f harmonize-properties.sh 2>/dev/null || true

# -----------------------------------------------------------------------------
# 4. Update QuestionType.cs with smart precision formatting
# -----------------------------------------------------------------------------
echo "[4/7] Updating QuestionType.cs with smart precision formatting..."
cat > src/MyDesktopApplication.Core/Entities/QuestionType.cs << 'EOF'
namespace MyDesktopApplication.Core.Entities;

public enum QuestionType
{
    Population,
    Area,
    GdpTotal,
    GdpPerCapita,
    PopulationDensity,
    LiteracyRate,
    Hdi,
    LifeExpectancy
}

public static class QuestionTypeExtensions
{
    public static string GetLabel(this QuestionType questionType) => questionType switch
    {
        QuestionType.Population => "Population",
        QuestionType.Area => "Area (km²)",
        QuestionType.GdpTotal => "GDP (Total)",
        QuestionType.GdpPerCapita => "GDP per Capita",
        QuestionType.PopulationDensity => "Population Density",
        QuestionType.LiteracyRate => "Literacy Rate",
        QuestionType.Hdi => "Human Development Index",
        QuestionType.LifeExpectancy => "Life Expectancy",
        _ => questionType.ToString()
    };

    public static double GetValue(this QuestionType questionType, Country country) => questionType switch
    {
        QuestionType.Population => country.Population,
        QuestionType.Area => country.Area,
        QuestionType.GdpTotal => country.GdpTotal,
        QuestionType.GdpPerCapita => country.GdpPerCapita,
        QuestionType.PopulationDensity => country.PopulationDensity,
        QuestionType.LiteracyRate => country.LiteracyRate,
        QuestionType.Hdi => country.Hdi,
        QuestionType.LifeExpectancy => country.LifeExpectancy,
        _ => 0
    };

    /// <summary>
    /// Format a value for display with appropriate precision.
    /// Uses exact values to avoid confusion when numbers are close.
    /// </summary>
    public static string FormatValue(this QuestionType questionType, double value) => questionType switch
    {
        QuestionType.Population => FormatLargeNumber(value),
        QuestionType.Area => FormatArea(value),
        QuestionType.GdpTotal => FormatCurrency(value),
        QuestionType.GdpPerCapita => $"${value:N0}",
        QuestionType.PopulationDensity => $"{value:N1}/km²",
        QuestionType.LiteracyRate => $"{value:N1}%",
        QuestionType.Hdi => $"{value:N3}",
        QuestionType.LifeExpectancy => $"{value:N1} years",
        _ => value.ToString("N0")
    };

    /// <summary>
    /// Format large numbers with enough precision to distinguish close values.
    /// For example, 1,411,750,000 vs 1,417,173,173 should NOT both show as "1.4B"
    /// </summary>
    private static string FormatLargeNumber(double value)
    {
        // Use exact format for smaller numbers
        if (value < 1_000) return value.ToString("N0");
        if (value < 1_000_000) return $"{value / 1_000:N2}K";  // 2 decimal places
        if (value < 1_000_000_000) return $"{value / 1_000_000:N2}M";  // 2 decimal places
        
        // For billions, use 3 decimal places to distinguish close values
        // e.g., 1.412B vs 1.417B for China/India
        if (value < 1_000_000_000_000) return $"{value / 1_000_000_000:N3}B";
        
        return $"{value / 1_000_000_000_000:N3}T";
    }

    private static string FormatArea(double value)
    {
        if (value < 1_000) return $"{value:N0} km²";
        if (value < 1_000_000) return $"{value / 1_000:N2}K km²";
        return $"{value / 1_000_000:N2}M km²";
    }

    private static string FormatCurrency(double value)
    {
        if (value < 1_000) return $"${value:N0}";
        if (value < 1_000_000) return $"${value / 1_000:N2}K";
        if (value < 1_000_000_000) return $"${value / 1_000_000:N2}M";
        if (value < 1_000_000_000_000) return $"${value / 1_000_000_000:N2}B";
        return $"${value / 1_000_000_000_000:N2}T";
    }
}
EOF

# -----------------------------------------------------------------------------
# 5. Update Desktop MainWindow.axaml with improved layout
# -----------------------------------------------------------------------------
echo "[5/7] Updating Desktop MainWindow.axaml..."
cat > src/MyDesktopApplication.Desktop/Views/MainWindow.axaml << 'EOF'
<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:MyDesktopApplication.Desktop.ViewModels"
        xmlns:conv="using:MyDesktopApplication.Desktop.Converters"
        x:Class="MyDesktopApplication.Desktop.Views.MainWindow"
        x:DataType="vm:MainWindowViewModel"
        Title="Country Quiz"
        Width="800" Height="700"
        MinWidth="400" MinHeight="500"
        Background="#1a1a2e">

    <Window.Resources>
        <conv:QuestionTypeLabelConverter x:Key="QuestionTypeLabelConverter"/>
        <conv:BoolToColorConverter x:Key="BoolToColorConverter"/>
    </Window.Resources>

    <ScrollViewer HorizontalScrollBarVisibility="Disabled" 
                  VerticalScrollBarVisibility="Auto">
        <Grid RowDefinitions="Auto,Auto,*,Auto" Margin="20">
            
            <!-- Header: Score & Stats -->
            <Border Grid.Row="0" Background="#16213e" CornerRadius="12" Padding="16" Margin="0,0,0,16">
                <Grid ColumnDefinitions="*,Auto,Auto,Auto">
                    <!-- Question Type Selector -->
                    <ComboBox Grid.Column="0"
                              ItemsSource="{Binding QuestionTypes}"
                              SelectedItem="{Binding SelectedQuestionType}"
                              Background="#0f3460"
                              Foreground="White"
                              MinWidth="180"
                              HorizontalAlignment="Left">
                        <ComboBox.ItemTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding Converter={StaticResource QuestionTypeLabelConverter}}"
                                           Foreground="White"/>
                            </DataTemplate>
                        </ComboBox.ItemTemplate>
                    </ComboBox>
                    
                    <!-- Stats Display -->
                    <StackPanel Grid.Column="1" Orientation="Horizontal" Spacing="16" Margin="16,0">
                        <TextBlock Text="{Binding ScoreText}" Foreground="#4ade80" FontSize="16" FontWeight="Bold"/>
                        <TextBlock Text="{Binding StreakText}" Foreground="#fbbf24" FontSize="16"/>
                        <TextBlock Text="{Binding BestStreakText}" Foreground="#f472b6" FontSize="16"/>
                    </StackPanel>
                    
                    <TextBlock Grid.Column="2" Text="{Binding AccuracyText}" Foreground="#94a3b8" 
                               FontSize="14" VerticalAlignment="Center" Margin="0,0,16,0"/>
                    
                    <!-- Reset Button -->
                    <Button Grid.Column="3" Content="Reset" Command="{Binding ResetGameCommand}"
                            Background="#ef4444" Foreground="White" Padding="16,8"/>
                </Grid>
            </Border>
            
            <!-- Question Text -->
            <Border Grid.Row="1" Background="#16213e" CornerRadius="12" Padding="20" Margin="0,0,0,16">
                <TextBlock Text="{Binding QuestionText}" 
                           Foreground="White" FontSize="22" FontWeight="SemiBold"
                           TextAlignment="Center" TextWrapping="Wrap"/>
            </Border>
            
            <!-- Country Cards - Two columns side by side -->
            <Grid Grid.Row="2" ColumnDefinitions="*,16,*" Margin="0,0,0,16">
                
                <!-- Country 1 Card -->
                <Button Grid.Column="0" 
                        Command="{Binding SelectCountryCommand}" 
                        CommandParameter="1"
                        IsEnabled="{Binding !HasAnswered}"
                        HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                        HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch"
                        Padding="0" Background="Transparent" BorderThickness="0"
                        MinHeight="200">
                    <Border CornerRadius="16" Padding="24"
                            Background="{Binding IsCountry1Correct, Converter={StaticResource BoolToColorConverter}, ConverterParameter=correct}"
                            Classes.wrong="{Binding IsCountry1Wrong}">
                        <Border.Styles>
                            <Style Selector="Border">
                                <Setter Property="Background" Value="#16213e"/>
                            </Style>
                            <Style Selector="Border.wrong">
                                <Setter Property="Background" Value="#7f1d1d"/>
                            </Style>
                        </Border.Styles>
                        <Grid RowDefinitions="Auto,*,Auto">
                            <!-- Flag -->
                            <TextBlock Grid.Row="0" Text="{Binding Country1.Flag}" 
                                       FontSize="64" HorizontalAlignment="Center" Margin="0,0,0,12"/>
                            
                            <!-- Country Name -->
                            <TextBlock Grid.Row="1" Text="{Binding Country1.Name}" 
                                       Foreground="White" FontSize="24" FontWeight="Bold"
                                       TextAlignment="Center" TextWrapping="Wrap"
                                       VerticalAlignment="Center"/>
                            
                            <!-- Value (shown after answer) -->
                            <TextBlock Grid.Row="2" Text="{Binding Country1Value}"
                                       IsVisible="{Binding HasAnswered}"
                                       Foreground="#60a5fa" FontSize="20" FontWeight="Bold"
                                       TextAlignment="Center" Margin="0,12,0,0"/>
                        </Grid>
                    </Border>
                </Button>
                
                <!-- VS Text -->
                <TextBlock Grid.Column="1" Text="VS" 
                           Foreground="#64748b" FontSize="24" FontWeight="Bold"
                           VerticalAlignment="Center" HorizontalAlignment="Center"/>
                
                <!-- Country 2 Card -->
                <Button Grid.Column="2" 
                        Command="{Binding SelectCountryCommand}" 
                        CommandParameter="2"
                        IsEnabled="{Binding !HasAnswered}"
                        HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                        HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch"
                        Padding="0" Background="Transparent" BorderThickness="0"
                        MinHeight="200">
                    <Border CornerRadius="16" Padding="24"
                            Background="{Binding IsCountry2Correct, Converter={StaticResource BoolToColorConverter}, ConverterParameter=correct}"
                            Classes.wrong="{Binding IsCountry2Wrong}">
                        <Border.Styles>
                            <Style Selector="Border">
                                <Setter Property="Background" Value="#16213e"/>
                            </Style>
                            <Style Selector="Border.wrong">
                                <Setter Property="Background" Value="#7f1d1d"/>
                            </Style>
                        </Border.Styles>
                        <Grid RowDefinitions="Auto,*,Auto">
                            <!-- Flag -->
                            <TextBlock Grid.Row="0" Text="{Binding Country2.Flag}" 
                                       FontSize="64" HorizontalAlignment="Center" Margin="0,0,0,12"/>
                            
                            <!-- Country Name -->
                            <TextBlock Grid.Row="1" Text="{Binding Country2.Name}" 
                                       Foreground="White" FontSize="24" FontWeight="Bold"
                                       TextAlignment="Center" TextWrapping="Wrap"
                                       VerticalAlignment="Center"/>
                            
                            <!-- Value (shown after answer) -->
                            <TextBlock Grid.Row="2" Text="{Binding Country2Value}"
                                       IsVisible="{Binding HasAnswered}"
                                       Foreground="#60a5fa" FontSize="20" FontWeight="Bold"
                                       TextAlignment="Center" Margin="0,12,0,0"/>
                        </Grid>
                    </Border>
                </Button>
            </Grid>
            
            <!-- Result & Next Button -->
            <StackPanel Grid.Row="3" Spacing="12">
                <!-- Result Message -->
                <Border IsVisible="{Binding HasAnswered}" 
                        Background="#16213e" CornerRadius="12" Padding="16">
                    <TextBlock Text="{Binding ResultMessage}" 
                               Foreground="White" FontSize="18"
                               TextAlignment="Center" TextWrapping="Wrap"/>
                </Border>
                
                <!-- Next Round Button -->
                <Button Command="{Binding NextRoundCommand}"
                        IsVisible="{Binding HasAnswered}"
                        Content="Next Round →"
                        Background="#3b82f6" Foreground="White"
                        FontSize="18" FontWeight="Bold"
                        Padding="24,16"
                        HorizontalAlignment="Center"
                        HorizontalContentAlignment="Center"/>
            </StackPanel>
        </Grid>
    </ScrollViewer>
</Window>
EOF

# -----------------------------------------------------------------------------
# 6. Update Android MainView.axaml with touch-optimized layout
# -----------------------------------------------------------------------------
echo "[6/7] Updating Android MainView.axaml with touch-optimized layout..."
cat > src/MyDesktopApplication.Android/Views/MainView.axaml << 'EOF'
<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:MyDesktopApplication.Shared.ViewModels"
             xmlns:conv="using:MyDesktopApplication.Android.Converters"
             x:Class="MyDesktopApplication.Android.Views.MainView"
             x:DataType="vm:CountryQuizViewModel"
             Background="#1a1a2e">

    <UserControl.Resources>
        <conv:QuestionTypeLabelConverter x:Key="QuestionTypeLabelConverter"/>
    </UserControl.Resources>

    <!-- Main ScrollViewer to handle all screen sizes -->
    <ScrollViewer HorizontalScrollBarVisibility="Disabled" 
                  VerticalScrollBarVisibility="Auto">
        
        <Grid RowDefinitions="Auto,Auto,*,Auto" Margin="12">
            
            <!-- ═══════════════════════════════════════════════════════════════ -->
            <!-- ROW 0: Header with Stats and Controls                           -->
            <!-- ═══════════════════════════════════════════════════════════════ -->
            <Border Grid.Row="0" Background="#16213e" CornerRadius="12" Padding="12" Margin="0,0,0,8">
                <Grid RowDefinitions="Auto,Auto">
                    <!-- Stats Row -->
                    <Grid Grid.Row="0" ColumnDefinitions="*,*,*,*" Margin="0,0,0,8">
                        <TextBlock Grid.Column="0" Text="{Binding ScoreText}" 
                                   Foreground="#4ade80" FontSize="14" FontWeight="Bold"
                                   HorizontalAlignment="Center"/>
                        <TextBlock Grid.Column="1" Text="{Binding StreakText}" 
                                   Foreground="#fbbf24" FontSize="14"
                                   HorizontalAlignment="Center"/>
                        <TextBlock Grid.Column="2" Text="{Binding BestStreakText}" 
                                   Foreground="#f472b6" FontSize="14"
                                   HorizontalAlignment="Center"/>
                        <TextBlock Grid.Column="3" Text="{Binding AccuracyText}" 
                                   Foreground="#94a3b8" FontSize="14"
                                   HorizontalAlignment="Center"/>
                    </Grid>
                    
                    <!-- Controls Row -->
                    <Grid Grid.Row="1" ColumnDefinitions="*,Auto">
                        <ComboBox Grid.Column="0"
                                  ItemsSource="{Binding QuestionTypes}"
                                  SelectedItem="{Binding SelectedQuestionType}"
                                  Background="#0f3460"
                                  Foreground="White"
                                  MinHeight="44"
                                  HorizontalAlignment="Stretch"
                                  Margin="0,0,8,0">
                            <ComboBox.ItemTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Converter={StaticResource QuestionTypeLabelConverter}}"
                                               Foreground="White" FontSize="14"/>
                                </DataTemplate>
                            </ComboBox.ItemTemplate>
                        </ComboBox>
                        
                        <Button Grid.Column="1" Content="Reset" 
                                Command="{Binding ResetGameCommand}"
                                Background="#ef4444" Foreground="White"
                                MinHeight="44" MinWidth="70"
                                Padding="12,8"
                                FontSize="14"/>
                    </Grid>
                </Grid>
            </Border>
            
            <!-- ═══════════════════════════════════════════════════════════════ -->
            <!-- ROW 1: Question Text                                            -->
            <!-- ═══════════════════════════════════════════════════════════════ -->
            <Border Grid.Row="1" Background="#16213e" CornerRadius="12" Padding="16" Margin="0,0,0,8">
                <TextBlock Text="{Binding QuestionText}" 
                           Foreground="White" FontSize="18" FontWeight="SemiBold"
                           TextAlignment="Center" TextWrapping="Wrap"/>
            </Border>
            
            <!-- ═══════════════════════════════════════════════════════════════ -->
            <!-- ROW 2: Country Cards (MAXIMIZED TOUCH AREA)                     -->
            <!-- ═══════════════════════════════════════════════════════════════ -->
            <Grid Grid.Row="2" RowDefinitions="*,Auto,*" Margin="0,0,0,8" MinHeight="350">
                
                <!-- Country 1 - TOP (Full Width, Large Touch Target) -->
                <Button Grid.Row="0" 
                        Command="{Binding SelectCountryCommand}" 
                        CommandParameter="1"
                        IsEnabled="{Binding !HasAnswered}"
                        HorizontalAlignment="Stretch" 
                        VerticalAlignment="Stretch"
                        HorizontalContentAlignment="Stretch" 
                        VerticalContentAlignment="Stretch"
                        Padding="0" 
                        Background="Transparent" 
                        BorderThickness="0"
                        Margin="0,0,0,4">
                    <Border CornerRadius="16" Padding="16"
                            HorizontalAlignment="Stretch"
                            VerticalAlignment="Stretch">
                        <Border.Styles>
                            <Style Selector="Border">
                                <Setter Property="Background" Value="#16213e"/>
                            </Style>
                        </Border.Styles>
                        <Border.Background>
                            <MultiBinding Converter="{x:Static conv:AnswerBackgroundConverter.Instance}">
                                <Binding Path="IsCountry1Correct"/>
                                <Binding Path="IsCountry1Wrong"/>
                            </MultiBinding>
                        </Border.Background>
                        
                        <Grid ColumnDefinitions="Auto,*,Auto">
                            <!-- Flag (Left) -->
                            <TextBlock Grid.Column="0" Text="{Binding Country1.Flag}" 
                                       FontSize="48" VerticalAlignment="Center" Margin="0,0,12,0"/>
                            
                            <!-- Country Name (Center) -->
                            <TextBlock Grid.Column="1" Text="{Binding Country1.Name}" 
                                       Foreground="White" FontSize="22" FontWeight="Bold"
                                       TextWrapping="Wrap" VerticalAlignment="Center"
                                       HorizontalAlignment="Center"/>
                            
                            <!-- Value (Right, shown after answer) -->
                            <StackPanel Grid.Column="2" VerticalAlignment="Center" 
                                        IsVisible="{Binding HasAnswered}">
                                <TextBlock Text="{Binding Country1Value}"
                                           Foreground="#60a5fa" FontSize="16" FontWeight="Bold"
                                           HorizontalAlignment="Right"/>
                            </StackPanel>
                        </Grid>
                    </Border>
                </Button>
                
                <!-- VS Divider -->
                <Border Grid.Row="1" Background="#0f3460" CornerRadius="20" 
                        Padding="16,4" HorizontalAlignment="Center" Margin="0,4">
                    <TextBlock Text="VS" Foreground="#64748b" FontSize="16" FontWeight="Bold"/>
                </Border>
                
                <!-- Country 2 - BOTTOM (Full Width, Large Touch Target) -->
                <Button Grid.Row="2" 
                        Command="{Binding SelectCountryCommand}" 
                        CommandParameter="2"
                        IsEnabled="{Binding !HasAnswered}"
                        HorizontalAlignment="Stretch" 
                        VerticalAlignment="Stretch"
                        HorizontalContentAlignment="Stretch" 
                        VerticalContentAlignment="Stretch"
                        Padding="0" 
                        Background="Transparent" 
                        BorderThickness="0"
                        Margin="0,4,0,0">
                    <Border CornerRadius="16" Padding="16"
                            HorizontalAlignment="Stretch"
                            VerticalAlignment="Stretch">
                        <Border.Styles>
                            <Style Selector="Border">
                                <Setter Property="Background" Value="#16213e"/>
                            </Style>
                        </Border.Styles>
                        <Border.Background>
                            <MultiBinding Converter="{x:Static conv:AnswerBackgroundConverter.Instance}">
                                <Binding Path="IsCountry2Correct"/>
                                <Binding Path="IsCountry2Wrong"/>
                            </MultiBinding>
                        </Border.Background>
                        
                        <Grid ColumnDefinitions="Auto,*,Auto">
                            <!-- Flag (Left) -->
                            <TextBlock Grid.Column="0" Text="{Binding Country2.Flag}" 
                                       FontSize="48" VerticalAlignment="Center" Margin="0,0,12,0"/>
                            
                            <!-- Country Name (Center) -->
                            <TextBlock Grid.Column="1" Text="{Binding Country2.Name}" 
                                       Foreground="White" FontSize="22" FontWeight="Bold"
                                       TextWrapping="Wrap" VerticalAlignment="Center"
                                       HorizontalAlignment="Center"/>
                            
                            <!-- Value (Right, shown after answer) -->
                            <StackPanel Grid.Column="2" VerticalAlignment="Center" 
                                        IsVisible="{Binding HasAnswered}">
                                <TextBlock Text="{Binding Country2Value}"
                                           Foreground="#60a5fa" FontSize="16" FontWeight="Bold"
                                           HorizontalAlignment="Right"/>
                            </StackPanel>
                        </Grid>
                    </Border>
                </Button>
            </Grid>
            
            <!-- ═══════════════════════════════════════════════════════════════ -->
            <!-- ROW 3: Result Message & Next Button                             -->
            <!-- ═══════════════════════════════════════════════════════════════ -->
            <StackPanel Grid.Row="3" Spacing="8">
                <!-- Result Message -->
                <Border IsVisible="{Binding HasAnswered}" 
                        Background="#16213e" CornerRadius="12" Padding="12">
                    <TextBlock Text="{Binding ResultMessage}" 
                               Foreground="White" FontSize="16"
                               TextAlignment="Center" TextWrapping="Wrap"/>
                </Border>
                
                <!-- Next Round Button - LARGE TOUCH TARGET -->
                <Button Command="{Binding NextRoundCommand}"
                        IsVisible="{Binding HasAnswered}"
                        Content="Next Round →"
                        Background="#3b82f6" Foreground="White"
                        FontSize="18" FontWeight="Bold"
                        MinHeight="56"
                        Padding="24,12"
                        HorizontalAlignment="Stretch"
                        HorizontalContentAlignment="Center"/>
            </StackPanel>
        </Grid>
    </ScrollViewer>
</UserControl>
EOF

# -----------------------------------------------------------------------------
# 7. Update Android Converters with the new AnswerBackgroundConverter
# -----------------------------------------------------------------------------
echo "[7/7] Updating Android Converters..."
cat > src/MyDesktopApplication.Android/Converters/Converters.cs << 'EOF'
using System;
using System.Collections.Generic;
using System.Globalization;
using Avalonia.Data.Converters;
using Avalonia.Media;
using MyDesktopApplication.Core.Entities;

namespace MyDesktopApplication.Android.Converters;

public class QuestionTypeLabelConverter : IValueConverter
{
    public static readonly QuestionTypeLabelConverter Instance = new();

    public object? Convert(object? value, Type targetType, object? parameter, CultureInfo culture)
    {
        if (value is QuestionType qt)
        {
            return qt.GetLabel();
        }
        return value?.ToString() ?? "";
    }

    public object? ConvertBack(object? value, Type targetType, object? parameter, CultureInfo culture)
    {
        throw new NotSupportedException();
    }
}

/// <summary>
/// Multi-value converter that determines background color based on correct/wrong state
/// </summary>
public class AnswerBackgroundConverter : IMultiValueConverter
{
    public static readonly AnswerBackgroundConverter Instance = new();
    
    private static readonly SolidColorBrush DefaultBrush = new(Color.Parse("#16213e"));
    private static readonly SolidColorBrush CorrectBrush = new(Color.Parse("#166534"));  // Green
    private static readonly SolidColorBrush WrongBrush = new(Color.Parse("#7f1d1d"));    // Red

    public object? Convert(IList<object?> values, Type targetType, object? parameter, CultureInfo culture)
    {
        if (values.Count >= 2)
        {
            var isCorrect = values[0] is true;
            var isWrong = values[1] is true;
            
            if (isCorrect) return CorrectBrush;
            if (isWrong) return WrongBrush;
        }
        return DefaultBrush;
    }
}
EOF

# -----------------------------------------------------------------------------
# Update Desktop Converters to match
# -----------------------------------------------------------------------------
cat > src/MyDesktopApplication.Desktop/Converters/Converters.cs << 'EOF'
using System;
using System.Globalization;
using Avalonia.Data.Converters;
using Avalonia.Media;
using MyDesktopApplication.Core.Entities;

namespace MyDesktopApplication.Desktop.Converters;

public class QuestionTypeLabelConverter : IValueConverter
{
    public static readonly QuestionTypeLabelConverter Instance = new();

    public object? Convert(object? value, Type targetType, object? parameter, CultureInfo culture)
    {
        if (value is QuestionType qt)
        {
            return qt.GetLabel();
        }
        return value?.ToString() ?? "";
    }

    public object? ConvertBack(object? value, Type targetType, object? parameter, CultureInfo culture)
    {
        throw new NotSupportedException();
    }
}

public class BoolToColorConverter : IValueConverter
{
    private static readonly SolidColorBrush CorrectBrush = new(Color.Parse("#166534"));
    private static readonly SolidColorBrush DefaultBrush = new(Color.Parse("#16213e"));
    
    public object? Convert(object? value, Type targetType, object? parameter, CultureInfo culture)
    {
        if (value is true && parameter?.ToString() == "correct")
        {
            return CorrectBrush;
        }
        return DefaultBrush;
    }

    public object? ConvertBack(object? value, Type targetType, object? parameter, CultureInfo culture)
    {
        throw new NotSupportedException();
    }
}
EOF

# -----------------------------------------------------------------------------
# Update QuestionTypeTests to match new precision
# -----------------------------------------------------------------------------
cat > tests/MyDesktopApplication.Core.Tests/QuestionTypeTests.cs << 'EOF'
using MyDesktopApplication.Core.Entities;
using Shouldly;
using Xunit;

namespace MyDesktopApplication.Core.Tests;

public class QuestionTypeTests
{
    [Theory]
    [InlineData(QuestionType.Population, "Population")]
    [InlineData(QuestionType.Area, "Area (km²)")]
    [InlineData(QuestionType.GdpTotal, "GDP (Total)")]
    [InlineData(QuestionType.GdpPerCapita, "GDP per Capita")]
    [InlineData(QuestionType.PopulationDensity, "Population Density")]
    [InlineData(QuestionType.LiteracyRate, "Literacy Rate")]
    [InlineData(QuestionType.Hdi, "Human Development Index")]
    [InlineData(QuestionType.LifeExpectancy, "Life Expectancy")]
    public void GetLabel_ReturnsCorrectLabel(QuestionType questionType, string expectedLabel)
    {
        var label = questionType.GetLabel();
        label.ShouldBe(expectedLabel);
    }

    [Fact]
    public void GetValue_ReturnsCorrectValueForCountry()
    {
        var country = new Country
        {
            Code = "USA",
            Name = "United States",
            Iso2 = "US",
            Continent = "North America",
            Population = 331_000_000,
            Area = 9_833_520,
            GdpTotal = 25_462_700_000_000,
            GdpPerCapita = 76_330,
            PopulationDensity = 33.6,
            LiteracyRate = 99.0,
            Hdi = 0.921,
            LifeExpectancy = 77.0
        };

        QuestionType.Population.GetValue(country).ShouldBe(331_000_000);
        QuestionType.Area.GetValue(country).ShouldBe(9_833_520);
        QuestionType.GdpTotal.GetValue(country).ShouldBe(25_462_700_000_000);
        QuestionType.GdpPerCapita.GetValue(country).ShouldBe(76_330);
        QuestionType.PopulationDensity.GetValue(country).ShouldBe(33.6);
        QuestionType.LiteracyRate.GetValue(country).ShouldBe(99.0);
        QuestionType.Hdi.GetValue(country).ShouldBe(0.921);
        QuestionType.LifeExpectancy.GetValue(country).ShouldBe(77.0);
    }

    [Fact]
    public void FormatValue_UsesEnoughPrecisionToDistinguishCloseValues()
    {
        // This is the key test - China (1,411,750,000) vs India (1,417,173,173)
        // should NOT both show as "1.4B" - that's confusing!
        var chinaPopulation = 1_411_750_000.0;
        var indiaPopulation = 1_417_173_173.0;
        
        var chinaFormatted = QuestionType.Population.FormatValue(chinaPopulation);
        var indiaFormatted = QuestionType.Population.FormatValue(indiaPopulation);
        
        // They should be different! Users need to see the difference
        chinaFormatted.ShouldNotBe(indiaFormatted);
        
        // Check the actual values - should show 3 decimal places for billions
        chinaFormatted.ShouldBe("1.412B");
        indiaFormatted.ShouldBe("1.417B");
    }

    [Fact]
    public void FormatValue_FormatsValuesCorrectly()
    {
        // Population formatting
        QuestionType.Population.FormatValue(1_500_000_000).ShouldBe("1.500B");
        QuestionType.Population.FormatValue(50_000_000).ShouldBe("50.00M");
        QuestionType.Population.FormatValue(500_000).ShouldBe("500.00K");
        
        // GDP formatting
        QuestionType.GdpTotal.FormatValue(25_000_000_000_000).ShouldBe("$25.00T");
        QuestionType.GdpTotal.FormatValue(1_500_000_000_000).ShouldBe("$1.50T");
        
        // Other types
        QuestionType.LiteracyRate.FormatValue(99.5).ShouldBe("99.5%");
        QuestionType.Hdi.FormatValue(0.921).ShouldBe("0.921");
        QuestionType.LifeExpectancy.FormatValue(77.5).ShouldBe("77.5 years");
    }
}
EOF

# -----------------------------------------------------------------------------
# Build and Test
# -----------------------------------------------------------------------------
echo ""
echo "=============================================="
echo "  Building..."
echo "=============================================="
dotnet restore MyDesktopApplication.slnx
if dotnet build MyDesktopApplication.slnx; then
    echo ""
    echo "=============================================="
    echo "  Running Tests..."
    echo "=============================================="
    dotnet test MyDesktopApplication.slnx --no-build
    
    echo ""
    echo "=============================================="
    echo "  ✓ All fixes applied successfully!"
    echo "=============================================="
    echo ""
    echo "Changes made:"
    echo "  1. Deleted old shell scripts (cleanup)"
    echo "  2. Updated QuestionType.FormatValue() to use 3 decimal places for billions"
    echo "     - China 1,411,750,000 now shows as '1.412B'"
    echo "     - India 1,417,173,173 now shows as '1.417B'"
    echo "     - No more confusion when values are close!"
    echo "  3. Updated Desktop MainWindow.axaml with improved layout"
    echo "  4. Updated Android MainView.axaml with maximized touch targets"
    echo "     - Full-width country cards for easy tapping"
    echo "     - Larger Next button (56px minimum height)"
    echo "     - Better spacing and layout"
    echo "  5. Updated converters with proper answer state handling"
    echo "  6. Added new test to verify close values are distinguishable"
    echo ""
else
    echo ""
    echo "=============================================="
    echo "  ✗ Build failed - see errors above"
    echo "=============================================="
    exit 1
fi


================================================================================
FILE: .gitattributes
SIZE: .48 KB
MODIFIED: 2025-12-20 02:16:50
================================================================================

# Auto detect text files and perform LF normalization
* text=auto

# Source code
*.cs text diff=csharp
*.csproj text
*.slnx text
*.sln text
*.props text
*.targets text

# XAML
*.axaml text
*.xaml text

# Config
*.json text
*.yml text
*.yaml text
*.xml text

# Scripts
*.sh text eol=lf
*.ps1 text eol=crlf
*.cmd text eol=crlf
*.bat text eol=crlf

# Documentation
*.md text
*.txt text

# Binary
*.png binary
*.jpg binary
*.jpeg binary
*.gif binary
*.ico binary
*.ttf binary
*.woff binary
*.woff2 binary


================================================================================
FILE: .github/dependabot.yml
SIZE: .81 KB
MODIFIED: 2025-12-21 15:35:39
================================================================================

version: 2
updates:
  - package-ecosystem: "nuget"
    directory: "/"
    schedule:
      interval: "weekly"
    open-pull-requests-limit: 10
    groups:
      avalonia:
        patterns:
          - "Avalonia*"
      microsoft:
        patterns:
          - "Microsoft.*"
      opentelemetry:
        patterns:
          - "OpenTelemetry*"
      testing:
        patterns:
          - "xunit*"
          - "Shouldly*"
          - "NSubstitute*"
          - "Bogus"
          - "coverlet*"
          - "Testcontainers*"
    ignore:
      # Ignore FluentAssertions (commercial license)
      - dependency-name: "FluentAssertions"
      # Ignore Moq (compromised)
      - dependency-name: "Moq"
      
  - package-ecosystem: "github-actions"
    directory: "/"
    schedule:
      interval: "weekly"
    open-pull-requests-limit: 5


================================================================================
FILE: .github/workflows/build-and-release.yml
SIZE: 6.41 KB
MODIFIED: 2025-12-24 20:00:26
================================================================================

name: Build and Release

on:
  push:
    branches: [master, main]
  pull_request:
    branches: [master, main]

env:
  DOTNET_VERSION: '10.0.x'
  DOTNET_NOLOGO: true
  DOTNET_CLI_TELEMETRY_OPTOUT: true

jobs:
  build-and-test:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v6

      - name: Setup .NET
        uses: actions/setup-dotnet@v5
        with:
          dotnet-version: ${{ env.DOTNET_VERSION }}

      - name: Cache NuGet packages
        uses: actions/cache@v5
        with:
          path: ~/.nuget/packages
          key: ${{ runner.os }}-nuget-${{ hashFiles('**/*.csproj', '**/Directory.Packages.props') }}
          restore-keys: ${{ runner.os }}-nuget-

      - name: Restore
        run: dotnet restore

      - name: Build
        run: dotnet build --configuration Release --no-restore

      - name: Test
        run: dotnet test --configuration Release --no-build --verbosity normal

  build-desktop:
    needs: build-and-test
    if: github.event_name == 'push' && (github.ref == 'refs/heads/master' || github.ref == 'refs/heads/main')
    strategy:
      matrix:
        include:
          - os: windows-latest
            rid: win-x64
            artifact: MyDesktopApplication-win-x64
          - os: windows-latest
            rid: win-arm64
            artifact: MyDesktopApplication-win-arm64
          - os: ubuntu-latest
            rid: linux-x64
            artifact: MyDesktopApplication-linux-x64
          - os: ubuntu-latest
            rid: linux-arm64
            artifact: MyDesktopApplication-linux-arm64
          - os: macos-latest
            rid: osx-x64
            artifact: MyDesktopApplication-osx-x64
          - os: macos-latest
            rid: osx-arm64
            artifact: MyDesktopApplication-osx-arm64
    runs-on: ${{ matrix.os }}
    steps:
      - name: Checkout
        uses: actions/checkout@v6

      - name: Setup .NET
        uses: actions/setup-dotnet@v5
        with:
          dotnet-version: ${{ env.DOTNET_VERSION }}

      - name: Publish
        run: |
          dotnet publish src/MyDesktopApplication.Desktop/MyDesktopApplication.Desktop.csproj \
            --configuration Release \
            --runtime ${{ matrix.rid }} \
            --self-contained true \
            -p:PublishSingleFile=true \
            -p:Version=1.0.${{ github.run_number }} \
            -p:AssemblyVersion=1.0.${{ github.run_number }}.0 \
            -p:FileVersion=1.0.${{ github.run_number }}.0 \
            --output ./publish/${{ matrix.artifact }}

      - name: Upload artifact
        uses: actions/upload-artifact@v6
        with:
          name: ${{ matrix.artifact }}
          path: ./publish/${{ matrix.artifact }}

  build-android:
    needs: build-and-test
    if: github.event_name == 'push' && (github.ref == 'refs/heads/master' || github.ref == 'refs/heads/main')
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v6

      - name: Setup .NET
        uses: actions/setup-dotnet@v5
        with:
          dotnet-version: ${{ env.DOTNET_VERSION }}

      - name: Setup Java
        uses: actions/setup-java@v4
        with:
          distribution: 'temurin'
          java-version: '21'

      - name: Install Android workload
        run: dotnet workload install android

      - name: Build Android APK
        run: |
          dotnet publish src/MyDesktopApplication.Android/MyDesktopApplication.Android.csproj \
            --configuration Release \
            -p:ApplicationVersion=${{ github.run_number }} \
            -p:ApplicationDisplayVersion="1.0.${{ github.run_number }}" \
            --output ./publish/android

      - name: Find and rename APK
        run: |
          mkdir -p ./publish/final
          APK=$(find ./publish/android -name "*.apk" | head -1)
          if [ -n "$APK" ]; then
            cp "$APK" "./publish/final/MyDesktopApplication-1.0.${{ github.run_number }}.apk"
          fi

      - name: Upload Android artifact
        uses: actions/upload-artifact@v6
        with:
          name: MyDesktopApplication-android
          path: ./publish/final/*.apk

  release:
    needs: [build-desktop, build-android]
    if: github.event_name == 'push' && (github.ref == 'refs/heads/master' || github.ref == 'refs/heads/main')
    runs-on: ubuntu-latest
    permissions:
      contents: write
    steps:
      - name: Download all artifacts
        uses: actions/download-artifact@v7
        with:
          path: ./artifacts

      - name: Prepare release assets
        run: |
          mkdir -p ./release
          
          # Package desktop builds
          for dir in ./artifacts/MyDesktopApplication-*; do
            if [ -d "$dir" ] && [[ "$dir" != *"android"* ]]; then
              name=$(basename "$dir")
              if [[ "$name" == *"win"* ]]; then
                cd "$dir" && zip -r "../../release/${name}-1.0.${{ github.run_number }}.zip" . && cd ../..
              else
                cd "$dir" && tar -czvf "../../release/${name}-1.0.${{ github.run_number }}.tar.gz" . && cd ../..
              fi
            fi
          done
          
          # Copy Android APK
          if [ -d "./artifacts/MyDesktopApplication-android" ]; then
            cp ./artifacts/MyDesktopApplication-android/*.apk ./release/ 2>/dev/null || true
          fi
          
          ls -la ./release/

      - name: Create Release
        uses: softprops/action-gh-release@v2
        with:
          tag_name: v1.0.${{ github.run_number }}
          name: Release 1.0.${{ github.run_number }}
          body: |
            ## Release 1.0.${{ github.run_number }}
            
            ### Downloads
            - **Windows x64**: MyDesktopApplication-win-x64-1.0.${{ github.run_number }}.zip
            - **Windows ARM64**: MyDesktopApplication-win-arm64-1.0.${{ github.run_number }}.zip
            - **Linux x64**: MyDesktopApplication-linux-x64-1.0.${{ github.run_number }}.tar.gz
            - **Linux ARM64**: MyDesktopApplication-linux-arm64-1.0.${{ github.run_number }}.tar.gz
            - **macOS x64**: MyDesktopApplication-osx-x64-1.0.${{ github.run_number }}.tar.gz
            - **macOS ARM64**: MyDesktopApplication-osx-arm64-1.0.${{ github.run_number }}.tar.gz
            - **Android**: MyDesktopApplication-1.0.${{ github.run_number }}.apk
            
            ### Changes
            - Auto-release from commit ${{ github.sha }}
          files: ./release/*
          draft: false
          prerelease: false
          generate_release_notes: true


================================================================================
FILE: .gitignore
SIZE: .40 KB
MODIFIED: 2025-12-21 10:33:59
================================================================================

# Build outputs
bin/
obj/
out/

# IDE
.vs/
.vscode/
.idea/
*.user
*.suo
*.userosscache
*.sln.docstates

# NuGet
*.nupkg
packages/
project.lock.json
project.fragment.lock.json

# Test results
TestResults/
coverage/
*.coverage
*.coveragexml

# OS files
.DS_Store
Thumbs.db

# Logs
*.log
logs/

# Local settings
appsettings.local.json
appsettings.*.local.json

# LLM export (optional - uncomment to ignore)
# docs/llm/


================================================================================
FILE: MyDesktopApplication.slnx
SIZE: .85 KB
MODIFIED: 2025-12-21 19:27:18
================================================================================

<Solution>
  <Folder Name="/src/">
    <Project Path="src/MyDesktopApplication.Android/MyDesktopApplication.Android.csproj" />
    <Project Path="src/MyDesktopApplication.Core/MyDesktopApplication.Core.csproj" />
    <Project Path="src/MyDesktopApplication.Desktop/MyDesktopApplication.Desktop.csproj" />
    <Project Path="src/MyDesktopApplication.Infrastructure/MyDesktopApplication.Infrastructure.csproj" />
    <Project Path="src/MyDesktopApplication.Shared/MyDesktopApplication.Shared.csproj" />
  </Folder>
  <Folder Name="/tests/">
    <Project Path="tests/MyDesktopApplication.Core.Tests/MyDesktopApplication.Core.Tests.csproj" />
    <Project Path="tests/MyDesktopApplication.Integration.Tests/MyDesktopApplication.Integration.Tests.csproj" />
    <Project Path="tests/MyDesktopApplication.UI.Tests/MyDesktopApplication.UI.Tests.csproj" />
  </Folder>
</Solution>


================================================================================
FILE: README.md
SIZE: 2.68 KB
MODIFIED: 2025-12-20 02:30:21
================================================================================

# MyDesktopApplication

[![CI](https://github.com/kusl/MyDesktopApplication/actions/workflows/ci.yml/badge.svg)](https://github.com/kusl/MyDesktopApplication/actions/workflows/ci.yml)
[![Release](https://github.com/kusl/MyDesktopApplication/actions/workflows/release.yml/badge.svg)](https://github.com/kusl/MyDesktopApplication/actions/workflows/release.yml)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

Cross-platform application built with **Avalonia UI** and **.NET 10**.

## Downloads

| Platform | Architecture | Download |
|----------|--------------|----------|
| Windows | x64 | [Download](https://github.com/kusl/MyDesktopApplication/releases/latest) |
| Windows | ARM64 | [Download](https://github.com/kusl/MyDesktopApplication/releases/latest) |
| Linux | x64 | [Download](https://github.com/kusl/MyDesktopApplication/releases/latest) |
| Linux | ARM64 | [Download](https://github.com/kusl/MyDesktopApplication/releases/latest) |
| macOS | x64 (Intel) | [Download](https://github.com/kusl/MyDesktopApplication/releases/latest) |
| macOS | ARM64 (Apple Silicon) | [Download](https://github.com/kusl/MyDesktopApplication/releases/latest) |
| Android | APK | [Download](https://github.com/kusl/MyDesktopApplication/releases/latest) |

## Quick Start

### Desktop

```bash
dotnet restore
dotnet build
dotnet run --project src/MyDesktopApplication.Desktop
```

### Android (requires Android workload)

```bash
# Install Android workload (one-time)
dotnet workload install android

# Build APK
dotnet build src/MyDesktopApplication.Android -c Release
```

## Run Tests

```bash
dotnet test
```

## Create Release

Push a tag to create a release with binaries for all platforms:

```bash
git tag v1.0.0
git push origin v1.0.0
```

## Project Structure

```
├── src/
│   ├── MyDesktopApplication.Core/          # Domain logic
│   ├── MyDesktopApplication.Infrastructure/ # Data access
│   ├── MyDesktopApplication.Shared/        # Shared ViewModels
│   ├── MyDesktopApplication.Desktop/       # Desktop (Windows/Linux/macOS)
│   └── MyDesktopApplication.Android/       # Android
└── tests/
    ├── MyDesktopApplication.Core.Tests/
    ├── MyDesktopApplication.Integration.Tests/
    └── MyDesktopApplication.UI.Tests/
```

## Supported Platforms

| Platform | Status |
|----------|--------|
| Windows x64 | ✅ |
| Windows ARM64 | ✅ |
| Linux x64 | ✅ |
| Linux ARM64 | ✅ |
| macOS x64 | ✅ |
| macOS ARM64 | ✅ |
| Android | ✅ |
| iOS | ❌ (requires Apple Developer account - $99/year) |

## License

MIT License - Free for any use.

All dependencies are MIT, Apache-2.0, BSD, or Public Domain licensed.


================================================================================
FILE: src/MyDesktopApplication.Android/AndroidManifest.xml
SIZE: .49 KB
MODIFIED: 2025-12-21 10:17:25
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android">
    <application 
        android:allowBackup="true" 
        android:icon="@drawable/icon" 
        android:label="@string/app_name"
        android:supportsRtl="true"
        android:theme="@style/MyTheme.NoActionBar">
    </application>
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.INTERNET" />
</manifest>


================================================================================
FILE: src/MyDesktopApplication.Android/App.axaml
SIZE: .25 KB
MODIFIED: 2025-12-21 10:17:25
================================================================================

<Application xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             x:Class="MyDesktopApplication.Android.App">
    <Application.Styles>
        <FluentTheme />
    </Application.Styles>
</Application>


================================================================================
FILE: src/MyDesktopApplication.Android/App.cs
SIZE: 1.39 KB
MODIFIED: 2025-12-21 22:48:06
================================================================================

using Avalonia;
using Avalonia.Controls.ApplicationLifetimes;
using Avalonia.Markup.Xaml;
using Microsoft.Extensions.DependencyInjection;
using MyDesktopApplication.Android.Views;
using MyDesktopApplication.Core.Interfaces;
using MyDesktopApplication.Infrastructure;
using MyDesktopApplication.Shared.ViewModels;

namespace MyDesktopApplication.Android;

public class App : Avalonia.Application
{
    private IServiceProvider? _services;

    public override void Initialize()
    {
        AvaloniaXamlLoader.Load(this);
    }

    public override async void OnFrameworkInitializationCompleted()
    {
        var services = new ServiceCollection();

        var dbPath = Path.Combine(
            Environment.GetFolderPath(Environment.SpecialFolder.LocalApplicationData),
            "countryquiz.db");

        services.AddInfrastructure(dbPath);
        services.AddTransient<CountryQuizViewModel>();

        _services = services.BuildServiceProvider();

        await DependencyInjection.InitializeDatabaseAsync(_services);

        if (ApplicationLifetime is ISingleViewApplicationLifetime singleViewLifetime)
        {
            var vm = _services.GetRequiredService<CountryQuizViewModel>();
            var mainView = new MainView { DataContext = vm };
            singleViewLifetime.MainView = mainView;

            _ = vm.InitializeAsync();
        }

        base.OnFrameworkInitializationCompleted();
    }
}


================================================================================
FILE: src/MyDesktopApplication.Android/Converters/Converters.cs
SIZE: 2.35 KB
MODIFIED: 2025-12-24 20:00:26
================================================================================

using System;
using System.Collections.Generic;
using System.Globalization;
using Avalonia.Data.Converters;
using Avalonia.Media;
using MyDesktopApplication.Core.Entities;

namespace MyDesktopApplication.Android.Converters;

/// <summary>
/// Converts QuestionType enum to human-readable label.
/// </summary>
public class QuestionTypeLabelConverter : IValueConverter
{
    public static readonly QuestionTypeLabelConverter Instance = new();

    public object? Convert(object? value, Type targetType, object? parameter, CultureInfo culture)
    {
        if (value is QuestionType qt)
        {
            return qt.GetLabel();
        }
        return value?.ToString() ?? "";
    }

    public object? ConvertBack(object? value, Type targetType, object? parameter, CultureInfo culture)
    {
        throw new NotSupportedException();
    }
}

/// <summary>
/// Converts answer state (IsCorrect, IsWrong) to background color.
/// Only colors the selected answer - unselected answers stay default.
/// </summary>
public class AnswerStateToBackgroundConverter : IMultiValueConverter
{
    public static readonly AnswerStateToBackgroundConverter Instance = new();

    public object? Convert(IList<object?> values, Type targetType, object? parameter, CultureInfo culture)
    {
        if (values.Count >= 2 && values[0] is bool isCorrect && values[1] is bool isWrong)
        {
            if (isCorrect)
                return new SolidColorBrush(Color.FromRgb(76, 175, 80)); // Green #4CAF50
            if (isWrong)
                return new SolidColorBrush(Color.FromRgb(244, 67, 54)); // Red #F44336
        }
        // Default - not selected or not answered yet
        return new SolidColorBrush(Color.FromRgb(45, 74, 106)); // Dark blue #2D4A6A
    }
}

/// <summary>
/// Converts answer state to foreground (text) color.
/// </summary>
public class AnswerStateToForegroundConverter : IMultiValueConverter
{
    public static readonly AnswerStateToForegroundConverter Instance = new();

    public object? Convert(IList<object?> values, Type targetType, object? parameter, CultureInfo culture)
    {
        if (values.Count >= 2 && values[0] is bool isCorrect && values[1] is bool isWrong)
        {
            if (isCorrect || isWrong)
                return new SolidColorBrush(Colors.White);
        }
        // Default text color
        return new SolidColorBrush(Colors.White);
    }
}


================================================================================
FILE: src/MyDesktopApplication.Android/MainActivity.cs
SIZE: .58 KB
MODIFIED: 2025-12-21 10:25:16
================================================================================

using Android.App;
using Android.Content.PM;
using Avalonia;
using Avalonia.Android;

namespace MyDesktopApplication.Android;

[Activity(
    Label = "MyDesktopApplication",
    Theme = "@style/MyTheme.NoActionBar",
    Icon = "@drawable/icon",
    MainLauncher = true,
    ConfigurationChanges = ConfigChanges.Orientation | ConfigChanges.ScreenSize | ConfigChanges.UiMode)]
public class MainActivity : AvaloniaMainActivity<App>
{
    protected override AppBuilder CustomizeAppBuilder(AppBuilder builder)
    {
        return base.CustomizeAppBuilder(builder)
            .LogToTrace();
    }
}


================================================================================
FILE: src/MyDesktopApplication.Android/MyDesktopApplication.Android.csproj
SIZE: .94 KB
MODIFIED: 2025-12-22 03:39:08
================================================================================

<Project Sdk="Microsoft.NET.Sdk">
  <PropertyGroup>
    <TargetFramework>net10.0-android</TargetFramework>
    <OutputType>Exe</OutputType>
    <SupportedOSPlatformVersion>24</SupportedOSPlatformVersion>
    <ApplicationId>com.mydesktopapplication.app</ApplicationId>
    <ApplicationVersion>1</ApplicationVersion>
    <ApplicationDisplayVersion>1.0</ApplicationDisplayVersion>
  </PropertyGroup>

  <ItemGroup>
    <ProjectReference Include="..\MyDesktopApplication.Shared\MyDesktopApplication.Shared.csproj" />
    <ProjectReference Include="..\MyDesktopApplication.Core\MyDesktopApplication.Core.csproj" />
    <ProjectReference Include="..\MyDesktopApplication.Infrastructure\MyDesktopApplication.Infrastructure.csproj" />
  </ItemGroup>

  <ItemGroup>
    <PackageReference Include="Avalonia.Android" />
    <PackageReference Include="Avalonia.Themes.Fluent" />
    <PackageReference Include="Microsoft.Extensions.DependencyInjection" />
  </ItemGroup>
</Project>


================================================================================
FILE: src/MyDesktopApplication.Android/Resources/drawable/icon.xml
SIZE: .41 KB
MODIFIED: 2025-12-21 10:17:25
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="108dp"
    android:height="108dp"
    android:viewportWidth="108"
    android:viewportHeight="108">
    <path
        android:fillColor="#3F51B5"
        android:pathData="M0,0h108v108h-108z"/>
    <path
        android:fillColor="#FFFFFF"
        android:pathData="M54,27 L81,81 L27,81 Z"/>
</vector>


================================================================================
FILE: src/MyDesktopApplication.Android/Resources/values/strings.xml
SIZE: .11 KB
MODIFIED: 2025-12-21 10:17:25
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="app_name">MyDesktopApplication</string>
</resources>


================================================================================
FILE: src/MyDesktopApplication.Android/Resources/values/styles.xml
SIZE: .40 KB
MODIFIED: 2025-12-21 11:20:44
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<resources>
    <style name="MyTheme" parent="Theme.AppCompat.Light.DarkActionBar">
    </style>
    <style name="MyTheme.NoActionBar" parent="Theme.AppCompat.Light.NoActionBar">
        <item name="android:windowBackground">@android:color/white</item>
        <item name="windowActionBar">false</item>
        <item name="windowNoTitle">true</item>
    </style>
</resources>


================================================================================
FILE: src/MyDesktopApplication.Android/Views/MainView.axaml
SIZE: 8.63 KB
MODIFIED: 2025-12-24 20:00:26
================================================================================

<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:MyDesktopApplication.Shared.ViewModels"
             xmlns:conv="using:MyDesktopApplication.Android.Converters"
             x:Class="MyDesktopApplication.Android.Views.MainView"
             x:DataType="vm:CountryQuizViewModel">

    <UserControl.Resources>
        <conv:QuestionTypeLabelConverter x:Key="QuestionTypeLabelConverter"/>
        <conv:AnswerStateToBackgroundConverter x:Key="AnswerStateBgConverter"/>
        <conv:AnswerStateToForegroundConverter x:Key="AnswerStateFgConverter"/>
    </UserControl.Resources>

    <ScrollViewer>
        <StackPanel Margin="16" Spacing="12">
            
            <!-- Header with Score -->
            <Border Background="#1E3A5F" CornerRadius="12" Padding="16">
                <Grid ColumnDefinitions="*,Auto">
                    <StackPanel>
                        <TextBlock Text="Country Quiz" 
                                   FontSize="24" FontWeight="Bold" Foreground="White"/>
                        <TextBlock Text="{Binding AccuracyText}" 
                                   FontSize="14" Foreground="#B0C4DE"/>
                    </StackPanel>
                    <StackPanel Grid.Column="1" HorizontalAlignment="Right">
                        <TextBlock Text="{Binding ScoreText}" 
                                   FontSize="18" FontWeight="SemiBold" Foreground="White"/>
                        <TextBlock Text="{Binding StreakText}" 
                                   FontSize="14" Foreground="#90EE90"/>
                        <TextBlock Text="{Binding BestStreakText}" 
                                   FontSize="12" Foreground="#FFD700"/>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- Question Type Selector -->
            <Border Background="#2D4A6A" CornerRadius="8" Padding="12">
                <StackPanel>
                    <TextBlock Text="Category:" FontSize="14" Foreground="#B0C4DE" Margin="0,0,0,8"/>
                    <ComboBox ItemsSource="{Binding QuestionTypes}"
                              SelectedItem="{Binding SelectedQuestionType}"
                              HorizontalAlignment="Stretch"
                              MinHeight="48">
                        <ComboBox.ItemTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding Converter={StaticResource QuestionTypeLabelConverter}}"
                                           FontSize="16"/>
                            </DataTemplate>
                        </ComboBox.ItemTemplate>
                    </ComboBox>
                </StackPanel>
            </Border>

            <!-- Question Text -->
            <TextBlock Text="{Binding QuestionText}"
                       FontSize="20" FontWeight="SemiBold"
                       TextAlignment="Center" TextWrapping="Wrap"
                       Foreground="White" Margin="0,8"/>

            <!-- Country Cards - Full Width for Easy Tapping -->
            <Button Command="{Binding SelectCountryCommand}"
                    CommandParameter="1"
                    HorizontalAlignment="Stretch"
                    HorizontalContentAlignment="Stretch"
                    MinHeight="80"
                    Padding="0"
                    CornerRadius="12">
                <Button.Background>
                    <MultiBinding Converter="{StaticResource AnswerStateBgConverter}">
                        <Binding Path="IsCountry1Correct"/>
                        <Binding Path="IsCountry1Wrong"/>
                    </MultiBinding>
                </Button.Background>
                <Border Padding="16" HorizontalAlignment="Stretch">
                    <Grid ColumnDefinitions="Auto,*,Auto">
                        <TextBlock Text="{Binding Country1Flag}" 
                                   FontSize="40" VerticalAlignment="Center"/>
                        <StackPanel Grid.Column="1" Margin="16,0" VerticalAlignment="Center">
                            <TextBlock Text="{Binding Country1Name}" 
                                       FontSize="20" FontWeight="SemiBold">
                                <TextBlock.Foreground>
                                    <MultiBinding Converter="{StaticResource AnswerStateFgConverter}">
                                        <Binding Path="IsCountry1Correct"/>
                                        <Binding Path="IsCountry1Wrong"/>
                                    </MultiBinding>
                                </TextBlock.Foreground>
                            </TextBlock>
                            <TextBlock Text="{Binding Country1Value}"
                                       FontSize="14" Foreground="#B0C4DE"
                                       IsVisible="{Binding HasAnswered}"/>
                        </StackPanel>
                        <TextBlock Grid.Column="2" Text="[1]" 
                                   FontSize="14" Foreground="#666"
                                   VerticalAlignment="Center"/>
                    </Grid>
                </Border>
            </Button>

            <!-- VS Separator -->
            <TextBlock Text="VS" FontSize="16" FontWeight="Bold"
                       TextAlignment="Center" Foreground="#666"/>

            <Button Command="{Binding SelectCountryCommand}"
                    CommandParameter="2"
                    HorizontalAlignment="Stretch"
                    HorizontalContentAlignment="Stretch"
                    MinHeight="80"
                    Padding="0"
                    CornerRadius="12">
                <Button.Background>
                    <MultiBinding Converter="{StaticResource AnswerStateBgConverter}">
                        <Binding Path="IsCountry2Correct"/>
                        <Binding Path="IsCountry2Wrong"/>
                    </MultiBinding>
                </Button.Background>
                <Border Padding="16" HorizontalAlignment="Stretch">
                    <Grid ColumnDefinitions="Auto,*,Auto">
                        <TextBlock Text="{Binding Country2Flag}" 
                                   FontSize="40" VerticalAlignment="Center"/>
                        <StackPanel Grid.Column="1" Margin="16,0" VerticalAlignment="Center">
                            <TextBlock Text="{Binding Country2Name}" 
                                       FontSize="20" FontWeight="SemiBold">
                                <TextBlock.Foreground>
                                    <MultiBinding Converter="{StaticResource AnswerStateFgConverter}">
                                        <Binding Path="IsCountry2Correct"/>
                                        <Binding Path="IsCountry2Wrong"/>
                                    </MultiBinding>
                                </TextBlock.Foreground>
                            </TextBlock>
                            <TextBlock Text="{Binding Country2Value}"
                                       FontSize="14" Foreground="#B0C4DE"
                                       IsVisible="{Binding HasAnswered}"/>
                        </StackPanel>
                        <TextBlock Grid.Column="2" Text="[2]" 
                                   FontSize="14" Foreground="#666"
                                   VerticalAlignment="Center"/>
                    </Grid>
                </Border>
            </Button>

            <!-- Result Message -->
            <TextBlock Text="{Binding ResultMessage}"
                       FontSize="18" FontWeight="SemiBold"
                       TextAlignment="Center"
                       Foreground="#90EE90"
                       IsVisible="{Binding HasAnswered}"
                       Margin="0,8"/>

            <!-- Next Round Button - NO EMOJIS -->
            <Button Content="Next Round"
                    Command="{Binding NextRoundCommand}"
                    IsVisible="{Binding HasAnswered}"
                    HorizontalAlignment="Stretch"
                    MinHeight="56"
                    FontSize="18"
                    FontWeight="SemiBold"
                    Background="#4CAF50"
                    Foreground="White"
                    CornerRadius="12"/>

            <!-- Reset Button -->
            <Button Content="Reset Game"
                    Command="{Binding ResetGameCommand}"
                    HorizontalAlignment="Stretch"
                    MinHeight="48"
                    FontSize="14"
                    Background="#666"
                    Foreground="White"
                    CornerRadius="8"
                    Margin="0,16,0,0"/>
                    
        </StackPanel>
    </ScrollViewer>
</UserControl>


================================================================================
FILE: src/MyDesktopApplication.Android/Views/MainView.axaml.cs
SIZE: .18 KB
MODIFIED: 2025-12-21 12:33:54
================================================================================

using Avalonia.Controls;

namespace MyDesktopApplication.Android.Views;

public partial class MainView : UserControl
{
    public MainView()
    {
        InitializeComponent();
    }
}


================================================================================
FILE: src/MyDesktopApplication.Core/Entities/Country.cs
SIZE: 1.26 KB
MODIFIED: 2025-12-21 22:48:06
================================================================================

namespace MyDesktopApplication.Core.Entities;

/// <summary>
/// Represents a country with statistical data for the quiz
/// </summary>
public class Country
{
    public required string Code { get; init; }
    public required string Name { get; init; }
    public string Iso2 { get; init; } = string.Empty;
    public string Continent { get; init; } = string.Empty;

    // Statistical properties (harmonized naming)
    public double Population { get; init; }
    public double Area { get; init; }
    public double GdpTotal { get; init; }
    public double GdpPerCapita { get; init; }
    public double PopulationDensity { get; init; }
    public double LiteracyRate { get; init; }
    public double Hdi { get; init; }
    public double LifeExpectancy { get; init; }

    /// <summary>
    /// Gets the country flag emoji based on ISO2 code
    /// </summary>
    public string Flag => GetFlagEmoji();

    private string GetFlagEmoji()
    {
        if (string.IsNullOrEmpty(Iso2) || Iso2.Length != 2)
            return "🏳️";

        var c1 = char.ToUpperInvariant(Iso2[0]);
        var c2 = char.ToUpperInvariant(Iso2[1]);
        var ri1 = 0x1F1E6 + (c1 - 'A');
        var ri2 = 0x1F1E6 + (c2 - 'A');
        return char.ConvertFromUtf32(ri1) + char.ConvertFromUtf32(ri2);
    }
}


================================================================================
FILE: src/MyDesktopApplication.Core/Entities/EntityBase.cs
SIZE: .34 KB
MODIFIED: 2025-12-21 20:46:56
================================================================================

namespace MyDesktopApplication.Core.Entities;

/// <summary>
/// Base class for all entities. Provides common properties.
/// </summary>
public abstract class EntityBase
{
    public Guid Id { get; set; } = Guid.NewGuid();
    public DateTime CreatedAt { get; set; } = DateTime.UtcNow;
    public DateTime UpdatedAt { get; set; } = DateTime.UtcNow;
}


================================================================================
FILE: src/MyDesktopApplication.Core/Entities/GameState.cs
SIZE: 1.55 KB
MODIFIED: 2025-12-21 22:56:19
================================================================================

namespace MyDesktopApplication.Core.Entities;

/// <summary>
/// Stores game state for the Country Quiz game.
/// Inherits from EntityBase to work with IRepository T constraint.
/// </summary>
public class GameState : EntityBase
{
    public string UserId { get; set; } = "default";
    public int CurrentScore { get; set; }
    public int HighScore { get; set; }
    public int CurrentStreak { get; set; }
    public int BestStreak { get; set; }
    public int TotalCorrect { get; set; }
    public int TotalAnswered { get; set; }
    public QuestionType? SelectedQuestionType { get; set; }

    // Calculated properties
    public double Accuracy => TotalAnswered > 0 ? (double)TotalCorrect / TotalAnswered : 0;
    public double AccuracyPercentage => Accuracy * 100;

    /// <summary>
    /// Records an answer and updates scores accordingly.
    /// </summary>
    public void RecordAnswer(bool isCorrect)
    {
        TotalAnswered++;
        if (isCorrect)
        {
            TotalCorrect++;
            CurrentScore++;
            CurrentStreak++;
            if (CurrentScore > HighScore) HighScore = CurrentScore;
            if (CurrentStreak > BestStreak) BestStreak = CurrentStreak;
        }
        else
        {
            CurrentStreak = 0;
        }
        UpdatedAt = DateTime.UtcNow;
    }

    /// <summary>
    /// Resets current game but preserves high scores.
    /// </summary>
    public void Reset()
    {
        CurrentScore = 0;
        CurrentStreak = 0;
        // Note: HighScore and BestStreak are preserved
        UpdatedAt = DateTime.UtcNow;
    }
}


================================================================================
FILE: src/MyDesktopApplication.Core/Entities/QuestionType.cs
SIZE: 3.48 KB
MODIFIED: 2025-12-24 19:23:13
================================================================================

namespace MyDesktopApplication.Core.Entities;

public enum QuestionType
{
    Population,
    Area,
    GdpTotal,
    GdpPerCapita,
    PopulationDensity,
    LiteracyRate,
    Hdi,
    LifeExpectancy
}

public static class QuestionTypeExtensions
{
    public static string GetLabel(this QuestionType questionType) => questionType switch
    {
        QuestionType.Population => "Population",
        QuestionType.Area => "Area (km²)",
        QuestionType.GdpTotal => "GDP (Total)",
        QuestionType.GdpPerCapita => "GDP per Capita",
        QuestionType.PopulationDensity => "Population Density",
        QuestionType.LiteracyRate => "Literacy Rate",
        QuestionType.Hdi => "Human Development Index",
        QuestionType.LifeExpectancy => "Life Expectancy",
        _ => questionType.ToString()
    };

    public static double GetValue(this QuestionType questionType, Country country) => questionType switch
    {
        QuestionType.Population => country.Population,
        QuestionType.Area => country.Area,
        QuestionType.GdpTotal => country.GdpTotal,
        QuestionType.GdpPerCapita => country.GdpPerCapita,
        QuestionType.PopulationDensity => country.PopulationDensity,
        QuestionType.LiteracyRate => country.LiteracyRate,
        QuestionType.Hdi => country.Hdi,
        QuestionType.LifeExpectancy => country.LifeExpectancy,
        _ => 0
    };

    /// <summary>
    /// Format a value for display with appropriate precision.
    /// Uses exact values to avoid confusion when numbers are close.
    /// </summary>
    public static string FormatValue(this QuestionType questionType, double value) => questionType switch
    {
        QuestionType.Population => FormatLargeNumber(value),
        QuestionType.Area => FormatArea(value),
        QuestionType.GdpTotal => FormatCurrency(value),
        QuestionType.GdpPerCapita => $"${value:N0}",
        QuestionType.PopulationDensity => $"{value:N1}/km²",
        QuestionType.LiteracyRate => $"{value:N1}%",
        QuestionType.Hdi => $"{value:N3}",
        QuestionType.LifeExpectancy => $"{value:N1} years",
        _ => value.ToString("N0")
    };

    /// <summary>
    /// Format large numbers with enough precision to distinguish close values.
    /// For example, 1,411,750,000 vs 1,417,173,173 should NOT both show as "1.4B"
    /// </summary>
    private static string FormatLargeNumber(double value)
    {
        // Use exact format for smaller numbers
        if (value < 1_000) return value.ToString("N0");
        if (value < 1_000_000) return $"{value / 1_000:N2}K";  // 2 decimal places
        if (value < 1_000_000_000) return $"{value / 1_000_000:N2}M";  // 2 decimal places

        // For billions, use 3 decimal places to distinguish close values
        // e.g., 1.412B vs 1.417B for China/India
        if (value < 1_000_000_000_000) return $"{value / 1_000_000_000:N3}B";

        return $"{value / 1_000_000_000_000:N3}T";
    }

    private static string FormatArea(double value)
    {
        if (value < 1_000) return $"{value:N0} km²";
        if (value < 1_000_000) return $"{value / 1_000:N2}K km²";
        return $"{value / 1_000_000:N2}M km²";
    }

    private static string FormatCurrency(double value)
    {
        if (value < 1_000) return $"${value:N0}";
        if (value < 1_000_000) return $"${value / 1_000:N2}K";
        if (value < 1_000_000_000) return $"${value / 1_000_000:N2}M";
        if (value < 1_000_000_000_000) return $"${value / 1_000_000_000:N2}B";
        return $"${value / 1_000_000_000_000:N2}T";
    }
}


================================================================================
FILE: src/MyDesktopApplication.Core/Entities/TodoItem.cs
SIZE: .54 KB
MODIFIED: 2025-12-21 22:48:06
================================================================================

namespace MyDesktopApplication.Core.Entities;

public class TodoItem : EntityBase
{
    public required string Title { get; set; }
    public string? Description { get; set; }
    public int Priority { get; set; }
    public bool IsCompleted { get; set; }
    public DateTime? CompletedAt { get; set; }
    public DateTime? DueDate { get; set; }

    public void MarkComplete()
    {
        IsCompleted = true;
        CompletedAt = DateTime.UtcNow;
    }

    public void MarkIncomplete()
    {
        IsCompleted = false;
        CompletedAt = null;
    }
}


================================================================================
FILE: src/MyDesktopApplication.Core/Interfaces/IGameStateRepository.cs
SIZE: .33 KB
MODIFIED: 2025-12-21 20:42:05
================================================================================

using MyDesktopApplication.Core.Entities;

namespace MyDesktopApplication.Core.Interfaces;

public interface IGameStateRepository : IRepository<GameState>
{
    Task<GameState> GetOrCreateAsync(string userId, CancellationToken cancellationToken = default);
    Task SaveAsync(GameState gameState, CancellationToken cancellationToken = default);
}


================================================================================
FILE: src/MyDesktopApplication.Core/Interfaces/IRepository.cs
SIZE: .74 KB
MODIFIED: 2025-12-20 01:51:45
================================================================================

using System.Linq.Expressions;
using MyDesktopApplication.Core.Entities;

namespace MyDesktopApplication.Core.Interfaces;

/// <summary>
/// Generic repository interface for data access
/// </summary>
public interface IRepository<T> where T : EntityBase
{
    Task<T?> GetByIdAsync(Guid id, CancellationToken ct = default);
    Task<IReadOnlyList<T>> GetAllAsync(CancellationToken ct = default);
    Task<IReadOnlyList<T>> FindAsync(Expression<Func<T, bool>> predicate, CancellationToken ct = default);
    Task<T> AddAsync(T entity, CancellationToken ct = default);
    Task UpdateAsync(T entity, CancellationToken ct = default);
    Task DeleteAsync(T entity, CancellationToken ct = default);
    Task<bool> ExistsAsync(Guid id, CancellationToken ct = default);
}


================================================================================
FILE: src/MyDesktopApplication.Core/Interfaces/ITodoRepository.cs
SIZE: .54 KB
MODIFIED: 2025-12-21 18:15:44
================================================================================

using MyDesktopApplication.Core.Entities;

namespace MyDesktopApplication.Core.Interfaces;

/// <summary>
/// TodoItem-specific repository interface
/// </summary>
public interface ITodoRepository : IRepository<TodoItem>
{
    Task<IReadOnlyList<TodoItem>> GetCompletedAsync(CancellationToken ct = default);
    Task<IReadOnlyList<TodoItem>> GetPendingAsync(CancellationToken ct = default);
    Task<IReadOnlyList<TodoItem>> GetIncompleteAsync(CancellationToken ct = default);
    Task<IReadOnlyList<TodoItem>> GetOverdueAsync(CancellationToken ct = default);
}


================================================================================
FILE: src/MyDesktopApplication.Core/MyDesktopApplication.Core.csproj
SIZE: .20 KB
MODIFIED: 2025-12-21 12:48:54
================================================================================

<Project Sdk="Microsoft.NET.Sdk">
  <PropertyGroup>
    <TargetFramework>net10.0</TargetFramework>
    <ImplicitUsings>enable</ImplicitUsings>
    <Nullable>enable</Nullable>
  </PropertyGroup>
</Project>


================================================================================
FILE: src/MyDesktopApplication.Desktop/App.axaml
SIZE: .30 KB
MODIFIED: 2025-12-20 01:51:45
================================================================================

<Application xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             x:Class="MyDesktopApplication.Desktop.App"
             RequestedThemeVariant="Default">
    <Application.Styles>
        <FluentTheme />
    </Application.Styles>
</Application>


================================================================================
FILE: src/MyDesktopApplication.Desktop/App.axaml.cs
SIZE: 1.11 KB
MODIFIED: 2025-12-21 22:48:06
================================================================================

using Avalonia;
using Avalonia.Controls.ApplicationLifetimes;
using Avalonia.Markup.Xaml;
using Microsoft.Extensions.DependencyInjection;
using MyDesktopApplication.Desktop.ViewModels;
using MyDesktopApplication.Desktop.Views;
using MyDesktopApplication.Infrastructure;

namespace MyDesktopApplication.Desktop;

public partial class App : Avalonia.Application
{
    private IServiceProvider? _services;

    public override void Initialize()
    {
        AvaloniaXamlLoader.Load(this);
    }

    public override async void OnFrameworkInitializationCompleted()
    {
        var services = new ServiceCollection();
        services.AddInfrastructure();
        services.AddTransient<MainWindowViewModel>();

        _services = services.BuildServiceProvider();

        await DependencyInjection.InitializeDatabaseAsync(_services);

        if (ApplicationLifetime is IClassicDesktopStyleApplicationLifetime desktop)
        {
            var vm = _services.GetRequiredService<MainWindowViewModel>();
            desktop.MainWindow = new MainWindow { DataContext = vm };
        }

        base.OnFrameworkInitializationCompleted();
    }
}


================================================================================
FILE: src/MyDesktopApplication.Desktop/app.manifest
SIZE: .92 KB
MODIFIED: 2025-12-20 01:03:15
================================================================================

﻿<?xml version="1.0" encoding="utf-8"?>
<assembly manifestVersion="1.0" xmlns="urn:schemas-microsoft-com:asm.v1">
  <!-- This manifest is used on Windows only.
       Don't remove it as it might cause problems with window transparency and embedded controls.
       For more details visit https://learn.microsoft.com/en-us/windows/win32/sbscs/application-manifests -->
  <assemblyIdentity version="1.0.0.0" name="MyDesktopApplication.Desktop.Desktop"/>

  <compatibility xmlns="urn:schemas-microsoft-com:compatibility.v1">
    <application>
      <!-- A list of the Windows versions that this application has been tested on
           and is designed to work with. Uncomment the appropriate elements
           and Windows will automatically select the most compatible environment. -->

      <!-- Windows 10 -->
      <supportedOS Id="{8e0f7a12-bfb3-4fe8-b9a5-48fd50a15a9a}" />
    </application>
  </compatibility>
</assembly>


================================================================================
FILE: src/MyDesktopApplication.Desktop/appsettings.json
SIZE: .17 KB
MODIFIED: 2025-12-20 01:51:45
================================================================================

{
  "Application": {
    "Name": "MyDesktopApplication",
    "Version": "1.0.0"
  },
  "Database": {
    "Provider": "SQLite"
  },
  "Logging": {
    "Level": "Information"
  }
}


================================================================================
FILE: src/MyDesktopApplication.Desktop/Assets/avalonia-logo.ico
SIZE: 171.75 KB
MODIFIED: 2025-12-20 01:03:15
================================================================================

   	      h          	               00     %  .  @@     (B  D  HH     T    ``              ( .p        6  Vx (                                    n n n n nn)nCnHnHnHnHnIn8nn  n n nnEnnnnnnnnnnmm n n nnwnnnnnnnnnnnn
n n ninnnnnSnTnnfnMnnnnn n'nnnn1n n n n n n n}nnnn nxnnn=n n
n=n;nn n nnnnnnnnnnnnnnnn nnnnnnnnWn%n.nnnnn(n nnnnnnnnUn%n.nnnnn)n nnnn
nnnnnnnnnnnnnnnnn nxnnn=n n
n>n<nn nEnnnfn n n(nnnn0n n n n n5nnnnn n n ninnnnnRnSnnnnnYn o n n nnwnnnnnnnnninn n  n n nnEnnnnnnn=o n n         o n n n nn(nCnBn%nn n n                                                                  (      0           	                                  n n n n n on	nnnnnnnn
nn n n             p n n n n	n=n|nnnnnnnnnnnn-n n         n n n o n?nnnnnnnnnnnnnnnnn         n n nnpnnnnnnnnnnnnnnnnn;n     n n nnxnnnnnnnnnnnnnnnnnnAn p k n nTnnnnnnfn)nnn+nhn;nnnYnnnnAn n n nnnnnnnn n n n n n n n n nHnnnnBn o n nmnnnnnn o n n n n n n n n nInnnnCn n nnnnnn.n n n n&n_n\n"n n n n nInnnnCn n n*nnnnj
 n n nMnnnnnCn e n nInnnnCn n nJnnnnnn nnnnnnnnn n nInnnnCn n n\nnn,nGnNn nFnnnnnnn9n n nInnnnDn n n\nnn*nEnNn nFnnnnnnn9n n nNnnnnBn n nJnnnnnn nnnnnnnnn n nknnnn3n n n*nnnnj n n nNnnnnnDn n nnnnnnn n nnnnnn.n n m n'n`n^n"n o n n9nnnnnn p n nmnnnnnn o n n n n p n nnnnnnSn n o n nnnnnnnn n n n n n nnnnnnnn o p j	 n nTnnnnnnen(nnn*nknnnnnn>n n         n n nnxnnnnnnnnnnnnnnnam n n             n n nnpnnnnnnnnnnnnn\on n                 o n n q n?nnnnnnnnnnn2n n n t                     p n n n n	n<n|nnnnnun5nn n n c+                                 o n n n n on	n	on n n n m                                                                                                      (       @                                                             o n n n n n n n n n n n n n n n n n n n n p                                 o n n n onn;nXnfnhnhnhnhnhnhnhnhnhnhncn7nn n                      o n n n n	nHnnnnnnnnnnnnnnnnnn}nn o                 l n n n n8nnnnnnnnnnnnnnnnnnnnnJn o             o n n nnfnnnnnnnnnnnnnnnnnnnnnnn o             n n nnznnnnnnnnnnnnnnnnnnnnnnnj o         o n l nknnnnnnnnnnnnnnnnnnnnnnnnk o     p n n n?nnnnnnnnJnqn n onnQn+n m n nnnnnnk o     n n nnnnnnnnunn n o o o o n n n l o n nnnnnng o     n n n\nnnnnnjpn n o v o o m n n o n p n nnnnnna o o n n
nnnnnnnn n n n n n n n n n n         n nnnnnnb o o n n3nnnnnn$n n n n nnMnn~nGn	n n p     n nnnnnnb o l n nhnnnnnm n n n nnnnnnnnn n     n nnnnnnb o n m nnnnnnUn m n nnnnnnnnnon 
 n nnnnnnb o n nnnnnnnn+n n n3nnnnnnnnn%n p n nnnnnn] o n n	nnnnFn nBnun n n\nnnnnnnnnIn p n nnnnnno n n n
nnnnDn n@nvn n n\nnnnnnnnnIn p n n!nnnnnj n n nnnnnnnn,n n n3nnnnnnnnn%n o n n1nnnnnn n n m nnnnnnVn m n nnnnnnnnnon n n nYnnnnnpn r o n ninnnnnm o n n nnnnnnnnn n n onnnnnnFn n o n n3nnnnnn#n n n n nnOnnnHn	n n n n n1nnnnnnn n o n n
nnnnnnnn n n n n n n n n n n n n	nnnnnnon         m n n\nnnnnnhp n n n p o o m o n n onynnnnnn<n n         o n nnnnnnnntnn n o p o n n n nnnnnnnnon n         p n n n@nnnnnnnnHns n n onnPnnnnnnnn'n n                 o n k nknnnnnnnnnnnnnnnnnnnnnMn p n                     n n nnznnnnnnnnnnnnnnnnnnn\k
 n n                         o n n nnfnnnnnnnnnnnnnnnnnNj
 n n N                             k n n m n7nnnnnnnnnnnnnnn(n n n q
                                     p n n n n
nHnnnnnnnnnnn:nn o n m                                                 o n n n nnn;nWnfndnSn5nk n n n o                                                                 n n n n n n n n n n n n n n                                                                                                                               (   0   `           $                                                                                      p n n q o n n n n n n n n n n n n n n n n n o n n                                                                             q o o o n n n n m n n n n n n n n n n n n n n n n n n n n n m                                                             t o n n n m nn2nVnvnnnnnnnnnnnnnnnnnnnwn5nn n o                                                     o n n n n	n>nnnnnnnnnnnnnnnnnnnnnnnnnn|n	n o                                             n n n n nnJnnnnnnnnnnnnnnnnnnnnnnnnnnnnnqk o o                                     n o n n n)nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn#n l                                 p n n pnSnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnXn n                             p n n onpnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnmn o                         p n n nnynnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn o                         n n  ninnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn o                     r l n nHnnnnnnnnnnnnnHn nnn	nn$nOnnnzoooooonnnnnnnnnn o                     n n nnnnnnnnnnnnznl n n n n n n n n rn*n*n o o o o n nnnnnnnnnn o                 p o onnnnnnnnnnn7m n o o n	 o         p q n o n n n r	         n n nnnnnnnnpn o                 n n n6nnnnnnnnnnn n n o                                 n n o v q         n n nnnnnnnnrn o             n o onnnnnnnnnnn m o                                                                     n n nnnnnnnnrn o             n n n+nnnnnnnnn1n n p         p o ق o n n o n o p                         n n nnnnnnnnrn o             o n nqnnnnnnnnln n o     @ o n n n pn
o	x n n n o                  n n nnnnnnnnrn o         p n n	nnnnnnnnnn n     A n " n nnWnnnnnLn	n n o                 n n nnnnnnnnrn o         o n n&nnnnnnnnnn i p     p n n n+nnnnnnnnnn n q             n n nnnnnnnnrn o         o n nLnnnnnnnn)n o       n n n#nnnnnnnnnnnn o             n n nnnnnnnnrn o         j n nsnnnnnnnnn n n o n nnnnnnnnnnnnn~i
 o p         n n nnnnnnnnrn o         o m nnnnnnnnnnn n n n n2nnnnnnnnnnnnnn n         n n nnnnnnnnrn o         o pnnnnnnRnnnnn n o n njnnnnnnnnnnnnnMn n         n n nnnnnnnnun n         n nnnnnnon n n7nnn n n nnnnnnnnnnnnnnjn g	         n n nnnnnnnnwn n         n nnnnnnon n n6nnn n n nnnnnnnnnnnnnnkn f	         o n nnnnnnnnun n         o onnnnnnNonnnon o n njnnnnnnnnnnnnnMn n         n n nnnnnnnnln n         o m nnnnnnnnnnn n n n n2nnnnnnnnnnnnnn n       n nnnnnnnnnYn n         { n nrnnnnnnnnn n n o n nnnnnnnnnnnnn  o p     n n nnnnnnnnn?n o         o n nMnnnnnnnn)n o         n n n$nnnnnnnnnnnn o         n n nAnnnnnnnn"n m         l n n&nnnnnnnnmn O  o     p k
 n n-nnnnnnnnnn n p     n o l nnnnnnnnn
n p         p o o	nnnnnnnnnn n     R$ o u n nnZnnnnnNn
n n o         n n n$nnnnnnnnn n                 n n nqnnnnnnnnjn n n       o n n n poo
qn n n o !     n o rnnnnnnnnn?n n                 n n n*nnnnnnnnn0n n o         p o r o o o o o o p         o q n nEnnnnnnnnnn l                 o o onnnnnnnnnnn m o                                             p n q n n)nnnnnnnnncn n ]                     n n n7nnnnnnnnnnn o n o                                 p n n n n)nnnnnnnnnnn n                         p o pnnnnnnnnnnn5m n o n m p         p p n o n pnEnnnnnnnnnnXn f
 p                             n n nnnnnnnnnnnnxnm n n o n n n n n s n&nnnnnnnnnnnnn o                                 r
 k	 n nGnnnnnnnnnnnnnEnonnnn#nMnnnnnnnnnnnnn#n n o                                     o n 4 ninnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn?n h	 o                                         p n n nnynnnnnnnnnnnnnnnnnnnnnnnnnnnnnMm o o                                                 p n n onpnnnnnnnnnnnnnnnnnnnnnnnnnnnIm n n                                                       p n n pnSnnnnnnnnnnnnnnnnnnnnnnnnn3n n n j
                                                             o o o n n(nnnnnnnnnnnnnnnnnnnnnnnn n n q                                                                     o n o n onKnnnnnnnnnnnnnnnnnnn3q n n o p                                                                                 o n n n n	n<nnnnnnnnnnnnnnun,nn n n l                                                                                             q	 o m n n n nn1nVnunnnnnnnMn(n
n n n n m                                                                                                             q n n n n n n n m m m m n n n n p o o g                                                                                                                                 p n o q o n o o j o o                                                                                                                                                `   `   ?   `                    `     `     `     `     `     `     @     @                    `    ?                                 ?      ?                            ?    (   @              @                                                                                                                                                                                                                                                                                                                                                                              p q n n o o o n n n n n n n n n n n n n n n n n n n n n n o o o l s                                                                                                         p n o o o n n n h oon
n
n
n
n
n
n
n
n
n
n
n
n
n
n
n
n
n
n
n
n
n
om n n n e                                                                                             o o n o n n o	n&nMnsnnnnnnnnnnnnnnnnnnnnnnnnnnn}n1on n o                                                                                 n o n o n on1ntnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnwn
n n m	                                                                         u n n n onKnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn o                                                                 m n o n onBnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnMn b p                                                         p n n n nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnno	n n                                                     o n n l nAnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn*n n                                                 c o n nnannnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnCn o                                             q n n ontnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnFn o                                         m o n nnwnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnFn o                                     p o o z ngnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnFn o                                     n o n nJnnnnnnnnnnnnnnnnnnbn?n-n$n%n0nEnknnnnnn7n7n8n8n8n8n8n6nQnnnnnnnnnnFn o                                 o n n n&nnnnnnnnnnnnnnnnMnu n n n n n n n n pnn\nnm n n n n n n n nnnnnnnnnnnFn o                                 o n o	nnnnnnnnnnnnnnnFnn n n i p o     p n o s o n n nn!qp                     n n!nnnnnnnnnnFn o                             o p n nYnnnnnnnnnnnnn}nn n m o n                             J! o n l n n r o                     n n!nnnnnnnnnnHn o                             o n onnnnnnnnnnnnnYpn n n p                                                 o o o o p                     n n!nnnnnnnnnnKn o                         n p m nnnnnnnnnnnnnnMm o o q                                                                                                 n n!nnnnnnnnnnKn o                         o n onnnnnnnnnnnn\n n o n                                                                                                     n n!nnnnnnnnnnKn o                     p q n n^nnnnnnnnnnnon n q
                                                                                                         n n!nnnnnnnnnnKn o                     p n nnnnnnnnnnnnnn n o                     n o p n n n n n n i n p                                         n n!nnnnnnnnnnKn o                     n n n.nnnnnnnnnnnNn m s                 o n n n n onn+n)non n n o n                                 n n!nnnnnnnnnnKn o                     n n njnnnnnnnnnnn	n n                 2 o o n nn_nnnnnnnOo
n  o p                             n n!nnnnnnnnnnKn o                 p n onnnnnnnnnnnTn m q             n	 n n m n8nnnnnnnnnnn%n o m                             n n!nnnnnnnnnnKn o                 o n nnnnnnnnnnnnn o                 o n n nCnnnnnnnnnnnnn+n n r                         n n!nnnnnnnnnnKn o                 o n n2nnnnnnnnnn o p             p n n n'nnnnnnnnnnnnnnnn o                         n n!nnnnnnnnnnKn o                 o n nRnnnnnnnnnnpl o n ^         m n nnnnnnnnnnnnnnnnnpm o o                     n n!nnnnnnnnnnKn o                 o n nmnnnnnnnnnnnyon n p     n n n/nnnnnnnnnnnnnnnnnn n                     n n!nnnnnnnnnnKn o                 o n nnnnnnnn~n*n&nunnrr n o     o n nnnnnnnnnnnnnnnnnnnHn n                     n n!nnnnnnnnnnLn o                 o k nnnnnnnon n g nnnn o     n pnnnnnnnnnnnnnnnnnntn o                     n n!nnnnnnnnnnPn n                 n pnnnnnnnEn n o n n3nn?n o     n nnnnnnnnnnnnnnnnnnnm o                     n n!nnnnnnnnnnPn n                 n pnnnnnnnCn n n n n2nn?n o     n nnnnnnnnnnnnnnnnnnnm o                 p n n!nnnnnnnnnnPn n                 o j
 nnnnnnnqn n n nznnn o     n onnnnnnnnnnnnnnnnnntn n                 p n n(nnnnnnnnnnIn n                 o n nnnnnnnnxn$o nmnnup n o     o n nmnnnnnnnnnnnnnnnnnIn n                 n n n9nnnnnnnnnn=n n                 o n nmnnnnnnnnnnn}on n p     n n n/nnnnnnnnnnnnnnnnnn n                 o n nUnnnnnnnnnn,n o                 l n nQnnnnnnnnnnqm n n m         n n onnnnnnnnnnnnnnnnsl o n             p o m nnnnnnnnnnnn o                 n n n2nnnnnnnnnnS  o o             l n n n(nnnnnnnnnnnnnnnn o                 m n n
nnnnnnnnnnn
n p                 n n nnnnnnnnnnnnn o                 o o n nEnnnnnnnnnnnnn-n n q                 n n n/nnnnnnnnnnl n                     r
 n onnnnnnnnnnnRn m q             u n o l n;nnnnnnnnnnn'n p n                 l
 o n nxnnnnnnnnnn^n m                         q n nknnnnnnnnnnn
n n                 j o o n nncnnnnnnnRnn s o p             j o o onnnnnnnnnnn+n n                         o n n/nnnnnnnnnnnMn n r                 n o n n n onn-n,nnn n n o n	                 o o m nqnnnnnnnnnnn	n p                         p o onnnnnnnnnnnnn n n                     o n n o n n n n n v n m                     o n n n*nnnnnnnnnnnjn o p                         k  n n^nnnnnnnnnnnon n q                                                                                 o n n onnnnnnnnnnnn$n n                                 o n nnnnnnnnnnnnnZn n n n                                                                         d o o on{nnnnnnnnnnnpn o                                 o p m npnnnnnnnnnnnnJn n n s                                                                 q n n qnjnnnnnnnnnnnn0n n                                         o n onnnnnnnnnnnnnVon n o p                                                 p o ` n nnrnnnnnnnnnnnnqo q                                         o p n nYnnnnnnnnnnnnnynn n n o p                                 o o m o n nnnnnnnnnnnnnnn#n o p                                             o n o	nnnnnnnnnnnnnnnCnn n o k p p         o o p
 o n n onUnnnnnnnnnnnnnn_m p o                                                 o n n n'nnnnnnnnnnnnnnnnJnh n n n n n n n n pnnYnnnnnnnnnnnnnnnon o m                                                     n p n nJnnnnnnnnnnnnnnnnnn_n=n+n"n#n-nBngnnnnnnnnnnnnnnnnnnn n p                                                         p o o v ngnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn2n n o                                                                 n o n nnvnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn>n o n                                                                         o n n onsnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn>n o o r                                                                             j o n nnannnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn4n o o q                                                                                     o n n j	 n@nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn n o q
                                                                                             o o o n nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnbn	n o n o                                                                                                     n n l
 n onBnnnnnnnnnnnnnnnnnnnnnnnnnnn$n n n o p                                                                                                                 s
 o o n onKnnnnnnnnnnnnnnnnnnnnnnn.mn n n o                                                                                                                             p o n o n nn0nsnnnnnnnnnnnnnnnnn\n" n n n P                                                                                                                                             o n o n n n o	n%nLnrnnnnnnnnnfn>non n o o m l                                                                                                                                                         } n n n o n n n j	 oon
n	opm n n n n t o o                                                                                                                                                                                     p r o o o o o n n o o o t o n r                                                                                                                                                                                                                                                                                                                                                                     ?                                                                            ?                       <  ?  8  ?                                          8  <  <  <    x    p                 ?          ?      ?                                                  (   H              Q                                                                                                                                                                                                                                                                                                                                                                                                                                      p r o o o n n n n n n n n n n n n n n n n n n n n n n n n n o q p                                                                                                                                     & o p n p o n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n o 3                                                                                                                 p n n o n n m onn.nEnXndnininininininininininininininininininininininininfnMn"nn q
 n n                                                                                                     p o m n n ;  nnEn~nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn#n n n y                                                                                         p p n n n n	n=nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn:n p o                                                                                     l
 n n n n
nLnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn(n n p                                                                         m m o n on=nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnoo o                                                                     p n n n nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn4n o                                                                 n n n n n8nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnqn s                                                             p n n onXnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnt o                                                         n o n onnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnro                                                     p n n onynnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnro                                                 n n n nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnro                                                 n n m nZnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnro                                             l o n n;nnnnnnnnnnnnnnnnnnnnn:noopponn nCnznnnnooooooooo
onnnnnnnnnnnro                                         o n n nnnnnnnnnnnnnnnnnnn4nn n n o o o o o n n n m onDnnqo o o o o o o n nnnnnnnnnnnnro                                         o n onnnnnnnnnnnnnnnnn0on n n o n p                 p t o p o n nnoo                         n nnnnnnnnnnnnro                                     p n n nDnnnnnnnnnnnnnnn^nn n n q p                                         p o n n n o o                         n nnnnnnnnnnnnpo                                     o o onnnnnnnnnnnnnnn7m n n k p                                                         o o o o o                         n nnnnnnnnnnnnqo                                 p s n nYnnnnnnnnnnnnnn(n n n o                                                                                                             n nnnnnnnnnnnnqo                                 n o onnnnnnnnnnnnnn+n o n q                                                                                                                 n nnnnnnnnnnnnqo                             q o n nPnnnnnnnnnnnnn@n o o p                                                                                                                     n nnnnnnnnnnnnqo                             g n nnnnnnnnnnnnnnlj
 o n n                                 p n o o o p p p                                                         n nnnnnnnnnnnnqo                             n n n,nnnnnnnnnnnnnn o s                         x p n o n n n n n n n n m p                                             n nnnnnnnnnnnnqo                         p o n nknnnnnnnnnnnnAn n o                     n p n n n rnn2nDnAn,nn n n n }                                         n nnnnnnnnnnnnqo                         m n nnnnnnnnnnnnnnn o p                     o n n on6nnnnnnnn~n'm n n h                                     n nnnnnnnnnnnnqo                         o n n!nnnnnnnnnnnnIn n p                 \ j n n nnnnnnnnnnnnncnn n o                                 n nnnnnnnnnnnnqo                         o n nHnnnnnnnnnnnnn o                     m o n nnnnnnnnnnnnnnnon n n                             n nnnnnnnnnnnnqo                         i n nsnnnnnnnnnnnm o n                     n o onnnnnnnnnnnnnnnnnmn o                             n nnnnnnnnnnnnqo                         o qnnnnnnnnnnnnDn m o n             p o n nZnnnnnnnnnnnnnnnnn7n n u                         n nnnnnnnnnnnnqo                     p n n
nnnnnnnnnnnnnn f m             o n nnnnnnnnnnnnnnnnnnnoo n                         n nnnnnnnnnnnnqo                     o n onnnnnnnnnnnnnn(n n m         l n nMnnnnnnnnnnnnnnnnnnn*n n                         n nnnnnnnnnnnnqo                     p n nnnnnnnnnnt onPnnn	n k         n m nnnnnnnnnnnnnnnnnnnn^n p                         n nnnnnnnnnnnnoo                     o n n&nnnnnnnon o o m ntnn7n n         n onnnnnnnnnnnnnnnnnnnnm o                         n nnnnnnnnnnnnnn                     n n n+nnnnnnn|n q n o n n3nn_n n         n nnnnnnnnnnnnnnnnnnnnnro                         n nnnnnnnnnnnnnn                     n n n+nnnnnnnzn q o o n n2nn_n n         n nnnnnnnnnnnnnnnnnnnnnro                         n nnnnnnnnnnnnnn                     o n n&nnnnnnnon p o n nonn9n n         n nnnnnnnnnnnnnnnnnnnnnn n                         o onnnnnnnnnnnoo                     p n nnnnnnnnn~nk pnGnnn
n n         n l nnnnnnnnnnnnnnnnnnnn_n n                     o n nnnnnnnnnnnnn n                     p n nnnnnnnnnnnnnnn*n m n         m n nMnnnnnnnnnnnnnnnnnnn+n n                     p n n$nnnnnnnnnnnn p                     I
 o o	nnnnnnnnnnnnnn v p             n n nnnnnnnnnnnnnnnnnnnoo n                     n n nAnnnnnnnnnnnin n                         n onnnnnnnnnnnnDn l
 o n             l p n n]nnnnnnnnnnnnnnnnn9n m y                 o n n npnnnnnnnnnnnKn o                         o n nsnnnnnnnnnnnm o m                     o o o	nnnnnnnnnnnnnnnnqpo o                     n o onnnnnnnnnnnn,n n                         o n nInnnnnnnnnnnnn o                     l o o onnnnnnnnnnnnnno	n o n                     n n n(nnnnnnnnnnnnn t                         o n n!nnnnnnnnnnnnFn n p                 p m n n nnnnnnnnnnnnngon n p                     n o n nonnnnnnnnnnnnn p                         l o onnnnnnnnnnnnon o p                     p n n on:nnnnnnnnn)l n n C                      r o o onnnnnnnnnnnn^n o                             p o n nlnnnnnnnnnnnn@n n o                     o o n n n oon6nFnDn0nl
 n o o {  \                     y o n ngnnnnnnnnnnnn(n n                                 p n n,nnnnnnnnnnnnnn n K                          q q n n o n n n n n n n l
 m                         o n n n!nnnnnnnnnnnnon n                                 q o onnnnnnnnnnnnnil n n n                                 p y o o o o o p                                 p n n onnnnnnnnnnnnnYn l o                                 p n n nQnnnnnnnnnnnnn=n n o p                                                                                         q o o n n`nnnnnnnnnnnnnn q                                         y o onnnnnnnnnnnnnn)n n m r                                                                                 n o o m nEnnnnnnnnnnnnnqm p m                                         p u n nZnnnnnnnnnnnnnn&n n n n                                                                         k o o m o@nnnnnnnnnnnnnoo o                                                o o onnnnnnnnnnnnnnn5n n n x p                                                         p p n n snPnnnnnnnnnnnnnnkm p o                                                 p n n nCnnnnnnnnnnnnnnnZon n n p p                                         p p o o n nnvnnnnnnnnnnnnnnnn o                                                         o n onnnnnnnnnnnnnnnnn.nn o }	 o n p                 p k o o o n pn?nnnnnnnnnnnnnnnnBn l p                                                         o n n nnnnnnnnnnnnnnnnnnn1on n n o o n n o o n n m on@nnnnnnnnnnnnnnnnn{po o m                                                             m n n n:nnnnnnnnnnnnnnnnnnnin7oopoooonn@nwnnnnnnnnnnnnnnnnnnnn n p                                                                     o o m nZnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn#n n k                                                                         n n n nnmnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn4n A  p                                                                                 p n n onynnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn9n p o p                                                                                     o o o onmnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn7n o o r                                                                                             p o o onYnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn)n o o q
                                                                                                     n n n m n8nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn o o q                                                                                                             p o o n nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnSnn n n n                                                                                                                     n n n n pn<nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn n n p p                                                                                                                                 k n o n o
nMnnnnnnnnnnnnnnnnnnnnnnnnnnn+ln p o o                                                                                                                                             2 r n o n n	n;nnnnnnnnnnnnnnnnnnnnnnkn$mn n n n p                                                                                                                                                         p o ] n n l nnDn|nnnnnnnnnnnnnnngn2on n n n l m                                                                                                                                                                         k o o n n n m onn-nDnWncnhngn_nPn;n%non n o s o n q                                                                                                                                                                                          n p o o o n n n n n n n n n n n n n o o o p                                                                                                                                                                                                                             p u o o o n n o o p p p                                                                                                                                                                                                                                                                                                                                                                                                                                       ?                                                                                                                                  <                         ?                                                                                                                                                                                                          ?                ?             <                                                                               ?                                ?         ?      (   `                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                p p o o o n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n o p p p                                                                                                                                                                                             p p p o o q n o o n o n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n o o n p                                                                                                                                                                         q n o j o o o n m noo n.o8n>n@n@n@n@n@n@n@n@n@n@n@n@n@n@n@n@n@n@n@n@n@n@n@n@n@n@n@n@n@n@n@n@n<o*nl n n n n	 p                                                                                                                                                         p p o o n n roo5n^nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn{n)l n n n                                                                                                                                             p   o m n n rnnNnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnjn
n n m q*                                                                                                                                 o o n o n n
o<nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn n o                                                                                                                         n p m n n onLnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnon o p                                                                                                             p o o o n onFnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnLn d  p                                                                                                         q k o n l n+nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnoo o                                                                                                     o n l
 o nnennnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnHn i                                                                                                 o o o o n$nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnQ  o                                                                                             n n n d  n?nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn
n                                                                                         r n n nn[nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnoo                                                                                 n o o o onjnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnoo                                                                                 m n n onxnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnoo                                                                             o o n nnqnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnoo                                                                         l n o pnbnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnoo                                                                     m p o n nKnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnoo                                                                     n k
 m n/nnnnnnnnnnnnnnnnnnnnnnnnnn\n1no	ozm l	 toonn;nknnnnnnoooooooooooopn*nnnnnnnnnnnnnnoo                                                                 p n n nnnnnnnnnnnnnnnnnnnnnnnnnSnon n n o o o o o o o n n n n oo&ninnnoo o o o o o o o o o o n n#nnnnnnnnnnnnnnoo                                                                 o n on}nnnnnnnnnnnnnnnnnnnnnn>on n n o p p p                         p o p  o n m nn]noo p                                 n n n#nnnnnnnnnnnnnnoo                                                             o r n nCnnnnnnnnnnnnnnnnnnnnnLon o m o o
 o                                                 p v! o q n n n	oo p                                 n n n#nnnnnnnnnnnnnnoo                                                         p o o onnnnnnnnnnnnnnnnnnnnnn o n	 o p                                                                     p o n n n o o p                                 n n n#nnnnnnnnnnnnnnoo                                                         o o j nnnnnnnnnnnnnnnnnnnnn[on p o o                                                                                                                                             n n n#nnnnnnnnnnnnnnoo                                                     p o o o#nnnnnnnnnnnnnnnnnnnDl	 n n k p                                                                                                                                                 n n n#nnnnnnnnnnnnnnoo                                                     p p unnnnnnnnnnnnnnnnnnn8m o o n	                                                                                                                                                         n n n#nnnnnnnnnnnnnnoo                                                 p n o o&nnnnnnnnnnnnnnnnnn?m o o p                                                                                                                                                             n n n#nnnnnnnnnnnnnnoo                                                 n o g nynnnnnnnnnnnnnnnnnSo n o m                                                                                                                                                                 n n n#nnnnnnnnnnnnnnoo                                             q n n nnnnnnnnnnnnnnnnnnypn n n                                                                                                                                                                     n n n#nnnnnnnnnnnnnnoo                                             n x n n[nnnnnnnnnnnnnnnnnn n o                                                                                                                                                                         n n n#nnnnnnnnnnnnnnoo                                             o n onnnnnnnnnnnnnnnnn8n o n p                                             p o o m p o o o o o q n n |                                                                     n n n#nnnnnnnnnnnnnnoo                                             l n n*nnnnnnnnnnnnnnnnpo n p                                         p o n o o n n   ppj n n n w
 o o o                                                             n n n#nnnnnnnnnnnnnnoo                                             p n nennnnnnnnnnnnnnnn"n n n                                         q m n n m on<nknnnnn^n0n
n n o m
 p                                                         n n n#nnnnnnnnnnnnnnoo                                         o n onnnnnnnnnnnnnnnnyn	 n o                                     p o o n o nnmnnnnnnnnnnnUon n n o                                                     n n n#nnnnnnnnnnnnnnoo                                         o n nnnnnnnnnnnnnnnnn+n o n                                     o o o onMnnnnnnnnnnnnnnn/o n o p                                                 n n n#nnnnnnnnnnnnnnoo                                         n n nCnnnnnnnnnnnnnnnnn n                                     m n n onpnnnnnnnnnnnnnnnnnKqn n m                                             n n n#nnnnnnnnnnnnnnoo                                         o n nonnnnnnnnnnnnnnnSn  p                                 p o n mnvnnnnnnnnnnnnnnnnnnnLn n n                                             n n n#nnnnnnnnnnnnnnoo                                     k o onnnnnnnnnnnnnnnnn o                                 p m o k nYnnnnnnnnnnnnnnnnnnnnn/n o p                                         n n n#nnnnnnnnnnnnnnoo                                     n o onnnnnnnnnnnnnnnoo q m                             o n n o(nnnnnnnnnnnnnnnnnnnnnnon p p                                     n n n#nnnnnnnnnnnnnnoo                                     n n nnnnnnnnnnnnnnnno	n p o j                         o	 n nnnnnnnnnnnnnnnnnnnnnnnnnSn w n                                     n n n#nnnnnnnnnnnnnnoo                                     n n n1nnnnnnnnnnnnnnnnn1j o m m                 p o n n*nnnnnnnnnnnnnnnnnnnnnnnnnn o                                     n n n#nnnnnnnnnnnnnnoo                                     o n nCnnnnnnnnnnnnn~nnnnn:o i n                 p p m nknnnnnnnnnnnnnnnnnnnnnnnnn7n n                                     n n n#nnnnnnnnnnnnnnoo                                     k
 n nSnnnnnnnnnnn/on rn$nnnnn n                 p n onnnnnnnnnnnnnnnnnnnnnnnnnnnn p p                                 n n n#nnnnnnnnnnnnnnoo                                     p n n`nnnnnnnnnn)n o o o n onnn^n o                 n n nnnnnnnnnnnnnnnnnnnnnnnnnnnon p                                 n n n#nnnnnnnnnnnnnnnn                                     p m njnnnnnnnnnk
 p p m p P n nbnnnn                 o o o*nnnnnnnnnnnnnnnnnnnnnnnnnno
o p                                 n n n#nnnnnnnnnnnnnnnn                                     n n nqnnnnnnnnnRn \
 i     o r n n5nnoo                 n n n1nnnnnnnnnnnnnnnnnnnnnnnnnnoo p                                 n n n#nnnnnnnnnnnnnnnn                                     n n nqnnnnnnnnnPn q l     o u n n5nnon                 n n n2nnnnnnnnnnnnnnnnnnnnnnnnnnoo p                                 n n n#nnnnnnnnnnnnnnnn                                     p m njnnnnnnnnn|l p p p o l n n]nnon                 n n n*nnnnnnnnnnnnnnnnnnnnnnnnnnn
n p                                 o o o'nnnnnnnnnnnnnnnn                                     p n nannnnnnnnnn%n o o o o onnncn o                 n n nnnnnnnnnnnnnnnnnnnnnnnnnnnnn p                                 o n n0nnnnnnnnnnnnnnon                                     l
 n nSnnnnnnnnnnn)qn g	 onnnnn n                 p n onnnnnnnnnnnnnnnnnnnnnnnnnnpn p p                                 n n nBnnnnnnnnnnnnnnnn                                     n n nDnnnnnnnnnnnnnonnnnn>n   m                 p q n nknnnnnnnnnnnnnnnnnnnnnnnnn8n n                                     n n n[nnnnnnnnnnnnnnon                                     o n n1nnnnnnnnnnnnnnnnn5^  o p o                 p n n n*nnnnnnnnnnnnnnnnnnnnnnnnnn n                                     n n nnnnnnnnnnnnnnnro                                     p n nnnnnnnnnnnnnnnnnn o o r                         k o onnnnnnnnnnnnnnnnnnnnnnnnZm r n                                 p o onnnnnnnnnnnnnnnxn n                                     p n nnnnnnnnnnnnnnnnoo p n                             n n o o*nnnnnnnnnnnnnnnnnnnnnnoo p p                                 p o onnnnnnnnnnnnnnnWn h                                     p n onnnnnnnnnnnnnnnnn p                                 p j
 p i n[nnnnnnnnnnnnnnnnnnnnn1n n p                                 p k n nInnnnnnnnnnnnnnn6n n                                         p m npnnnnnnnnnnnnnnnRn 0 p                                 p o o onznnnnnnnnnnnnnnnnnnnOl o o                                     o o u nnnnnnnnnnnnnnnnn p                                         n n nDnnnnnnnnnnnnnnnnn n                                     m n o o	nwnnnnnnnnnnnnnnnnnOr o o n                                 p o n nnnnnnnnnnnnnnnnnn p                                         o n nnnnnnnnnnnnnnnnn(n n n                                     o o o onQnnnnnnnnnnnnnnn3l o o p                                     s n n nVnnnnnnnnnnnnnnnun o p                                         o p pnnnnnnnnnnnnnnnn{U  o o                                     p n n n n onsnnnnnnnnnnnZon o o n                                     p o o onnnnnnnnnnnnnnnn>n o                                                 o n nfnnnnnnnnnnnnnnnn#n n n                                         q n n n k
 nnAnpnnnnncn3on o m
 p p                                         o n o nMnnnnnnnnnnnnnnnnn n                                                 r n n+nnnnnnnnnnnnnnnnpn n p                                         p o o p n n m qppP  n n n z o n o                                         p n n nnnnnnnnnnnnnnnnnon o                                                 o o onnnnnnnnnnnnnnnnn5n n o p                                             o m n p p o o o o p e n n r                                             o p o l nennnnnnnnnnnnnnnnCn o n                                                 o | n nZnnnnnnnnnnnnnnnnnn o q                                                                                                                                                 n n n n-nnnnnnnnnnnnnnnnnn p                                                     p p o onnnnnnnnnnnnnnnnnvqo n n                                                                                                                                         l o o onnnnnnnnnnnnnnnnnln n p                                                         p o g nznnnnnnnnnnnnnnnnnOp n o                                                                                                                                p p o o onnnnnnnnnnnnnnnnnn"n n                                                                 o o o(nnnnnnnnnnnnnnnnnn;m o o o                                                                                                                         o o o rnennnnnnnnnnnnnnnnn}~ p o                                                                 o p wnnnnnnnnnnnnnnnnnnn4m n n o                                                                                                             p p o o ro_nnnnnnnnnnnnnnnnno&n o p                                                                 p o o o%nnnnnnnnnnnnnnnnnnn@n n n k p                                                                                                 n p n o onennnnnnnnnnnnnnnnnn{ o n                                                                         o p l nmnnnnnnnnnnnnnnnnnnnWnn ` o p                                                                                         n n o n onnnnnnnnnnnnnnnnnnnnn o p                                                                         p o o onnnnnnnnnnnnnnnnnnnnnn n m o q                                                                         p p t o m n,nnnnnnnnnnnnnnnnnnnnZn n p                                                                                 o o n nCnnnnnnnnnnnnnnnnnnnnnHnn n m o n p                                                 p p	 o o o n onennnnnnnnnnnnnnnnnnnnon n                                                                                         o n onnnnnnnnnnnnnnnnnnnnnnn<nn n o n p p p                         p o o m o n n ooRnnnnnnnnnnnnnnnnnnnnnn+n n n                                                                                         p n n nnnnnnnnnnnnnnnnnnnnnnnnnNnrn n o o o o n n o o o o n n oo$ndnnnnnnnnnnnnnnnnnnnnnnnVl p h r                                                                                             n l n n.nnnnnnnnnnnnnnnnnnnnnnnnnnXn.ooqj
 n n  oo
on7nfnnnnnnnnnnnnnnnnnnnnnnnnnoo o w                                                                                                  n p o n nKnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn n n                                                                                                         n n o qnbnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnon n c                                                                                                                  o o n nnonnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn&n  n p                                                                                                                     n n o onxnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn)n q o q                                                                                                                         n o o o onjnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn'n r	 o s                                                                                                                                     r o n nn[nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnno n q p q
                                                                                                                                             o n n U n?nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn d  o o	                                                                                                                                                     o o o o o#nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnYon n n p                                                                                                                                                             o n n n ondnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn-m n n h m                                                                                                                                                                     r m o o l n*nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn]nn o o p                                                                                                                                                                                 p o o o n onFnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnynl o o m m                                                                                                                                                                                             n p m o n onNnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnzn#t n p o v o                                                                                                                                                                                                         p p h o n nn:nnnnnnnnnnnnnnnnnnnnnnnnnnnnnn_nu n m n m m                                                                                                                                                                                                                     p <  o j n n onnLnnnnnnnnnnnnnnnnnnnnnnnnon1o
n n m m m m                                                                                                                                                                                                                                         o o l n n n soo3n]nnnnnnnnnnnnnnnnpnGn!nm n o o o n r                                                                                                                                                                                                                                                         r n n r o o n n m oonn-o7n=n@n?o:o2o%ooqn n n n o n s p                                                                                                                                                                                                                                                                                 p p p o o q o o n n o n n n o o o n o p n n o n p                                                                                                                                                                                                                                                                                                                     p q o o o n n n o o o p q  p                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   ?       ?                                                                                                                                ?                    ?                                  ?                ?      ?            ?                                                                                                            ?            ?      ?                ?    ?  ?      ?    ?                       ?                   ?                                         ?        ?                                              ?                        ?     (                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               p i o n n t
 o o o n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n o o i
 o k q                                                                                                                                                                                                                                                                 p
 o p n p o n n n m m l \ s nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnZ  m n n n n s p                                                                                                                                                                                                                                         o r n { o o o o l onn#o6nLncntonnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnen<n[) n n m d
  q                                                                                                                                                                                                                     p o p l p n n m oooEnonnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnrn"t:  n o m
 n                                                                                                                                                                                                         p o p s o n l no/ngnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn]o	n n n n                                                                                                                                                                                             p r n p n m pn)nhnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn m s y                                                                                                                                                                                 r n n o o n nnEnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn m o                                                                                                                                                                             p n r n n ooOnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn|oo o p                                                                                                                                                                 p o o n o nnHnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnKm o o                                                                                                                                                         p o o n o po6nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnoo o p                                                                                                                                                 q j o n n onwnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnVm p o                                                                                                                                             n n \  o onBnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnno
o o                                                                                                                                     p o o o n onsnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn)n n                                                                                                                                     k o o n n&nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnMn p                                                                                                                             n n n n  o=nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnmn n                                                                                                                         p t n n nnWnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnvj o                                                                                                                     p p n n nnbnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnvj o                                                                                                                 n p o o o	nsnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnvj o                                                                                                                 m n o oownnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnvj o                                                                                                         p p n n nninnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnvj o                                                                                                         o o n n	n^nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnvj o                                                                                                     n n o f nInnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnvj o                                                                                                 m o m o n2nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnun[nGo8n/n&n*o1o=nOnfnnnnnnnnnnnnooVoWoWoWoWoWoWoWoWoWoWoWoWoWoWoWoVnqnnnnnnnnnnnnnnnnnnnvj o                                                                                                 b  i
 m nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn]o/oom n n n n n n n n n n y) o	oo>nqnnnnnnno=n n n n n n n n n n n n n n n n n n%nnnnnnnnnnnnnnnnnnnvj o                                                                                             n n n n
nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnZn#nn o o n o o o q x m j t p o o o n o n j oo2nvnnnno?n p o o o o o o o o o o o o o r
 n n'nnnnnnnnnnnnnnnnnnnvj o                                                                                         n o o h n]nnnnnnnnnnnnnnnnnnnnnnnnnnnnnn@on n n n o p p p                                         p o p n p o n } on_nno@n r                                                     n n n'nnnnnnnnnnnnnnnnnnnvj o                                                                                         g   n n/nnnnnnnnnnnnnnnnnnnnnnnnnnnnn=on o o n n n p                                                                 p o p j o n m nnTo"n q                                                     n n n'nnnnnnnnnnnnnnnnnnnvj o                                                                                     r n n nnnnnnnnnnnnnnnnnnnnnnnnnnnnnVon n p o s p                                                                                     p p o n n n n p  g  p                                                     n n n'nnnnnnnnnnnnnnnnnnnvj o                                                                                 p q p d n\nnnnnnnnnnnnnnnnnnnnnnnnnnn%l o r o o p                                                                                                         z l n o o n q                                                     n n n'nnnnnnnnnnnnnnnnnnnwj o                                                                                 p n n n"nnnnnnnnnnnnnnnnnnnnnnnnnndon o o q t                                                                                                                                                                                                 n n n'nnnnnnnnnnnnnnnnnnna o                                                                             p p o qnnnnnnnnnnnnnnnnnnnnnnnnnnCsn j
 o o p                                                                                                                                                                                                     n n n'nnnnnnnnnnnnnnnnnnoB o                                                                             o l n o0nnnnnnnnnnnnnnnnnnnnnnnnn5o o n l n                                                                                                                                                                                                             n n n'nnnnnnnnnnnnnnnnnnoF o                                                                             p o pnnnnnnnnnnnnnnnnnnnnnnnno(m o n o p                                                                                                                                                                                                                 n n n'nnnnnnnnnnnnnnnnnnoF o                                                                         p s n o7nnnnnnnnnnnnnnnnnnnnnnnn*m p o p                                                                                                                                                                                                                         n n n'nnnnnnnnnnnnnnnnnnoF o                                                                     p q o pnnnnnnnnnnnnnnnnnnnnnnnn7n o o q
                                                                                                                                                                                                                             n n n'nnnnnnnnnnnnnnnnnnoF o                                                                     n n n o/nnnnnnnnnnnnnnnnnnnnnnnLm o n p                                                                                                                                                                                                                                 n n n'nnnnnnnnnnnnnnnnnnoF o                                                                     o n nnynnnnnnnnnnnnnnnnnnnnnnppo n n ?                                                                                                                                                                                                                                 n n n'nnnnnnnnnnnnnnnnnnoF o                                                                 q n n nnnnnnnnnnnnnnnnnnnnnnnoo n n                                                                                                                                                                                                                                         n n n'nnnnnnnnnnnnnnnnnnoF o                                                                 n o n nVnnnnnnnnnnnnnnnnnnnnnn-o j q p                                                                                                                                                                                                                                         n n n'nnnnnnnnnnnnnnnnnnoF o                                                                 o n onnnnnnnnnnnnnnnnnnnnnng]  o o p                                                                                 p p p p o o o o p p p                                                                                                                 n n n'nnnnnnnnnnnnnnnnnnoF o                                                                 g
 n n'nnnnnnnnnnnnnnnnnnnnnoo o o                                                                     p o o m p o n o n n n n n o o n n q p                                                                                                 n n n'nnnnnnnnnnnnnnnnnnoF o                                                             r o n n_nnnnnnnnnnnnnnnnnnnnnKm p o p                                                                 o p m n n n ono&n9oCn@o3ootn n p o m s                                                                                         n n n'nnnnnnnnnnnnnnnnnnoF o                                                             l o onnnnnnnnnnnnnnnnnnnnnnn o p                                                             p o o n n oooWnnnnnnnnnnnBol o m
 n p                                                                                     n n n'nnnnnnnnnnnnnnnnnnoF o                                                             n n n nnnnnnnnnnnnnnnnnnnnnIn o q                                                             n o n o i  n$nxnnnnnnnnnnnnnnoZoo n n n m                                                                             n n n'nnnnnnnnnnnnnnnnnnoF o                                                         p k n nLnnnnnnnnnnnnnnnnnnnnoo o o                                                         p o q n pn_nnnnnnnnnnnnnnnnnnn7mn n q p                                                                         n n n'nnnnnnnnnnnnnnnnnnoF o                                                         p n 0  n{nnnnnnnnnnnnnnnnnnnnhn n l                                                         n n o n nnnnnnnnnnnnnnnnnnnnnnn\on n q                                                                         n n n'nnnnnnnnnnnnnnnnnnoF o                                                         q o o	nnnnnnnnnnnnnnnnnnnnn'n n p                                                     q m o n o#nnnnnnnnnnnnnnnnnnnnnnnnvo
n n q p                                                                 n n n'nnnnnnnnnnnnnnnnnnoF o                                                         o n onnnnnnnnnnnnnnnnnnnnon q                                                         q q n nnnnnnnnnnnnnnnnnnnnnnnnnnnpoo n o                                                                 n n n'nnnnnnnnnnnnnnnnnnoF o                                                         m n n9nnnnnnnnnnnnnnnnnnnn^m o p                                                     p o o onnnnnnnnnnnnnnnnnnnnnnnnnnnnQm
 n o                                                                 n n n'nnnnnnnnnnnnnnnnnnoF o                                                     r p m n\nnnnnnnnnnnnnnnnnnnn*n d                                                     p p p 4 o_nnnnnnnnnnnnnnnnnnnnnnnnnnnnn*n p p                                                             n n n'nnnnnnnnnnnnnnnnnnoF o                                                     l o a nnnnnnnnnnnnnnnnnnnnoo n h m                                             o m n n&nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnoo p p                                                         n n n'nnnnnnnnnnnnnnnnnnoF o                                                     n n nnnnnnnnnnnnnnnnnnnnnoi n k
 p p                                     p p n on}nnnnnnnnnnnnnnnnnnnnnnnnnnnnnno:n { n                                                         n n n'nnnnnnnnnnnnnnnnnnoF o                                                     n n nnnnnnnnnnnnnnnnnnnnnnn]nn m o m                                 p m n n&nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnoo o                                                         n n n'nnnnnnnnnnnnnnnnnnoF o                                                     o n onnnnnnnnnnnnnnnnnnnnnnnon m m                                 y o m nennnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn(n n p                                                     n n n'nnnnnnnnnnnnnnnnnnoF o                                                     o o o"nnnnnnnnnnnnnnnnJn&n"n<nnnnnm	n m m                             o o o
nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn]n n o                                                     n n n'nnnnnnnnnnnnnnnnnnoE o                                                     g n n-nnnnnnnnnnnnnn]nn n n n ooHnnnnKn l n                             m n n#nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnon o                                                     n n n'nnnnnnnnnnnnnnnnnnn{ o                                                     q n n8nnnnnnnnnnnnnrpn r n n  o l	 oQnnnnn n                             n n nCnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn n                                                     n n n'nnnnnnnnnnnnnnnnnnnnn                                                     o n nBnnnnnnnnnnnnoo n m
 m p o o o p	nnnn4n k                             o n nannnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnno"n o                                                     n n n'nnnnnnnnnnnnnnnnnnnnn                                                     o n nGnnnnnnnnnnnn| o y
 p         p o p n nZnnnZn n                             o n nvnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn/n l
                                                     n n n'nnnnnnnnnnnnnnnnnnnnn                                                     n n nNnnnnnnnnnnnnbn n q                 p n n n:nnnsm o                             n n n~nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnno9n t                                                     n n n'nnnnnnnnnnnnnnnnnnnnn                                                     n n nNnnnnnnnnnnnn`n o q                 p o n o;nnnrm o                             n n n~nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnno9n t                                                     n n n'nnnnnnnnnnnnnnnnnnnnn                                                     o n nGnnnnnnnnnnnn}h o m p             o o n nWnnnZn n                             n n nwnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn/n l
                                                     n n n)nnnnnnnnnnnnnnnnnnnon                                                     o n nBnnnnnnnnnnnnoo n n
 p p n n o pnnnn4n k                             n n nbnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn"n n                                                     o o o0nnnnnnnnnnnnnnnnnnn o                                                     q n n9nnnnnnnnnnnnnhun P  n o n o o nGnnnnn n                             n n nDnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn n                                                     n n n:nnnnnnnnnnnnnnnnnnnxk o                                                     k n n,nnnnnnnnnnnnnnVon o o n un9nnnnQn n l
                             m n n#nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnon o                                                 p n n nMnnnnnnnnnnnnnnnnnnnkn n                                                     n n n"nnnnnnnnnnnnnnnn;ooo0oznnnno	o n p                             o n o
nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn`n n o                                                 p n n ndnnnnnnnnnnnnnnnnnnn[n n                                                     n n nnnnnnnnnnnnnnnnnnnnnnnnon m
 n                                 m n n nennnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn)n n p                                                 q o 5 nnnnnnnnnnnnnnnnnnnnFn g                                                     o o onnnnnnnnnnnnnnnnnnnnnndon P  p p                                 q p n n&nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnoo n                                                     n n n	nnnnnnnnnnnnnnnnnnnn5n n                                                     p o pnnnnnnnnnnnnnnnnnnnnnt  n d p p                                         n o pnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnoCn r n                                                     n n nnnnnnnnnnnnnnnnnnnnn%n n                                                     p n l	 n}nnnnnnnnnnnnnnnnnnnnn m c n                                             o k	 n o*nnnnnnnnnnnnnnnnnnnnnnnnnnnnnno	o p p                                                 p q n o:nnnnnnnnnnnnnnnnnnnoo o                                                     p
 n n n[nnnnnnnnnnnnnnnnnnno)n g                                                     p p p uoannnnnnnnnnnnnnnnnnnnnnnnnnnnn*n    p                                                     p n n nknnnnnnnnnnnnnnnnnnnon t                                                         n n n:nnnnnnnnnnnnnnnnnnnn]n o p                                                     p o o onnnnnnnnnnnnnnnnnnnnnnnnnnnnUj o o                                                         r n o	nnnnnnnnnnnnnnnnnnnnzm  n p                                                         o o onnnnnnnnnnnnnnnnnnnnon                                                          q q o onnnnnnnnnnnnnnnnnnnnnnnnnnupo o o                                                     q o o o(nnnnnnnnnnnnnnnnnnnnSn <                                                              p o o
nnnnnnnnnnnnnnnnnnnno&n o q                                                     p n p n o%nnnnnnnnnnnnnnnnnnnnnnnnxo
n o q p                                                     n n n nbnnnnnnnnnnnnnnnnnnnn-n n                                                             p n V n|nnnnnnnnnnnnnnnnnnnncn n m	                                                         o o p n onnnnnnnnnnnnnnnnnnnnnndo	n m p p                                                     p o o onnnnnnnnnnnnnnnnnnnnnn o                                                             p l n nInnnnnnnnnnnnnnnnnnnnoo o p                                                         p o p o oncnnnnnnnnnnnnnnnnnnn;on m q p                                                         n n n n<nnnnnnnnnnnnnnnnnnnnnn o                                                                 p o o nnnnnnnnnnnnnnnnnnnnnMm p o                                                             o n o n o o)nnnnnnnnnnnnnnnn`on o n ` s                                                         p n o pnnnnnnnnnnnnnnnnnnnnnSn o p                                                                 o o pnnnnnnnnnnnnnnnnnnnnnnn o p                                                             p o o n n qn"n^nnnnnnnnnnnDon o p o p                                                                 o o o o2nnnnnnnnnnnnnnnnnnnnn%n l                                                                     p
 o n n`nnnnnnnnnnnnnnnnnnnnnKm p p p                                                                 p p l
 o n n poo,n>oEoDn9o#onn o n p x s                                                                 q o n nnnnnnnnnnnnnnnnnnnnnnn	n n                                                                         t n n'nnnnnnnnnnnnnnnnnnnnnoo o o                                                                     p p o q o o o n n o o n o o n o o q p                                                                     p m r n n>nnnnnnnnnnnnnnnnnnnnnan n m                                                                         o o pnnnnnnnnnnnnnnnnnnnnnnck n o p                                                                                 p p p o o o o o p p p p                                                                                 n o o onnnnnnnnnnnnnnnnnnnnno&o o q                                                                         o p n nVnnnnnnnnnnnnnnnnnnnnnn)n i q
 p                                                                                                                                                                                                         q p o wndnnnnnnnnnnnnnnnnnnnnnoo p                                                                             p o o onnnnnnnnnnnnnnnnnnnnnnoo o o                                                                                                                                                                                                     n o q n n2nnnnnnnnnnnnnnnnnnnnnnLn p p                                                                                 f o vn{nnnnnnnnnnnnnnnnnnnnnnlqo n n                                                                                                                                                                                          p x n o onnnnnnnnnnnnnnnnnnnnnnnn o p                                                                                 p n n o.nnnnnnnnnnnnnnnnnnnnnnnGo n o p                                                                                                                                                                                     p k n n n	nnnnnnnnnnnnnnnnnnnnnnngm o n                                                                                         q o onnnnnnnnnnnnnnnnnnnnnnnn5m o o q                                                                                                                                                                             p o o o pnhnnnnnnnnnnnnnnnnnnnnnnoo l z                                                                                         p t n o7nnnnnnnnnnnnnnnnnnnnnnnn%n p o p                                                                                                                                                                     p N  o o roXnnnnnnnnnnnnnnnnnnnnnnnmA o p                                                                                                 p o pnnnnnnnnnnnnnnnnnnnnnnnnn%m n n o p                                                                                                                                                         n n o o roWnnnnnnnnnnnnnnnnnnnnnnnoo n p                                                                                                 o ^ n o5nnnnnnnnnnnnnnnnnnnnnnnnn0p n n l
 m                                                                                                                                                 p p l	 o poZnnnnnnnnnnnnnnnnnnnnnnnnl[ p r p                                                                                                 p p o qn}nnnnnnnnnnnnnnnnnnnnnnnnn?{ n l
 o o p                                                                                                                                 n j n o n nnrnnnnnnnnnnnnnnnnnnnnnnnnon o p                                                                                                         p n n o#nnnnnnnnnnnnnnnnnnnnnnnnnn^n	n o n n s                                                                                                                         o q m n o onnnnnnnnnnnnnnnnnnnnnnnnnnSn n v                                                                                                             p q p _	 n[nnnnnnnnnnnnnnnnnnnnnnnnnnn n o i
 o o p                                                                                                         p p p p n on@nnnnnnnnnnnnnnnnnnnnnnnnnnoo o q                                                                                                                 q o n nnnnnnnnnnnnnnnnnnnnnnnnnnnnnPo
n n o n 2 p                                                                                     p o o o p o l onynnnnnnnnnnnnnnnnnnnnnnnnnnn.n w                                                                                                                           j _  n n.nnnnnnnnnnnnnnnnnnnnnnnnnnnnn;nn n q n q p                                                                     p o o m o o m ooWnnnnnnnnnnnnnnnnnnnnnnnnnnnnb" o p q	                                                                                                                         n o o T  n_nnnnnnnnnnnnnnnnnnnnnnnnnnnnnn;o	m n o r o p p p                                         p o o n o o n e ooVnnnnnnnnnnnnnnnnnnnnnnnnnnnnnoo o p                                                                                                                                 n n o o
nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnSnon n o o o o p s m n n i q o o o o n n m oo.nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn%n j `                                                                                                                                          j l
 n nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnUn,opm n n n n n n n n n n j onn:njnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnoDn o o p                                                                                                                                         n o n o o3nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnqnVoBo2n(n$n$n*o8nIn_n|nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnndro o n                                                                                                                                                 n n o f nKnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn}n	n o o                                                                                                                                                         o o o on]nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnon m т  p                                                                                                                                                         p p
 n n nngnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnon l	 p m                                                                                                                                                                     n n o oownnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnon s p q                                                                                                                                                                         n n n o o	nqnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnon s
 p q                                                                                                                                                                                 p p n o pnbnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnon r p p                                                                                                                                                                                         p u n n nnVnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnon s p q
                                                                                                                                                                                                 o m n n yo?nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnin	n l
 o q                                                                                                                                                                                                             j o o m n&nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnHoo n q p                                                                                                                                                                                                                 p o
 o p n onrnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn(n n o e n                                                                                                                                                                                                                             o o p	 o on@nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnninn o n d p                                                                                                                                                                                                                                     r m o o n onunnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn0on A  p p                                                                                                                                                                                                                                                 p o o o o qo5nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnSnn n m i	 m                                                                                                                                                                                                                                                             p o o o o o
nKnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnhnm n l n n n                                                                                                                                                                                                                                                                         p o n n m ooQnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnhnp n o o o p                                                                                                                                                                                                                                                                                      n o p o m on@nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn[nq n m n i m                                                                                                                                                                                                                                                                                                     p r o p o n on&ngnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn~n9nm n m n m m                                                                                                                                                                                                                                                                                                                     p o n l o n n nn.nhnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn|nAosn n p n n m                                                                                                                                                                                                                                                                                                                                     p p p o n n n m pooCnmnnnnnnnnnnnnnnnnnnnnnnynQn)nv, n o o f	 n m v                                                                                                                                                                                                                                                                                                                                                         o g  n d o o o o l
 onn"o4nKnanronnnnnonwnfnQn<o)oog  n n n n p n p p p                                                                                                                                                                                                                                                                                                                                                                                 p o
 p o p o n n n n m l ` ~ nnnv R  k m m n o o o o k o s p                                                                                                                                                                                                                                                                                                                                                                                                                     p j o o o u o o o o n n n o o o o r m o o q p                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    ?                                                                                                                                                                                                                                                                                                                      ?                                                             ?        ?                               ?     ?                                                                       `                        p                                                                             ?              ?                          ?          ?                                                                       ?                                     ?        ?                                                                                                            ?                                                             ?                                  ?                   PNG

   IHDR         \rf   orNTϢw  6gIDATxyeEyOsowO/0Î  -*h\i[LbYMܢ"_\MQ5qPadgzz~na>/~nSoUPSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSӃljo9@W?G⟌	
h21^@-;O-\ybOTg R~Z6)gQ6x>dhOg$$(7Va'1!F:eq(þ6E@k&)?Uf$<p̔aĵo nD.ͭ,.@ZNTѱΉŗӗsdt< `}N77
2\
i3ZlB(LŠzH		و%hmNosdXm]p0 \tC?vFFGl_FVfb^H-!1"q isX4ʶ{	 (a໒kx~/'#A",UbԽeFLH kEDs!>wm:L"}Ia*DR{J]bq?1yI`:^{.OW2"/:f_BbM0'1F6}I?<bOk`+pb(fhHdBW{C$vx=L-"KyɳҲm[QWYFrsg )FHGM}!izk" ,Z [|F"eiC(zjLWp9!d"jr\o^H~9r6Zž
iz{LlBDy O`=<'}d '_ ݧwíRy<t`lrLq`1͝3롽;Խt,N B <8ljns>E5Y]Sh$hF`_hG{*3|O
W>#җڱ;k!D  >ljvk/`'D[!3uo,0pӡpmMJ:&!(A={bt̤V4Foaӯm@_ߙ/v=sjXe9}p# :zo%+[0F\Hy`N39?oR+Ig$¹蘓35muPM1/*۶eKH{7WxdSqЧH쾁w6O>^}HgbێiʌD{EkGL3H4_<^of3ͷoo: \08"isl: A߳^/W?!'$Av|54|!@R?ܺ]\hhBXxW]5ZIg&Wlݢzy<zliDWƸW\7X
`)bkjv6 z.k_hl3=r3SYƪ$aFםl&˶'ɀIL21B֊s(`U ќ_o'HټsǪ}M,38ZWT6//gY1|ɊO/o+yvUzt',mEsnH!5&(JftYqcd7bӁ=l4B̬~S'MwyJ~Y6hOғ򵘽glS *ۮtJ7RbY`0^{毩'$oMvӞ@	XVe[.ۦx4=GBo: XT-z/٫G	V콧=4iXG_ROYq<0PٜHu?f}0/"EIsB=,&Dm^Hog)&0+q7!o5\SoH1q?À`FH:aК*`?u2p>{z	0OCFS揩'pppYEpbEF{8;h16;~e[rF&PY˜`t4po;DxmSwH61#҅̽ot{#πK._ :wl			b[WE6Xt"Q.J׃t ;UT\ V,#M0pB6-3A>D[bƬ Iv9 đ_<9_ g8(~,[mxjZ7dE#mo=6Ϩ&ė1_'1*OQ&	9	>k@Qȓ?dex<e۹LL`&*TIbtc^W,_:ܺ셻^(`bpG!ƿWxW kglx};eE+?!xuo$	2.cY1"y$54lxK]^\g~ʊwFFh X~-<SO8ּF4BbЍ h9p0#aC̃YB!}؊%B>+e?0
݆mSȁ _2G^pf`XMIWe;}e=tos{lG~h_o}gJY4:f&&gx*bǏ> ϯOS'YJz͋ʶÜ+UBu '|8l:9ć·M!nr(	I#1C~:澐R%Ooa!aYY2$6%yp#')%n!G	gHj% E3<gR;[~c~]Ȉ\wF=wfۙB̈́l+F3%X}`П<ET^=P(3!B;{0+Z"uOF}nW?3Ăǈ7<.11xPeƛc>KH6JM	Se[#Lm.&MY&S˱^mt*0fGIoSUuxj@HyZYIHlsɛz]JD,I4 {o(M }%L|)pXٝ&g"?'	)ge19HFP\*HӰ@VroݎoE+W5[5&ō!bz3S*FЖ-o'ʢˈ6͐y1\+`<&YwųЬ?m%ߣ7E~6a>)<V\3Ǖ{˧IN<e{AZ67PӬ/M#Ie۵4ľC(XvːEc(ӛ NkC`z/ps<՞:G,ۮ=(̳ch7J Ć1*{$^{7c_Jk9|>#%U]${, ,Á- f/I=Kbb\Hf~(tw({S}ϸ1@)".2_CVtE`1`S?\P]cS/x13i;c̿,iiד",L!?Ft|	蘉?ײriL0[ĸɑ[`!J[	=HW'L24j
x;ܭ3M7cE FLt$:)mADM@}_qE f$)zegZ=Ζ0ll`ni\3[/h&=?6,-ʶi7ـFhZ_u(~#);ǣ3l%ًoLR1ۂv`K6/ZQ惊޽FOI,'O{q5wR:1~|vU(2wwu
>yeS	I岸bx`m3͓Ce۴xBL]Zt %Ç^-5`k+us$|a	a!&e9 ̑f}2կ>})4H1[pت̽37[ C_,	kǏfLՋknx(EAħ,ۦ89ȻtM "&	z8|qY'Idps\<#=&7
<Z1yr2b4Y.$EcvW4}8Eq֪ĆLt{_"G jMGIIu"xY[ ~ Llm@w6ACot'J*/Sc8	EYIĸXsvyu진Aھ<Qnt5'?5W!7MMJʶeIj@HV$ Pc7(EQ`zïlo73W5H"ID
G1Q?<m#,ΎugkHB}D׻i_:'ѳzq1Ҏ7F@m+0ِaS.Ɯ|h<5EwԽgb'<qytn(O^#ajflCFǌo]?COch/1-WnǯK\Li)Ei^2>H/Q}9mt+\+'q~65i^PuV,/M7\?G?8	;Np并Y56syomb & p"N=~`2Wב6vmg읁;p3IY?y>?;V`L>BrI괜ؗޘgd2 .*۞]i=rwhUo%swo#a1@iDj'ؠ۴Z=1)\#QjxPV7RueJq\Ev }5qk#T&3$ 2	x	'Wiyom8`&++L@n(T5.`퇵Z+gHC8<D^YJ|r<zS=b#<ʃh8MIjoZ- @r;e۳,eG :c<ذ\sɀE91Vz3#_DuV	&#~N"Ϸ#]\$	HgוmӝЇyDgX:bE" _Wwd.*}*esmDw7˓Ve;+W(ʶgc<$Bn"gpzrq·Uo3a.mI\cWy/O(ʊx$ ~L5b[u	CE*2 *ېbd̵S>? .ۦ=d5,Wj!Ү"`C|l{}BuL B-w&ۂ?+c#"3z®XϗHl3rJWYĸPEq+˶NXe}#X~Tw)p~Tq/QYvu7f1N#SYoF:"=\X?bm7(Q0x}E4Zh!qۨ%
rG5V<|2;Ɯo'ʶ)Ej[xD= (ZݠmdˑTiyNt iֈCjm&E l{;,tD !PUkpIʭcfǪ+lK%ż@Rte3IeXtl| U|oszPTFg_#kp|ٶtՆS#Ӏ;ߧz =cxXY7 j[{r#@l
r`P߼umR?Y\VqIF$eSN1I:_FoMMg aj.WKՋ0q4[Ȗ, 		N8BbV/	03ÍrcV.{'T8"A HHzx6۟B+yN䄑}YFZn>) T*BpETP tҨolbv%"?^U_-fNz {Dgֻ qB|V>Ml0Menr_ϔ|T,,*y tT:uZ7?<γX/A
^=c@K~"<>5u-@Z"*n2~q;1;BC0\;8Ur3"x;e˶vM41ٙٶdP[P쵗ƟWgH2l	pMWMxw	KH:M6b?ܕbP9Xd{ k$+.ae ?6~3P|o{p77SqocR<?v~:NvE&MgUa\G"s)Pol$|Ufs}SݠԛG<ϿW^m܇m< f|1c(" *Ն"!F>lɣ}jrI#t-UamA@`ffF䎯Ƽ0Unw@*+eC'WMGZ-wѩٶdXfT*nyȯZ5	~b\uH=;kh&B:WpU~꺧$!J
htYK En
$⣫s)=3֫ȉ7[>8v>SJǼ;^@#Vl`߯}ՋB*` 	Bb*W6rѩK<is]AH=O=0B'"};~w!]iX$aTpsY""w;1_=Aҡ{ӥ}JB>0HkSۿ+&ƅ1}V5>}UՅZW9ݿ]0Lmۣjϻ"wɬGeDϩ 5Dm(ugnЅld}`gP$,ێ06ݬ@Q(GX,~~9|j߃;x\AI5;!idj:smA灎td< IZ7V\	:u1~fuw|>J={VMzta6&!}[g_A72q-7 K۴酁ޝ;~f/Sp'#{=v,'F'+j=#5b1fw .^uG QB}Yn$\sމt*]$Z^Zwr$p0N0r7%J:ѹax,E,)&\7R$(B*qqrg ֞I9<<A?o_vg\_C͕ɵB},s|<Qto@a?	8ax	<pIc@[G]^˺{H7ڦW2KFbuۥ=:گt$U3ag\mC*JݝSjXľLl]jvNmb]'{gt̤hRb"K\|itg%rbb3k#_žE~pRstt`.I RRstE;FV1Vѱ"twy-l&UTJĲP/혜 vԹ`%u y杍$=9ظ~6=!0o\nw\|uw+c I	[2lxdl;zi
hw$	 ;7]($Bk٘YW6*093H+ùn|"g#Cޔ<÷1'uzs0@5 [%q1)bq[=ܡE<lךE?oLz<|w+E;iYI"c6iS{y4.=cJ{wOX"\b+\h_s6+ӣdP`js5_lte쳪q[yi/Jt6FHgnom6́n|[ .T["@:.+XON_Ę_,Єv N)y!&	DG;:ǮbE"\/gۇCHfHƲҷ9%qq}S&K@Oe7fl^d'1Keh8cY;iE|nǿA_"K>/pڷ9/Vdf)wi! RnxV6-#W}d~^Ke[x3ITb	X%!떬e31.E_}\^fkx
se09S^?_f$	
:[n&pGGo@ё!,7Wݠ;5>W횉x3pqٶtiwU7;ә%QDU}vGѡdb\\6	JHz+šJ$>YU@B <B5߹zlȒ04.ۖ;0Έ#!~T,Ϧ' 6`+Ohzskل`bl:̏L\jDG`kn.8Hugp.	5V'pxP6vJtn6 5e7j:	ۀӛF\oʶklD"૚;1Hg7R]` xK.2A_#a/`܋9}d+YtL 7 o(RE	1<$Ӫ;$xU>xl:bFIrn5 LduЗ+8Yfmc|sWi?I>FRGUEEbQ'x|]ɳE&EtNtFH$Π};tt<ENbHK~^Hgɵ%e7.8ځ@cI*(=s(0U-C|mn0WYiW
mt>0Qvvv_<HNQ}2`]@0stRP~1_c7 m77@)px#iFnb:1^݅
`]aq%<O~i@O~X!	gPl;oߏw񨘐_J|Si$WWؙ鳚4 Soɯ<xe; ST#^ߕ74$%l<kK#~yCurEAFJ;[yFZx* }QEl7_$kug~qCcm>[&+ K,5:`t4dy> 'e?`^hob&œ6
ߢUp#/]KgvĩX:ʦME(Ve7r3o	E2L67ۗ7ZK
rp̰w܌U*Y8CF繝'?,Bw@<g{:zcQ-kesgp1<k(uWi*RLq__Ϛ=+nӁyfnmh]^km}\
|F/ F6ijj
" 9 &6䯔ywWrf%1D'-7лxNF#
] #|)pv3</$>s9
Ԭ|& Sb8__/:gS
ԬxBdy?
lr#gTٶt
xk~|&9HNX਩Cxn
nUL}2f [K`f;$A!|8&_Iԓ'g	jV&]tp۱Mz/'gUfYr=1.?[vwYY,kP+/zIjSrk!Y!, L7(2qReA|Y,0חVÇ(P
ÆXIjRRޚ=cޣ2$.*eN!OkY	, LXIrW zG7^woڒ?F8L[gV"kzeHs.0Yv'EX0rJ9355%y BX*F5< T_x+'*e}35`VJ}# >|W5ƛo yM4o  8)x;c	~[S:tt4s&E}RUI0U֞Z@M[wf\-FhԚo#1'a[fN 5xO;UÛ򘪨\Y"S@S34}ILw:WdLk#çSS:"e D̷.dtHhھqxڀB`75ՠ- \Kۀa?"7J`?vNTۛ"#HBQ^~oĸر9!WvmW b@7fԽ3_kl l~zJUs1ǁ۷wj`}̯Nhذ洕/cĳ}Gsxn"!9yȩ,',2=ddc%1<l5~j;_yM9
]^	蘋xv-[	_SϤsT\5iS) ر9augp>)X_]]` 8|h?]K|Lebzjfd`#s4coDZYN5:4~>p0dn$hOS9 DޠӁ>x>#?Db&ߺ=,9sJ%dl>Xk*@%`b\"'k*y/pɬCqa?I?2e7!01'IBeNGL?0CĘ<Fis> 9'mk  LdpWk9 {C@(ۮebwTpvvSܶbrο7:2$	o+'  W" ,Y4me!RmZf{/#\&Ʌ[r=1GR![&	mf@		i5G`z)-4ͣ۟JB߁X!6}m?)w	Z%ؾ$;7(0T@01$l3: 0Fyy J4m|,:%O1i
Ûʿ
̒Y`eo;{qCƎoy1,ۮ
fwr2W[l`ְ6А/}" b=p H`_I޿OH $~k6ķ N+O33y$ћ%K _gqk?jߗ>v*s?T@ ;ӊ*0=l*Lr+Atĸ}cnj9eUS ,25ޠopևomUzN H+)
%eTSӋ Lmn 0d#g\W]55FO
 " Dc飒T]55D
  !hݒJ-55MO &u~Al-ۮ^ 
XH:1JljjΊ (Bڲlۥ1>|AvT# b$g?oj'eVSSUV ,29mߦN9USsV @qE8ANF|6//۶*"`f%	.ۮ=ƴQgW 4BJAo?./ۮ=d+NmhW LV59eVS\á3
 
	$Y3)i-AMo%4ԙW"SD[6ljjvk%]6IU'2Ts%!}Z!j%͝IWy ;bKd?m[M.QNa/ ($!e"/I\HT܀817ќ{mlcSxSAeM%RcÍ;;7끽iHE&(Rk|"~MMYlC|"Ʀ:f"9sZy{:&l_!Fܲk97(|&	Y_[`x,@"x
phٶ5L#4?P" ChdU#@'(۶M6(h&.ysk- L,!E(Ћ1O8(\m$l v,Jo7Rf%Kyd嗵Y)lu3I~<ݠ^P$IlxˀX5+qoqd@oT`	B b4!,}x256\ -R@3AEb4#e=ÁeXSyn3*Xݢ3:Vrr<!rx00'Vkzoe&?5 PYh$Á2ǀO2<8Hv!=!I7L~댎9[<duq}pXmsͲI?3:wlT2ThMŨ̈c+A6kB/Gǳ67.ܔ&"L/W9'/	cmV< zK~hc`2iB B.bV!+?E~Ⰾ: 'LjrO¬3
yNh02CZacփրV	MAjdw~}5̅KQmW4pO-m32B.P!
`&^SkCLV .%2g1yuۇ 21̲Z V : PEK5;!r-ͯYqW1]7>    IENDB`

================================================================================
FILE: src/MyDesktopApplication.Desktop/Converters/Converters.cs
SIZE: 2.34 KB
MODIFIED: 2025-12-24 20:00:26
================================================================================

using System;
using System.Collections.Generic;
using System.Globalization;
using Avalonia.Data.Converters;
using Avalonia.Media;
using MyDesktopApplication.Core.Entities;

namespace MyDesktopApplication.Desktop.Converters;

/// <summary>
/// Converts QuestionType enum to human-readable label.
/// </summary>
public class QuestionTypeLabelConverter : IValueConverter
{
    public static readonly QuestionTypeLabelConverter Instance = new();

    public object? Convert(object? value, Type targetType, object? parameter, CultureInfo culture)
    {
        if (value is QuestionType qt)
        {
            return qt.GetLabel();
        }
        return value?.ToString() ?? "";
    }

    public object? ConvertBack(object? value, Type targetType, object? parameter, CultureInfo culture)
    {
        throw new NotSupportedException();
    }
}

/// <summary>
/// Converts answer state (IsCorrect, IsWrong) to background color.
/// Only colors the selected answer - unselected answers stay default.
/// </summary>
public class AnswerStateToBackgroundConverter : IMultiValueConverter
{
    public static readonly AnswerStateToBackgroundConverter Instance = new();

    public object? Convert(IList<object?> values, Type targetType, object? parameter, CultureInfo culture)
    {
        if (values.Count >= 2 && values[0] is bool isCorrect && values[1] is bool isWrong)
        {
            if (isCorrect)
                return new SolidColorBrush(Color.FromRgb(76, 175, 80)); // Green #4CAF50
            if (isWrong)
                return new SolidColorBrush(Color.FromRgb(244, 67, 54)); // Red #F44336
        }
        // Default - not selected or not answered yet
        return new SolidColorBrush(Color.FromRgb(30, 58, 95)); // Dark blue #1E3A5F
    }
}

/// <summary>
/// Converts answer state to foreground (text) color.
/// </summary>
public class AnswerStateToForegroundConverter : IMultiValueConverter
{
    public static readonly AnswerStateToForegroundConverter Instance = new();

    public object? Convert(IList<object?> values, Type targetType, object? parameter, CultureInfo culture)
    {
        if (values.Count >= 2 && values[0] is bool isCorrect && values[1] is bool isWrong)
        {
            if (isCorrect || isWrong)
                return new SolidColorBrush(Colors.White);
        }
        // Default text color
        return new SolidColorBrush(Colors.White);
    }
}


================================================================================
FILE: src/MyDesktopApplication.Desktop/MyDesktopApplication.Desktop.csproj
SIZE: 1.48 KB
MODIFIED: 2025-12-21 14:28:11
================================================================================

<Project Sdk="Microsoft.NET.Sdk">
  <PropertyGroup>
    <OutputType>WinExe</OutputType>
    <TargetFramework>net10.0</TargetFramework>
    <Nullable>enable</Nullable>
    <BuiltInComInteropSupport>true</BuiltInComInteropSupport>
    <ApplicationManifest>app.manifest</ApplicationManifest>
    <AvaloniaUseCompiledBindingsByDefault>true</AvaloniaUseCompiledBindingsByDefault>
    <ApplicationIcon>Assets\avalonia-logo.ico</ApplicationIcon>
  </PropertyGroup>
  <ItemGroup>
    <ProjectReference Include="..\MyDesktopApplication.Core\MyDesktopApplication.Core.csproj" />
    <ProjectReference Include="..\MyDesktopApplication.Infrastructure\MyDesktopApplication.Infrastructure.csproj" />
    <ProjectReference Include="..\MyDesktopApplication.Shared\MyDesktopApplication.Shared.csproj" />
  </ItemGroup>
  <ItemGroup>
    <PackageReference Include="Avalonia" />
    <PackageReference Include="Avalonia.Desktop" />
    <PackageReference Include="Avalonia.Themes.Fluent" />
    <PackageReference Include="Avalonia.Fonts.Inter" />
    <PackageReference Include="Avalonia.Diagnostics" Condition="'$(Configuration)' == 'Debug'" />
    <PackageReference Include="CommunityToolkit.Mvvm" />
    <PackageReference Include="Microsoft.EntityFrameworkCore.Design">
      <IncludeAssets>runtime; build; native; contentfiles; analyzers; buildtransitive</IncludeAssets>
      <PrivateAssets>all</PrivateAssets>
    </PackageReference>
    <PackageReference Include="Microsoft.Extensions.DependencyInjection" />
  </ItemGroup>
</Project>


================================================================================
FILE: src/MyDesktopApplication.Desktop/Program.cs
SIZE: .39 KB
MODIFIED: 2025-12-20 01:27:19
================================================================================

using Avalonia;
using System;

namespace MyDesktopApplication.Desktop;

sealed class Program
{
    [STAThread]
    public static void Main(string[] args) => BuildAvaloniaApp()
        .StartWithClassicDesktopLifetime(args);

    public static AppBuilder BuildAvaloniaApp()
        => AppBuilder.Configure<App>()
            .UsePlatformDetect()
            .WithInterFont()
            .LogToTrace();
}


================================================================================
FILE: src/MyDesktopApplication.Desktop/ViewModels/MainWindowViewModel.cs
SIZE: 7.75 KB
MODIFIED: 2025-12-24 20:00:26
================================================================================

using System.Collections.ObjectModel;
using CommunityToolkit.Mvvm.ComponentModel;
using CommunityToolkit.Mvvm.Input;
using MyDesktopApplication.Core.Entities;
using MyDesktopApplication.Core.Interfaces;
using MyDesktopApplication.Shared.Data;

namespace MyDesktopApplication.Desktop.ViewModels;

/// <summary>
/// ViewModel for the Desktop main window.
/// Implements the same quiz logic as CountryQuizViewModel for consistency.
/// </summary>
public partial class MainWindowViewModel : ViewModelBase
{
    private readonly Random _random = new();
    private readonly List<Country> _countries;
    private readonly IGameStateRepository? _gameStateRepository;
    private GameState _gameState = new();

    private Country? _country1;
    private Country? _country2;

    [ObservableProperty] private string _greeting = "Welcome to Country Quiz!";
    [ObservableProperty] private string _questionText = "Loading...";
    [ObservableProperty] private string _country1Name = "";
    [ObservableProperty] private string _country2Name = "";
    [ObservableProperty] private string _country1Flag = "";
    [ObservableProperty] private string _country2Flag = "";
    [ObservableProperty] private string _country1Value = "";
    [ObservableProperty] private string _country2Value = "";
    [ObservableProperty] private string _resultMessage = "";
    [ObservableProperty] private bool _hasAnswered;

    // Answer states - only highlight selected answer
    [ObservableProperty] private bool _isCountry1Correct;
    [ObservableProperty] private bool _isCountry1Wrong;
    [ObservableProperty] private bool _isCountry2Correct;
    [ObservableProperty] private bool _isCountry2Wrong;

    // Scores
    [ObservableProperty] private int _currentScore;
    [ObservableProperty] private int _highScore;
    [ObservableProperty] private int _currentStreak;
    [ObservableProperty] private int _bestStreak;
    [ObservableProperty] private int _totalQuestions;

    [ObservableProperty] private QuestionType _selectedQuestionType = QuestionType.Population;

    public ObservableCollection<QuestionType> QuestionTypes { get; } = new(Enum.GetValues<QuestionType>());

    public string ScoreText => $"Score: {CurrentScore}";
    public string StreakText => $"Streak: {CurrentStreak}";
    public string BestStreakText => $"Best: {BestStreak}";
    public string AccuracyText => TotalQuestions > 0
        ? $"Accuracy: {(double)CurrentScore / TotalQuestions * 100:N1}%"
        : "Accuracy: --";

    public MainWindowViewModel()
    {
        _countries = CountryData.GetAllCountries().ToList();
        GenerateNewQuestion();
    }

    public MainWindowViewModel(IGameStateRepository gameStateRepository) : this()
    {
        _gameStateRepository = gameStateRepository;
    }

    public async Task InitializeAsync()
    {
        if (_gameStateRepository != null)
        {
            try
            {
                _gameState = await _gameStateRepository.GetOrCreateAsync("default");
                CurrentScore = _gameState.CurrentScore;
                CurrentStreak = _gameState.CurrentStreak;
                BestStreak = _gameState.BestStreak;
                HighScore = _gameState.HighScore;
                OnPropertyChanged(nameof(ScoreText));
                OnPropertyChanged(nameof(StreakText));
                OnPropertyChanged(nameof(BestStreakText));
            }
            catch (Exception ex)
            {
                System.Diagnostics.Debug.WriteLine($"Error loading game state: {ex.Message}");
            }
        }
    }

    [RelayCommand]
    private async Task SelectCountry(string countryParam)
    {
        if (HasAnswered || _country1 == null || _country2 == null)
            return;

        if (!int.TryParse(countryParam, out int countryNumber))
            return;

        HasAnswered = true;
        TotalQuestions++;

        var value1 = SelectedQuestionType.GetValue(_country1);
        var value2 = SelectedQuestionType.GetValue(_country2);

        Country1Value = SelectedQuestionType.FormatValue(value1);
        Country2Value = SelectedQuestionType.FormatValue(value2);

        // FIX: Only highlight the selected answer
        IsCountry1Correct = false;
        IsCountry1Wrong = false;
        IsCountry2Correct = false;
        IsCountry2Wrong = false;

        bool isCorrect;
        if (countryNumber == 1)
        {
            isCorrect = value1 >= value2;
            IsCountry1Correct = isCorrect;
            IsCountry1Wrong = !isCorrect;
        }
        else
        {
            isCorrect = value2 >= value1;
            IsCountry2Correct = isCorrect;
            IsCountry2Wrong = !isCorrect;
        }

        if (isCorrect)
        {
            CurrentScore++;
            CurrentStreak++;
            if (CurrentStreak > BestStreak)
                BestStreak = CurrentStreak;
            if (CurrentScore > HighScore)
                HighScore = CurrentScore;
            ResultMessage = GetCorrectMessage();
        }
        else
        {
            CurrentStreak = 0;
            ResultMessage = GetIncorrectMessage();
        }

        _gameState.CurrentScore = CurrentScore;
        _gameState.CurrentStreak = CurrentStreak;
        _gameState.BestStreak = BestStreak;
        _gameState.HighScore = HighScore;
        _gameState.RecordAnswer(isCorrect);

        if (_gameStateRepository != null)
        {
            try
            {
                await _gameStateRepository.UpdateAsync(_gameState);
            }
            catch (Exception ex)
            {
                System.Diagnostics.Debug.WriteLine($"Error saving game state: {ex.Message}");
            }
        }

        OnPropertyChanged(nameof(ScoreText));
        OnPropertyChanged(nameof(StreakText));
        OnPropertyChanged(nameof(BestStreakText));
        OnPropertyChanged(nameof(AccuracyText));
    }

    [RelayCommand]
    private void NextRound()
    {
        GenerateNewQuestion();
    }

    [RelayCommand]
    private async Task ResetGame()
    {
        CurrentScore = 0;
        CurrentStreak = 0;
        TotalQuestions = 0;

        _gameState.CurrentScore = 0;
        _gameState.CurrentStreak = 0;

        if (_gameStateRepository != null)
        {
            try
            {
                await _gameStateRepository.UpdateAsync(_gameState);
            }
            catch (Exception ex)
            {
                System.Diagnostics.Debug.WriteLine($"Error resetting game state: {ex.Message}");
            }
        }

        OnPropertyChanged(nameof(ScoreText));
        OnPropertyChanged(nameof(StreakText));
        OnPropertyChanged(nameof(AccuracyText));

        GenerateNewQuestion();
    }

    private void GenerateNewQuestion()
    {
        HasAnswered = false;
        IsCountry1Correct = false;
        IsCountry1Wrong = false;
        IsCountry2Correct = false;
        IsCountry2Wrong = false;
        Country1Value = "";
        Country2Value = "";
        ResultMessage = "";

        var indices = Enumerable.Range(0, _countries.Count)
            .OrderBy(_ => _random.Next())
            .Take(2)
            .ToList();

        _country1 = _countries[indices[0]];
        _country2 = _countries[indices[1]];

        Country1Name = _country1.Name;
        Country2Name = _country2.Name;
        Country1Flag = _country1.Flag;
        Country2Flag = _country2.Flag;

        QuestionText = $"Which country has a higher {SelectedQuestionType.GetLabel()}?";
    }

    private string GetCorrectMessage()
    {
        var messages = new[]
        {
            "Correct!",
            "Well done!",
            "Great job!",
            "Excellent!",
            CurrentStreak >= 5 ? $"{CurrentStreak} in a row!" : "Keep it up!"
        };
        return messages[_random.Next(messages.Length)];
    }

    private string GetIncorrectMessage()
    {
        return "Not quite! The correct answer is shown above.";
    }
}


================================================================================
FILE: src/MyDesktopApplication.Desktop/ViewModels/ViewModelBase.cs
SIZE: .26 KB
MODIFIED: 2025-12-21 22:48:06
================================================================================

using CommunityToolkit.Mvvm.ComponentModel;

namespace MyDesktopApplication.Desktop.ViewModels;

public abstract partial class ViewModelBase : ObservableObject
{
    [ObservableProperty]
    private bool _isBusy;

    [ObservableProperty]
    private string? _errorMessage;
}


================================================================================
FILE: src/MyDesktopApplication.Desktop/Views/MainWindow.axaml
SIZE: 8.45 KB
MODIFIED: 2025-12-24 20:00:26
================================================================================

<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:MyDesktopApplication.Desktop.ViewModels"
        xmlns:conv="using:MyDesktopApplication.Desktop.Converters"
        x:Class="MyDesktopApplication.Desktop.Views.MainWindow"
        x:DataType="vm:MainWindowViewModel"
        Title="Country Quiz"
        Width="800" Height="600"
        MinWidth="600" MinHeight="500"
        Background="#1a1a2e">

    <Window.Resources>
        <conv:QuestionTypeLabelConverter x:Key="QuestionTypeLabelConverter"/>
        <conv:AnswerStateToBackgroundConverter x:Key="AnswerStateBgConverter"/>
        <conv:AnswerStateToForegroundConverter x:Key="AnswerStateFgConverter"/>
    </Window.Resources>

    <Grid Margin="24">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Border Grid.Row="0" Background="#16213e" CornerRadius="12" Padding="20" Margin="0,0,0,16">
            <Grid ColumnDefinitions="*,Auto">
                <StackPanel>
                    <TextBlock Text="Country Quiz" FontSize="28" FontWeight="Bold" Foreground="White"/>
                    <TextBlock Text="{Binding AccuracyText}" FontSize="14" Foreground="#a0a0a0"/>
                </StackPanel>
                <StackPanel Grid.Column="1" HorizontalAlignment="Right">
                    <TextBlock Text="{Binding ScoreText}" FontSize="20" FontWeight="SemiBold" Foreground="White"/>
                    <TextBlock Text="{Binding StreakText}" FontSize="14" Foreground="#90EE90"/>
                    <TextBlock Text="{Binding BestStreakText}" FontSize="12" Foreground="#FFD700"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Question Type Selector -->
        <Border Grid.Row="1" Background="#16213e" CornerRadius="8" Padding="16" Margin="0,0,0,16">
            <StackPanel Orientation="Horizontal" Spacing="12">
                <TextBlock Text="Category:" FontSize="14" Foreground="#a0a0a0" VerticalAlignment="Center"/>
                <ComboBox ItemsSource="{Binding QuestionTypes}"
                          SelectedItem="{Binding SelectedQuestionType}"
                          MinWidth="200">
                    <ComboBox.ItemTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding Converter={StaticResource QuestionTypeLabelConverter}}"/>
                        </DataTemplate>
                    </ComboBox.ItemTemplate>
                </ComboBox>
            </StackPanel>
        </Border>

        <!-- Main Game Area -->
        <Border Grid.Row="2" Background="#16213e" CornerRadius="12" Padding="24">
            <StackPanel VerticalAlignment="Center" Spacing="20">
                
                <!-- Question -->
                <TextBlock Text="{Binding QuestionText}"
                           FontSize="24" FontWeight="SemiBold"
                           TextAlignment="Center" TextWrapping="Wrap"
                           Foreground="White"/>

                <!-- Country Cards -->
                <Grid ColumnDefinitions="*,Auto,*">
                    <!-- Country 1 -->
                    <Button Grid.Column="0"
                            Command="{Binding SelectCountryCommand}"
                            CommandParameter="1"
                            HorizontalAlignment="Stretch"
                            VerticalAlignment="Stretch"
                            MinHeight="150"
                            Padding="0"
                            CornerRadius="12">
                        <Button.Background>
                            <MultiBinding Converter="{StaticResource AnswerStateBgConverter}">
                                <Binding Path="IsCountry1Correct"/>
                                <Binding Path="IsCountry1Wrong"/>
                            </MultiBinding>
                        </Button.Background>
                        <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center" Margin="16">
                            <TextBlock Text="{Binding Country1Flag}" FontSize="48" TextAlignment="Center"/>
                            <TextBlock Text="{Binding Country1Name}" FontSize="20" FontWeight="SemiBold" TextAlignment="Center">
                                <TextBlock.Foreground>
                                    <MultiBinding Converter="{StaticResource AnswerStateFgConverter}">
                                        <Binding Path="IsCountry1Correct"/>
                                        <Binding Path="IsCountry1Wrong"/>
                                    </MultiBinding>
                                </TextBlock.Foreground>
                            </TextBlock>
                            <TextBlock Text="{Binding Country1Value}"
                                       FontSize="14" Foreground="#a0a0a0" TextAlignment="Center"
                                       IsVisible="{Binding HasAnswered}"/>
                        </StackPanel>
                    </Button>

                    <!-- VS -->
                    <TextBlock Grid.Column="1" Text="VS" FontSize="20" FontWeight="Bold"
                               VerticalAlignment="Center" Foreground="#666" Margin="20,0"/>

                    <!-- Country 2 -->
                    <Button Grid.Column="2"
                            Command="{Binding SelectCountryCommand}"
                            CommandParameter="2"
                            HorizontalAlignment="Stretch"
                            VerticalAlignment="Stretch"
                            MinHeight="150"
                            Padding="0"
                            CornerRadius="12">
                        <Button.Background>
                            <MultiBinding Converter="{StaticResource AnswerStateBgConverter}">
                                <Binding Path="IsCountry2Correct"/>
                                <Binding Path="IsCountry2Wrong"/>
                            </MultiBinding>
                        </Button.Background>
                        <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center" Margin="16">
                            <TextBlock Text="{Binding Country2Flag}" FontSize="48" TextAlignment="Center"/>
                            <TextBlock Text="{Binding Country2Name}" FontSize="20" FontWeight="SemiBold" TextAlignment="Center">
                                <TextBlock.Foreground>
                                    <MultiBinding Converter="{StaticResource AnswerStateFgConverter}">
                                        <Binding Path="IsCountry2Correct"/>
                                        <Binding Path="IsCountry2Wrong"/>
                                    </MultiBinding>
                                </TextBlock.Foreground>
                            </TextBlock>
                            <TextBlock Text="{Binding Country2Value}"
                                       FontSize="14" Foreground="#a0a0a0" TextAlignment="Center"
                                       IsVisible="{Binding HasAnswered}"/>
                        </StackPanel>
                    </Button>
                </Grid>

                <!-- Result -->
                <TextBlock Text="{Binding ResultMessage}"
                           FontSize="20" FontWeight="SemiBold"
                           TextAlignment="Center"
                           Foreground="#90EE90"
                           IsVisible="{Binding HasAnswered}"/>

                <!-- Next Round Button - NO EMOJIS -->
                <Button Content="Next Round"
                        Command="{Binding NextRoundCommand}"
                        IsVisible="{Binding HasAnswered}"
                        HorizontalAlignment="Center"
                        MinWidth="200" MinHeight="48"
                        FontSize="16" FontWeight="SemiBold"
                        Background="#4CAF50"
                        Foreground="White"
                        CornerRadius="8"/>
            </StackPanel>
        </Border>

        <!-- Footer -->
        <StackPanel Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,16,0,0" Spacing="16">
            <Button Content="Reset Game"
                    Command="{Binding ResetGameCommand}"
                    MinWidth="120"
                    Background="#666"
                    Foreground="White"/>
        </StackPanel>
    </Grid>
</Window>


================================================================================
FILE: src/MyDesktopApplication.Desktop/Views/MainWindow.axaml.cs
SIZE: .42 KB
MODIFIED: 2025-12-21 22:48:06
================================================================================

using Avalonia.Controls;

namespace MyDesktopApplication.Desktop.Views;

public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();

        // Initialize the ViewModel when the window loads
        Loaded += async (_, _) =>
        {
            if (DataContext is ViewModels.MainWindowViewModel vm)
            {
                await vm.InitializeAsync();
            }
        };
    }
}


================================================================================
FILE: src/MyDesktopApplication.Infrastructure/Data/AppDbContext.cs
SIZE: 1.57 KB
MODIFIED: 2025-12-21 22:48:06
================================================================================

using Microsoft.EntityFrameworkCore;
using MyDesktopApplication.Core.Entities;

namespace MyDesktopApplication.Infrastructure.Data;

/// <summary>
/// Application database context
/// </summary>
public class AppDbContext : DbContext
{
    public AppDbContext(DbContextOptions<AppDbContext> options) : base(options)
    {
    }

    // For EF migrations design-time support
    public AppDbContext() : base(new DbContextOptionsBuilder<AppDbContext>()
        .UseSqlite("Data Source=app.db")
        .Options)
    {
    }

    public DbSet<TodoItem> TodoItems => Set<TodoItem>();
    public DbSet<GameState> GameStates => Set<GameState>();

    protected override void OnModelCreating(ModelBuilder modelBuilder)
    {
        base.OnModelCreating(modelBuilder);

        // TodoItem configuration
        modelBuilder.Entity<TodoItem>(entity =>
        {
            entity.HasKey(e => e.Id);
            entity.Property(e => e.Title).IsRequired().HasMaxLength(200);
            entity.Property(e => e.Description).HasMaxLength(1000);
            entity.HasIndex(e => e.IsCompleted);
            entity.HasIndex(e => e.DueDate);
        });

        // GameState configuration
        modelBuilder.Entity<GameState>(entity =>
        {
            entity.HasKey(e => e.Id);
            entity.Property(e => e.UserId).IsRequired().HasMaxLength(100);
            entity.HasIndex(e => e.UserId).IsUnique();

            // Store the enum as string for readability
            entity.Property(e => e.SelectedQuestionType)
                .HasConversion<string?>()
                .HasMaxLength(50);
        });
    }
}


================================================================================
FILE: src/MyDesktopApplication.Infrastructure/Data/DesignTimeDbContextFactory.cs
SIZE: 1.11 KB
MODIFIED: 2025-12-21 22:48:06
================================================================================

using Microsoft.EntityFrameworkCore;
using Microsoft.EntityFrameworkCore.Design;

namespace MyDesktopApplication.Infrastructure.Data;

/// <summary>
/// Factory for creating AppDbContext at design time (for EF migrations).
/// This is required because the Desktop app uses Avalonia's startup,
/// not the standard ASP.NET Core host that EF tools expect.
/// </summary>
public class DesignTimeDbContextFactory : IDesignTimeDbContextFactory<AppDbContext>
{
    public AppDbContext CreateDbContext(string[] args)
    {
        var optionsBuilder = new DbContextOptionsBuilder<AppDbContext>();

        // Use SQLite for migrations - this creates the migration files
        // The actual connection string at runtime comes from DI
        var dbPath = Path.Combine(
            Environment.GetFolderPath(Environment.SpecialFolder.LocalApplicationData),
            "MyDesktopApplication",
            "app.db");

        // Ensure directory exists
        Directory.CreateDirectory(Path.GetDirectoryName(dbPath)!);

        optionsBuilder.UseSqlite($"Data Source={dbPath}");

        return new AppDbContext(optionsBuilder.Options);
    }
}


================================================================================
FILE: src/MyDesktopApplication.Infrastructure/DependencyInjection.cs
SIZE: 1.29 KB
MODIFIED: 2025-12-21 22:48:06
================================================================================

using Microsoft.EntityFrameworkCore;
using Microsoft.Extensions.DependencyInjection;
using MyDesktopApplication.Core.Interfaces;
using MyDesktopApplication.Infrastructure.Data;
using MyDesktopApplication.Infrastructure.Repositories;

namespace MyDesktopApplication.Infrastructure;

public static class DependencyInjection
{
    public static IServiceCollection AddInfrastructure(this IServiceCollection services, string? dbPath = null)
    {
        var path = dbPath ?? Path.Combine(
            Environment.GetFolderPath(Environment.SpecialFolder.LocalApplicationData),
            "CountryQuiz",
            "countryquiz.db");

        var directory = Path.GetDirectoryName(path);
        if (!string.IsNullOrEmpty(directory) && !Directory.Exists(directory))
        {
            Directory.CreateDirectory(directory);
        }

        services.AddDbContext<AppDbContext>(options =>
            options.UseSqlite($"Data Source={path}"));

        services.AddScoped<IGameStateRepository, GameStateRepository>();

        return services;
    }

    public static async Task InitializeDatabaseAsync(IServiceProvider services)
    {
        using var scope = services.CreateScope();
        var context = scope.ServiceProvider.GetRequiredService<AppDbContext>();
        await context.Database.EnsureCreatedAsync();
    }
}


================================================================================
FILE: src/MyDesktopApplication.Infrastructure/MyDesktopApplication.Infrastructure.csproj
SIZE: .55 KB
MODIFIED: 2025-12-21 12:48:54
================================================================================

<Project Sdk="Microsoft.NET.Sdk">
  <PropertyGroup>
    <TargetFramework>net10.0</TargetFramework>
    <ImplicitUsings>enable</ImplicitUsings>
    <Nullable>enable</Nullable>
  </PropertyGroup>
  <ItemGroup>
    <ProjectReference Include="..\MyDesktopApplication.Core\MyDesktopApplication.Core.csproj" />
  </ItemGroup>
  <ItemGroup>
    <PackageReference Include="Microsoft.EntityFrameworkCore" />
    <PackageReference Include="Microsoft.EntityFrameworkCore.Sqlite" />
    <PackageReference Include="Microsoft.Extensions.DependencyInjection" />
  </ItemGroup>
</Project>


================================================================================
FILE: src/MyDesktopApplication.Infrastructure/Repositories/GameStateRepository.cs
SIZE: 1.47 KB
MODIFIED: 2025-12-21 20:51:34
================================================================================

using Microsoft.EntityFrameworkCore;
using MyDesktopApplication.Core.Entities;
using MyDesktopApplication.Core.Interfaces;
using MyDesktopApplication.Infrastructure.Data;

namespace MyDesktopApplication.Infrastructure.Repositories;

public class GameStateRepository : Repository<GameState>, IGameStateRepository
{
    public GameStateRepository(AppDbContext context) : base(context)
    {
    }

    public async Task<GameState> GetOrCreateAsync(string userId, CancellationToken ct = default)
    {
        var state = await DbSet.FirstOrDefaultAsync(g => g.UserId == userId, ct);
        if (state == null)
        {
            state = new GameState { UserId = userId };
            await AddAsync(state, ct);
        }
        return state;
    }

    public async Task<GameState?> GetByUserIdAsync(string userId, CancellationToken ct = default)
    {
        return await DbSet.FirstOrDefaultAsync(g => g.UserId == userId, ct);
    }

    public async Task SaveAsync(GameState gameState, CancellationToken ct = default)
    {
        // If the entity is new (Id is empty Guid), add it; otherwise update it
        if (gameState.Id == Guid.Empty)
        {
            await AddAsync(gameState, ct);
        }
        else
        {
            await UpdateAsync(gameState, ct);
        }
    }

    public async Task ResetAsync(string userId, CancellationToken ct = default)
    {
        var state = await GetOrCreateAsync(userId, ct);
        state.Reset();
        await UpdateAsync(state, ct);
    }
}


================================================================================
FILE: src/MyDesktopApplication.Infrastructure/Repositories/Repository.cs
SIZE: 1.76 KB
MODIFIED: 2025-12-20 01:51:45
================================================================================

using System.Linq.Expressions;
using Microsoft.EntityFrameworkCore;
using MyDesktopApplication.Core.Entities;
using MyDesktopApplication.Core.Interfaces;
using MyDesktopApplication.Infrastructure.Data;

namespace MyDesktopApplication.Infrastructure.Repositories;

/// <summary>
/// Generic repository implementation using Entity Framework Core
/// </summary>
public class Repository<T> : IRepository<T> where T : EntityBase
{
    protected readonly AppDbContext Context;
    protected readonly DbSet<T> DbSet;

    public Repository(AppDbContext context)
    {
        Context = context;
        DbSet = context.Set<T>();
    }

    public virtual async Task<T?> GetByIdAsync(Guid id, CancellationToken ct = default)
        => await DbSet.FindAsync([id], ct);

    public virtual async Task<IReadOnlyList<T>> GetAllAsync(CancellationToken ct = default)
        => await DbSet.AsNoTracking().ToListAsync(ct);

    public virtual async Task<IReadOnlyList<T>> FindAsync(
        Expression<Func<T, bool>> predicate, CancellationToken ct = default)
        => await DbSet.AsNoTracking().Where(predicate).ToListAsync(ct);

    public virtual async Task<T> AddAsync(T entity, CancellationToken ct = default)
    {
        await DbSet.AddAsync(entity, ct);
        await Context.SaveChangesAsync(ct);
        return entity;
    }

    public virtual async Task UpdateAsync(T entity, CancellationToken ct = default)
    {
        DbSet.Update(entity);
        await Context.SaveChangesAsync(ct);
    }

    public virtual async Task DeleteAsync(T entity, CancellationToken ct = default)
    {
        DbSet.Remove(entity);
        await Context.SaveChangesAsync(ct);
    }

    public virtual async Task<bool> ExistsAsync(Guid id, CancellationToken ct = default)
        => await DbSet.AnyAsync(e => e.Id == id, ct);
}


================================================================================
FILE: src/MyDesktopApplication.Infrastructure/Repositories/TodoRepository.cs
SIZE: 1.51 KB
MODIFIED: 2025-12-21 18:15:44
================================================================================

using Microsoft.EntityFrameworkCore;
using MyDesktopApplication.Core.Entities;
using MyDesktopApplication.Core.Interfaces;
using MyDesktopApplication.Infrastructure.Data;

namespace MyDesktopApplication.Infrastructure.Repositories;

/// <summary>
/// TodoItem-specific repository implementation
/// </summary>
public class TodoRepository : Repository<TodoItem>, ITodoRepository
{
    public TodoRepository(AppDbContext context) : base(context)
    {
    }

    public async Task<IReadOnlyList<TodoItem>> GetCompletedAsync(CancellationToken ct = default)
        => await DbSet.AsNoTracking()
            .Where(t => t.IsCompleted)
            .OrderByDescending(t => t.UpdatedAt)
            .ToListAsync(ct);

    public async Task<IReadOnlyList<TodoItem>> GetPendingAsync(CancellationToken ct = default)
        => await DbSet.AsNoTracking()
            .Where(t => !t.IsCompleted)
            .OrderBy(t => t.DueDate)
            .ThenByDescending(t => t.Priority)
            .ToListAsync(ct);

    /// <summary>
    /// Gets all incomplete (not completed) todo items - alias for GetPendingAsync
    /// </summary>
    public async Task<IReadOnlyList<TodoItem>> GetIncompleteAsync(CancellationToken ct = default)
        => await GetPendingAsync(ct);

    public async Task<IReadOnlyList<TodoItem>> GetOverdueAsync(CancellationToken ct = default)
        => await DbSet.AsNoTracking()
            .Where(t => !t.IsCompleted && t.DueDate != null && t.DueDate < DateTime.UtcNow)
            .OrderBy(t => t.DueDate)
            .ToListAsync(ct);
}


================================================================================
FILE: src/MyDesktopApplication.Shared/Data/CountryData.cs
SIZE: 46.61 KB
MODIFIED: 2025-12-22 08:40:39
================================================================================

using MyDesktopApplication.Core.Entities;

namespace MyDesktopApplication.Shared.Data;

public static class CountryData
{
    private static readonly List<Country> _countries = new()
    {
        new() { Code = "AFG", Name = "Afghanistan", Iso2 = "AF", Continent = "Asia", Population = 41128771, Area = 652230, GdpTotal = 14583, GdpPerCapita = 364, PopulationDensity = 63.0, LiteracyRate = 37.3, Hdi = 0.462, LifeExpectancy = 62.9 },
        new() { Code = "ALB", Name = "Albania", Iso2 = "AL", Continent = "Europe", Population = 2777689, Area = 28748, GdpTotal = 23032, GdpPerCapita = 8057, PopulationDensity = 96.6, LiteracyRate = 98.1, Hdi = 0.789, LifeExpectancy = 76.8 },
        new() { Code = "DZA", Name = "Algeria", Iso2 = "DZ", Continent = "Africa", Population = 44903225, Area = 2381741, GdpTotal = 224107, GdpPerCapita = 4982, PopulationDensity = 18.8, LiteracyRate = 81.4, Hdi = 0.745, LifeExpectancy = 76.4 },
        new() { Code = "AND", Name = "Andorra", Iso2 = "AD", Continent = "Europe", Population = 79824, Area = 468, GdpTotal = 3352, GdpPerCapita = 41992, PopulationDensity = 170.5, LiteracyRate = 100.0, Hdi = 0.855, LifeExpectancy = 83.0 },
        new() { Code = "AGO", Name = "Angola", Iso2 = "AO", Continent = "Africa", Population = 35588987, Area = 1246700, GdpTotal = 93796, GdpPerCapita = 2646, PopulationDensity = 28.5, LiteracyRate = 72.4, Hdi = 0.591, LifeExpectancy = 61.9 },
        new() { Code = "ATG", Name = "Antigua and Barbuda", Iso2 = "AG", Continent = "North America", Population = 93763, Area = 442, GdpTotal = 1949, GdpPerCapita = 20781, PopulationDensity = 212.1, LiteracyRate = 99.0, Hdi = 0.795, LifeExpectancy = 78.5 },
        new() { Code = "ARG", Name = "Argentina", Iso2 = "AR", Continent = "South America", Population = 46234830, Area = 2780400, GdpTotal = 621833, GdpPerCapita = 13448, PopulationDensity = 16.6, LiteracyRate = 99.0, Hdi = 0.849, LifeExpectancy = 76.8 },
        new() { Code = "ARM", Name = "Armenia", Iso2 = "AM", Continent = "Asia", Population = 2780469, Area = 29743, GdpTotal = 23725, GdpPerCapita = 8532, PopulationDensity = 93.4, LiteracyRate = 99.7, Hdi = 0.786, LifeExpectancy = 73.4 },
        new() { Code = "AUS", Name = "Australia", Iso2 = "AU", Continent = "Oceania", Population = 26439111, Area = 7692024, GdpTotal = 1707548, GdpPerCapita = 64585, PopulationDensity = 3.4, LiteracyRate = 99.0, Hdi = 0.946, LifeExpectancy = 83.2 },
        new() { Code = "AUT", Name = "Austria", Iso2 = "AT", Continent = "Europe", Population = 9106126, Area = 83871, GdpTotal = 515199, GdpPerCapita = 56578, PopulationDensity = 108.5, LiteracyRate = 99.0, Hdi = 0.926, LifeExpectancy = 81.6 },
        new() { Code = "AZE", Name = "Azerbaijan", Iso2 = "AZ", Continent = "Asia", Population = 10141756, Area = 86600, GdpTotal = 77392, GdpPerCapita = 7630, PopulationDensity = 117.1, LiteracyRate = 99.8, Hdi = 0.760, LifeExpectancy = 73.5 },
        new() { Code = "BHS", Name = "Bahamas", Iso2 = "BS", Continent = "North America", Population = 409984, Area = 13943, GdpTotal = 14114, GdpPerCapita = 34421, PopulationDensity = 29.4, LiteracyRate = 95.6, Hdi = 0.820, LifeExpectancy = 73.8 },
        new() { Code = "BHR", Name = "Bahrain", Iso2 = "BH", Continent = "Asia", Population = 1472233, Area = 765, GdpTotal = 44870, GdpPerCapita = 30476, PopulationDensity = 1924.4, LiteracyRate = 97.5, Hdi = 0.884, LifeExpectancy = 79.2 },
        new() { Code = "BGD", Name = "Bangladesh", Iso2 = "BD", Continent = "Asia", Population = 171186372, Area = 147570, GdpTotal = 455162, GdpPerCapita = 2658, PopulationDensity = 1160.0, LiteracyRate = 74.9, Hdi = 0.670, LifeExpectancy = 73.6 },
        new() { Code = "BRB", Name = "Barbados", Iso2 = "BB", Continent = "North America", Population = 281635, Area = 430, GdpTotal = 6117, GdpPerCapita = 21719, PopulationDensity = 655.0, LiteracyRate = 99.6, Hdi = 0.809, LifeExpectancy = 77.6 },
        new() { Code = "BLR", Name = "Belarus", Iso2 = "BY", Continent = "Europe", Population = 9208701, Area = 207600, GdpTotal = 68864, GdpPerCapita = 7478, PopulationDensity = 44.3, LiteracyRate = 99.9, Hdi = 0.801, LifeExpectancy = 72.4 },
        new() { Code = "BEL", Name = "Belgium", Iso2 = "BE", Continent = "Europe", Population = 11754004, Area = 30528, GdpTotal = 624248, GdpPerCapita = 53106, PopulationDensity = 385.0, LiteracyRate = 99.0, Hdi = 0.942, LifeExpectancy = 81.9 },
        new() { Code = "BLZ", Name = "Belize", Iso2 = "BZ", Continent = "North America", Population = 405272, Area = 22966, GdpTotal = 3218, GdpPerCapita = 7939, PopulationDensity = 17.6, LiteracyRate = 82.7, Hdi = 0.700, LifeExpectancy = 74.5 },
        new() { Code = "BEN", Name = "Benin", Iso2 = "BJ", Continent = "Africa", Population = 13352864, Area = 112622, GdpTotal = 19940, GdpPerCapita = 1493, PopulationDensity = 118.5, LiteracyRate = 45.8, Hdi = 0.504, LifeExpectancy = 61.8 },
        new() { Code = "BTN", Name = "Bhutan", Iso2 = "BT", Continent = "Asia", Population = 782455, Area = 38394, GdpTotal = 2686, GdpPerCapita = 3433, PopulationDensity = 20.3, LiteracyRate = 71.4, Hdi = 0.681, LifeExpectancy = 71.8 },
        new() { Code = "BOL", Name = "Bolivia", Iso2 = "BO", Continent = "South America", Population = 12224110, Area = 1098581, GdpTotal = 46842, GdpPerCapita = 3832, PopulationDensity = 11.1, LiteracyRate = 92.5, Hdi = 0.698, LifeExpectancy = 63.6 },
        new() { Code = "BIH", Name = "Bosnia and Herzegovina", Iso2 = "BA", Continent = "Europe", Population = 3233526, Area = 51209, GdpTotal = 26945, GdpPerCapita = 8333, PopulationDensity = 63.1, LiteracyRate = 98.5, Hdi = 0.776, LifeExpectancy = 75.3 },
        new() { Code = "BWA", Name = "Botswana", Iso2 = "BW", Continent = "Africa", Population = 2630296, Area = 582000, GdpTotal = 19959, GdpPerCapita = 7587, PopulationDensity = 4.5, LiteracyRate = 88.5, Hdi = 0.680, LifeExpectancy = 61.1 },
        new() { Code = "BRA", Name = "Brazil", Iso2 = "BR", Continent = "South America", Population = 215313498, Area = 8515767, GdpTotal = 2126809, GdpPerCapita = 9879, PopulationDensity = 25.2, LiteracyRate = 93.2, Hdi = 0.760, LifeExpectancy = 72.8 },
        new() { Code = "BRN", Name = "Brunei", Iso2 = "BN", Continent = "Asia", Population = 449002, Area = 5765, GdpTotal = 15153, GdpPerCapita = 33748, PopulationDensity = 77.8, LiteracyRate = 97.2, Hdi = 0.823, LifeExpectancy = 74.6 },
        new() { Code = "BGR", Name = "Bulgaria", Iso2 = "BG", Continent = "Europe", Population = 6465097, Area = 110879, GdpTotal = 100635, GdpPerCapita = 15565, PopulationDensity = 58.3, LiteracyRate = 98.4, Hdi = 0.799, LifeExpectancy = 71.5 },
        new() { Code = "BFA", Name = "Burkina Faso", Iso2 = "BF", Continent = "Africa", Population = 22673762, Area = 274200, GdpTotal = 20742, GdpPerCapita = 914, PopulationDensity = 82.6, LiteracyRate = 46.0, Hdi = 0.438, LifeExpectancy = 59.8 },
        new() { Code = "BDI", Name = "Burundi", Iso2 = "BI", Continent = "Africa", Population = 12889576, Area = 27834, GdpTotal = 2775, GdpPerCapita = 215, PopulationDensity = 463.0, LiteracyRate = 74.7, Hdi = 0.420, LifeExpectancy = 61.7 },
        new() { Code = "CPV", Name = "Cabo Verde", Iso2 = "CV", Continent = "Africa", Population = 593149, Area = 4033, GdpTotal = 2314, GdpPerCapita = 3901, PopulationDensity = 147.0, LiteracyRate = 86.8, Hdi = 0.651, LifeExpectancy = 74.1 },
        new() { Code = "KHM", Name = "Cambodia", Iso2 = "KH", Continent = "Asia", Population = 16767842, Area = 181035, GdpTotal = 30943, GdpPerCapita = 1845, PopulationDensity = 92.6, LiteracyRate = 80.5, Hdi = 0.600, LifeExpectancy = 69.6 },
        new() { Code = "CMR", Name = "Cameroon", Iso2 = "CM", Continent = "Africa", Population = 27914536, Area = 475442, GdpTotal = 48625, GdpPerCapita = 1742, PopulationDensity = 58.7, LiteracyRate = 77.1, Hdi = 0.587, LifeExpectancy = 60.6 },
        new() { Code = "CAN", Name = "Canada", Iso2 = "CA", Continent = "North America", Population = 40097761, Area = 9984670, GdpTotal = 2117805, GdpPerCapita = 52822, PopulationDensity = 4.0, LiteracyRate = 99.0, Hdi = 0.935, LifeExpectancy = 82.7 },
        new() { Code = "CAF", Name = "Central African Republic", Iso2 = "CF", Continent = "Africa", Population = 5579144, Area = 622984, GdpTotal = 2760, GdpPerCapita = 494, PopulationDensity = 8.9, LiteracyRate = 37.4, Hdi = 0.387, LifeExpectancy = 53.9 },
        new() { Code = "TCD", Name = "Chad", Iso2 = "TD", Continent = "Africa", Population = 17723315, Area = 1284000, GdpTotal = 12954, GdpPerCapita = 730, PopulationDensity = 13.8, LiteracyRate = 22.3, Hdi = 0.394, LifeExpectancy = 52.5 },
        new() { Code = "CHL", Name = "Chile", Iso2 = "CL", Continent = "South America", Population = 19603733, Area = 756102, GdpTotal = 334009, GdpPerCapita = 17036, PopulationDensity = 25.9, LiteracyRate = 96.4, Hdi = 0.860, LifeExpectancy = 79.5 },
        new() { Code = "CHN", Name = "China", Iso2 = "CN", Continent = "Asia", Population = 1411750000, Area = 9596960, GdpTotal = 17700899, GdpPerCapita = 12540, PopulationDensity = 147.1, LiteracyRate = 96.8, Hdi = 0.788, LifeExpectancy = 78.2 },
        new() { Code = "COL", Name = "Colombia", Iso2 = "CO", Continent = "South America", Population = 51874024, Area = 1141748, GdpTotal = 363835, GdpPerCapita = 7013, PopulationDensity = 45.4, LiteracyRate = 95.6, Hdi = 0.758, LifeExpectancy = 73.7 },
        new() { Code = "COM", Name = "Comoros", Iso2 = "KM", Continent = "Africa", Population = 836774, Area = 2235, GdpTotal = 1348, GdpPerCapita = 1610, PopulationDensity = 374.3, LiteracyRate = 58.8, Hdi = 0.586, LifeExpectancy = 63.4 },
        new() { Code = "COG", Name = "Congo, Republic of the", Iso2 = "CG", Continent = "Africa", Population = 5970424, Area = 342000, GdpTotal = 14407, GdpPerCapita = 2413, PopulationDensity = 17.4, LiteracyRate = 80.3, Hdi = 0.593, LifeExpectancy = 63.5 },
        new() { Code = "COD", Name = "Congo, Democratic Republic of the", Iso2 = "CD", Continent = "Africa", Population = 99010212, Area = 2344858, GdpTotal = 67512, GdpPerCapita = 681, PopulationDensity = 42.2, LiteracyRate = 77.0, Hdi = 0.481, LifeExpectancy = 59.2 },
        new() { Code = "CRI", Name = "Costa Rica", Iso2 = "CR", Continent = "North America", Population = 5180829, Area = 51100, GdpTotal = 85590, GdpPerCapita = 16518, PopulationDensity = 101.3, LiteracyRate = 97.9, Hdi = 0.806, LifeExpectancy = 77.0 },
        new() { Code = "CIV", Name = "Cote d'Ivoire", Iso2 = "CI", Continent = "Africa", Population = 28160542, Area = 322463, GdpTotal = 79430, GdpPerCapita = 2820, PopulationDensity = 87.3, LiteracyRate = 53.4, Hdi = 0.534, LifeExpectancy = 58.6 },
        new() { Code = "HRV", Name = "Croatia", Iso2 = "HR", Continent = "Europe", Population = 3855641, Area = 56594, GdpTotal = 82688, GdpPerCapita = 21445, PopulationDensity = 68.1, LiteracyRate = 99.3, Hdi = 0.867, LifeExpectancy = 77.6 },
        new() { Code = "CUB", Name = "Cuba", Iso2 = "CU", Continent = "North America", Population = 11212191, Area = 109884, GdpTotal = 147194, GdpPerCapita = 13128, PopulationDensity = 102.0, LiteracyRate = 99.8, Hdi = 0.764, LifeExpectancy = 73.7 },
        new() { Code = "CYP", Name = "Cyprus", Iso2 = "CY", Continent = "Europe", Population = 1251488, Area = 9251, GdpTotal = 32032, GdpPerCapita = 25595, PopulationDensity = 135.2, LiteracyRate = 99.1, Hdi = 0.907, LifeExpectancy = 81.2 },
        new() { Code = "CZE", Name = "Czech Republic", Iso2 = "CZ", Continent = "Europe", Population = 10672118, Area = 78865, GdpTotal = 335243, GdpPerCapita = 31412, PopulationDensity = 135.3, LiteracyRate = 99.0, Hdi = 0.895, LifeExpectancy = 79.5 },
        new() { Code = "DNK", Name = "Denmark", Iso2 = "DK", Continent = "Europe", Population = 5932654, Area = 43094, GdpTotal = 404199, GdpPerCapita = 68141, PopulationDensity = 137.6, LiteracyRate = 99.0, Hdi = 0.952, LifeExpectancy = 81.9 },
        new() { Code = "DJI", Name = "Djibouti", Iso2 = "DJ", Continent = "Africa", Population = 1120849, Area = 23200, GdpTotal = 4003, GdpPerCapita = 3571, PopulationDensity = 48.3, LiteracyRate = 67.9, Hdi = 0.515, LifeExpectancy = 62.3 },
        new() { Code = "DMA", Name = "Dominica", Iso2 = "DM", Continent = "North America", Population = 72737, Area = 751, GdpTotal = 658, GdpPerCapita = 9046, PopulationDensity = 96.8, LiteracyRate = 93.8, Hdi = 0.722, LifeExpectancy = 72.8 },
        new() { Code = "DOM", Name = "Dominican Republic", Iso2 = "DO", Continent = "North America", Population = 11228821, Area = 48671, GdpTotal = 120629, GdpPerCapita = 10742, PopulationDensity = 230.7, LiteracyRate = 95.5, Hdi = 0.766, LifeExpectancy = 73.7 },
        new() { Code = "ECU", Name = "Ecuador", Iso2 = "EC", Continent = "South America", Population = 18001000, Area = 283561, GdpTotal = 118845, GdpPerCapita = 6601, PopulationDensity = 63.4, LiteracyRate = 92.1, Hdi = 0.765, LifeExpectancy = 77.9 },
        new() { Code = "EGY", Name = "Egypt", Iso2 = "EG", Continent = "Africa", Population = 110990103, Area = 1001450, GdpTotal = 398397, GdpPerCapita = 3589, PopulationDensity = 110.8, LiteracyRate = 71.2, Hdi = 0.728, LifeExpectancy = 70.2 },
        new() { Code = "SLV", Name = "El Salvador", Iso2 = "SV", Continent = "North America", Population = 6336392, Area = 21041, GdpTotal = 34016, GdpPerCapita = 5367, PopulationDensity = 301.1, LiteracyRate = 89.1, Hdi = 0.674, LifeExpectancy = 70.7 },
        new() { Code = "GNQ", Name = "Equatorial Guinea", Iso2 = "GQ", Continent = "Africa", Population = 1674908, Area = 28051, GdpTotal = 12117, GdpPerCapita = 7234, PopulationDensity = 59.7, LiteracyRate = 95.3, Hdi = 0.550, LifeExpectancy = 60.6 },
        new() { Code = "ERI", Name = "Eritrea", Iso2 = "ER", Continent = "Africa", Population = 3684032, Area = 117600, GdpTotal = 2516, GdpPerCapita = 682, PopulationDensity = 31.3, LiteracyRate = 76.6, Hdi = 0.493, LifeExpectancy = 66.5 },
        new() { Code = "EST", Name = "Estonia", Iso2 = "EE", Continent = "Europe", Population = 1348840, Area = 45227, GdpTotal = 41799, GdpPerCapita = 30991, PopulationDensity = 29.8, LiteracyRate = 99.8, Hdi = 0.899, LifeExpectancy = 78.1 },
        new() { Code = "SWZ", Name = "Eswatini", Iso2 = "SZ", Continent = "Africa", Population = 1201670, Area = 17364, GdpTotal = 4784, GdpPerCapita = 3980, PopulationDensity = 69.2, LiteracyRate = 88.4, Hdi = 0.610, LifeExpectancy = 57.1 },
        new() { Code = "ETH", Name = "Ethiopia", Iso2 = "ET", Continent = "Africa", Population = 123379924, Area = 1104300, GdpTotal = 163698, GdpPerCapita = 1326, PopulationDensity = 111.7, LiteracyRate = 51.8, Hdi = 0.492, LifeExpectancy = 65.0 },
        new() { Code = "FJI", Name = "Fiji", Iso2 = "FJ", Continent = "Oceania", Population = 929766, Area = 18272, GdpTotal = 5495, GdpPerCapita = 5910, PopulationDensity = 50.8, LiteracyRate = 99.1, Hdi = 0.704, LifeExpectancy = 67.1 },
        new() { Code = "FIN", Name = "Finland", Iso2 = "FI", Continent = "Europe", Population = 5556106, Area = 338424, GdpTotal = 305689, GdpPerCapita = 55020, PopulationDensity = 16.4, LiteracyRate = 99.0, Hdi = 0.941, LifeExpectancy = 82.4 },
        new() { Code = "FRA", Name = "France", Iso2 = "FR", Continent = "Europe", Population = 67935660, Area = 643801, GdpTotal = 3030904, GdpPerCapita = 44611, PopulationDensity = 105.5, LiteracyRate = 99.0, Hdi = 0.910, LifeExpectancy = 83.2 },
        new() { Code = "GAB", Name = "Gabon", Iso2 = "GA", Continent = "Africa", Population = 2388992, Area = 267668, GdpTotal = 20516, GdpPerCapita = 8587, PopulationDensity = 8.9, LiteracyRate = 84.7, Hdi = 0.693, LifeExpectancy = 65.8 },
        new() { Code = "GMB", Name = "Gambia", Iso2 = "GM", Continent = "Africa", Population = 2705992, Area = 10689, GdpTotal = 2340, GdpPerCapita = 864, PopulationDensity = 253.1, LiteracyRate = 50.8, Hdi = 0.495, LifeExpectancy = 62.1 },
        new() { Code = "GEO", Name = "Georgia", Iso2 = "GE", Continent = "Asia", Population = 3712502, Area = 69700, GdpTotal = 30536, GdpPerCapita = 8225, PopulationDensity = 53.2, LiteracyRate = 99.6, Hdi = 0.814, LifeExpectancy = 71.7 },
        new() { Code = "DEU", Name = "Germany", Iso2 = "DE", Continent = "Europe", Population = 84079811, Area = 357022, GdpTotal = 4456081, GdpPerCapita = 52994, PopulationDensity = 235.5, LiteracyRate = 99.0, Hdi = 0.950, LifeExpectancy = 81.2 },
        new() { Code = "GHA", Name = "Ghana", Iso2 = "GH", Continent = "Africa", Population = 33475870, Area = 238533, GdpTotal = 76370, GdpPerCapita = 2281, PopulationDensity = 140.3, LiteracyRate = 79.0, Hdi = 0.602, LifeExpectancy = 63.8 },
        new() { Code = "GRC", Name = "Greece", Iso2 = "GR", Continent = "Europe", Population = 10394055, Area = 131957, GdpTotal = 238206, GdpPerCapita = 22917, PopulationDensity = 78.7, LiteracyRate = 97.9, Hdi = 0.893, LifeExpectancy = 80.6 },
        new() { Code = "GRD", Name = "Grenada", Iso2 = "GD", Continent = "North America", Population = 125438, Area = 344, GdpTotal = 1320, GdpPerCapita = 10523, PopulationDensity = 364.6, LiteracyRate = 98.6, Hdi = 0.793, LifeExpectancy = 74.9 },
        new() { Code = "GTM", Name = "Guatemala", Iso2 = "GT", Continent = "North America", Population = 17357886, Area = 108889, GdpTotal = 102050, GdpPerCapita = 5879, PopulationDensity = 159.4, LiteracyRate = 83.3, Hdi = 0.629, LifeExpectancy = 69.2 },
        new() { Code = "GIN", Name = "Guinea", Iso2 = "GN", Continent = "Africa", Population = 13859341, Area = 245857, GdpTotal = 23056, GdpPerCapita = 1663, PopulationDensity = 56.3, LiteracyRate = 45.3, Hdi = 0.471, LifeExpectancy = 58.9 },
        new() { Code = "GNB", Name = "Guinea-Bissau", Iso2 = "GW", Continent = "Africa", Population = 2105566, Area = 36125, GdpTotal = 1966, GdpPerCapita = 933, PopulationDensity = 58.2, LiteracyRate = 59.9, Hdi = 0.483, LifeExpectancy = 59.7 },
        new() { Code = "GUY", Name = "Guyana", Iso2 = "GY", Continent = "South America", Population = 808726, Area = 214969, GdpTotal = 16786, GdpPerCapita = 20755, PopulationDensity = 3.7, LiteracyRate = 85.6, Hdi = 0.742, LifeExpectancy = 65.7 },
        new() { Code = "HTI", Name = "Haiti", Iso2 = "HT", Continent = "North America", Population = 11584996, Area = 27750, GdpTotal = 25986, GdpPerCapita = 2242, PopulationDensity = 417.4, LiteracyRate = 61.7, Hdi = 0.552, LifeExpectancy = 63.2 },
        new() { Code = "HND", Name = "Honduras", Iso2 = "HN", Continent = "North America", Population = 10432860, Area = 112492, GdpTotal = 34401, GdpPerCapita = 3297, PopulationDensity = 92.7, LiteracyRate = 88.5, Hdi = 0.624, LifeExpectancy = 70.1 },
        new() { Code = "HUN", Name = "Hungary", Iso2 = "HU", Continent = "Europe", Population = 9678000, Area = 93028, GdpTotal = 212389, GdpPerCapita = 21943, PopulationDensity = 104.0, LiteracyRate = 99.1, Hdi = 0.851, LifeExpectancy = 76.0 },
        new() { Code = "ISL", Name = "Iceland", Iso2 = "IS", Continent = "Europe", Population = 381900, Area = 103000, GdpTotal = 31020, GdpPerCapita = 81223, PopulationDensity = 3.7, LiteracyRate = 99.0, Hdi = 0.959, LifeExpectancy = 82.7 },
        new() { Code = "IND", Name = "India", Iso2 = "IN", Continent = "Asia", Population = 1417173173, Area = 3287263, GdpTotal = 3730000, GdpPerCapita = 2612, PopulationDensity = 431.1, LiteracyRate = 77.7, Hdi = 0.644, LifeExpectancy = 67.2 },
        new() { Code = "IDN", Name = "Indonesia", Iso2 = "ID", Continent = "Asia", Population = 275501339, Area = 1904569, GdpTotal = 1371171, GdpPerCapita = 4976, PopulationDensity = 144.6, LiteracyRate = 96.0, Hdi = 0.713, LifeExpectancy = 67.6 },
        new() { Code = "IRN", Name = "Iran", Iso2 = "IR", Continent = "Asia", Population = 88550570, Area = 1648195, GdpTotal = 366438, GdpPerCapita = 4138, PopulationDensity = 53.7, LiteracyRate = 85.5, Hdi = 0.780, LifeExpectancy = 73.9 },
        new() { Code = "IRQ", Name = "Iraq", Iso2 = "IQ", Continent = "Asia", Population = 44496122, Area = 438317, GdpTotal = 250843, GdpPerCapita = 5637, PopulationDensity = 101.5, LiteracyRate = 85.6, Hdi = 0.673, LifeExpectancy = 70.4 },
        new() { Code = "IRL", Name = "Ireland", Iso2 = "IE", Continent = "Europe", Population = 5127170, Area = 70273, GdpTotal = 589569, GdpPerCapita = 114987, PopulationDensity = 73.0, LiteracyRate = 99.0, Hdi = 0.950, LifeExpectancy = 82.0 },
        new() { Code = "ISR", Name = "Israel", Iso2 = "IL", Continent = "Asia", Population = 9550600, Area = 22072, GdpTotal = 509901, GdpPerCapita = 53392, PopulationDensity = 432.6, LiteracyRate = 97.8, Hdi = 0.915, LifeExpectancy = 82.5 },
        new() { Code = "ITA", Name = "Italy", Iso2 = "IT", Continent = "Europe", Population = 58850717, Area = 301340, GdpTotal = 2254851, GdpPerCapita = 38311, PopulationDensity = 195.3, LiteracyRate = 99.2, Hdi = 0.906, LifeExpectancy = 82.9 },
        new() { Code = "JAM", Name = "Jamaica", Iso2 = "JM", Continent = "North America", Population = 2827377, Area = 10991, GdpTotal = 19423, GdpPerCapita = 6869, PopulationDensity = 257.2, LiteracyRate = 88.7, Hdi = 0.706, LifeExpectancy = 70.5 },
        new() { Code = "JPN", Name = "Japan", Iso2 = "JP", Continent = "Asia", Population = 125100000, Area = 377975, GdpTotal = 4212945, GdpPerCapita = 33671, PopulationDensity = 331.0, LiteracyRate = 99.0, Hdi = 0.920, LifeExpectancy = 84.1 },
        new() { Code = "JOR", Name = "Jordan", Iso2 = "JO", Continent = "Asia", Population = 11285869, Area = 89342, GdpTotal = 50814, GdpPerCapita = 4502, PopulationDensity = 126.3, LiteracyRate = 98.2, Hdi = 0.736, LifeExpectancy = 74.3 },
        new() { Code = "KAZ", Name = "Kazakhstan", Iso2 = "KZ", Continent = "Asia", Population = 19621972, Area = 2724900, GdpTotal = 261421, GdpPerCapita = 13324, PopulationDensity = 7.2, LiteracyRate = 99.8, Hdi = 0.802, LifeExpectancy = 70.2 },
        new() { Code = "KEN", Name = "Kenya", Iso2 = "KE", Continent = "Africa", Population = 54027487, Area = 580367, GdpTotal = 107441, GdpPerCapita = 1989, PopulationDensity = 93.0, LiteracyRate = 82.9, Hdi = 0.601, LifeExpectancy = 61.4 },
        new() { Code = "KIR", Name = "Kiribati", Iso2 = "KI", Continent = "Oceania", Population = 131232, Area = 811, GdpTotal = 279, GdpPerCapita = 2125, PopulationDensity = 161.8, LiteracyRate = 97.7, Hdi = 0.628, LifeExpectancy = 67.7 },
        new() { Code = "KWT", Name = "Kuwait", Iso2 = "KW", Continent = "Asia", Population = 4268873, Area = 17818, GdpTotal = 161772, GdpPerCapita = 37901, PopulationDensity = 239.5, LiteracyRate = 96.5, Hdi = 0.847, LifeExpectancy = 78.7 },
        new() { Code = "KGZ", Name = "Kyrgyzstan", Iso2 = "KG", Continent = "Asia", Population = 6966798, Area = 199951, GdpTotal = 13911, GdpPerCapita = 1996, PopulationDensity = 34.8, LiteracyRate = 99.6, Hdi = 0.701, LifeExpectancy = 71.8 },
        new() { Code = "LAO", Name = "Laos", Iso2 = "LA", Continent = "Asia", Population = 7529475, Area = 236800, GdpTotal = 15843, GdpPerCapita = 2104, PopulationDensity = 31.8, LiteracyRate = 84.7, Hdi = 0.620, LifeExpectancy = 68.1 },
        new() { Code = "LVA", Name = "Latvia", Iso2 = "LV", Continent = "Europe", Population = 1883008, Area = 64589, GdpTotal = 43627, GdpPerCapita = 23165, PopulationDensity = 29.1, LiteracyRate = 99.9, Hdi = 0.879, LifeExpectancy = 73.4 },
        new() { Code = "LBN", Name = "Lebanon", Iso2 = "LB", Continent = "Asia", Population = 5489739, Area = 10452, GdpTotal = 23132, GdpPerCapita = 4213, PopulationDensity = 525.2, LiteracyRate = 95.1, Hdi = 0.725, LifeExpectancy = 75.0 },
        new() { Code = "LSO", Name = "Lesotho", Iso2 = "LS", Continent = "Africa", Population = 2305825, Area = 30355, GdpTotal = 2553, GdpPerCapita = 1107, PopulationDensity = 75.9, LiteracyRate = 81.0, Hdi = 0.521, LifeExpectancy = 53.0 },
        new() { Code = "LBR", Name = "Liberia", Iso2 = "LR", Continent = "Africa", Population = 5302681, Area = 111369, GdpTotal = 4330, GdpPerCapita = 816, PopulationDensity = 47.6, LiteracyRate = 48.3, Hdi = 0.487, LifeExpectancy = 60.7 },
        new() { Code = "LBY", Name = "Libya", Iso2 = "LY", Continent = "Africa", Population = 6812341, Area = 1759540, GdpTotal = 45752, GdpPerCapita = 6716, PopulationDensity = 3.9, LiteracyRate = 86.1, Hdi = 0.746, LifeExpectancy = 71.9 },
        new() { Code = "LIE", Name = "Liechtenstein", Iso2 = "LI", Continent = "Europe", Population = 39327, Area = 160, GdpTotal = 7186, GdpPerCapita = 182728, PopulationDensity = 245.8, LiteracyRate = 100.0, Hdi = 0.942, LifeExpectancy = 83.3 },
        new() { Code = "LTU", Name = "Lithuania", Iso2 = "LT", Continent = "Europe", Population = 2805998, Area = 65300, GdpTotal = 77836, GdpPerCapita = 27741, PopulationDensity = 42.9, LiteracyRate = 99.8, Hdi = 0.879, LifeExpectancy = 74.2 },
        new() { Code = "LUX", Name = "Luxembourg", Iso2 = "LU", Continent = "Europe", Population = 653103, Area = 2586, GdpTotal = 85755, GdpPerCapita = 131301, PopulationDensity = 252.5, LiteracyRate = 100.0, Hdi = 0.927, LifeExpectancy = 82.7 },
        new() { Code = "MDG", Name = "Madagascar", Iso2 = "MG", Continent = "Africa", Population = 29611714, Area = 587041, GdpTotal = 16032, GdpPerCapita = 541, PopulationDensity = 50.4, LiteracyRate = 76.7, Hdi = 0.487, LifeExpectancy = 64.5 },
        new() { Code = "MWI", Name = "Malawi", Iso2 = "MW", Continent = "Africa", Population = 20405317, Area = 118484, GdpTotal = 13164, GdpPerCapita = 645, PopulationDensity = 172.2, LiteracyRate = 62.1, Hdi = 0.508, LifeExpectancy = 62.9 },
        new() { Code = "MYS", Name = "Malaysia", Iso2 = "MY", Continent = "Asia", Population = 33938221, Area = 330803, GdpTotal = 430895, GdpPerCapita = 12696, PopulationDensity = 102.6, LiteracyRate = 95.7, Hdi = 0.807, LifeExpectancy = 74.8 },
        new() { Code = "MDV", Name = "Maldives", Iso2 = "MV", Continent = "Asia", Population = 523787, Area = 300, GdpTotal = 6600, GdpPerCapita = 12600, PopulationDensity = 1745.9, LiteracyRate = 97.7, Hdi = 0.762, LifeExpectancy = 79.9 },
        new() { Code = "MLI", Name = "Mali", Iso2 = "ML", Continent = "Africa", Population = 22593590, Area = 1240192, GdpTotal = 20904, GdpPerCapita = 925, PopulationDensity = 18.2, LiteracyRate = 30.8, Hdi = 0.410, LifeExpectancy = 58.9 },
        new() { Code = "MLT", Name = "Malta", Iso2 = "MT", Continent = "Europe", Population = 533286, Area = 316, GdpTotal = 20957, GdpPerCapita = 39299, PopulationDensity = 1687.6, LiteracyRate = 95.5, Hdi = 0.915, LifeExpectancy = 83.8 },
        new() { Code = "MHL", Name = "Marshall Islands", Iso2 = "MH", Continent = "Oceania", Population = 41569, Area = 181, GdpTotal = 284, GdpPerCapita = 6831, PopulationDensity = 229.6, LiteracyRate = 98.3, Hdi = 0.652, LifeExpectancy = 65.3 },
        new() { Code = "MRT", Name = "Mauritania", Iso2 = "MR", Continent = "Africa", Population = 4736139, Area = 1030700, GdpTotal = 10453, GdpPerCapita = 2207, PopulationDensity = 4.6, LiteracyRate = 53.5, Hdi = 0.556, LifeExpectancy = 64.4 },
        new() { Code = "MUS", Name = "Mauritius", Iso2 = "MU", Continent = "Africa", Population = 1262523, Area = 2040, GdpTotal = 14397, GdpPerCapita = 11403, PopulationDensity = 618.9, LiteracyRate = 91.3, Hdi = 0.796, LifeExpectancy = 73.6 },
        new() { Code = "MEX", Name = "Mexico", Iso2 = "MX", Continent = "North America", Population = 127504125, Area = 1964375, GdpTotal = 1788887, GdpPerCapita = 14030, PopulationDensity = 64.9, LiteracyRate = 95.2, Hdi = 0.781, LifeExpectancy = 70.2 },
        new() { Code = "FSM", Name = "Micronesia", Iso2 = "FM", Continent = "Oceania", Population = 114164, Area = 702, GdpTotal = 460, GdpPerCapita = 4029, PopulationDensity = 162.6, LiteracyRate = 89.0, Hdi = 0.634, LifeExpectancy = 70.7 },
        new() { Code = "MDA", Name = "Moldova", Iso2 = "MD", Continent = "Europe", Population = 2538894, Area = 33846, GdpTotal = 16539, GdpPerCapita = 6515, PopulationDensity = 75.0, LiteracyRate = 99.6, Hdi = 0.763, LifeExpectancy = 68.8 },
        new() { Code = "MCO", Name = "Monaco", Iso2 = "MC", Continent = "Europe", Population = 36469, Area = 2, GdpTotal = 8596, GdpPerCapita = 234316, PopulationDensity = 18234.5, LiteracyRate = 99.0, Hdi = 0.956, LifeExpectancy = 85.9 },
        new() { Code = "MNG", Name = "Mongolia", Iso2 = "MN", Continent = "Asia", Population = 3398366, Area = 1564116, GdpTotal = 19872, GdpPerCapita = 5848, PopulationDensity = 2.2, LiteracyRate = 98.6, Hdi = 0.741, LifeExpectancy = 72.4 },
        new() { Code = "MNE", Name = "Montenegro", Iso2 = "ME", Continent = "Europe", Population = 617213, Area = 13812, GdpTotal = 7405, GdpPerCapita = 11997, PopulationDensity = 44.7, LiteracyRate = 98.8, Hdi = 0.844, LifeExpectancy = 73.8 },
        new() { Code = "MAR", Name = "Morocco", Iso2 = "MA", Continent = "Africa", Population = 37457971, Area = 446550, GdpTotal = 147480, GdpPerCapita = 3936, PopulationDensity = 83.9, LiteracyRate = 74.3, Hdi = 0.698, LifeExpectancy = 75.0 },
        new() { Code = "MOZ", Name = "Mozambique", Iso2 = "MZ", Continent = "Africa", Population = 32969518, Area = 801590, GdpTotal = 20600, GdpPerCapita = 625, PopulationDensity = 41.1, LiteracyRate = 60.7, Hdi = 0.461, LifeExpectancy = 59.3 },
        new() { Code = "MMR", Name = "Myanmar", Iso2 = "MM", Continent = "Asia", Population = 54179306, Area = 676578, GdpTotal = 64815, GdpPerCapita = 1196, PopulationDensity = 80.1, LiteracyRate = 89.1, Hdi = 0.599, LifeExpectancy = 65.7 },
        new() { Code = "NAM", Name = "Namibia", Iso2 = "NA", Continent = "Africa", Population = 2567012, Area = 824292, GdpTotal = 12607, GdpPerCapita = 4911, PopulationDensity = 3.1, LiteracyRate = 91.6, Hdi = 0.610, LifeExpectancy = 59.3 },
        new() { Code = "NRU", Name = "Nauru", Iso2 = "NR", Continent = "Oceania", Population = 12668, Area = 21, GdpTotal = 153, GdpPerCapita = 12078, PopulationDensity = 603.2, LiteracyRate = 96.0, Hdi = 0.696, LifeExpectancy = 63.6 },
        new() { Code = "NPL", Name = "Nepal", Iso2 = "NP", Continent = "Asia", Population = 30547580, Area = 147181, GdpTotal = 40828, GdpPerCapita = 1336, PopulationDensity = 207.5, LiteracyRate = 71.1, Hdi = 0.601, LifeExpectancy = 68.4 },
        new() { Code = "NLD", Name = "Netherlands", Iso2 = "NL", Continent = "Europe", Population = 17703090, Area = 41543, GdpTotal = 1118125, GdpPerCapita = 63162, PopulationDensity = 426.1, LiteracyRate = 99.0, Hdi = 0.946, LifeExpectancy = 82.0 },
        new() { Code = "NZL", Name = "New Zealand", Iso2 = "NZ", Continent = "Oceania", Population = 5185288, Area = 268021, GdpTotal = 253466, GdpPerCapita = 48880, PopulationDensity = 19.3, LiteracyRate = 99.0, Hdi = 0.939, LifeExpectancy = 82.5 },
        new() { Code = "NIC", Name = "Nicaragua", Iso2 = "NI", Continent = "North America", Population = 6948392, Area = 130373, GdpTotal = 17820, GdpPerCapita = 2565, PopulationDensity = 53.3, LiteracyRate = 82.6, Hdi = 0.669, LifeExpectancy = 73.8 },
        new() { Code = "NER", Name = "Niger", Iso2 = "NE", Continent = "Africa", Population = 26207977, Area = 1267000, GdpTotal = 16819, GdpPerCapita = 642, PopulationDensity = 20.7, LiteracyRate = 37.3, Hdi = 0.423, LifeExpectancy = 61.6 },
        new() { Code = "NGA", Name = "Nigeria", Iso2 = "NG", Continent = "Africa", Population = 218541212, Area = 923768, GdpTotal = 390002, GdpPerCapita = 1784, PopulationDensity = 236.6, LiteracyRate = 62.0, Hdi = 0.548, LifeExpectancy = 52.7 },
        new() { Code = "MKD", Name = "North Macedonia", Iso2 = "MK", Continent = "Europe", Population = 1836713, Area = 25713, GdpTotal = 14761, GdpPerCapita = 8037, PopulationDensity = 71.4, LiteracyRate = 98.4, Hdi = 0.764, LifeExpectancy = 73.8 },
        new() { Code = "NOR", Name = "Norway", Iso2 = "NO", Continent = "Europe", Population = 5457127, Area = 385207, GdpTotal = 485513, GdpPerCapita = 88965, PopulationDensity = 14.2, LiteracyRate = 99.0, Hdi = 0.966, LifeExpectancy = 83.2 },
        new() { Code = "OMN", Name = "Oman", Iso2 = "OM", Continent = "Asia", Population = 4576298, Area = 309500, GdpTotal = 108192, GdpPerCapita = 23641, PopulationDensity = 14.8, LiteracyRate = 95.7, Hdi = 0.819, LifeExpectancy = 72.5 },
        new() { Code = "PAK", Name = "Pakistan", Iso2 = "PK", Continent = "Asia", Population = 235824862, Area = 881913, GdpTotal = 338868, GdpPerCapita = 1437, PopulationDensity = 267.4, LiteracyRate = 58.0, Hdi = 0.540, LifeExpectancy = 66.1 },
        new() { Code = "PLW", Name = "Palau", Iso2 = "PW", Continent = "Oceania", Population = 18055, Area = 459, GdpTotal = 263, GdpPerCapita = 14567, PopulationDensity = 39.3, LiteracyRate = 96.6, Hdi = 0.797, LifeExpectancy = 64.8 },
        new() { Code = "PAN", Name = "Panama", Iso2 = "PA", Continent = "North America", Population = 4408581, Area = 75417, GdpTotal = 83382, GdpPerCapita = 18913, PopulationDensity = 58.5, LiteracyRate = 95.7, Hdi = 0.820, LifeExpectancy = 76.2 },
        new() { Code = "PNG", Name = "Papua New Guinea", Iso2 = "PG", Continent = "Oceania", Population = 10142619, Area = 462840, GdpTotal = 30932, GdpPerCapita = 3049, PopulationDensity = 21.9, LiteracyRate = 61.6, Hdi = 0.568, LifeExpectancy = 65.0 },
        new() { Code = "PRY", Name = "Paraguay", Iso2 = "PY", Continent = "South America", Population = 6780744, Area = 406752, GdpTotal = 42956, GdpPerCapita = 6335, PopulationDensity = 16.7, LiteracyRate = 94.5, Hdi = 0.731, LifeExpectancy = 73.6 },
        new() { Code = "PER", Name = "Peru", Iso2 = "PE", Continent = "South America", Population = 34049588, Area = 1285216, GdpTotal = 267603, GdpPerCapita = 7859, PopulationDensity = 26.5, LiteracyRate = 94.5, Hdi = 0.762, LifeExpectancy = 73.6 },
        new() { Code = "PHL", Name = "Philippines", Iso2 = "PH", Continent = "Asia", Population = 115559009, Area = 300000, GdpTotal = 437146, GdpPerCapita = 3783, PopulationDensity = 385.2, LiteracyRate = 96.3, Hdi = 0.710, LifeExpectancy = 72.2 },
        new() { Code = "POL", Name = "Poland", Iso2 = "PL", Continent = "Europe", Population = 36821749, Area = 312696, GdpTotal = 811229, GdpPerCapita = 22031, PopulationDensity = 117.8, LiteracyRate = 99.8, Hdi = 0.881, LifeExpectancy = 75.6 },
        new() { Code = "PRT", Name = "Portugal", Iso2 = "PT", Continent = "Europe", Population = 10409995, Area = 92212, GdpTotal = 287080, GdpPerCapita = 27576, PopulationDensity = 112.9, LiteracyRate = 96.1, Hdi = 0.874, LifeExpectancy = 82.2 },
        new() { Code = "QAT", Name = "Qatar", Iso2 = "QA", Continent = "Asia", Population = 2695122, Area = 11586, GdpTotal = 237296, GdpPerCapita = 88047, PopulationDensity = 232.6, LiteracyRate = 93.5, Hdi = 0.855, LifeExpectancy = 79.3 },
        new() { Code = "ROU", Name = "Romania", Iso2 = "RO", Continent = "Europe", Population = 19053815, Area = 238391, GdpTotal = 351003, GdpPerCapita = 18422, PopulationDensity = 79.9, LiteracyRate = 98.9, Hdi = 0.827, LifeExpectancy = 72.9 },
        new() { Code = "RUS", Name = "Russia", Iso2 = "RU", Continent = "Europe", Population = 144236933, Area = 17098242, GdpTotal = 1997030, GdpPerCapita = 13845, PopulationDensity = 8.4, LiteracyRate = 99.7, Hdi = 0.821, LifeExpectancy = 69.4 },
        new() { Code = "RWA", Name = "Rwanda", Iso2 = "RW", Continent = "Africa", Population = 13776698, Area = 26338, GdpTotal = 14098, GdpPerCapita = 1023, PopulationDensity = 523.1, LiteracyRate = 73.2, Hdi = 0.548, LifeExpectancy = 66.1 },
        new() { Code = "KNA", Name = "Saint Kitts and Nevis", Iso2 = "KN", Continent = "North America", Population = 47657, Area = 261, GdpTotal = 1077, GdpPerCapita = 22601, PopulationDensity = 182.6, LiteracyRate = 97.8, Hdi = 0.783, LifeExpectancy = 71.7 },
        new() { Code = "LCA", Name = "Saint Lucia", Iso2 = "LC", Continent = "North America", Population = 179857, Area = 616, GdpTotal = 2520, GdpPerCapita = 14011, PopulationDensity = 292.0, LiteracyRate = 90.1, Hdi = 0.725, LifeExpectancy = 71.1 },
        new() { Code = "VCT", Name = "Saint Vincent and the Grenadines", Iso2 = "VC", Continent = "North America", Population = 103948, Area = 389, GdpTotal = 1066, GdpPerCapita = 10255, PopulationDensity = 267.2, LiteracyRate = 96.0, Hdi = 0.772, LifeExpectancy = 69.6 },
        new() { Code = "WSM", Name = "Samoa", Iso2 = "WS", Continent = "Oceania", Population = 222382, Area = 2842, GdpTotal = 934, GdpPerCapita = 4200, PopulationDensity = 78.3, LiteracyRate = 99.1, Hdi = 0.702, LifeExpectancy = 72.8 },
        new() { Code = "SMR", Name = "San Marino", Iso2 = "SM", Continent = "Europe", Population = 33660, Area = 61, GdpTotal = 1855, GdpPerCapita = 55106, PopulationDensity = 551.8, LiteracyRate = 99.9, Hdi = 0.867, LifeExpectancy = 83.0 },
        new() { Code = "STP", Name = "Sao Tome and Principe", Iso2 = "ST", Continent = "Africa", Population = 227380, Area = 964, GdpTotal = 603, GdpPerCapita = 2652, PopulationDensity = 235.9, LiteracyRate = 92.8, Hdi = 0.613, LifeExpectancy = 68.8 },
        new() { Code = "SAU", Name = "Saudi Arabia", Iso2 = "SA", Continent = "Asia", Population = 36408820, Area = 2149690, GdpTotal = 1108149, GdpPerCapita = 30438, PopulationDensity = 16.9, LiteracyRate = 97.6, Hdi = 0.875, LifeExpectancy = 76.9 },
        new() { Code = "SEN", Name = "Senegal", Iso2 = "SN", Continent = "Africa", Population = 17316449, Area = 196722, GdpTotal = 31014, GdpPerCapita = 1791, PopulationDensity = 88.0, LiteracyRate = 51.9, Hdi = 0.517, LifeExpectancy = 67.1 },
        new() { Code = "SRB", Name = "Serbia", Iso2 = "RS", Continent = "Europe", Population = 6664449, Area = 88361, GdpTotal = 75187, GdpPerCapita = 11281, PopulationDensity = 75.4, LiteracyRate = 99.5, Hdi = 0.805, LifeExpectancy = 74.2 },
        new() { Code = "SYC", Name = "Seychelles", Iso2 = "SC", Continent = "Africa", Population = 119878, Area = 452, GdpTotal = 2141, GdpPerCapita = 17859, PopulationDensity = 265.2, LiteracyRate = 95.9, Hdi = 0.802, LifeExpectancy = 73.7 },
        new() { Code = "SLE", Name = "Sierra Leone", Iso2 = "SL", Continent = "Africa", Population = 8605718, Area = 71740, GdpTotal = 3810, GdpPerCapita = 443, PopulationDensity = 120.0, LiteracyRate = 43.2, Hdi = 0.458, LifeExpectancy = 60.1 },
        new() { Code = "SGP", Name = "Singapore", Iso2 = "SG", Continent = "Asia", Population = 5975689, Area = 719, GdpTotal = 501428, GdpPerCapita = 83907, PopulationDensity = 8311.1, LiteracyRate = 97.5, Hdi = 0.949, LifeExpectancy = 84.1 },
        new() { Code = "SVK", Name = "Slovakia", Iso2 = "SK", Continent = "Europe", Population = 5434712, Area = 49035, GdpTotal = 132794, GdpPerCapita = 24432, PopulationDensity = 110.8, LiteracyRate = 99.6, Hdi = 0.855, LifeExpectancy = 74.6 },
        new() { Code = "SVN", Name = "Slovenia", Iso2 = "SI", Continent = "Europe", Population = 2119844, Area = 20273, GdpTotal = 68217, GdpPerCapita = 32177, PopulationDensity = 104.6, LiteracyRate = 99.7, Hdi = 0.926, LifeExpectancy = 80.7 },
        new() { Code = "SLB", Name = "Solomon Islands", Iso2 = "SB", Continent = "Oceania", Population = 724273, Area = 28896, GdpTotal = 1631, GdpPerCapita = 2251, PopulationDensity = 25.1, LiteracyRate = 76.6, Hdi = 0.562, LifeExpectancy = 70.3 },
        new() { Code = "SOM", Name = "Somalia", Iso2 = "SO", Continent = "Africa", Population = 17597511, Area = 637657, GdpTotal = 11680, GdpPerCapita = 664, PopulationDensity = 27.6, LiteracyRate = 37.8, Hdi = 0.380, LifeExpectancy = 55.3 },
        new() { Code = "ZAF", Name = "South Africa", Iso2 = "ZA", Continent = "Africa", Population = 59893885, Area = 1221037, GdpTotal = 377782, GdpPerCapita = 6307, PopulationDensity = 49.1, LiteracyRate = 95.0, Hdi = 0.717, LifeExpectancy = 62.3 },
        new() { Code = "KOR", Name = "South Korea", Iso2 = "KR", Continent = "Asia", Population = 51628117, Area = 100210, GdpTotal = 1712793, GdpPerCapita = 33177, PopulationDensity = 515.2, LiteracyRate = 99.0, Hdi = 0.929, LifeExpectancy = 83.7 },
        new() { Code = "SSD", Name = "South Sudan", Iso2 = "SS", Continent = "Africa", Population = 10913164, Area = 644329, GdpTotal = 6267, GdpPerCapita = 574, PopulationDensity = 16.9, LiteracyRate = 34.5, Hdi = 0.381, LifeExpectancy = 55.0 },
        new() { Code = "ESP", Name = "Spain", Iso2 = "ES", Continent = "Europe", Population = 47778340, Area = 505992, GdpTotal = 1580695, GdpPerCapita = 33090, PopulationDensity = 94.4, LiteracyRate = 98.4, Hdi = 0.911, LifeExpectancy = 83.0 },
        new() { Code = "LKA", Name = "Sri Lanka", Iso2 = "LK", Continent = "Asia", Population = 21893579, Area = 65610, GdpTotal = 74403, GdpPerCapita = 3398, PopulationDensity = 333.7, LiteracyRate = 92.4, Hdi = 0.780, LifeExpectancy = 76.4 },
        new() { Code = "SDN", Name = "Sudan", Iso2 = "SD", Continent = "Africa", Population = 46874204, Area = 1861484, GdpTotal = 25670, GdpPerCapita = 547, PopulationDensity = 25.2, LiteracyRate = 60.7, Hdi = 0.516, LifeExpectancy = 65.3 },
        new() { Code = "SUR", Name = "Suriname", Iso2 = "SR", Continent = "South America", Population = 618040, Area = 163820, GdpTotal = 3782, GdpPerCapita = 6119, PopulationDensity = 3.8, LiteracyRate = 95.6, Hdi = 0.743, LifeExpectancy = 70.3 },
        new() { Code = "SWE", Name = "Sweden", Iso2 = "SE", Continent = "Europe", Population = 10486941, Area = 450295, GdpTotal = 593268, GdpPerCapita = 56577, PopulationDensity = 23.3, LiteracyRate = 99.0, Hdi = 0.952, LifeExpectancy = 83.1 },
        new() { Code = "CHE", Name = "Switzerland", Iso2 = "CH", Continent = "Europe", Population = 8769741, Area = 41285, GdpTotal = 884940, GdpPerCapita = 100918, PopulationDensity = 212.4, LiteracyRate = 99.0, Hdi = 0.967, LifeExpectancy = 83.6 },
        new() { Code = "SYR", Name = "Syria", Iso2 = "SY", Continent = "Asia", Population = 22125249, Area = 185180, GdpTotal = 11159, GdpPerCapita = 504, PopulationDensity = 119.5, LiteracyRate = 86.4, Hdi = 0.557, LifeExpectancy = 72.1 },
        new() { Code = "TJK", Name = "Tajikistan", Iso2 = "TJ", Continent = "Asia", Population = 9952787, Area = 143100, GdpTotal = 12061, GdpPerCapita = 1212, PopulationDensity = 69.6, LiteracyRate = 99.8, Hdi = 0.679, LifeExpectancy = 71.3 },
        new() { Code = "TZA", Name = "Tanzania", Iso2 = "TZ", Continent = "Africa", Population = 65497748, Area = 947303, GdpTotal = 84033, GdpPerCapita = 1283, PopulationDensity = 69.1, LiteracyRate = 77.9, Hdi = 0.532, LifeExpectancy = 66.2 },
        new() { Code = "THA", Name = "Thailand", Iso2 = "TH", Continent = "Asia", Population = 71697030, Area = 513120, GdpTotal = 512193, GdpPerCapita = 7144, PopulationDensity = 139.7, LiteracyRate = 93.8, Hdi = 0.803, LifeExpectancy = 79.7 },
        new() { Code = "TLS", Name = "Timor-Leste", Iso2 = "TL", Continent = "Asia", Population = 1341296, Area = 14874, GdpTotal = 2243, GdpPerCapita = 1672, PopulationDensity = 90.2, LiteracyRate = 68.1, Hdi = 0.607, LifeExpectancy = 67.7 },
        new() { Code = "TGO", Name = "Togo", Iso2 = "TG", Continent = "Africa", Population = 8848699, Area = 56785, GdpTotal = 9171, GdpPerCapita = 1036, PopulationDensity = 155.8, LiteracyRate = 63.7, Hdi = 0.535, LifeExpectancy = 61.6 },
        new() { Code = "TON", Name = "Tonga", Iso2 = "TO", Continent = "Oceania", Population = 106858, Area = 747, GdpTotal = 500, GdpPerCapita = 4680, PopulationDensity = 143.0, LiteracyRate = 99.4, Hdi = 0.739, LifeExpectancy = 70.9 },
        new() { Code = "TTO", Name = "Trinidad and Tobago", Iso2 = "TT", Continent = "North America", Population = 1531044, Area = 5130, GdpTotal = 28140, GdpPerCapita = 18381, PopulationDensity = 298.4, LiteracyRate = 99.0, Hdi = 0.814, LifeExpectancy = 74.4 },
        new() { Code = "TUN", Name = "Tunisia", Iso2 = "TN", Continent = "Africa", Population = 12356117, Area = 163610, GdpTotal = 48530, GdpPerCapita = 3928, PopulationDensity = 75.5, LiteracyRate = 79.0, Hdi = 0.732, LifeExpectancy = 73.9 },
        new() { Code = "TUR", Name = "Turkey", Iso2 = "TR", Continent = "Asia", Population = 85341241, Area = 783562, GdpTotal = 1108022, GdpPerCapita = 12985, PopulationDensity = 108.9, LiteracyRate = 96.7, Hdi = 0.855, LifeExpectancy = 78.6 },
        new() { Code = "TKM", Name = "Turkmenistan", Iso2 = "TM", Continent = "Asia", Population = 6430770, Area = 488100, GdpTotal = 59887, GdpPerCapita = 9313, PopulationDensity = 13.2, LiteracyRate = 99.7, Hdi = 0.744, LifeExpectancy = 69.3 },
        new() { Code = "TUV", Name = "Tuvalu", Iso2 = "TV", Continent = "Oceania", Population = 11312, Area = 26, GdpTotal = 62, GdpPerCapita = 5481, PopulationDensity = 435.1, LiteracyRate = 95.5, Hdi = 0.653, LifeExpectancy = 64.5 },
        new() { Code = "UGA", Name = "Uganda", Iso2 = "UG", Continent = "Africa", Population = 47249585, Area = 241550, GdpTotal = 49273, GdpPerCapita = 1043, PopulationDensity = 195.6, LiteracyRate = 76.5, Hdi = 0.550, LifeExpectancy = 63.6 },
        new() { Code = "UKR", Name = "Ukraine", Iso2 = "UA", Continent = "Europe", Population = 38000000, Area = 603500, GdpTotal = 178757, GdpPerCapita = 4704, PopulationDensity = 63.0, LiteracyRate = 99.8, Hdi = 0.734, LifeExpectancy = 68.6 },
        new() { Code = "ARE", Name = "United Arab Emirates", Iso2 = "AE", Continent = "Asia", Population = 9441129, Area = 83600, GdpTotal = 504173, GdpPerCapita = 53399, PopulationDensity = 112.9, LiteracyRate = 98.1, Hdi = 0.937, LifeExpectancy = 78.7 },
        new() { Code = "GBR", Name = "United Kingdom", Iso2 = "GB", Continent = "Europe", Population = 67326569, Area = 242495, GdpTotal = 3332059, GdpPerCapita = 49491, PopulationDensity = 277.6, LiteracyRate = 99.0, Hdi = 0.940, LifeExpectancy = 82.3 },
        new() { Code = "USA", Name = "United States", Iso2 = "US", Continent = "North America", Population = 339996563, Area = 9833520, GdpTotal = 27360935, GdpPerCapita = 80481, PopulationDensity = 34.6, LiteracyRate = 99.0, Hdi = 0.927, LifeExpectancy = 79.3 },
        new() { Code = "URY", Name = "Uruguay", Iso2 = "UY", Continent = "South America", Population = 3422794, Area = 176215, GdpTotal = 77141, GdpPerCapita = 22535, PopulationDensity = 19.4, LiteracyRate = 98.8, Hdi = 0.830, LifeExpectancy = 78.0 },
        new() { Code = "UZB", Name = "Uzbekistan", Iso2 = "UZ", Continent = "Asia", Population = 35648100, Area = 447400, GdpTotal = 90889, GdpPerCapita = 2549, PopulationDensity = 79.7, LiteracyRate = 100.0, Hdi = 0.727, LifeExpectancy = 70.9 },
        new() { Code = "VUT", Name = "Vanuatu", Iso2 = "VU", Continent = "Oceania", Population = 326740, Area = 12189, GdpTotal = 1126, GdpPerCapita = 3446, PopulationDensity = 26.8, LiteracyRate = 89.1, Hdi = 0.614, LifeExpectancy = 70.4 },
        new() { Code = "VEN", Name = "Venezuela", Iso2 = "VE", Continent = "South America", Population = 28301696, Area = 916445, GdpTotal = 102328, GdpPerCapita = 3615, PopulationDensity = 30.9, LiteracyRate = 97.5, Hdi = 0.699, LifeExpectancy = 71.1 },
        new() { Code = "VNM", Name = "Vietnam", Iso2 = "VN", Continent = "Asia", Population = 98186856, Area = 331212, GdpTotal = 433356, GdpPerCapita = 4414, PopulationDensity = 296.4, LiteracyRate = 95.8, Hdi = 0.726, LifeExpectancy = 73.6 },
        new() { Code = "YEM", Name = "Yemen", Iso2 = "YE", Continent = "Asia", Population = 33696614, Area = 527968, GdpTotal = 21606, GdpPerCapita = 641, PopulationDensity = 63.8, LiteracyRate = 54.1, Hdi = 0.424, LifeExpectancy = 63.7 },
        new() { Code = "ZMB", Name = "Zambia", Iso2 = "ZM", Continent = "Africa", Population = 20017675, Area = 752618, GdpTotal = 28163, GdpPerCapita = 1407, PopulationDensity = 26.6, LiteracyRate = 87.5, Hdi = 0.569, LifeExpectancy = 61.2 },
        new() { Code = "ZWE", Name = "Zimbabwe", Iso2 = "ZW", Continent = "Africa", Population = 16320537, Area = 390757, GdpTotal = 26538, GdpPerCapita = 1626, PopulationDensity = 41.8, LiteracyRate = 89.7, Hdi = 0.550, LifeExpectancy = 59.3 },
    };

    public static IReadOnlyList<Country> GetAllCountries() => _countries.AsReadOnly();
}


================================================================================
FILE: src/MyDesktopApplication.Shared/Data/MotivationalMessages.cs
SIZE: 2.67 KB
MODIFIED: 2025-12-21 22:48:06
================================================================================

namespace MyDesktopApplication.Shared.Data;

/// <summary>
/// Provides encouraging messages based on player performance.
/// </summary>
public static class MotivationalMessages
{
    private static readonly Random _random = new();

    private static readonly string[] CorrectMessages =
    [
        "🎉 Correct! You're on fire!",
        "✨ Brilliant! Keep it up!",
        "🌟 Amazing knowledge!",
        "💪 You really know your geography!",
        "🎯 Spot on! Nice work!",
        "🏆 Champion answer!",
        "📚 Well studied!",
        "🌍 World expert in the making!"
    ];

    private static readonly string[] IncorrectMessages =
    [
        "Not quite, but you're learning!",
        "Good try! Now you know!",
        "Interesting fact to remember!",
        "Keep going, you've got this!",
        "Every answer is a learning opportunity!",
        "Don't give up, you're improving!",
        "That's a tricky one!",
        "You'll get the next one!"
    ];

    private static readonly string[] StreakMessages =
    [
        "🔥 {0} in a row!",
        "🔥 {0} streak! Incredible!",
        "🔥 {0} consecutive! You're unstoppable!",
        "🔥 {0} correct answers! Amazing run!"
    ];

    private static readonly string[] NewBestMessages =
    [
        "🏆 NEW PERSONAL BEST! {0} streak!",
        "⭐ NEW RECORD! {0} in a row!",
        "🎊 PERSONAL BEST! {0} streak!"
    ];

    private static readonly string[] ResetMessages =
    [
        "Fresh start! Good luck! 🍀",
        "Ready for a new challenge! 💪",
        "Let's see what you've got! 🌟",
        "New game, new opportunities! 🎯"
    ];

    public static string GetCorrectMessage() =>
        CorrectMessages[_random.Next(CorrectMessages.Length)];

    public static string GetIncorrectMessage() =>
        IncorrectMessages[_random.Next(IncorrectMessages.Length)];

    public static string GetStreakMessage(int streak)
    {
        if (streak < 3) return string.Empty;
        var template = StreakMessages[_random.Next(StreakMessages.Length)];
        return string.Format(template, streak);
    }

    public static string GetNewBestMessage(int streak)
    {
        var template = NewBestMessages[_random.Next(NewBestMessages.Length)];
        return string.Format(template, streak);
    }

    public static string GetResetMessage() =>
        ResetMessages[_random.Next(ResetMessages.Length)];

    public static string GetAccuracyComment(double accuracy) => accuracy switch
    {
        >= 90 => "🏅 Geography genius!",
        >= 75 => "📊 Great accuracy!",
        >= 60 => "👍 Solid knowledge!",
        >= 40 => "📈 Room to grow!",
        _ => "🌱 Keep learning!"
    };
}


================================================================================
FILE: src/MyDesktopApplication.Shared/DTOs/TodoItemDto.cs
SIZE: .64 KB
MODIFIED: 2025-12-20 01:51:45
================================================================================

using CommunityToolkit.Mvvm.ComponentModel;

namespace MyDesktopApplication.Shared.DTOs;

/// <summary>
/// Data transfer object for TodoItem, used in ViewModels
/// </summary>
public partial class TodoItemDto : ObservableObject
{
    public Guid Id { get; set; }

    [ObservableProperty]
    private string _title = string.Empty;

    [ObservableProperty]
    private string? _description;

    [ObservableProperty]
    private bool _isCompleted;

    [ObservableProperty]
    private DateTime? _dueDate;

    [ObservableProperty]
    private int _priority;

    public bool IsOverdue => DueDate.HasValue && DueDate.Value < DateTime.UtcNow && !IsCompleted;
}


================================================================================
FILE: src/MyDesktopApplication.Shared/MyDesktopApplication.Shared.csproj
SIZE: .45 KB
MODIFIED: 2025-12-21 12:48:54
================================================================================

<Project Sdk="Microsoft.NET.Sdk">
  <PropertyGroup>
    <TargetFramework>net10.0</TargetFramework>
    <ImplicitUsings>enable</ImplicitUsings>
    <Nullable>enable</Nullable>
  </PropertyGroup>
  <ItemGroup>
    <ProjectReference Include="..\MyDesktopApplication.Core\MyDesktopApplication.Core.csproj" />
  </ItemGroup>
  <ItemGroup>
    <PackageReference Include="CommunityToolkit.Mvvm" />
    <PackageReference Include="FluentValidation" />
  </ItemGroup>
</Project>


================================================================================
FILE: src/MyDesktopApplication.Shared/ViewModels/CountryQuizViewModel.cs
SIZE: 8.96 KB
MODIFIED: 2025-12-24 20:02:07
================================================================================

using System.Collections.ObjectModel;
using CommunityToolkit.Mvvm.ComponentModel;
using CommunityToolkit.Mvvm.Input;
using MyDesktopApplication.Core.Entities;
using MyDesktopApplication.Core.Interfaces;
using MyDesktopApplication.Shared.Data;

namespace MyDesktopApplication.Shared.ViewModels;

/// <summary>
/// ViewModel for the Country Quiz game.
/// Shared between Desktop and Android platforms.
/// </summary>
public partial class CountryQuizViewModel : ViewModelBase
{
    private readonly Random _random = new();
    private readonly List<Country> _countries;
    private readonly IGameStateRepository? _gameStateRepository;
    private GameState _gameState = new();

    // Backing fields for country references (not observable - we expose flat properties)
    private Country? _country1;
    private Country? _country2;

    // Observable properties for UI binding
    [ObservableProperty] private string _questionText = "Loading...";
    [ObservableProperty] private string _country1Name = "";
    [ObservableProperty] private string _country2Name = "";
    [ObservableProperty] private string _country1Flag = "";
    [ObservableProperty] private string _country2Flag = "";
    [ObservableProperty] private string _country1Value = "";
    [ObservableProperty] private string _country2Value = "";
    [ObservableProperty] private string _resultMessage = "";
    [ObservableProperty] private bool _hasAnswered;

    // Answer state - FIX: Only highlight the selected answer
    [ObservableProperty] private bool _isCountry1Correct;
    [ObservableProperty] private bool _isCountry1Wrong;
    [ObservableProperty] private bool _isCountry2Correct;
    [ObservableProperty] private bool _isCountry2Wrong;

    // Score tracking
    [ObservableProperty] private int _currentScore;
    [ObservableProperty] private int _currentStreak;
    [ObservableProperty] private int _bestStreak;
    [ObservableProperty] private int _totalQuestions;

    // Question type selection
    [ObservableProperty] private QuestionType _selectedQuestionType = QuestionType.Population;
    [ObservableProperty] private ObservableCollection<QuestionType> _questionTypes = new();

    // Computed properties for UI display
    public string ScoreText => $"Score: {CurrentScore}";
    public string StreakText => $"Streak: {CurrentStreak}";
    public string BestStreakText => $"Best: {BestStreak}";
    public string AccuracyText => TotalQuestions > 0
        ? $"Accuracy: {(double)CurrentScore / TotalQuestions * 100:N1}%"
        : "Accuracy: --";

    /// <summary>
    /// Constructor with dependency injection for game state persistence.
    /// </summary>
    public CountryQuizViewModel(IGameStateRepository gameStateRepository) : this()
    {
        _gameStateRepository = gameStateRepository;
    }

    /// <summary>
    /// Parameterless constructor for design-time and default initialization.
    /// </summary>
    public CountryQuizViewModel()
    {
        _countries = CountryData.GetAllCountries().ToList();
        foreach (QuestionType qt in Enum.GetValues<QuestionType>())
        {
            QuestionTypes.Add(qt);
        }
        GenerateNewQuestion();
    }

    /// <summary>
    /// Initialize async - loads persisted game state from database.
    /// </summary>
    public async Task InitializeAsync()
    {
        if (_gameStateRepository != null)
        {
            try
            {
                _gameState = await _gameStateRepository.GetOrCreateAsync("default");
                CurrentScore = _gameState.CurrentScore;
                CurrentStreak = _gameState.CurrentStreak;
                BestStreak = _gameState.BestStreak;
            }
            catch (Exception ex)
            {
                System.Diagnostics.Debug.WriteLine($"Error loading game state: {ex.Message}");
            }
        }
    }

    /// <summary>
    /// Handle country selection.
    /// FIX: Only highlight the answer the user selected, not both answers.
    /// </summary>
    [RelayCommand]
    private async Task SelectCountry(string countryParam)
    {
        if (HasAnswered || _country1 == null || _country2 == null)
            return;

        if (!int.TryParse(countryParam, out int countryNumber))
            return;

        HasAnswered = true;
        TotalQuestions++;

        var value1 = SelectedQuestionType.GetValue(_country1);
        var value2 = SelectedQuestionType.GetValue(_country2);

        Country1Value = SelectedQuestionType.FormatValue(value1);
        Country2Value = SelectedQuestionType.FormatValue(value2);

        bool isCorrect;

        // FIX: Only highlight the selected answer
        // Reset all states first
        IsCountry1Correct = false;
        IsCountry1Wrong = false;
        IsCountry2Correct = false;
        IsCountry2Wrong = false;

        if (countryNumber == 1)
        {
            // User selected Country 1
            isCorrect = value1 >= value2;
            // Only set state for Country 1 (the selected one)
            IsCountry1Correct = isCorrect;
            IsCountry1Wrong = !isCorrect;
            // Do NOT set Country 2 state - leave it unhighlighted
        }
        else
        {
            // User selected Country 2
            isCorrect = value2 >= value1;
            // Only set state for Country 2 (the selected one)
            IsCountry2Correct = isCorrect;
            IsCountry2Wrong = !isCorrect;
            // Do NOT set Country 1 state - leave it unhighlighted
        }

        if (isCorrect)
        {
            CurrentScore++;
            CurrentStreak++;
            if (CurrentStreak > BestStreak)
                BestStreak = CurrentStreak;
            ResultMessage = GetCorrectMessage();
        }
        else
        {
            CurrentStreak = 0;
            ResultMessage = GetIncorrectMessage();
        }

        // Persist game state
        _gameState.CurrentScore = CurrentScore;
        _gameState.CurrentStreak = CurrentStreak;
        _gameState.BestStreak = BestStreak;
        _gameState.RecordAnswer(isCorrect);

        if (_gameStateRepository != null)
        {
            try
            {
                await _gameStateRepository.UpdateAsync(_gameState);
            }
            catch (Exception ex)
            {
                System.Diagnostics.Debug.WriteLine($"Error saving game state: {ex.Message}");
            }
        }

        OnPropertyChanged(nameof(ScoreText));
        OnPropertyChanged(nameof(StreakText));
        OnPropertyChanged(nameof(BestStreakText));
        OnPropertyChanged(nameof(AccuracyText));
    }

    /// <summary>
    /// Start a new round with new countries.
    /// </summary>
    [RelayCommand]
    private void NextRound()
    {
        GenerateNewQuestion();
    }

    /// <summary>
    /// Change the question type and generate a new question.
    /// </summary>
    [RelayCommand]
    private void ChangeQuestionType(QuestionType newType)
    {
        SelectedQuestionType = newType;
        GenerateNewQuestion();
    }

    /// <summary>
    /// Reset the game to initial state.
    /// </summary>
    [RelayCommand]
    private async Task ResetGame()
    {
        CurrentScore = 0;
        CurrentStreak = 0;
        TotalQuestions = 0;

        _gameState.CurrentScore = 0;
        _gameState.CurrentStreak = 0;

        if (_gameStateRepository != null)
        {
            try
            {
                await _gameStateRepository.UpdateAsync(_gameState);
            }
            catch (Exception ex)
            {
                System.Diagnostics.Debug.WriteLine($"Error resetting game state: {ex.Message}");
            }
        }

        OnPropertyChanged(nameof(ScoreText));
        OnPropertyChanged(nameof(StreakText));
        OnPropertyChanged(nameof(AccuracyText));

        GenerateNewQuestion();
    }

    private void GenerateNewQuestion()
    {
        HasAnswered = false;
        IsCountry1Correct = false;
        IsCountry1Wrong = false;
        IsCountry2Correct = false;
        IsCountry2Wrong = false;
        Country1Value = "";
        Country2Value = "";
        ResultMessage = "";

        // Pick two different random countries
        var indices = Enumerable.Range(0, _countries.Count)
            .OrderBy(_ => _random.Next())
            .Take(2)
            .ToList();

        _country1 = _countries[indices[0]];
        _country2 = _countries[indices[1]];

        Country1Name = _country1.Name;
        Country2Name = _country2.Name;
        Country1Flag = _country1.Flag;
        Country2Flag = _country2.Flag;

        QuestionText = $"Which country has a higher {SelectedQuestionType.GetLabel()}?";
    }

    // FIX: Remove emojis - use plain text messages instead
    private string GetCorrectMessage()
    {
        var messages = new[]
        {
            "Correct!",
            "Well done!",
            "Great job!",
            "Excellent!",
            CurrentStreak >= 5 ? $"{CurrentStreak} in a row!" : "Keep it up!"
        };
        return messages[_random.Next(messages.Length)];
    }

    private string GetIncorrectMessage()
    {
        return "Not quite! The correct answer is shown above.";
    }
}


================================================================================
FILE: src/MyDesktopApplication.Shared/ViewModels/MainViewModel.cs
SIZE: 1.85 KB
MODIFIED: 2025-12-20 02:30:20
================================================================================

using CommunityToolkit.Mvvm.ComponentModel;
using CommunityToolkit.Mvvm.Input;
using MyDesktopApplication.Core.Entities;
using System.Collections.ObjectModel;
using System.Threading.Tasks;

namespace MyDesktopApplication.Shared.ViewModels;

/// <summary>
/// Main ViewModel shared between Desktop and Android
/// </summary>
public partial class MainViewModel : ViewModelBase
{
    [ObservableProperty]
    private string _greeting = "Welcome to Avalonia!";

    [ObservableProperty]
    private int _counter;

    [ObservableProperty]
    private ObservableCollection<TodoItem> _todoItems = [];

    [ObservableProperty]
    private string _newTodoTitle = string.Empty;

    [RelayCommand]
    private void IncrementCounter()
    {
        Counter++;
        Greeting = Counter switch
        {
            1 => "You clicked once!",
            < 5 => $"You clicked {Counter} times",
            < 10 => $"Wow, {Counter} clicks! Keep going!",
            _ => $"Amazing! {Counter} clicks!"
        };
    }

    [RelayCommand]
    private async Task LoadDataAsync()
    {
        IsBusy = true;
        ClearError();
        try
        {
            // Simulate loading
            await Task.Delay(1000);
        }
        catch (System.Exception ex)
        {
            SetError($"Failed to load: {ex.Message}");
        }
        finally
        {
            IsBusy = false;
        }
    }

    [RelayCommand]
    private void AddTodo()
    {
        if (string.IsNullOrWhiteSpace(NewTodoTitle))
            return;

        var todo = new TodoItem { Title = NewTodoTitle.Trim() };
        TodoItems.Add(todo);
        NewTodoTitle = string.Empty;
    }

    [RelayCommand]
    private void ToggleTodo(TodoItem? todo)
    {
        if (todo is null)
            return;

        if (todo.IsCompleted)
            todo.MarkIncomplete();
        else
            todo.MarkComplete();
    }
}


================================================================================
FILE: src/MyDesktopApplication.Shared/ViewModels/ViewModelBase.cs
SIZE: 2.01 KB
MODIFIED: 2025-12-21 22:48:06
================================================================================

using CommunityToolkit.Mvvm.ComponentModel;

namespace MyDesktopApplication.Shared.ViewModels;

/// <summary>
/// Base class for all ViewModels providing common functionality
/// </summary>
public abstract partial class ViewModelBase : ObservableObject
{
    [ObservableProperty]
    private bool _isBusy;

    [ObservableProperty]
    private string? _errorMessage;

    [ObservableProperty]
    private bool _hasError;

    /// <summary>
    /// Sets an error message and marks HasError as true
    /// </summary>
    protected void SetError(string message)
    {
        ErrorMessage = message;
        HasError = true;
    }

    /// <summary>
    /// Clears the error message and marks HasError as false
    /// </summary>
    protected void ClearError()
    {
        ErrorMessage = null;
        HasError = false;
    }

    /// <summary>
    /// Executes an async operation with busy state management and error handling
    /// </summary>
    protected async Task ExecuteAsync(Func<Task> operation, string? errorContext = null)
    {
        if (IsBusy) return;

        try
        {
            IsBusy = true;
            ClearError();
            await operation();
        }
        catch (Exception ex)
        {
            SetError(errorContext != null
                ? $"{errorContext}: {ex.Message}"
                : ex.Message);
        }
        finally
        {
            IsBusy = false;
        }
    }

    /// <summary>
    /// Executes an async operation that returns a result
    /// </summary>
    protected async Task<T?> ExecuteAsync<T>(Func<Task<T>> operation, string? errorContext = null)
    {
        if (IsBusy) return default;

        try
        {
            IsBusy = true;
            ClearError();
            return await operation();
        }
        catch (Exception ex)
        {
            SetError(errorContext != null
                ? $"{errorContext}: {ex.Message}"
                : ex.Message);
            return default;
        }
        finally
        {
            IsBusy = false;
        }
    }
}


================================================================================
FILE: tests/MyDesktopApplication.Core.Tests/GameStateTests.cs
SIZE: 2.09 KB
MODIFIED: 2025-12-21 22:48:06
================================================================================

using MyDesktopApplication.Core.Entities;
using Shouldly;
using Xunit;

namespace MyDesktopApplication.Core.Tests;

public class GameStateTests
{
    [Fact]
    public void NewGameState_HasDefaultValues()
    {
        var state = new GameState();
        state.CurrentScore.ShouldBe(0);
        state.HighScore.ShouldBe(0);
        state.CurrentStreak.ShouldBe(0);
        state.BestStreak.ShouldBe(0);
        state.TotalCorrect.ShouldBe(0);
        state.TotalAnswered.ShouldBe(0);
    }

    [Fact]
    public void RecordAnswer_CorrectAnswer_IncrementsScore()
    {
        var state = new GameState();
        state.RecordAnswer(true);

        state.CurrentScore.ShouldBe(1);
        state.HighScore.ShouldBe(1);
        state.CurrentStreak.ShouldBe(1);
        state.TotalCorrect.ShouldBe(1);
        state.TotalAnswered.ShouldBe(1);
    }

    [Fact]
    public void RecordAnswer_WrongAnswer_ResetsStreak()
    {
        var state = new GameState();
        state.RecordAnswer(true);
        state.RecordAnswer(true);

        state.RecordAnswer(false);

        state.CurrentScore.ShouldBe(2);
        state.HighScore.ShouldBe(2);
        state.CurrentStreak.ShouldBe(0);
        state.BestStreak.ShouldBe(2);
    }

    [Fact]
    public void Reset_KeepsHighScoreAndBestStreak()
    {
        var state = new GameState();
        state.RecordAnswer(true);
        state.RecordAnswer(true);
        state.RecordAnswer(true);

        state.Reset();

        state.CurrentScore.ShouldBe(0);
        state.HighScore.ShouldBe(3);
        state.CurrentStreak.ShouldBe(0);
        state.BestStreak.ShouldBe(3);
    }

    [Fact]
    public void Accuracy_CalculatedCorrectly()
    {
        var state = new GameState();
        state.RecordAnswer(true);
        state.RecordAnswer(true);
        state.RecordAnswer(false);
        state.RecordAnswer(true);

        // 3 correct out of 4 = 0.75 accuracy
        state.Accuracy.ShouldBe(0.75, tolerance: 0.01);

        // AccuracyPercentage returns double (75.0), not string "75%"
        // Fix: Compare as double
        state.AccuracyPercentage.ShouldBe(75.0, tolerance: 0.1);
    }
}


================================================================================
FILE: tests/MyDesktopApplication.Core.Tests/MyDesktopApplication.Core.Tests.csproj
SIZE: 1.05 KB
MODIFIED: 2025-12-21 17:58:28
================================================================================

<Project Sdk="Microsoft.NET.Sdk">
  <PropertyGroup>
    <TargetFramework>net10.0</TargetFramework>
    <ImplicitUsings>enable</ImplicitUsings>
    <Nullable>enable</Nullable>
    <IsPackable>false</IsPackable>
    <IsTestProject>true</IsTestProject>
  </PropertyGroup>

  <ItemGroup>
    <PackageReference Include="Microsoft.NET.Test.Sdk" />
    <PackageReference Include="xunit" />
    <PackageReference Include="xunit.runner.visualstudio">
      <IncludeAssets>runtime; build; native; contentfiles; analyzers; buildtransitive</IncludeAssets>
      <PrivateAssets>all</PrivateAssets>
    </PackageReference>
    <PackageReference Include="coverlet.collector">
      <IncludeAssets>runtime; build; native; contentfiles; analyzers; buildtransitive</IncludeAssets>
      <PrivateAssets>all</PrivateAssets>
    </PackageReference>
    <PackageReference Include="Shouldly" />
    <PackageReference Include="NSubstitute" />
  </ItemGroup>

  <ItemGroup>
    <ProjectReference Include="../../src/MyDesktopApplication.Core/MyDesktopApplication.Core.csproj" />
  </ItemGroup>
</Project>


================================================================================
FILE: tests/MyDesktopApplication.Core.Tests/QuestionTypeTests.cs
SIZE: 3.41 KB
MODIFIED: 2025-12-24 19:23:13
================================================================================

using MyDesktopApplication.Core.Entities;
using Shouldly;
using Xunit;

namespace MyDesktopApplication.Core.Tests;

public class QuestionTypeTests
{
    [Theory]
    [InlineData(QuestionType.Population, "Population")]
    [InlineData(QuestionType.Area, "Area (km²)")]
    [InlineData(QuestionType.GdpTotal, "GDP (Total)")]
    [InlineData(QuestionType.GdpPerCapita, "GDP per Capita")]
    [InlineData(QuestionType.PopulationDensity, "Population Density")]
    [InlineData(QuestionType.LiteracyRate, "Literacy Rate")]
    [InlineData(QuestionType.Hdi, "Human Development Index")]
    [InlineData(QuestionType.LifeExpectancy, "Life Expectancy")]
    public void GetLabel_ReturnsCorrectLabel(QuestionType questionType, string expectedLabel)
    {
        var label = questionType.GetLabel();
        label.ShouldBe(expectedLabel);
    }

    [Fact]
    public void GetValue_ReturnsCorrectValueForCountry()
    {
        var country = new Country
        {
            Code = "USA",
            Name = "United States",
            Iso2 = "US",
            Continent = "North America",
            Population = 331_000_000,
            Area = 9_833_520,
            GdpTotal = 25_462_700_000_000,
            GdpPerCapita = 76_330,
            PopulationDensity = 33.6,
            LiteracyRate = 99.0,
            Hdi = 0.921,
            LifeExpectancy = 77.0
        };

        QuestionType.Population.GetValue(country).ShouldBe(331_000_000);
        QuestionType.Area.GetValue(country).ShouldBe(9_833_520);
        QuestionType.GdpTotal.GetValue(country).ShouldBe(25_462_700_000_000);
        QuestionType.GdpPerCapita.GetValue(country).ShouldBe(76_330);
        QuestionType.PopulationDensity.GetValue(country).ShouldBe(33.6);
        QuestionType.LiteracyRate.GetValue(country).ShouldBe(99.0);
        QuestionType.Hdi.GetValue(country).ShouldBe(0.921);
        QuestionType.LifeExpectancy.GetValue(country).ShouldBe(77.0);
    }

    [Fact]
    public void FormatValue_UsesEnoughPrecisionToDistinguishCloseValues()
    {
        // This is the key test - China (1,411,750,000) vs India (1,417,173,173)
        // should NOT both show as "1.4B" - that's confusing!
        var chinaPopulation = 1_411_750_000.0;
        var indiaPopulation = 1_417_173_173.0;

        var chinaFormatted = QuestionType.Population.FormatValue(chinaPopulation);
        var indiaFormatted = QuestionType.Population.FormatValue(indiaPopulation);

        // They should be different! Users need to see the difference
        chinaFormatted.ShouldNotBe(indiaFormatted);

        // Check the actual values - should show 3 decimal places for billions
        chinaFormatted.ShouldBe("1.412B");
        indiaFormatted.ShouldBe("1.417B");
    }

    [Fact]
    public void FormatValue_FormatsValuesCorrectly()
    {
        // Population formatting
        QuestionType.Population.FormatValue(1_500_000_000).ShouldBe("1.500B");
        QuestionType.Population.FormatValue(50_000_000).ShouldBe("50.00M");
        QuestionType.Population.FormatValue(500_000).ShouldBe("500.00K");

        // GDP formatting
        QuestionType.GdpTotal.FormatValue(25_000_000_000_000).ShouldBe("$25.00T");
        QuestionType.GdpTotal.FormatValue(1_500_000_000_000).ShouldBe("$1.50T");

        // Other types
        QuestionType.LiteracyRate.FormatValue(99.5).ShouldBe("99.5%");
        QuestionType.Hdi.FormatValue(0.921).ShouldBe("0.921");
        QuestionType.LifeExpectancy.FormatValue(77.5).ShouldBe("77.5 years");
    }
}


================================================================================
FILE: tests/MyDesktopApplication.Core.Tests/TodoItemTests.cs
SIZE: .86 KB
MODIFIED: 2025-12-21 22:48:06
================================================================================

using MyDesktopApplication.Core.Entities;
using Shouldly;
using Xunit;

namespace MyDesktopApplication.Core.Tests;

public class TodoItemTests
{
    [Fact]
    public void NewTodoItem_ShouldBeIncomplete()
    {
        var todo = new TodoItem { Title = "Test" };

        todo.IsCompleted.ShouldBeFalse();
        todo.CompletedAt.ShouldBeNull();
    }

    [Fact]
    public void MarkComplete_ShouldSetCompletedAtAndIsCompleted()
    {
        var todo = new TodoItem { Title = "Test" };

        todo.MarkComplete();

        todo.IsCompleted.ShouldBeTrue();
        todo.CompletedAt.ShouldNotBeNull();
    }

    [Fact]
    public void MarkIncomplete_ShouldClearCompletedAt()
    {
        var todo = new TodoItem { Title = "Test" };
        todo.MarkComplete();

        todo.MarkIncomplete();

        todo.IsCompleted.ShouldBeFalse();
        todo.CompletedAt.ShouldBeNull();
    }
}


================================================================================
FILE: tests/MyDesktopApplication.Integration.Tests/MyDesktopApplication.Integration.Tests.csproj
SIZE: 1.24 KB
MODIFIED: 2025-12-21 17:58:28
================================================================================

<Project Sdk="Microsoft.NET.Sdk">
  <PropertyGroup>
    <TargetFramework>net10.0</TargetFramework>
    <ImplicitUsings>enable</ImplicitUsings>
    <Nullable>enable</Nullable>
    <IsPackable>false</IsPackable>
    <IsTestProject>true</IsTestProject>
  </PropertyGroup>

  <ItemGroup>
    <PackageReference Include="Microsoft.NET.Test.Sdk" />
    <PackageReference Include="xunit" />
    <PackageReference Include="xunit.runner.visualstudio">
      <IncludeAssets>runtime; build; native; contentfiles; analyzers; buildtransitive</IncludeAssets>
      <PrivateAssets>all</PrivateAssets>
    </PackageReference>
    <PackageReference Include="coverlet.collector">
      <IncludeAssets>runtime; build; native; contentfiles; analyzers; buildtransitive</IncludeAssets>
      <PrivateAssets>all</PrivateAssets>
    </PackageReference>
    <PackageReference Include="Shouldly" />
    <PackageReference Include="NSubstitute" />
    <PackageReference Include="Microsoft.EntityFrameworkCore.InMemory" />
  </ItemGroup>

  <ItemGroup>
    <ProjectReference Include="../../src/MyDesktopApplication.Core/MyDesktopApplication.Core.csproj" />
    <ProjectReference Include="../../src/MyDesktopApplication.Infrastructure/MyDesktopApplication.Infrastructure.csproj" />
  </ItemGroup>
</Project>


================================================================================
FILE: tests/MyDesktopApplication.Integration.Tests/TodoRepositoryTests.cs
SIZE: 2.09 KB
MODIFIED: 2025-12-21 22:48:06
================================================================================

using Microsoft.EntityFrameworkCore;
using MyDesktopApplication.Core.Entities;
using MyDesktopApplication.Infrastructure.Data;
using MyDesktopApplication.Infrastructure.Repositories;
using Shouldly;
using Xunit;

namespace MyDesktopApplication.Integration.Tests;

public class TodoRepositoryTests : IDisposable
{
    private readonly AppDbContext _context;
    private readonly TodoRepository _repository;

    public TodoRepositoryTests()
    {
        var options = new DbContextOptionsBuilder<AppDbContext>()
            .UseInMemoryDatabase(databaseName: Guid.NewGuid().ToString())
            .Options;

        _context = new AppDbContext(options);
        _repository = new TodoRepository(_context);
    }

    public void Dispose()
    {
        _context.Dispose();
    }

    [Fact]
    public async Task AddAsync_AddsTodoItem()
    {
        var todo = new TodoItem { Title = "Test Todo" };

        var result = await _repository.AddAsync(todo);

        result.ShouldNotBeNull();
        result.Id.ShouldNotBe(Guid.Empty);
        result.Title.ShouldBe("Test Todo");
    }

    [Fact]
    public async Task GetCompletedAsync_ReturnsOnlyCompletedItems()
    {
        await _repository.AddAsync(new TodoItem { Title = "Todo 1", IsCompleted = true });
        await _repository.AddAsync(new TodoItem { Title = "Todo 2", IsCompleted = false });
        await _repository.AddAsync(new TodoItem { Title = "Todo 3", IsCompleted = true });

        var completed = await _repository.GetCompletedAsync();

        completed.Count.ShouldBe(2);
        completed.All(t => t.IsCompleted).ShouldBeTrue();
    }

    [Fact]
    public async Task GetIncompleteAsync_ReturnsOnlyIncompleteItems()
    {
        await _repository.AddAsync(new TodoItem { Title = "Todo 1", IsCompleted = true });
        await _repository.AddAsync(new TodoItem { Title = "Todo 2", IsCompleted = false });
        await _repository.AddAsync(new TodoItem { Title = "Todo 3", IsCompleted = false });

        var incomplete = await _repository.GetIncompleteAsync();

        incomplete.Count.ShouldBe(2);
        incomplete.All(t => !t.IsCompleted).ShouldBeTrue();
    }
}


================================================================================
FILE: tests/MyDesktopApplication.UI.Tests/MainWindowViewModelTests.cs
SIZE: 2.13 KB
MODIFIED: 2025-12-21 22:48:06
================================================================================

using MyDesktopApplication.Core.Entities;
using MyDesktopApplication.Desktop.ViewModels;
using Shouldly;
using Xunit;

namespace MyDesktopApplication.UI.Tests;

public class MainWindowViewModelTests
{
    [Fact]
    public void NewViewModel_ShouldHaveInitialState()
    {
        var vm = new MainWindowViewModel();

        vm.CurrentScore.ShouldBe(0);
        vm.HighScore.ShouldBe(0);
        vm.CurrentStreak.ShouldBe(0);
        vm.BestStreak.ShouldBe(0);
        vm.HasAnswered.ShouldBeFalse();
    }

    [Fact]
    public void QuestionTypes_ShouldContainAllTypes()
    {
        var vm = new MainWindowViewModel();

        vm.QuestionTypes.Count.ShouldBe(8);
        vm.QuestionTypes.ShouldContain(QuestionType.Population);
        vm.QuestionTypes.ShouldContain(QuestionType.Area);
        vm.QuestionTypes.ShouldContain(QuestionType.GdpTotal);
        vm.QuestionTypes.ShouldContain(QuestionType.GdpPerCapita);
        vm.QuestionTypes.ShouldContain(QuestionType.PopulationDensity);
        vm.QuestionTypes.ShouldContain(QuestionType.LiteracyRate);
        vm.QuestionTypes.ShouldContain(QuestionType.Hdi);
        vm.QuestionTypes.ShouldContain(QuestionType.LifeExpectancy);
    }

    [Fact]
    public void GenerateNewQuestion_ShouldSetCountries()
    {
        var vm = new MainWindowViewModel();

        vm.GenerateNewQuestionCommand.Execute(null);

        vm.Country1.ShouldNotBeNull();
        vm.Country2.ShouldNotBeNull();
        vm.Country1!.Name.ShouldNotBe(vm.Country2!.Name);
    }

    [Fact]
    public void SelectedQuestionType_DefaultsToPopulation()
    {
        var vm = new MainWindowViewModel();
        vm.SelectedQuestionType.ShouldBe(QuestionType.Population);
    }

    [Fact]
    public void ScoreText_ShouldBeFormatted()
    {
        var vm = new MainWindowViewModel();
        vm.ScoreText.ShouldBe("Score: 0");
    }

    [Fact]
    public void StreakText_ShouldBeFormatted()
    {
        var vm = new MainWindowViewModel();
        vm.StreakText.ShouldBe("Streak: 0");
    }

    [Fact]
    public void BestStreakText_ShouldBeFormatted()
    {
        var vm = new MainWindowViewModel();
        vm.BestStreakText.ShouldBe("Best: 0");
    }
}


================================================================================
FILE: tests/MyDesktopApplication.UI.Tests/MyDesktopApplication.UI.Tests.csproj
SIZE: 1.26 KB
MODIFIED: 2025-12-21 17:58:28
================================================================================

<Project Sdk="Microsoft.NET.Sdk">
  <PropertyGroup>
    <TargetFramework>net10.0</TargetFramework>
    <ImplicitUsings>enable</ImplicitUsings>
    <Nullable>enable</Nullable>
    <IsPackable>false</IsPackable>
    <IsTestProject>true</IsTestProject>
  </PropertyGroup>

  <ItemGroup>
    <PackageReference Include="Microsoft.NET.Test.Sdk" />
    <PackageReference Include="xunit" />
    <PackageReference Include="xunit.runner.visualstudio">
      <IncludeAssets>runtime; build; native; contentfiles; analyzers; buildtransitive</IncludeAssets>
      <PrivateAssets>all</PrivateAssets>
    </PackageReference>
    <PackageReference Include="coverlet.collector">
      <IncludeAssets>runtime; build; native; contentfiles; analyzers; buildtransitive</IncludeAssets>
      <PrivateAssets>all</PrivateAssets>
    </PackageReference>
    <PackageReference Include="Shouldly" />
    <PackageReference Include="NSubstitute" />
  </ItemGroup>

  <ItemGroup>
    <ProjectReference Include="../../src/MyDesktopApplication.Core/MyDesktopApplication.Core.csproj" />
    <ProjectReference Include="../../src/MyDesktopApplication.Desktop/MyDesktopApplication.Desktop.csproj" />
    <ProjectReference Include="../../src/MyDesktopApplication.Shared/MyDesktopApplication.Shared.csproj" />
  </ItemGroup>
</Project>


===============================================================================
EXPORT COMPLETED: Wed Dec 24 08:02:07 PM CST 2025
Total Files Found: 66
Files Exported: 66
Files Skipped: 0 (binary or large files)
Output File: /home/kushal/src/dotnet/MyDesktopApplication/docs/llm/dump.txt
===============================================================================
