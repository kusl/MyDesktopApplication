===============================================================================
PROJECT EXPORT
Generated: Sun Dec 21 05:35:46 PM CST 2025
Project Path: /home/kushal/src/dotnet/MyDesktopApplication
===============================================================================

DIRECTORY STRUCTURE:
===================

.
├── docs
│   ├── llm
│   │   ├── claude.md
│   │   ├── commands.txt
│   │   ├── dump.txt
│   │   └── output.txt
│   ├── memory.md
│   └── thoughts.md
├── .github
│   ├── workflows
│   │   ├── build.yml
│   │   ├── ci.yml
│   │   └── release.yml
│   └── dependabot.yml
├── src
│   ├── MyDesktopApplication.Android
│   │   ├── Resources
│   │   │   ├── drawable
│   │   │   │   ├── icon.png
│   │   │   │   └── icon.xml
│   │   │   ├── mipmap-hdpi
│   │   │   ├── mipmap-mdpi
│   │   │   ├── mipmap-xhdpi
│   │   │   ├── mipmap-xxhdpi
│   │   │   ├── mipmap-xxxhdpi
│   │   │   └── values
│   │   │       ├── strings.xml
│   │   │       └── styles.xml
│   │   ├── Views
│   │   │   ├── MainView.axaml
│   │   │   └── MainView.axaml.cs
│   │   ├── AndroidManifest.xml
│   │   ├── App.axaml
│   │   ├── App.cs
│   │   ├── MainActivity.cs
│   │   └── MyDesktopApplication.Android.csproj
│   ├── MyDesktopApplication.Core
│   │   ├── Entities
│   │   │   ├── Country.cs
│   │   │   ├── EntityBase.cs
│   │   │   ├── GameState.cs
│   │   │   ├── QuestionType.cs
│   │   │   └── TodoItem.cs
│   │   ├── Interfaces
│   │   │   ├── IGameStateRepository.cs
│   │   │   ├── IRepository.cs
│   │   │   └── ITodoRepository.cs
│   │   └── MyDesktopApplication.Core.csproj
│   ├── MyDesktopApplication.Desktop
│   │   ├── Assets
│   │   │   └── avalonia-logo.ico
│   │   ├── Converters
│   │   │   └── Converters.cs
│   │   ├── Models
│   │   ├── ViewModels
│   │   │   ├── MainWindowViewModel.cs
│   │   │   └── ViewModelBase.cs
│   │   ├── Views
│   │   │   ├── MainWindow.axaml
│   │   │   └── MainWindow.axaml.cs
│   │   ├── App.axaml
│   │   ├── App.axaml.cs
│   │   ├── app.manifest
│   │   ├── appsettings.json
│   │   ├── MyDesktopApplication.Desktop.csproj
│   │   └── Program.cs
│   ├── MyDesktopApplication.Infrastructure
│   │   ├── Data
│   │   │   ├── AppDbContext.cs
│   │   │   └── DesignTimeDbContextFactory.cs
│   │   ├── Repositories
│   │   │   ├── GameStateRepository.cs
│   │   │   ├── Repository.cs
│   │   │   └── TodoRepository.cs
│   │   ├── DependencyInjection.cs
│   │   └── MyDesktopApplication.Infrastructure.csproj
│   └── MyDesktopApplication.Shared
│       ├── Data
│       │   ├── CountryData.cs
│       │   └── MotivationalMessages.cs
│       ├── DTOs
│       │   └── TodoItemDto.cs
│       ├── ViewModels
│       │   ├── CountryQuizViewModel.cs
│       │   ├── MainViewModel.cs
│       │   └── ViewModelBase.cs
│       └── MyDesktopApplication.Shared.csproj
├── tests
│   ├── MyDesktopApplication.Core.Tests
│   │   ├── GameStateTests.cs
│   │   ├── MyDesktopApplication.Core.Tests.csproj
│   │   ├── QuestionTypeTests.cs
│   │   └── TodoItemTests.cs
│   ├── MyDesktopApplication.Integration.Tests
│   │   ├── MyDesktopApplication.Integration.Tests.csproj
│   │   └── TodoRepositoryTests.cs
│   └── MyDesktopApplication.UI.Tests
│       ├── MainWindowViewModelTests.cs
│       └── MyDesktopApplication.UI.Tests.csproj
├── add-migration.sh
├── android-build.binlog
├── Directory.Build.props
├── Directory.Packages.props
├── Directory.Packages.props.2025-12-21-12-53-54.bak
├── Directory.Packages.props.bak
├── export.sh
├── export.sh.bak
├── fix-all-errors.sh
├── fix-project-properly.sh
├── .gitattributes
├── .gitignore
├── migrate.sh
├── MyDesktopApplication.slnx
├── README.md
└── repair-project.sh


FILE CONTENTS:
==============

================================================================================
FILE: add-migration.sh
SIZE: 4.12 KB
MODIFIED: 2025-12-21 15:22:35
================================================================================

#!/bin/bash
set -e

# Robust EF Core migration script
# Usage: ./add-migration.sh <MigrationName>

MIGRATION_NAME="$1"
INFRASTRUCTURE_PROJECT="src/MyDesktopApplication.Infrastructure"
STARTUP_PROJECT="src/MyDesktopApplication.Desktop"
CONTEXT_FILE="$INFRASTRUCTURE_PROJECT/Data/AppDbContext.cs"
MIGRATIONS_DIR="Data/Migrations"

# Colors for output
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
NC='\033[0m' # No Color

echo "=============================================="
echo "  EF Core Migration Tool"
echo "=============================================="

# Validate migration name
if [ -z "$MIGRATION_NAME" ]; then
    echo -e "${RED}Error: Migration name required${NC}"
    echo ""
    echo "Usage: ./add-migration.sh <MigrationName>"
    echo "Example: ./add-migration.sh AddPriorityToTodoItem"
    exit 1
fi

# Validate migration name format (PascalCase, no spaces)
if [[ ! "$MIGRATION_NAME" =~ ^[A-Z][a-zA-Z0-9]*$ ]]; then
    echo -e "${YELLOW}Warning: Migration name should be PascalCase (e.g., InitialCreate)${NC}"
fi

# Step 1: Validate AppDbContext exists
echo ""
echo "Step 1: Validating AppDbContext..."
if [ ! -f "$CONTEXT_FILE" ]; then
    echo -e "${RED}Error: AppDbContext not found at $CONTEXT_FILE${NC}"
    echo ""
    echo "Expected location: $CONTEXT_FILE"
    echo "Please ensure the Infrastructure project has a Data/AppDbContext.cs file"
    exit 1
fi

# Check if AppDbContext class is defined
if ! grep -q "class AppDbContext" "$CONTEXT_FILE"; then
    echo -e "${RED}Error: AppDbContext class not found in $CONTEXT_FILE${NC}"
    exit 1
fi
echo -e "${GREEN}✓ AppDbContext found${NC}"

# Step 2: Validate startup project
echo ""
echo "Step 2: Validating startup project..."
if [ ! -f "$STARTUP_PROJECT/MyDesktopApplication.Desktop.csproj" ]; then
    echo -e "${RED}Error: Startup project not found at $STARTUP_PROJECT${NC}"
    exit 1
fi
echo -e "${GREEN}✓ Startup project found${NC}"

# Step 3: Check for EF tools
echo ""
echo "Step 3: Checking EF Core tools..."
if ! command -v dotnet-ef &> /dev/null && ! dotnet tool list -g | grep -q "dotnet-ef"; then
    echo -e "${YELLOW}Installing dotnet-ef tool...${NC}"
    dotnet tool install --global dotnet-ef
fi
echo -e "${GREEN}✓ EF Core tools available${NC}"

# Step 4: Kill any stuck processes
echo ""
echo "Step 4: Cleaning up stuck processes..."
pkill -f aapt2 2>/dev/null || true
pkill -f VBCSCompiler 2>/dev/null || true
dotnet build-server shutdown 2>/dev/null || true
echo -e "${GREEN}✓ Processes cleaned${NC}"

# Step 5: Build the projects first (excluding Android to avoid hangs)
echo ""
echo "Step 5: Building projects..."
dotnet build "$INFRASTRUCTURE_PROJECT" --no-restore -v q 2>/dev/null || \
    dotnet build "$INFRASTRUCTURE_PROJECT" -v q
dotnet build "$STARTUP_PROJECT" --no-restore -v q 2>/dev/null || \
    dotnet build "$STARTUP_PROJECT" -v q
echo -e "${GREEN}✓ Projects built${NC}"

# Step 6: Create the migration
echo ""
echo "Step 6: Creating migration '$MIGRATION_NAME'..."
dotnet ef migrations add "$MIGRATION_NAME" \
    --project "$INFRASTRUCTURE_PROJECT" \
    --startup-project "$STARTUP_PROJECT" \
    --output-dir "$MIGRATIONS_DIR" \
    --verbose

if [ $? -eq 0 ]; then
    echo ""
    echo -e "${GREEN}✓ Migration '$MIGRATION_NAME' created successfully!${NC}"
    
    # Step 7: Apply the migration
    echo ""
    echo "Step 7: Applying migration to database..."
    dotnet ef database update \
        --project "$INFRASTRUCTURE_PROJECT" \
        --startup-project "$STARTUP_PROJECT"
    
    if [ $? -eq 0 ]; then
        echo ""
        echo -e "${GREEN}✓ Database updated successfully!${NC}"
    else
        echo ""
        echo -e "${YELLOW}⚠ Migration created but database update failed${NC}"
        echo "You can manually apply with:"
        echo "  dotnet ef database update --project $INFRASTRUCTURE_PROJECT --startup-project $STARTUP_PROJECT"
    fi
else
    echo ""
    echo -e "${RED}✗ Migration creation failed${NC}"
    exit 1
fi

echo ""
echo "=============================================="
echo "  Migration Complete!"
echo "=============================================="
echo ""
echo "Migration files created in: $INFRASTRUCTURE_PROJECT/$MIGRATIONS_DIR/"
echo ""


================================================================================
FILE: Directory.Build.props
SIZE: 1.35 KB
MODIFIED: 2025-12-21 15:35:39
================================================================================

<Project>
  <!--
    Shared Build Properties for All Projects
    Includes optimizations for Android aapt2 issues
  -->
  <PropertyGroup>
    <TargetFramework>net10.0</TargetFramework>
    <ImplicitUsings>enable</ImplicitUsings>
    <Nullable>enable</Nullable>
    <LangVersion>latest</LangVersion>
    <TreatWarningsAsErrors>false</TreatWarningsAsErrors>
    <NoWarn>$(NoWarn);CS1591;CS8618</NoWarn>
    <GenerateDocumentationFile>false</GenerateDocumentationFile>
  </PropertyGroup>
  
  <!-- Android-specific optimizations to prevent aapt2 hangs -->
  <PropertyGroup Condition="$(TargetFramework.Contains('android'))">
    <!-- Disable aapt2 daemon (prevents deadlocks on Linux/macOS) -->
    <AndroidAapt2DaemonEnabled>false</AndroidAapt2DaemonEnabled>
    <!-- Use single-threaded aapt2 -->
    <AndroidAapt2ParallelThread>1</AndroidAapt2ParallelThread>
    <!-- Faster resource compilation -->
    <AndroidEnableAapt2NoCrunch>true</AndroidEnableAapt2NoCrunch>
    <!-- Use interpreted mode for faster debug builds -->
    <UseInterpreter Condition="'$(Configuration)' == 'Debug'">true</UseInterpreter>
    <!-- Reduce logging verbosity -->
    <AndroidUseSharedRuntime>false</AndroidUseSharedRuntime>
  </PropertyGroup>
  
  <!-- Source generators for MVVM -->
  <PropertyGroup>
    <EnableMSBuildToolsGeneration>true</EnableMSBuildToolsGeneration>
  </PropertyGroup>
</Project>


================================================================================
FILE: Directory.Packages.props
SIZE: 4.18 KB
MODIFIED: 2025-12-21 16:41:27
================================================================================

<Project>
  <PropertyGroup>
    <ManagePackageVersionsCentrally>true</ManagePackageVersionsCentrally>
    <CentralPackageTransitivePinningEnabled>true</CentralPackageTransitivePinningEnabled>
  </PropertyGroup>
  
  <ItemGroup Label="Avalonia">
    <PackageVersion Include="Avalonia" Version="11.3.0" />
    <PackageVersion Include="Avalonia.Desktop" Version="11.3.0" />
    <PackageVersion Include="Avalonia.Themes.Fluent" Version="11.3.0" />
    <PackageVersion Include="Avalonia.Fonts.Inter" Version="11.3.0" />
    <PackageVersion Include="Avalonia.Diagnostics" Version="11.3.0" />
    <PackageVersion Include="Avalonia.Android" Version="11.3.0" />
    <PackageVersion Include="Avalonia.Headless" Version="11.3.0" />
    <PackageVersion Include="Avalonia.Headless.XUnit" Version="11.3.0" />
  </ItemGroup>
  
  <ItemGroup Label="MVVM">
    <PackageVersion Include="CommunityToolkit.Mvvm" Version="8.4.0" />
  </ItemGroup>
  
  <ItemGroup Label="EntityFramework">
    <PackageVersion Include="Microsoft.EntityFrameworkCore" Version="10.0.0" />
    <PackageVersion Include="Microsoft.EntityFrameworkCore.Sqlite" Version="10.0.0" />
    <PackageVersion Include="Microsoft.EntityFrameworkCore.Design" Version="10.0.0" />
    <PackageVersion Include="Npgsql.EntityFrameworkCore.PostgreSQL" Version="10.0.0" />
    <PackageVersion Include="Dapper" Version="2.1.35" />
  </ItemGroup>
  
  <ItemGroup Label="Configuration">
    <PackageVersion Include="Microsoft.Extensions.Configuration" Version="10.0.0" />
    <PackageVersion Include="Microsoft.Extensions.Configuration.Json" Version="10.0.0" />
    <PackageVersion Include="Microsoft.Extensions.Configuration.EnvironmentVariables" Version="10.0.0" />
    <PackageVersion Include="Microsoft.Extensions.Configuration.Binder" Version="10.0.0" />
  </ItemGroup>
  
  <ItemGroup Label="DependencyInjection">
    <PackageVersion Include="Microsoft.Extensions.DependencyInjection" Version="10.0.0" />
    <PackageVersion Include="Microsoft.Extensions.DependencyInjection.Abstractions" Version="10.0.0" />
  </ItemGroup>
  
  <ItemGroup Label="Logging">
    <PackageVersion Include="Microsoft.Extensions.Logging" Version="10.0.0" />
    <PackageVersion Include="Microsoft.Extensions.Logging.Abstractions" Version="10.0.0" />
    <PackageVersion Include="Microsoft.Extensions.Logging.Console" Version="10.0.0" />
    <PackageVersion Include="Serilog" Version="4.2.0" />
    <PackageVersion Include="Serilog.Extensions.Logging" Version="9.0.0" />
    <PackageVersion Include="Serilog.Sinks.Console" Version="6.0.0" />
    <PackageVersion Include="Serilog.Sinks.File" Version="6.0.0" />
  </ItemGroup>
  
  <ItemGroup Label="OpenTelemetry">
    <PackageVersion Include="OpenTelemetry" Version="1.11.2" />
    <PackageVersion Include="OpenTelemetry.Extensions.Hosting" Version="1.11.2" />
    <PackageVersion Include="OpenTelemetry.Exporter.Console" Version="1.11.2" />
    <PackageVersion Include="OpenTelemetry.Exporter.OpenTelemetryProtocol" Version="1.11.2" />
    <PackageVersion Include="OpenTelemetry.Instrumentation.Http" Version="1.11.0" />
  </ItemGroup>
  
  <ItemGroup Label="Validation">
    <PackageVersion Include="FluentValidation" Version="11.11.0" />
    <PackageVersion Include="FluentValidation.DependencyInjectionExtensions" Version="11.11.0" />
  </ItemGroup>
  
  <ItemGroup Label="Testing - All BSD/MIT Licensed (Free of Cost)">
    <!-- xUnit - Apache 2.0 License -->
    <PackageVersion Include="xunit" Version="2.9.3" />
    <PackageVersion Include="xunit.runner.visualstudio" Version="3.1.5" />
    <PackageVersion Include="Microsoft.NET.Test.Sdk" Version="17.14.1" />
    
    <!-- Shouldly - BSD-3-Clause License (replaces FluentAssertions) -->
    <PackageVersion Include="Shouldly" Version="4.3.0" />
    
    <!-- NSubstitute - BSD-3-Clause License -->
    <PackageVersion Include="NSubstitute" Version="5.3.0" />
    
    <!-- Bogus - MIT License -->
    <PackageVersion Include="Bogus" Version="35.6.1" />
    
    <!-- Testcontainers - MIT License -->
    <PackageVersion Include="Testcontainers" Version="4.3.0" />
    <PackageVersion Include="Testcontainers.PostgreSql" Version="4.3.0" />
    
    <!-- Coverage -->
    <PackageVersion Include="coverlet.collector" Version="6.0.4" />
  </ItemGroup>
</Project>


================================================================================
FILE: export.sh
SIZE: 8.50 KB
MODIFIED: 2025-12-21 09:35:12
================================================================================

#!/bin/bash
# =============================================================================
# Complete Project Export for LLM Analysis
# =============================================================================
# Exports all relevant source files, configs, and documentation for AI review.
# Excludes: binaries, build outputs, IDE files, packages, git internals
# =============================================================================

set -e

OUTPUT_DIR="docs/llm"
OUTPUT_FILE="$OUTPUT_DIR/dump.txt"
PROJECT_PATH="$(pwd)"

# File extensions to include (comprehensive list for .NET/Avalonia projects)
# Source code
SOURCE_EXTS="cs|fs|vb"
# XAML/Avalonia UI
XAML_EXTS="axaml|xaml|paml"
# Project/Build files
PROJECT_EXTS="csproj|fsproj|vbproj|slnx|sln|props|targets|tasks"
# Config files
CONFIG_EXTS="json|yaml|yml|xml|config|settings"
# Documentation
DOC_EXTS="md|txt|rst|adoc"
# Scripts
SCRIPT_EXTS="sh|ps1|psm1|cmd|bat"
# Web/Style (in case of Avalonia web or styling)
STYLE_EXTS="css|scss|sass|less"
# Data/Templates
DATA_EXTS="sql|csv|resx|resources"
# Docker/CI
DEVOPS_EXTS="dockerfile|dockerignore|editorconfig|gitignore|gitattributes"

# Combine all extensions
ALL_EXTS="$SOURCE_EXTS|$XAML_EXTS|$PROJECT_EXTS|$CONFIG_EXTS|$DOC_EXTS|$SCRIPT_EXTS|$STYLE_EXTS|$DATA_EXTS"

# Directories to exclude
EXCLUDE_DIRS="bin|obj|.git|.vs|.idea|.vscode|node_modules|packages|TestResults|coverage|publish|artifacts|.nuget|wwwroot/lib"

# Files to exclude (patterns)
EXCLUDE_FILES="*.Designer.cs|*.g.cs|*.g.i.cs|AssemblyInfo.cs|*.min.js|*.min.css|package-lock.json|*.lock|*.bak"

echo "=============================================="
echo "  Project Export for LLM Analysis"
echo "=============================================="
echo ""
echo "Project Path: $PROJECT_PATH"
echo "Output File:  $OUTPUT_FILE"
echo ""

mkdir -p "$OUTPUT_DIR"

# Start output file
{
    echo "==============================================================================="
    echo "PROJECT EXPORT"
    echo "Generated: $(date)"
    echo "Project Path: $PROJECT_PATH"
    echo "==============================================================================="
    echo ""
} > "$OUTPUT_FILE"

# Directory structure
echo "Generating directory structure..."
{
    echo "DIRECTORY STRUCTURE:"
    echo "==================="
    echo ""
    # Try tree first, fall back to find
    if command -v tree &> /dev/null; then
        tree -a -I "$EXCLUDE_DIRS" --noreport --dirsfirst 2>/dev/null || echo "(tree command failed)"
    else
        find . -type d \( -name "bin" -o -name "obj" -o -name ".git" -o -name ".vs" -o -name ".idea" -o -name "node_modules" -o -name "packages" -o -name "TestResults" \) -prune -o -type f -print | sed 's|[^/]*/|  |g' | sort
    fi
    echo ""
    echo ""
} >> "$OUTPUT_FILE"

# Build the find command dynamically
echo "Collecting files..."

# Create a temporary file for the file list
TMPFILE=$(mktemp)

# Find all relevant files
find . -type f \( \
    -iname "*.cs" -o \
    -iname "*.fs" -o \
    -iname "*.vb" -o \
    -iname "*.axaml" -o \
    -iname "*.xaml" -o \
    -iname "*.paml" -o \
    -iname "*.csproj" -o \
    -iname "*.fsproj" -o \
    -iname "*.vbproj" -o \
    -iname "*.slnx" -o \
    -iname "*.sln" -o \
    -iname "*.props" -o \
    -iname "*.targets" -o \
    -iname "*.json" -o \
    -iname "*.yaml" -o \
    -iname "*.yml" -o \
    -iname "*.xml" -o \
    -iname "*.config" -o \
    -iname "*.md" -o \
    -iname "*.txt" -o \
    -iname "*.sh" -o \
    -iname "*.ps1" -o \
    -iname "*.cmd" -o \
    -iname "*.bat" -o \
    -iname "*.sql" -o \
    -iname "*.resx" -o \
    -iname "*.css" -o \
    -iname "*.scss" -o \
    -iname "*.manifest" -o \
    -iname "*.ico" -o \
    -iname "Dockerfile" -o \
    -iname "docker-compose*.yml" -o \
    -iname ".editorconfig" -o \
    -iname ".gitignore" -o \
    -iname ".gitattributes" -o \
    -iname "global.json" -o \
    -iname "nuget.config" -o \
    -iname "Directory.Build.props" -o \
    -iname "Directory.Build.targets" -o \
    -iname "Directory.Packages.props" \
    \) \
    ! -path "*/bin/*" \
    ! -path "*/obj/*" \
    ! -path "*/docs/*" \
    ! -path "*/.git/*" \
    ! -path "*/.vs/*" \
    ! -path "*/.idea/*" \
    ! -path "*/.vscode/*" \
    ! -path "*/node_modules/*" \
    ! -path "*/packages/*" \
    ! -path "*/TestResults/*" \
    ! -path "*/coverage/*" \
    ! -path "*/publish/*" \
    ! -path "*/artifacts/*" \
    ! -path "*/.nuget/*" \
    ! -name "*.Designer.cs" \
    ! -name "*.g.cs" \
    ! -name "*.g.i.cs" \
    ! -name "*.min.js" \
    ! -name "*.min.css" \
    ! -name "package-lock.json" \
    ! -name "*.bak" \
    2>/dev/null | sort > "$TMPFILE"

FILE_COUNT=$(wc -l < "$TMPFILE")
echo "Found $FILE_COUNT files to export"
echo ""

# Add file contents header
{
    echo "FILE CONTENTS:"
    echo "=============="
    echo ""
} >> "$OUTPUT_FILE"

# Process each file
COUNTER=0
SKIPPED=0

while IFS= read -r file; do
    COUNTER=$((COUNTER + 1))
    FILENAME="${file#./}"
    
    # Skip binary files (check if file is text)
    if file "$file" | grep -qE "binary|executable|data|image"; then
        # For some files we want to note they exist but not dump contents
        if [[ "$file" =~ \.(ico|png|jpg|jpeg|gif|bmp|svg|woff|woff2|ttf|eot)$ ]]; then
            SKIPPED=$((SKIPPED + 1))
            echo "Skipping binary ($COUNTER/$FILE_COUNT): $FILENAME"
            {
                echo "================================================================================"
                echo "FILE: $FILENAME"
                echo "TYPE: [BINARY FILE - Contents not exported]"
                echo "================================================================================"
                echo ""
            } >> "$OUTPUT_FILE"
            continue
        fi
    fi
    
    # Get file info
    FILESIZE=$(stat -c%s "$file" 2>/dev/null || stat -f%z "$file" 2>/dev/null || echo "0")
    MODIFIED=$(stat -c%y "$file" 2>/dev/null | cut -d'.' -f1 || stat -f"%Sm" -t "%Y-%m-%d %H:%M:%S" "$file" 2>/dev/null || echo "unknown")
    
    # Skip very large files (>500KB) - they're probably not source code
    if [ "$FILESIZE" -gt 512000 ]; then
        SKIPPED=$((SKIPPED + 1))
        echo "Skipping large file ($COUNTER/$FILE_COUNT): $FILENAME ($(echo "scale=0; $FILESIZE/1024" | bc)KB)"
        {
            echo "================================================================================"
            echo "FILE: $FILENAME"
            echo "SIZE: $(echo "scale=2; $FILESIZE/1024" | bc) KB"
            echo "TYPE: [LARGE FILE - Contents not exported, exceeds 500KB limit]"
            echo "================================================================================"
            echo ""
        } >> "$OUTPUT_FILE"
        continue
    fi
    
    echo "Processing ($COUNTER/$FILE_COUNT): $FILENAME"
    
    {
        echo "================================================================================"
        echo "FILE: $FILENAME"
        echo "SIZE: $(echo "scale=2; $FILESIZE/1024" | bc 2>/dev/null || echo "0.00") KB"
        echo "MODIFIED: $MODIFIED"
        echo "================================================================================"
        echo ""
        cat "$file" 2>/dev/null || echo "[ERROR: Could not read file]"
        echo ""
        echo ""
    } >> "$OUTPUT_FILE"
    
done < "$TMPFILE"

# Cleanup
rm -f "$TMPFILE"

# Summary
EXPORTED=$((COUNTER - SKIPPED))
{
    echo "==============================================================================="
    echo "EXPORT COMPLETED: $(date)"
    echo "Total Files Found: $FILE_COUNT"
    echo "Files Exported: $EXPORTED"
    echo "Files Skipped: $SKIPPED (binary or large files)"
    echo "Output File: $PROJECT_PATH/$OUTPUT_FILE"
    echo "==============================================================================="
} >> "$OUTPUT_FILE"

# Final output
OUTPUT_SIZE=$(stat -c%s "$OUTPUT_FILE" 2>/dev/null || stat -f%z "$OUTPUT_FILE" 2>/dev/null || echo "0")

echo ""
echo "=============================================="
echo "  Export Complete!"
echo "=============================================="
echo ""
echo "Output file:    $OUTPUT_FILE"
echo "Files exported: $EXPORTED"
echo "Files skipped:  $SKIPPED"
echo "Output size:    $(echo "scale=2; $OUTPUT_SIZE/1024" | bc 2>/dev/null || echo "?") KB"
echo ""
echo "File types included:"
echo "  • Source code: .cs, .fs, .vb"
echo "  • UI/XAML: .axaml, .xaml, .paml"
echo "  • Projects: .csproj, .slnx, .sln, .props, .targets"
echo "  • Config: .json, .yaml, .yml, .xml, .config"
echo "  • Docs: .md, .txt"
echo "  • Scripts: .sh, .ps1, .cmd, .bat"
echo "  • Other: .sql, .resx, .css, .scss, Dockerfile, etc."
echo ""


================================================================================
FILE: fix-all-errors.sh
SIZE: 33.49 KB
MODIFIED: 2025-12-21 17:14:28
================================================================================

#!/bin/bash
set -euo pipefail

echo "=============================================="
echo "  Comprehensive Build Error Fix Script"
echo "=============================================="
echo ""
echo "This script fixes ALL build errors:"
echo "  1. GameStateRepository interface mismatch"
echo "  2. Country class missing properties"
echo "  3. CountryData type conversion errors"
echo "  4. GetCorrectMessage method signature"
echo "  5. Kill stuck build processes"
echo ""

cd ~/src/dotnet/MyDesktopApplication

# Step 1: Kill stuck processes
echo "[Step 1/8] Killing stuck build processes..."
pkill -f "aapt2" 2>/dev/null || true
pkill -f "VBCSCompiler" 2>/dev/null || true
dotnet build-server shutdown 2>/dev/null || true
echo "  ✓ Processes cleaned"

# Step 2: Clean build artifacts
echo "[Step 2/8] Cleaning build artifacts..."
find . -type d -name "bin" -exec rm -rf {} + 2>/dev/null || true
find . -type d -name "obj" -exec rm -rf {} + 2>/dev/null || true
echo "  ✓ Build artifacts cleaned"

# Step 3: Fix Country class - add all required properties
echo "[Step 3/8] Fixing Country class..."
cat > src/MyDesktopApplication.Core/Entities/Country.cs << 'COUNTRY_EOF'
namespace MyDesktopApplication.Core.Entities;

/// <summary>
/// Represents a country with statistical data for the quiz game.
/// </summary>
public class Country
{
    public required string Code { get; init; }
    public required string Name { get; init; }
    public string? Iso2 { get; init; }
    public string? Continent { get; init; }
    public long Population { get; init; }
    public double Area { get; init; }
    public double Gdp { get; init; }
    public double GdpPerCapita { get; init; }
    public double Density { get; init; }
    public double Literacy { get; init; }
    public double Hdi { get; init; }
    public double LifeExpectancy { get; init; }
}
COUNTRY_EOF
echo "  ✓ Country class fixed"

# Step 4: Fix IGameStateRepository interface
echo "[Step 4/8] Fixing IGameStateRepository interface..."
cat > src/MyDesktopApplication.Core/Interfaces/IGameStateRepository.cs << 'IGSREPO_EOF'
using MyDesktopApplication.Core.Entities;

namespace MyDesktopApplication.Core.Interfaces;

/// <summary>
/// Repository interface for game state persistence.
/// </summary>
public interface IGameStateRepository
{
    Task<GameState?> GetByUserIdAsync(string userId, CancellationToken ct = default);
    Task<GameState> GetOrCreateAsync(string userId, CancellationToken ct = default);
    Task SaveAsync(GameState gameState, CancellationToken ct = default);
    Task ResetAsync(string userId, CancellationToken ct = default);
}
IGSREPO_EOF
echo "  ✓ IGameStateRepository interface fixed"

# Step 5: Fix GameState entity
echo "[Step 5/8] Fixing GameState entity..."
cat > src/MyDesktopApplication.Core/Entities/GameState.cs << 'GSEOF'
namespace MyDesktopApplication.Core.Entities;

/// <summary>
/// Represents the persistent game state for a user.
/// </summary>
public class GameState : EntityBase
{
    public string UserId { get; set; } = "default";
    public int Score { get; set; }
    public int CurrentStreak { get; set; }
    public int BestStreak { get; set; }
    public int TotalAnswered { get; set; }
    public int TotalCorrect { get; set; }
    public string SelectedQuestionType { get; set; } = "Population";
    
    // Calculated properties
    public int TotalQuestions => TotalAnswered;
    public int CorrectAnswers => TotalCorrect;
    public double Accuracy => TotalAnswered > 0 ? (double)TotalCorrect / TotalAnswered : 0;
    public double AccuracyPercentage => Accuracy * 100;
    
    public void RecordAnswer(bool isCorrect)
    {
        TotalAnswered++;
        if (isCorrect)
        {
            TotalCorrect++;
            Score++;
            CurrentStreak++;
            if (CurrentStreak > BestStreak)
                BestStreak = CurrentStreak;
        }
        else
        {
            CurrentStreak = 0;
        }
    }
    
    public void Reset()
    {
        Score = 0;
        CurrentStreak = 0;
        TotalAnswered = 0;
        TotalCorrect = 0;
        // Preserve BestStreak and SelectedQuestionType
    }
}
GSEOF
echo "  ✓ GameState entity fixed"

# Step 6: Fix GameStateRepository implementation
echo "[Step 6/8] Fixing GameStateRepository..."
cat > src/MyDesktopApplication.Infrastructure/Repositories/GameStateRepository.cs << 'GSREPO_EOF'
using Microsoft.EntityFrameworkCore;
using MyDesktopApplication.Core.Entities;
using MyDesktopApplication.Core.Interfaces;
using MyDesktopApplication.Infrastructure.Data;

namespace MyDesktopApplication.Infrastructure.Repositories;

/// <summary>
/// Repository for persisting game state to the database.
/// </summary>
public class GameStateRepository : IGameStateRepository
{
    private readonly AppDbContext _context;

    public GameStateRepository(AppDbContext context)
    {
        _context = context;
    }

    public async Task<GameState?> GetByUserIdAsync(string userId, CancellationToken ct = default)
    {
        return await _context.GameStates
            .AsNoTracking()
            .FirstOrDefaultAsync(g => g.UserId == userId, ct);
    }

    public async Task<GameState> GetOrCreateAsync(string userId, CancellationToken ct = default)
    {
        var existing = await _context.GameStates
            .FirstOrDefaultAsync(g => g.UserId == userId, ct);
        
        if (existing != null)
            return existing;

        var newState = new GameState
        {
            UserId = userId,
            Score = 0,
            CurrentStreak = 0,
            BestStreak = 0,
            TotalAnswered = 0,
            TotalCorrect = 0,
            SelectedQuestionType = "Population"
        };
        
        _context.GameStates.Add(newState);
        await _context.SaveChangesAsync(ct);
        return newState;
    }

    public async Task SaveAsync(GameState gameState, CancellationToken ct = default)
    {
        var existing = await _context.GameStates
            .FirstOrDefaultAsync(g => g.UserId == gameState.UserId, ct);
        
        if (existing == null)
        {
            _context.GameStates.Add(gameState);
        }
        else
        {
            existing.Score = gameState.Score;
            existing.CurrentStreak = gameState.CurrentStreak;
            existing.BestStreak = gameState.BestStreak;
            existing.TotalAnswered = gameState.TotalAnswered;
            existing.TotalCorrect = gameState.TotalCorrect;
            existing.SelectedQuestionType = gameState.SelectedQuestionType;
            existing.UpdatedAt = DateTime.UtcNow;
        }
        
        await _context.SaveChangesAsync(ct);
    }

    public async Task ResetAsync(string userId, CancellationToken ct = default)
    {
        var state = await _context.GameStates
            .FirstOrDefaultAsync(g => g.UserId == userId, ct);
        
        if (state != null)
        {
            state.Reset();
            state.UpdatedAt = DateTime.UtcNow;
            await _context.SaveChangesAsync(ct);
        }
    }
}
GSREPO_EOF
echo "  ✓ GameStateRepository fixed"

# Step 7: Fix AppDbContext to include GameStates
echo "[Step 7/8] Fixing AppDbContext..."
cat > src/MyDesktopApplication.Infrastructure/Data/AppDbContext.cs << 'DBCTX_EOF'
using Microsoft.EntityFrameworkCore;
using MyDesktopApplication.Core.Entities;

namespace MyDesktopApplication.Infrastructure.Data;

/// <summary>
/// Entity Framework Core database context for the application.
/// </summary>
public class AppDbContext : DbContext
{
    public AppDbContext(DbContextOptions<AppDbContext> options) : base(options)
    {
    }

    // Required for design-time migrations
    public AppDbContext() : base(new DbContextOptionsBuilder<AppDbContext>()
        .UseSqlite("Data Source=app.db")
        .Options)
    {
    }

    public DbSet<TodoItem> TodoItems => Set<TodoItem>();
    public DbSet<GameState> GameStates => Set<GameState>();

    protected override void OnModelCreating(ModelBuilder modelBuilder)
    {
        base.OnModelCreating(modelBuilder);

        modelBuilder.Entity<TodoItem>(entity =>
        {
            entity.HasKey(e => e.Id);
            entity.Property(e => e.Title).IsRequired().HasMaxLength(200);
            entity.Property(e => e.Description).HasMaxLength(1000);
            entity.HasIndex(e => e.IsCompleted);
            entity.HasIndex(e => e.DueDate);
        });

        modelBuilder.Entity<GameState>(entity =>
        {
            entity.HasKey(e => e.Id);
            entity.Property(e => e.UserId).IsRequired().HasMaxLength(100);
            entity.HasIndex(e => e.UserId).IsUnique();
            entity.Property(e => e.SelectedQuestionType).HasMaxLength(50);
        });
    }
}
DBCTX_EOF
echo "  ✓ AppDbContext fixed"

# Step 8: Fix CountryData to match Country class
echo "[Step 8/8] Fixing CountryData..."
cat > src/MyDesktopApplication.Shared/Data/CountryData.cs << 'CDATA_EOF'
using MyDesktopApplication.Core.Entities;

namespace MyDesktopApplication.Shared.Data;

/// <summary>
/// Static country data for the quiz game.
/// Data sources: World Bank, UN, IMF, UNDP (2023/2024 estimates).
/// </summary>
public static class CountryData
{
    public static IReadOnlyList<Country> Countries { get; } = new List<Country>
    {
        // Africa
        new() { Code = "NGA", Name = "Nigeria", Iso2 = "NG", Continent = "Africa", Population = 223800000, Area = 923769, Gdp = 477000000000, GdpPerCapita = 2131, Density = 242, Literacy = 62, Hdi = 0.539, LifeExpectancy = 53.9 },
        new() { Code = "ETH", Name = "Ethiopia", Iso2 = "ET", Continent = "Africa", Population = 126500000, Area = 1104300, Gdp = 156000000000, GdpPerCapita = 1233, Density = 115, Literacy = 52, Hdi = 0.498, LifeExpectancy = 67.8 },
        new() { Code = "EGY", Name = "Egypt", Iso2 = "EG", Continent = "Africa", Population = 105000000, Area = 1002450, Gdp = 476700000000, GdpPerCapita = 4538, Density = 105, Literacy = 71, Hdi = 0.731, LifeExpectancy = 72.1 },
        new() { Code = "ZAF", Name = "South Africa", Iso2 = "ZA", Continent = "Africa", Population = 60000000, Area = 1219090, Gdp = 405000000000, GdpPerCapita = 6750, Density = 49, Literacy = 95, Hdi = 0.713, LifeExpectancy = 65.3 },
        new() { Code = "KEN", Name = "Kenya", Iso2 = "KE", Continent = "Africa", Population = 54000000, Area = 580367, Gdp = 113400000000, GdpPerCapita = 2100, Density = 93, Literacy = 82, Hdi = 0.575, LifeExpectancy = 67.5 },
        new() { Code = "MAR", Name = "Morocco", Iso2 = "MA", Continent = "Africa", Population = 37500000, Area = 446550, Gdp = 142900000000, GdpPerCapita = 3810, Density = 84, Literacy = 74, Hdi = 0.683, LifeExpectancy = 77.4 },
        new() { Code = "GHA", Name = "Ghana", Iso2 = "GH", Continent = "Africa", Population = 33500000, Area = 238535, Gdp = 77590000000, GdpPerCapita = 2316, Density = 140, Literacy = 79, Hdi = 0.632, LifeExpectancy = 64.9 },
        
        // Asia
        new() { Code = "CHN", Name = "China", Iso2 = "CN", Continent = "Asia", Population = 1411750000, Area = 9596961, Gdp = 17963000000000, GdpPerCapita = 12720, Density = 147, Literacy = 97, Hdi = 0.768, LifeExpectancy = 78.2 },
        new() { Code = "IND", Name = "India", Iso2 = "IN", Continent = "Asia", Population = 1428630000, Area = 3287263, Gdp = 3730000000000, GdpPerCapita = 2612, Density = 435, Literacy = 77, Hdi = 0.644, LifeExpectancy = 70.4 },
        new() { Code = "IDN", Name = "Indonesia", Iso2 = "ID", Continent = "Asia", Population = 277500000, Area = 1904569, Gdp = 1319000000000, GdpPerCapita = 4752, Density = 146, Literacy = 96, Hdi = 0.713, LifeExpectancy = 72.3 },
        new() { Code = "PAK", Name = "Pakistan", Iso2 = "PK", Continent = "Asia", Population = 235800000, Area = 881913, Gdp = 376500000000, GdpPerCapita = 1597, Density = 267, Literacy = 59, Hdi = 0.544, LifeExpectancy = 67.3 },
        new() { Code = "BGD", Name = "Bangladesh", Iso2 = "BD", Continent = "Asia", Population = 172000000, Area = 147570, Gdp = 460200000000, GdpPerCapita = 2676, Density = 1166, Literacy = 75, Hdi = 0.661, LifeExpectancy = 73.4 },
        new() { Code = "JPN", Name = "Japan", Iso2 = "JP", Continent = "Asia", Population = 124500000, Area = 377975, Gdp = 4231000000000, GdpPerCapita = 33973, Density = 329, Literacy = 99, Hdi = 0.920, LifeExpectancy = 84.6 },
        new() { Code = "PHL", Name = "Philippines", Iso2 = "PH", Continent = "Asia", Population = 115600000, Area = 300000, Gdp = 404300000000, GdpPerCapita = 3498, Density = 385, Literacy = 98, Hdi = 0.699, LifeExpectancy = 72.1 },
        new() { Code = "VNM", Name = "Vietnam", Iso2 = "VN", Continent = "Asia", Population = 100000000, Area = 331212, Gdp = 449000000000, GdpPerCapita = 4490, Density = 302, Literacy = 96, Hdi = 0.726, LifeExpectancy = 75.8 },
        new() { Code = "TUR", Name = "Turkey", Iso2 = "TR", Continent = "Asia", Population = 85300000, Area = 783356, Gdp = 905500000000, GdpPerCapita = 10618, Density = 109, Literacy = 97, Hdi = 0.838, LifeExpectancy = 78.6 },
        new() { Code = "IRN", Name = "Iran", Iso2 = "IR", Continent = "Asia", Population = 87900000, Area = 1648195, Gdp = 388500000000, GdpPerCapita = 4420, Density = 53, Literacy = 88, Hdi = 0.774, LifeExpectancy = 77.3 },
        new() { Code = "THA", Name = "Thailand", Iso2 = "TH", Continent = "Asia", Population = 71800000, Area = 513120, Gdp = 495300000000, GdpPerCapita = 6900, Density = 140, Literacy = 94, Hdi = 0.800, LifeExpectancy = 79.3 },
        new() { Code = "MMR", Name = "Myanmar", Iso2 = "MM", Continent = "Asia", Population = 54200000, Area = 676578, Gdp = 59400000000, GdpPerCapita = 1096, Density = 80, Literacy = 90, Hdi = 0.585, LifeExpectancy = 69.1 },
        new() { Code = "KOR", Name = "South Korea", Iso2 = "KR", Continent = "Asia", Population = 51700000, Area = 100210, Gdp = 1665000000000, GdpPerCapita = 32220, Density = 516, Literacy = 99, Hdi = 0.925, LifeExpectancy = 83.7 },
        new() { Code = "MYS", Name = "Malaysia", Iso2 = "MY", Continent = "Asia", Population = 33940000, Area = 330803, Gdp = 407000000000, GdpPerCapita = 11993, Density = 103, Literacy = 95, Hdi = 0.803, LifeExpectancy = 76.9 },
        new() { Code = "SAU", Name = "Saudi Arabia", Iso2 = "SA", Continent = "Asia", Population = 36400000, Area = 2149690, Gdp = 1069000000000, GdpPerCapita = 29369, Density = 17, Literacy = 98, Hdi = 0.875, LifeExpectancy = 76.9 },
        new() { Code = "NPL", Name = "Nepal", Iso2 = "NP", Continent = "Asia", Population = 30900000, Area = 147181, Gdp = 40830000000, GdpPerCapita = 1321, Density = 210, Literacy = 68, Hdi = 0.602, LifeExpectancy = 71.7 },
        new() { Code = "ARE", Name = "United Arab Emirates", Iso2 = "AE", Continent = "Asia", Population = 9440000, Area = 83600, Gdp = 498000000000, GdpPerCapita = 52757, Density = 113, Literacy = 98, Hdi = 0.911, LifeExpectancy = 78.7 },
        new() { Code = "ISR", Name = "Israel", Iso2 = "IL", Continent = "Asia", Population = 9730000, Area = 20770, Gdp = 525000000000, GdpPerCapita = 53969, Density = 468, Literacy = 98, Hdi = 0.915, LifeExpectancy = 83.5 },
        new() { Code = "SGP", Name = "Singapore", Iso2 = "SG", Continent = "Asia", Population = 5450000, Area = 733, Gdp = 501400000000, GdpPerCapita = 91990, Density = 7438, Literacy = 97, Hdi = 0.939, LifeExpectancy = 84.1 },
        
        // Europe
        new() { Code = "RUS", Name = "Russia", Iso2 = "RU", Continent = "Europe", Population = 144400000, Area = 17098242, Gdp = 2240000000000, GdpPerCapita = 15512, Density = 8, Literacy = 100, Hdi = 0.822, LifeExpectancy = 73.2 },
        new() { Code = "DEU", Name = "Germany", Iso2 = "DE", Continent = "Europe", Population = 83200000, Area = 357022, Gdp = 4259000000000, GdpPerCapita = 51203, Density = 233, Literacy = 99, Hdi = 0.942, LifeExpectancy = 81.9 },
        new() { Code = "GBR", Name = "United Kingdom", Iso2 = "GB", Continent = "Europe", Population = 67000000, Area = 242495, Gdp = 3070000000000, GdpPerCapita = 45820, Density = 276, Literacy = 99, Hdi = 0.929, LifeExpectancy = 82.0 },
        new() { Code = "FRA", Name = "France", Iso2 = "FR", Continent = "Europe", Population = 67750000, Area = 643801, Gdp = 2937000000000, GdpPerCapita = 43343, Density = 105, Literacy = 99, Hdi = 0.903, LifeExpectancy = 83.0 },
        new() { Code = "ITA", Name = "Italy", Iso2 = "IT", Continent = "Europe", Population = 58900000, Area = 301340, Gdp = 2107000000000, GdpPerCapita = 35776, Density = 196, Literacy = 99, Hdi = 0.895, LifeExpectancy = 84.0 },
        new() { Code = "ESP", Name = "Spain", Iso2 = "ES", Continent = "Europe", Population = 47420000, Area = 505990, Gdp = 1492000000000, GdpPerCapita = 31468, Density = 94, Literacy = 98, Hdi = 0.905, LifeExpectancy = 84.4 },
        new() { Code = "UKR", Name = "Ukraine", Iso2 = "UA", Continent = "Europe", Population = 37000000, Area = 603550, Gdp = 160500000000, GdpPerCapita = 4338, Density = 61, Literacy = 100, Hdi = 0.773, LifeExpectancy = 73.6 },
        new() { Code = "POL", Name = "Poland", Iso2 = "PL", Continent = "Europe", Population = 37700000, Area = 312696, Gdp = 688200000000, GdpPerCapita = 18258, Density = 121, Literacy = 99, Hdi = 0.876, LifeExpectancy = 78.8 },
        new() { Code = "ROU", Name = "Romania", Iso2 = "RO", Continent = "Europe", Population = 19050000, Area = 238397, Gdp = 312800000000, GdpPerCapita = 16422, Density = 80, Literacy = 99, Hdi = 0.821, LifeExpectancy = 76.6 },
        new() { Code = "NLD", Name = "Netherlands", Iso2 = "NL", Continent = "Europe", Population = 17590000, Area = 41543, Gdp = 1009000000000, GdpPerCapita = 57371, Density = 423, Literacy = 99, Hdi = 0.946, LifeExpectancy = 82.8 },
        new() { Code = "BEL", Name = "Belgium", Iso2 = "BE", Continent = "Europe", Population = 11590000, Area = 30528, Gdp = 578200000000, GdpPerCapita = 49887, Density = 380, Literacy = 99, Hdi = 0.937, LifeExpectancy = 82.2 },
        new() { Code = "GRC", Name = "Greece", Iso2 = "GR", Continent = "Europe", Population = 10360000, Area = 131957, Gdp = 218000000000, GdpPerCapita = 21044, Density = 79, Literacy = 98, Hdi = 0.887, LifeExpectancy = 82.2 },
        new() { Code = "CZE", Name = "Czechia", Iso2 = "CZ", Continent = "Europe", Population = 10510000, Area = 78867, Gdp = 290900000000, GdpPerCapita = 27683, Density = 133, Literacy = 99, Hdi = 0.889, LifeExpectancy = 79.9 },
        new() { Code = "PRT", Name = "Portugal", Iso2 = "PT", Continent = "Europe", Population = 10330000, Area = 92212, Gdp = 255850000000, GdpPerCapita = 24775, Density = 112, Literacy = 96, Hdi = 0.866, LifeExpectancy = 82.7 },
        new() { Code = "SWE", Name = "Sweden", Iso2 = "SE", Continent = "Europe", Population = 10540000, Area = 450295, Gdp = 585940000000, GdpPerCapita = 55603, Density = 23, Literacy = 99, Hdi = 0.947, LifeExpectancy = 83.3 },
        new() { Code = "HUN", Name = "Hungary", Iso2 = "HU", Continent = "Europe", Population = 9600000, Area = 93028, Gdp = 188500000000, GdpPerCapita = 19635, Density = 103, Literacy = 99, Hdi = 0.846, LifeExpectancy = 77.0 },
        new() { Code = "AUT", Name = "Austria", Iso2 = "AT", Continent = "Europe", Population = 9040000, Area = 83871, Gdp = 471400000000, GdpPerCapita = 52152, Density = 108, Literacy = 99, Hdi = 0.916, LifeExpectancy = 82.0 },
        new() { Code = "CHE", Name = "Switzerland", Iso2 = "CH", Continent = "Europe", Population = 8770000, Area = 41285, Gdp = 884940000000, GdpPerCapita = 100916, Density = 212, Literacy = 99, Hdi = 0.962, LifeExpectancy = 84.4 },
        new() { Code = "BGR", Name = "Bulgaria", Iso2 = "BG", Continent = "Europe", Population = 6870000, Area = 110879, Gdp = 89040000000, GdpPerCapita = 12960, Density = 62, Literacy = 98, Hdi = 0.795, LifeExpectancy = 75.1 },
        new() { Code = "DNK", Name = "Denmark", Iso2 = "DK", Continent = "Europe", Population = 5910000, Area = 43094, Gdp = 395400000000, GdpPerCapita = 66914, Density = 137, Literacy = 99, Hdi = 0.948, LifeExpectancy = 81.6 },
        new() { Code = "FIN", Name = "Finland", Iso2 = "FI", Continent = "Europe", Population = 5540000, Area = 338145, Gdp = 300190000000, GdpPerCapita = 54188, Density = 16, Literacy = 99, Hdi = 0.940, LifeExpectancy = 82.2 },
        new() { Code = "NOR", Name = "Norway", Iso2 = "NO", Continent = "Europe", Population = 5470000, Area = 323802, Gdp = 485510000000, GdpPerCapita = 88783, Density = 17, Literacy = 99, Hdi = 0.961, LifeExpectancy = 83.2 },
        new() { Code = "IRL", Name = "Ireland", Iso2 = "IE", Continent = "Europe", Population = 5130000, Area = 70273, Gdp = 504180000000, GdpPerCapita = 98268, Density = 73, Literacy = 99, Hdi = 0.945, LifeExpectancy = 82.8 },
        
        // North America
        new() { Code = "USA", Name = "United States", Iso2 = "US", Continent = "North America", Population = 331900000, Area = 9833517, Gdp = 27360000000000, GdpPerCapita = 82422, Density = 34, Literacy = 99, Hdi = 0.921, LifeExpectancy = 79.1 },
        new() { Code = "MEX", Name = "Mexico", Iso2 = "MX", Continent = "North America", Population = 128900000, Area = 1964375, Gdp = 1811000000000, GdpPerCapita = 14050, Density = 66, Literacy = 95, Hdi = 0.758, LifeExpectancy = 75.0 },
        new() { Code = "CAN", Name = "Canada", Iso2 = "CA", Continent = "North America", Population = 40100000, Area = 9984670, Gdp = 2139000000000, GdpPerCapita = 53340, Density = 4, Literacy = 99, Hdi = 0.936, LifeExpectancy = 82.7 },
        new() { Code = "GTM", Name = "Guatemala", Iso2 = "GT", Continent = "North America", Population = 18090000, Area = 108889, Gdp = 95000000000, GdpPerCapita = 5251, Density = 166, Literacy = 83, Hdi = 0.627, LifeExpectancy = 74.3 },
        new() { Code = "CUB", Name = "Cuba", Iso2 = "CU", Continent = "North America", Population = 11100000, Area = 109884, Gdp = 107400000000, GdpPerCapita = 9676, Density = 101, Literacy = 100, Hdi = 0.764, LifeExpectancy = 79.2 },
        new() { Code = "DOM", Name = "Dominican Republic", Iso2 = "DO", Continent = "North America", Population = 11230000, Area = 48671, Gdp = 113640000000, GdpPerCapita = 10119, Density = 231, Literacy = 95, Hdi = 0.767, LifeExpectancy = 74.1 },
        new() { Code = "HND", Name = "Honduras", Iso2 = "HN", Continent = "North America", Population = 10280000, Area = 112492, Gdp = 31720000000, GdpPerCapita = 3086, Density = 91, Literacy = 89, Hdi = 0.621, LifeExpectancy = 75.3 },
        new() { Code = "HTI", Name = "Haiti", Iso2 = "HT", Continent = "North America", Population = 11720000, Area = 27750, Gdp = 19710000000, GdpPerCapita = 1682, Density = 422, Literacy = 62, Hdi = 0.535, LifeExpectancy = 64.9 },
        
        // South America
        new() { Code = "BRA", Name = "Brazil", Iso2 = "BR", Continent = "South America", Population = 214300000, Area = 8515767, Gdp = 2126000000000, GdpPerCapita = 9921, Density = 25, Literacy = 93, Hdi = 0.760, LifeExpectancy = 76.4 },
        new() { Code = "COL", Name = "Colombia", Iso2 = "CO", Continent = "South America", Population = 51870000, Area = 1141748, Gdp = 363500000000, GdpPerCapita = 7007, Density = 45, Literacy = 95, Hdi = 0.752, LifeExpectancy = 77.3 },
        new() { Code = "ARG", Name = "Argentina", Iso2 = "AR", Continent = "South America", Population = 45810000, Area = 2780400, Gdp = 641100000000, GdpPerCapita = 13996, Density = 16, Literacy = 99, Hdi = 0.842, LifeExpectancy = 77.1 },
        new() { Code = "PER", Name = "Peru", Iso2 = "PE", Continent = "South America", Population = 34050000, Area = 1285216, Gdp = 267600000000, GdpPerCapita = 7859, Density = 26, Literacy = 95, Hdi = 0.762, LifeExpectancy = 77.4 },
        new() { Code = "VEN", Name = "Venezuela", Iso2 = "VE", Continent = "South America", Population = 28400000, Area = 916445, Gdp = 92100000000, GdpPerCapita = 3243, Density = 31, Literacy = 97, Hdi = 0.691, LifeExpectancy = 72.1 },
        new() { Code = "CHL", Name = "Chile", Iso2 = "CL", Continent = "South America", Population = 19490000, Area = 756102, Gdp = 335500000000, GdpPerCapita = 17218, Density = 26, Literacy = 97, Hdi = 0.855, LifeExpectancy = 80.7 },
        new() { Code = "ECU", Name = "Ecuador", Iso2 = "EC", Continent = "South America", Population = 18190000, Area = 256369, Gdp = 118850000000, GdpPerCapita = 6534, Density = 71, Literacy = 94, Hdi = 0.765, LifeExpectancy = 77.9 },
        new() { Code = "BOL", Name = "Bolivia", Iso2 = "BO", Continent = "South America", Population = 12080000, Area = 1098581, Gdp = 44010000000, GdpPerCapita = 3644, Density = 11, Literacy = 94, Hdi = 0.692, LifeExpectancy = 72.1 },
        new() { Code = "PRY", Name = "Paraguay", Iso2 = "PY", Continent = "South America", Population = 6780000, Area = 406752, Gdp = 42000000000, GdpPerCapita = 6195, Density = 17, Literacy = 95, Hdi = 0.717, LifeExpectancy = 74.5 },
        new() { Code = "URY", Name = "Uruguay", Iso2 = "UY", Continent = "South America", Population = 3420000, Area = 176215, Gdp = 71180000000, GdpPerCapita = 20813, Density = 19, Literacy = 99, Hdi = 0.830, LifeExpectancy = 78.4 },
        
        // Oceania
        new() { Code = "AUS", Name = "Australia", Iso2 = "AU", Continent = "Oceania", Population = 26440000, Area = 7692024, Gdp = 1675000000000, GdpPerCapita = 63360, Density = 3, Literacy = 99, Hdi = 0.951, LifeExpectancy = 84.5 },
        new() { Code = "PNG", Name = "Papua New Guinea", Iso2 = "PG", Continent = "Oceania", Population = 10140000, Area = 462840, Gdp = 30600000000, GdpPerCapita = 3018, Density = 22, Literacy = 65, Hdi = 0.558, LifeExpectancy = 65.4 },
        new() { Code = "NZL", Name = "New Zealand", Iso2 = "NZ", Continent = "Oceania", Population = 5120000, Area = 268021, Gdp = 247700000000, GdpPerCapita = 48379, Density = 19, Literacy = 99, Hdi = 0.937, LifeExpectancy = 82.5 },
        new() { Code = "FJI", Name = "Fiji", Iso2 = "FJ", Continent = "Oceania", Population = 930000, Area = 18274, Gdp = 5310000000, GdpPerCapita = 5710, Density = 51, Literacy = 99, Hdi = 0.730, LifeExpectancy = 67.4 },
    };
}
CDATA_EOF
echo "  ✓ CountryData fixed"

# Step 9: Fix CountryQuizViewModel
echo "[Step 9/8] Fixing CountryQuizViewModel..."
mkdir -p src/MyDesktopApplication.Shared/ViewModels
cat > src/MyDesktopApplication.Shared/ViewModels/CountryQuizViewModel.cs << 'VMEOF'
using System.Collections.ObjectModel;
using CommunityToolkit.Mvvm.ComponentModel;
using CommunityToolkit.Mvvm.Input;
using MyDesktopApplication.Core.Entities;
using MyDesktopApplication.Core.Interfaces;
using MyDesktopApplication.Shared.Data;

namespace MyDesktopApplication.Shared.ViewModels;

/// <summary>
/// ViewModel for the Country Quiz game.
/// </summary>
public partial class CountryQuizViewModel : ObservableObject
{
    private readonly IGameStateRepository? _gameStateRepository;
    private readonly Random _random = new();
    private Country? _country1;
    private Country? _country2;
    private GameState _gameState = new();
    private string _selectedQuestionType = "Population";
    
    [ObservableProperty] private string _questionText = "Loading...";
    [ObservableProperty] private string _country1Name = "";
    [ObservableProperty] private string _country2Name = "";
    [ObservableProperty] private string _resultMessage = "";
    [ObservableProperty] private string _motivationalMessage = "";
    [ObservableProperty] private bool _showResult;
    [ObservableProperty] private bool _isCorrect;
    [ObservableProperty] private int _score;
    [ObservableProperty] private int _streak;
    [ObservableProperty] private int _bestStreak;
    [ObservableProperty] private double _accuracy;
    [ObservableProperty] private string _country1Value = "";
    [ObservableProperty] private string _country2Value = "";

    public ObservableCollection<string> QuestionTypes { get; } = new()
    {
        "Population", "Area", "GDP", "GDP per Capita", 
        "Density", "Literacy", "HDI", "Life Expectancy"
    };

    public string SelectedQuestionType
    {
        get => _selectedQuestionType;
        set
        {
            if (SetProperty(ref _selectedQuestionType, value))
            {
                GenerateNewQuestion();
            }
        }
    }

    public CountryQuizViewModel() : this(null) { }

    public CountryQuizViewModel(IGameStateRepository? gameStateRepository)
    {
        _gameStateRepository = gameStateRepository;
        _ = InitializeAsync();
    }

    private async Task InitializeAsync()
    {
        if (_gameStateRepository != null)
        {
            _gameState = await _gameStateRepository.GetOrCreateAsync("default");
            UpdateScoreDisplay();
        }
        GenerateNewQuestion();
    }

    private void GenerateNewQuestion()
    {
        var countries = CountryData.Countries.ToList();
        var idx1 = _random.Next(countries.Count);
        int idx2;
        do { idx2 = _random.Next(countries.Count); } while (idx2 == idx1);

        _country1 = countries[idx1];
        _country2 = countries[idx2];

        Country1Name = _country1.Name;
        Country2Name = _country2.Name;
        QuestionText = GetQuestionText();
        ShowResult = false;
        ResultMessage = "";
        MotivationalMessage = "";
        Country1Value = "";
        Country2Value = "";
    }

    private string GetQuestionText() => SelectedQuestionType switch
    {
        "Population" => "Which country has a higher population?",
        "Area" => "Which country is larger by area?",
        "GDP" => "Which country has a higher GDP?",
        "GDP per Capita" => "Which country has a higher GDP per capita?",
        "Density" => "Which country has a higher population density?",
        "Literacy" => "Which country has a higher literacy rate?",
        "HDI" => "Which country has a higher Human Development Index?",
        "Life Expectancy" => "Which country has a higher life expectancy?",
        _ => "Which country has a higher population?"
    };

    private double GetValue(Country country) => SelectedQuestionType switch
    {
        "Population" => country.Population,
        "Area" => country.Area,
        "GDP" => country.Gdp,
        "GDP per Capita" => country.GdpPerCapita,
        "Density" => country.Density,
        "Literacy" => country.Literacy,
        "HDI" => country.Hdi,
        "Life Expectancy" => country.LifeExpectancy,
        _ => country.Population
    };

    private string FormatValue(double value) => SelectedQuestionType switch
    {
        "Population" => value >= 1_000_000_000 ? $"{value / 1_000_000_000:F2}B" :
                        value >= 1_000_000 ? $"{value / 1_000_000:F1}M" :
                        value >= 1_000 ? $"{value / 1_000:F1}K" : $"{value:N0}",
        "Area" => $"{value:N0} km²",
        "GDP" => value >= 1_000_000_000_000 ? $"${value / 1_000_000_000_000:F2}T" :
                 value >= 1_000_000_000 ? $"${value / 1_000_000_000:F1}B" : $"${value / 1_000_000:F0}M",
        "GDP per Capita" => $"${value:N0}",
        "Density" => $"{value:N1}/km²",
        "Literacy" => $"{value:F1}%",
        "HDI" => $"{value:F3}",
        "Life Expectancy" => $"{value:F1} years",
        _ => value.ToString("N0")
    };

    [RelayCommand]
    private async Task SelectCountry1Async()
    {
        await ProcessAnswerAsync(1);
    }

    [RelayCommand]
    private async Task SelectCountry2Async()
    {
        await ProcessAnswerAsync(2);
    }

    private async Task ProcessAnswerAsync(int selection)
    {
        if (_country1 == null || _country2 == null || ShowResult) return;

        var val1 = GetValue(_country1);
        var val2 = GetValue(_country2);
        var correct = val1 > val2 ? 1 : 2;

        IsCorrect = selection == correct;
        _gameState.RecordAnswer(IsCorrect);

        Country1Value = FormatValue(val1);
        Country2Value = FormatValue(val2);

        if (IsCorrect)
        {
            ResultMessage = "✓ Correct!";
            MotivationalMessage = GetCorrectMessage(_gameState.CurrentStreak, _gameState.BestStreak);
        }
        else
        {
            ResultMessage = "✗ Incorrect";
            MotivationalMessage = GetIncorrectMessage();
        }

        ShowResult = true;
        UpdateScoreDisplay();

        if (_gameStateRepository != null)
        {
            await _gameStateRepository.SaveAsync(_gameState);
        }
    }

    private string GetCorrectMessage(int streak, int bestStreak)
    {
        if (streak == bestStreak && streak > 1)
            return $"🏆 NEW RECORD! {streak} in a row!";
        if (streak >= 10) return $"🔥🔥🔥 UNSTOPPABLE! {streak} streak!";
        if (streak >= 5) return $"🔥🔥 On fire! {streak} in a row!";
        if (streak >= 3) return $"🔥 Hot streak! {streak} correct!";
        return new[] { "Great job!", "Well done!", "You got it!", "Excellent!", "Nice one!" }[_random.Next(5)];
    }

    private string GetIncorrectMessage()
    {
        return new[] { 
            "Keep trying!", "You'll get the next one!", 
            "Learning every day!", "Don't give up!", "Almost had it!" 
        }[_random.Next(5)];
    }

    private void UpdateScoreDisplay()
    {
        Score = _gameState.Score;
        Streak = _gameState.CurrentStreak;
        BestStreak = _gameState.BestStreak;
        Accuracy = _gameState.AccuracyPercentage;
    }

    [RelayCommand]
    private void NextQuestion()
    {
        GenerateNewQuestion();
    }

    [RelayCommand]
    private async Task ResetAsync()
    {
        _gameState.Reset();
        UpdateScoreDisplay();
        GenerateNewQuestion();

        if (_gameStateRepository != null)
        {
            await _gameStateRepository.SaveAsync(_gameState);
        }
    }
}
VMEOF
echo "  ✓ CountryQuizViewModel fixed"

# Step 10: Restore and build
echo ""
echo "[Step 10/8] Restoring packages..."
dotnet restore MyDesktopApplication.slnx --verbosity quiet
echo "  ✓ Packages restored"

echo ""
echo "[Step 11/8] Building solution..."
if dotnet build MyDesktopApplication.slnx --no-restore; then
    echo ""
    echo "=============================================="
    echo "  ✓ BUILD SUCCEEDED!"
    echo "=============================================="
else
    echo ""
    echo "=============================================="
    echo "  ✗ BUILD FAILED - Check errors above"
    echo "=============================================="
    exit 1
fi


================================================================================
FILE: fix-project-properly.sh
SIZE: 29.04 KB
MODIFIED: 2025-12-21 16:40:10
================================================================================

#!/bin/bash
set -e

# =============================================================================
# fix-project-properly.sh - Comprehensive Project Fix Script
# =============================================================================
# This script:
# 1. Fixes the AppDbContext missing GameStates DbSet
# 2. Removes FluentAssertions and replaces with Shouldly
# 3. Consolidates to a single SLNX solution
# 4. Removes all silo scripts
# 5. Creates a proper migration script
# 6. Kills stuck build processes
# 7. Updates all package versions properly
# =============================================================================

echo "=============================================="
echo "  Comprehensive Project Fix Script"
echo "=============================================="
echo ""

PROJECT_ROOT="$(cd "$(dirname "$0")" && pwd)"
cd "$PROJECT_ROOT"

# -----------------------------------------------------------------------------
# Step 1: Kill stuck build processes
# -----------------------------------------------------------------------------
echo "[Step 1/9] Killing stuck build processes..."
pkill -f aapt2 2>/dev/null || true
pkill -f VBCSCompiler 2>/dev/null || true
pkill -f dotnet 2>/dev/null || true
dotnet build-server shutdown 2>/dev/null || true
sleep 2
echo "  ✓ Processes cleaned"

# -----------------------------------------------------------------------------
# Step 2: Clean build artifacts
# -----------------------------------------------------------------------------
echo "[Step 2/9] Cleaning build artifacts..."
rm -rf src/*/bin src/*/obj tests/*/bin tests/*/obj 2>/dev/null || true
rm -rf ~/.nuget/packages/mydesktopapplication* 2>/dev/null || true
echo "  ✓ Build artifacts cleaned"

# -----------------------------------------------------------------------------
# Step 3: Remove redundant solution files and scripts
# -----------------------------------------------------------------------------
echo "[Step 3/9] Removing redundant files and scripts..."

# Remove extra solution files
rm -f MyDesktopApplication.Desktop.slnx 2>/dev/null && echo "  Removed: MyDesktopApplication.Desktop.slnx"

# Remove all silo/fix scripts (keep only export.sh and this script)
scripts_to_remove=(
    "build-android.sh"
    "build-desktop.sh"
    "cleanup-and-rebuild.sh"
    "cleanup-and-standardize.sh"
    "cleanup-project.sh"
    "continue-setup.sh"
    "convert-to-country-quiz.sh"
    "fix-all.sh"
    "fix-android-build.sh"
    "fix-android-code.sh"
    "fix-android-font.sh"
    "fix-android-namespace.sh"
    "fix-android-theme.sh"
    "fix-android-theme-crash.sh"
    "fix-avalonia-version.sh"
    "fix-build-errors.sh"
    "fix-ci-and-add-android.sh"
    "fix-cpm.sh"
    "fix-tests.sh"
    "init-project.sh"
    "run-tests.sh"
    "setup.sh"
    "setup-all.sh"
    "setup-android-fedora.sh"
    "setup-github-actions.sh"
    "setup-project.sh"
    "update-github-actions.sh"
    "update-packages.sh"
)

for script in "${scripts_to_remove[@]}"; do
    if [ -f "$script" ]; then
        rm -f "$script"
        echo "  Removed: $script"
    fi
done

# Remove duplicate root appsettings.json (keep one in Desktop project)
rm -f appsettings.json 2>/dev/null && echo "  Removed: root appsettings.json (duplicate)"

echo "  ✓ Cleanup complete (export.sh preserved)"

# -----------------------------------------------------------------------------
# Step 4: Create unified solution file
# -----------------------------------------------------------------------------
echo "[Step 4/9] Creating unified solution file..."

cat > MyDesktopApplication.slnx << 'SLNX_EOF'
<Solution>
  <Folder Name="/src/">
    <Project Path="src/MyDesktopApplication.Android/MyDesktopApplication.Android.csproj" />
    <Project Path="src/MyDesktopApplication.Core/MyDesktopApplication.Core.csproj" />
    <Project Path="src/MyDesktopApplication.Desktop/MyDesktopApplication.Desktop.csproj" />
    <Project Path="src/MyDesktopApplication.Infrastructure/MyDesktopApplication.Infrastructure.csproj" />
    <Project Path="src/MyDesktopApplication.Shared/MyDesktopApplication.Shared.csproj" />
  </Folder>
  <Folder Name="/tests/">
    <Project Path="tests/MyDesktopApplication.Core.Tests/MyDesktopApplication.Core.Tests.csproj" />
    <Project Path="tests/MyDesktopApplication.Integration.Tests/MyDesktopApplication.Integration.Tests.csproj" />
    <Project Path="tests/MyDesktopApplication.UI.Tests/MyDesktopApplication.UI.Tests.csproj" />
  </Folder>
</Solution>
SLNX_EOF

echo "  ✓ Created unified MyDesktopApplication.slnx with all 8 projects"

# -----------------------------------------------------------------------------
# Step 5: Update Directory.Packages.props (remove FluentAssertions, add Shouldly)
# -----------------------------------------------------------------------------
echo "[Step 5/9] Updating Directory.Packages.props..."

cat > Directory.Packages.props << 'PACKAGES_EOF'
<Project>
  <PropertyGroup>
    <ManagePackageVersionsCentrally>true</ManagePackageVersionsCentrally>
    <CentralPackageTransitivePinningEnabled>true</CentralPackageTransitivePinningEnabled>
  </PropertyGroup>
  
  <ItemGroup Label="Avalonia">
    <PackageVersion Include="Avalonia" Version="11.3.0" />
    <PackageVersion Include="Avalonia.Desktop" Version="11.3.0" />
    <PackageVersion Include="Avalonia.Themes.Fluent" Version="11.3.0" />
    <PackageVersion Include="Avalonia.Fonts.Inter" Version="11.3.0" />
    <PackageVersion Include="Avalonia.Diagnostics" Version="11.3.0" />
    <PackageVersion Include="Avalonia.Android" Version="11.3.0" />
    <PackageVersion Include="Avalonia.Headless" Version="11.3.0" />
    <PackageVersion Include="Avalonia.Headless.XUnit" Version="11.3.0" />
  </ItemGroup>
  
  <ItemGroup Label="MVVM">
    <PackageVersion Include="CommunityToolkit.Mvvm" Version="8.4.0" />
  </ItemGroup>
  
  <ItemGroup Label="EntityFramework">
    <PackageVersion Include="Microsoft.EntityFrameworkCore" Version="10.0.0" />
    <PackageVersion Include="Microsoft.EntityFrameworkCore.Sqlite" Version="10.0.0" />
    <PackageVersion Include="Microsoft.EntityFrameworkCore.Design" Version="10.0.0" />
    <PackageVersion Include="Npgsql.EntityFrameworkCore.PostgreSQL" Version="10.0.0" />
    <PackageVersion Include="Dapper" Version="2.1.35" />
  </ItemGroup>
  
  <ItemGroup Label="Configuration">
    <PackageVersion Include="Microsoft.Extensions.Configuration" Version="10.0.0" />
    <PackageVersion Include="Microsoft.Extensions.Configuration.Json" Version="10.0.0" />
    <PackageVersion Include="Microsoft.Extensions.Configuration.EnvironmentVariables" Version="10.0.0" />
    <PackageVersion Include="Microsoft.Extensions.Configuration.Binder" Version="10.0.0" />
  </ItemGroup>
  
  <ItemGroup Label="DependencyInjection">
    <PackageVersion Include="Microsoft.Extensions.DependencyInjection" Version="10.0.0" />
    <PackageVersion Include="Microsoft.Extensions.DependencyInjection.Abstractions" Version="10.0.0" />
  </ItemGroup>
  
  <ItemGroup Label="Logging">
    <PackageVersion Include="Microsoft.Extensions.Logging" Version="10.0.0" />
    <PackageVersion Include="Microsoft.Extensions.Logging.Abstractions" Version="10.0.0" />
    <PackageVersion Include="Microsoft.Extensions.Logging.Console" Version="10.0.0" />
    <PackageVersion Include="Serilog" Version="4.2.0" />
    <PackageVersion Include="Serilog.Extensions.Logging" Version="9.0.0" />
    <PackageVersion Include="Serilog.Sinks.Console" Version="6.0.0" />
    <PackageVersion Include="Serilog.Sinks.File" Version="6.0.0" />
  </ItemGroup>
  
  <ItemGroup Label="OpenTelemetry">
    <PackageVersion Include="OpenTelemetry" Version="1.11.2" />
    <PackageVersion Include="OpenTelemetry.Extensions.Hosting" Version="1.11.2" />
    <PackageVersion Include="OpenTelemetry.Exporter.Console" Version="1.11.2" />
    <PackageVersion Include="OpenTelemetry.Exporter.OpenTelemetryProtocol" Version="1.11.2" />
    <PackageVersion Include="OpenTelemetry.Instrumentation.Http" Version="1.11.0" />
  </ItemGroup>
  
  <ItemGroup Label="Validation">
    <PackageVersion Include="FluentValidation" Version="11.11.0" />
    <PackageVersion Include="FluentValidation.DependencyInjectionExtensions" Version="11.11.0" />
  </ItemGroup>
  
  <ItemGroup Label="Testing - All BSD/MIT Licensed (Free of Cost)">
    <!-- xUnit - Apache 2.0 License -->
    <PackageVersion Include="xunit" Version="2.9.3" />
    <PackageVersion Include="xunit.runner.visualstudio" Version="3.1.5" />
    <PackageVersion Include="Microsoft.NET.Test.Sdk" Version="17.14.1" />
    
    <!-- Shouldly - BSD-3-Clause License (replaces FluentAssertions) -->
    <PackageVersion Include="Shouldly" Version="4.3.0" />
    
    <!-- NSubstitute - BSD-3-Clause License -->
    <PackageVersion Include="NSubstitute" Version="5.3.0" />
    
    <!-- Bogus - MIT License -->
    <PackageVersion Include="Bogus" Version="35.6.1" />
    
    <!-- Testcontainers - MIT License -->
    <PackageVersion Include="Testcontainers" Version="4.3.0" />
    <PackageVersion Include="Testcontainers.PostgreSql" Version="4.3.0" />
    
    <!-- Coverage -->
    <PackageVersion Include="coverlet.collector" Version="6.0.4" />
  </ItemGroup>
</Project>
PACKAGES_EOF

echo "  ✓ Updated Directory.Packages.props"
echo "    - Removed: FluentAssertions (commercial license v8+)"
echo "    - Added: Shouldly 4.3.0 (BSD-3-Clause, 100% free)"
echo "    - Pinned all Microsoft.Extensions.* to 10.0.0 (avoids downgrade errors)"

# -----------------------------------------------------------------------------
# Step 6: Fix AppDbContext - Add missing GameStates DbSet
# -----------------------------------------------------------------------------
echo "[Step 6/9] Fixing AppDbContext..."

mkdir -p src/MyDesktopApplication.Infrastructure/Data

cat > src/MyDesktopApplication.Infrastructure/Data/AppDbContext.cs << 'DBCONTEXT_EOF'
using Microsoft.EntityFrameworkCore;
using MyDesktopApplication.Core.Entities;

namespace MyDesktopApplication.Infrastructure.Data;

/// <summary>
/// Application database context for Entity Framework Core
/// </summary>
public class AppDbContext : DbContext
{
    public AppDbContext(DbContextOptions<AppDbContext> options) : base(options)
    {
    }

    /// <summary>
    /// Design-time factory constructor for EF migrations
    /// </summary>
    public AppDbContext() : base(new DbContextOptionsBuilder<AppDbContext>()
        .UseSqlite("Data Source=app.db")
        .Options)
    {
    }

    public DbSet<TodoItem> TodoItems => Set<TodoItem>();
    public DbSet<GameState> GameStates => Set<GameState>();

    protected override void OnModelCreating(ModelBuilder modelBuilder)
    {
        base.OnModelCreating(modelBuilder);

        // TodoItem configuration
        modelBuilder.Entity<TodoItem>(entity =>
        {
            entity.HasKey(e => e.Id);
            entity.Property(e => e.Title).IsRequired().HasMaxLength(200);
            entity.Property(e => e.Description).HasMaxLength(1000);
            entity.Property(e => e.Priority).HasDefaultValue(0);
            entity.HasIndex(e => e.IsCompleted);
            entity.HasIndex(e => e.DueDate);
        });

        // GameState configuration
        modelBuilder.Entity<GameState>(entity =>
        {
            entity.HasKey(e => e.Id);
            entity.Property(e => e.UserId).IsRequired().HasMaxLength(100);
            entity.Property(e => e.CurrentScore).HasDefaultValue(0);
            entity.Property(e => e.HighScore).HasDefaultValue(0);
            entity.Property(e => e.CurrentStreak).HasDefaultValue(0);
            entity.Property(e => e.BestStreak).HasDefaultValue(0);
            entity.Property(e => e.TotalCorrect).HasDefaultValue(0);
            entity.Property(e => e.TotalAnswered).HasDefaultValue(0);
            entity.Property(e => e.SelectedQuestionType).HasDefaultValue(0);
            entity.HasIndex(e => e.UserId).IsUnique();
        });
    }
}
DBCONTEXT_EOF

echo "  ✓ Fixed AppDbContext with GameStates DbSet"

# -----------------------------------------------------------------------------
# Step 7: Ensure GameState entity exists in Core
# -----------------------------------------------------------------------------
echo "[Step 7/9] Ensuring all entities exist..."

mkdir -p src/MyDesktopApplication.Core/Entities

# Ensure EntityBase exists
cat > src/MyDesktopApplication.Core/Entities/EntityBase.cs << 'ENTITYBASE_EOF'
namespace MyDesktopApplication.Core.Entities;

/// <summary>
/// Base class for all entities with common properties
/// </summary>
public abstract class EntityBase
{
    public Guid Id { get; set; } = Guid.NewGuid();
    public DateTime CreatedAt { get; set; } = DateTime.UtcNow;
    public DateTime UpdatedAt { get; set; } = DateTime.UtcNow;
}
ENTITYBASE_EOF

# Ensure TodoItem exists with Priority
cat > src/MyDesktopApplication.Core/Entities/TodoItem.cs << 'TODOITEM_EOF'
namespace MyDesktopApplication.Core.Entities;

/// <summary>
/// Todo item domain entity
/// </summary>
public class TodoItem : EntityBase
{
    public required string Title { get; set; }
    public string? Description { get; set; }
    public int Priority { get; set; }
    public bool IsCompleted { get; set; }
    public DateTime? CompletedAt { get; set; }
    public DateTime? DueDate { get; set; }
    
    public void MarkComplete()
    {
        IsCompleted = true;
        CompletedAt = DateTime.UtcNow;
        UpdatedAt = DateTime.UtcNow;
    }
    
    public void MarkIncomplete()
    {
        IsCompleted = false;
        CompletedAt = null;
        UpdatedAt = DateTime.UtcNow;
    }
}
TODOITEM_EOF

# Ensure GameState exists
cat > src/MyDesktopApplication.Core/Entities/GameState.cs << 'GAMESTATE_EOF'
namespace MyDesktopApplication.Core.Entities;

/// <summary>
/// Game state for tracking quiz progress and scores
/// </summary>
public class GameState : EntityBase
{
    public required string UserId { get; set; }
    public int CurrentScore { get; set; }
    public int HighScore { get; set; }
    public int CurrentStreak { get; set; }
    public int BestStreak { get; set; }
    public int TotalCorrect { get; set; }
    public int TotalAnswered { get; set; }
    public int SelectedQuestionType { get; set; }
    public DateTime? LastPlayedAt { get; set; }

    public void RecordCorrectAnswer()
    {
        CurrentScore++;
        CurrentStreak++;
        TotalCorrect++;
        TotalAnswered++;
        
        if (CurrentScore > HighScore)
            HighScore = CurrentScore;
        
        if (CurrentStreak > BestStreak)
            BestStreak = CurrentStreak;
        
        LastPlayedAt = DateTime.UtcNow;
        UpdatedAt = DateTime.UtcNow;
    }

    public void RecordWrongAnswer()
    {
        CurrentScore = 0;
        CurrentStreak = 0;
        TotalAnswered++;
        LastPlayedAt = DateTime.UtcNow;
        UpdatedAt = DateTime.UtcNow;
    }

    public void Reset()
    {
        CurrentScore = 0;
        CurrentStreak = 0;
        // Keep HighScore and BestStreak
        UpdatedAt = DateTime.UtcNow;
    }

    public double AccuracyPercentage => 
        TotalAnswered > 0 ? (double)TotalCorrect / TotalAnswered * 100 : 0;
}
GAMESTATE_EOF

# Ensure QuestionType exists
cat > src/MyDesktopApplication.Core/Entities/QuestionType.cs << 'QUESTIONTYPE_EOF'
namespace MyDesktopApplication.Core.Entities;

/// <summary>
/// Types of quiz questions available
/// </summary>
public enum QuestionType
{
    Population = 0,
    Area = 1,
    GdpTotal = 2,
    GdpPerCapita = 3,
    PopulationDensity = 4,
    LiteracyRate = 5,
    Hdi = 6,
    LifeExpectancy = 7
}

public static class QuestionTypeExtensions
{
    public static string GetDisplayName(this QuestionType type) => type switch
    {
        QuestionType.Population => "Population",
        QuestionType.Area => "Area (km²)",
        QuestionType.GdpTotal => "GDP (Total)",
        QuestionType.GdpPerCapita => "GDP per Capita",
        QuestionType.PopulationDensity => "Population Density",
        QuestionType.LiteracyRate => "Literacy Rate",
        QuestionType.Hdi => "Human Development Index",
        QuestionType.LifeExpectancy => "Life Expectancy",
        _ => type.ToString()
    };

    public static string GetQuestion(this QuestionType type) => type switch
    {
        QuestionType.Population => "Which country has a higher population?",
        QuestionType.Area => "Which country has a larger area?",
        QuestionType.GdpTotal => "Which country has a higher GDP?",
        QuestionType.GdpPerCapita => "Which country has a higher GDP per capita?",
        QuestionType.PopulationDensity => "Which country has higher population density?",
        QuestionType.LiteracyRate => "Which country has a higher literacy rate?",
        QuestionType.Hdi => "Which country has a higher HDI?",
        QuestionType.LifeExpectancy => "Which country has higher life expectancy?",
        _ => "Which country is greater?"
    };
}
QUESTIONTYPE_EOF

echo "  ✓ All entities created/verified"

# -----------------------------------------------------------------------------
# Step 8: Update test files to use Shouldly instead of FluentAssertions
# -----------------------------------------------------------------------------
echo "[Step 8/9] Updating test files to use Shouldly..."

# Update Core.Tests project file
cat > tests/MyDesktopApplication.Core.Tests/MyDesktopApplication.Core.Tests.csproj << 'CORETESTS_CSPROJ_EOF'
<Project Sdk="Microsoft.NET.Sdk">
  <PropertyGroup>
    <TargetFramework>net10.0</TargetFramework>
    <ImplicitUsings>enable</ImplicitUsings>
    <Nullable>enable</Nullable>
    <IsPackable>false</IsPackable>
    <IsTestProject>true</IsTestProject>
  </PropertyGroup>
  <ItemGroup>
    <PackageReference Include="Microsoft.NET.Test.Sdk" />
    <PackageReference Include="xunit" />
    <PackageReference Include="xunit.runner.visualstudio" />
    <PackageReference Include="Shouldly" />
    <PackageReference Include="NSubstitute" />
    <PackageReference Include="Bogus" />
    <PackageReference Include="coverlet.collector" />
  </ItemGroup>
  <ItemGroup>
    <ProjectReference Include="..\..\src\MyDesktopApplication.Core\MyDesktopApplication.Core.csproj" />
  </ItemGroup>
</Project>
CORETESTS_CSPROJ_EOF

# Update Integration.Tests project file
cat > tests/MyDesktopApplication.Integration.Tests/MyDesktopApplication.Integration.Tests.csproj << 'INTTESTS_CSPROJ_EOF'
<Project Sdk="Microsoft.NET.Sdk">
  <PropertyGroup>
    <TargetFramework>net10.0</TargetFramework>
    <ImplicitUsings>enable</ImplicitUsings>
    <Nullable>enable</Nullable>
    <IsPackable>false</IsPackable>
    <IsTestProject>true</IsTestProject>
  </PropertyGroup>
  <ItemGroup>
    <PackageReference Include="Microsoft.NET.Test.Sdk" />
    <PackageReference Include="xunit" />
    <PackageReference Include="xunit.runner.visualstudio" />
    <PackageReference Include="Shouldly" />
    <PackageReference Include="Bogus" />
    <PackageReference Include="Microsoft.EntityFrameworkCore.Sqlite" />
    <PackageReference Include="Testcontainers" />
    <PackageReference Include="Testcontainers.PostgreSql" />
    <PackageReference Include="coverlet.collector" />
  </ItemGroup>
  <ItemGroup>
    <ProjectReference Include="..\..\src\MyDesktopApplication.Infrastructure\MyDesktopApplication.Infrastructure.csproj" />
  </ItemGroup>
</Project>
INTTESTS_CSPROJ_EOF

# Update UI.Tests project file
cat > tests/MyDesktopApplication.UI.Tests/MyDesktopApplication.UI.Tests.csproj << 'UITESTS_CSPROJ_EOF'
<Project Sdk="Microsoft.NET.Sdk">
  <PropertyGroup>
    <TargetFramework>net10.0</TargetFramework>
    <ImplicitUsings>enable</ImplicitUsings>
    <Nullable>enable</Nullable>
    <IsPackable>false</IsPackable>
    <IsTestProject>true</IsTestProject>
  </PropertyGroup>
  <ItemGroup>
    <PackageReference Include="Microsoft.NET.Test.Sdk" />
    <PackageReference Include="xunit" />
    <PackageReference Include="xunit.runner.visualstudio" />
    <PackageReference Include="Shouldly" />
    <PackageReference Include="NSubstitute" />
    <PackageReference Include="Avalonia.Headless" />
    <PackageReference Include="Avalonia.Headless.XUnit" />
    <PackageReference Include="coverlet.collector" />
  </ItemGroup>
  <ItemGroup>
    <ProjectReference Include="..\..\src\MyDesktopApplication.Desktop\MyDesktopApplication.Desktop.csproj" />
    <ProjectReference Include="..\..\src\MyDesktopApplication.Shared\MyDesktopApplication.Shared.csproj" />
  </ItemGroup>
</Project>
UITESTS_CSPROJ_EOF

# Update TodoItemTests to use Shouldly
cat > tests/MyDesktopApplication.Core.Tests/TodoItemTests.cs << 'TODOITEM_TESTS_EOF'
using MyDesktopApplication.Core.Entities;
using Shouldly;

namespace MyDesktopApplication.Core.Tests;

public class TodoItemTests
{
    [Fact]
    public void TodoItem_ShouldInitialize_WithDefaults()
    {
        var item = new TodoItem { Title = "Test" };
        
        item.Id.ShouldNotBe(Guid.Empty);
        item.Title.ShouldBe("Test");
        item.IsCompleted.ShouldBeFalse();
        item.CompletedAt.ShouldBeNull();
        item.Priority.ShouldBe(0);
    }

    [Fact]
    public void MarkComplete_ShouldSetIsCompletedAndCompletedAt()
    {
        var item = new TodoItem { Title = "Test" };
        
        item.MarkComplete();
        
        item.IsCompleted.ShouldBeTrue();
        item.CompletedAt.ShouldNotBeNull();
        item.CompletedAt!.Value.ShouldBeGreaterThan(DateTime.UtcNow.AddSeconds(-5));
    }

    [Fact]
    public void MarkIncomplete_ShouldClearIsCompletedAndCompletedAt()
    {
        var item = new TodoItem { Title = "Test" };
        item.MarkComplete();
        
        item.MarkIncomplete();
        
        item.IsCompleted.ShouldBeFalse();
        item.CompletedAt.ShouldBeNull();
    }

    [Fact]
    public void Priority_ShouldBeSettable()
    {
        var item = new TodoItem { Title = "Test", Priority = 5 };
        
        item.Priority.ShouldBe(5);
    }
}
TODOITEM_TESTS_EOF

# Update GameStateTests to use Shouldly
cat > tests/MyDesktopApplication.Core.Tests/GameStateTests.cs << 'GAMESTATE_TESTS_EOF'
using MyDesktopApplication.Core.Entities;
using Shouldly;

namespace MyDesktopApplication.Core.Tests;

public class GameStateTests
{
    [Fact]
    public void RecordCorrectAnswer_ShouldIncrementScoresAndStreak()
    {
        var state = new GameState { UserId = "test" };
        
        state.RecordCorrectAnswer();
        
        state.CurrentScore.ShouldBe(1);
        state.HighScore.ShouldBe(1);
        state.CurrentStreak.ShouldBe(1);
        state.BestStreak.ShouldBe(1);
        state.TotalCorrect.ShouldBe(1);
        state.TotalAnswered.ShouldBe(1);
    }

    [Fact]
    public void RecordWrongAnswer_ShouldResetCurrentScoreAndStreak()
    {
        var state = new GameState { UserId = "test" };
        state.RecordCorrectAnswer();
        state.RecordCorrectAnswer();
        
        state.RecordWrongAnswer();
        
        state.CurrentScore.ShouldBe(0);
        state.CurrentStreak.ShouldBe(0);
        state.HighScore.ShouldBe(2); // Should preserve high score
        state.BestStreak.ShouldBe(2); // Should preserve best streak
    }

    [Fact]
    public void Reset_ShouldKeepHighScoreAndBestStreak()
    {
        var state = new GameState { UserId = "test" };
        state.RecordCorrectAnswer();
        state.RecordCorrectAnswer();
        state.RecordCorrectAnswer();
        
        state.Reset();
        
        state.CurrentScore.ShouldBe(0);
        state.CurrentStreak.ShouldBe(0);
        state.HighScore.ShouldBe(3);
        state.BestStreak.ShouldBe(3);
    }

    [Fact]
    public void AccuracyPercentage_ShouldCalculateCorrectly()
    {
        var state = new GameState { UserId = "test" };
        state.RecordCorrectAnswer();
        state.RecordCorrectAnswer();
        state.RecordWrongAnswer();
        state.RecordCorrectAnswer();
        
        state.AccuracyPercentage.ShouldBe(75.0);
    }
}
GAMESTATE_TESTS_EOF

# Update QuestionTypeTests to use Shouldly
cat > tests/MyDesktopApplication.Core.Tests/QuestionTypeTests.cs << 'QUESTIONTYPE_TESTS_EOF'
using MyDesktopApplication.Core.Entities;
using Shouldly;

namespace MyDesktopApplication.Core.Tests;

public class QuestionTypeTests
{
    [Theory]
    [InlineData(QuestionType.Population, "Population")]
    [InlineData(QuestionType.Area, "Area (km²)")]
    [InlineData(QuestionType.GdpTotal, "GDP (Total)")]
    [InlineData(QuestionType.GdpPerCapita, "GDP per Capita")]
    public void GetDisplayName_ShouldReturnCorrectName(QuestionType type, string expected)
    {
        type.GetDisplayName().ShouldBe(expected);
    }

    [Theory]
    [InlineData(QuestionType.Population, "Which country has a higher population?")]
    [InlineData(QuestionType.Area, "Which country has a larger area?")]
    public void GetQuestion_ShouldReturnCorrectQuestion(QuestionType type, string expected)
    {
        type.GetQuestion().ShouldBe(expected);
    }
}
QUESTIONTYPE_TESTS_EOF

echo "  ✓ Updated all test files to use Shouldly"

# -----------------------------------------------------------------------------
# Step 9: Create migration script
# -----------------------------------------------------------------------------
echo "[Step 9/9] Creating migration script..."

cat > migrate.sh << 'MIGRATE_EOF'
#!/bin/bash
set -e

# =============================================================================
# migrate.sh - Entity Framework Core Migration Helper
# =============================================================================
# Usage:
#   ./migrate.sh add <MigrationName>  - Add a new migration
#   ./migrate.sh update               - Apply pending migrations
#   ./migrate.sh remove               - Remove last migration
#   ./migrate.sh list                 - List all migrations
#   ./migrate.sh script               - Generate SQL script
# =============================================================================

PROJECT_ROOT="$(cd "$(dirname "$0")" && pwd)"
cd "$PROJECT_ROOT"

INFRASTRUCTURE_PROJECT="src/MyDesktopApplication.Infrastructure"
STARTUP_PROJECT="src/MyDesktopApplication.Desktop"
MIGRATIONS_DIR="Data/Migrations"

# Ensure dotnet-ef is installed
if ! command -v dotnet-ef &> /dev/null; then
    echo "Installing dotnet-ef tool..."
    dotnet tool install --global dotnet-ef
fi

case "$1" in
    add)
        if [ -z "$2" ]; then
            echo "Usage: ./migrate.sh add <MigrationName>"
            exit 1
        fi
        echo "Adding migration: $2"
        dotnet ef migrations add "$2" \
            --project "$INFRASTRUCTURE_PROJECT" \
            --startup-project "$STARTUP_PROJECT" \
            --output-dir "$MIGRATIONS_DIR"
        echo "✓ Migration '$2' created"
        ;;
    update)
        echo "Applying pending migrations..."
        dotnet ef database update \
            --project "$INFRASTRUCTURE_PROJECT" \
            --startup-project "$STARTUP_PROJECT"
        echo "✓ Database updated"
        ;;
    remove)
        echo "Removing last migration..."
        dotnet ef migrations remove \
            --project "$INFRASTRUCTURE_PROJECT" \
            --startup-project "$STARTUP_PROJECT"
        echo "✓ Last migration removed"
        ;;
    list)
        echo "Listing migrations..."
        dotnet ef migrations list \
            --project "$INFRASTRUCTURE_PROJECT" \
            --startup-project "$STARTUP_PROJECT"
        ;;
    script)
        echo "Generating SQL script..."
        dotnet ef migrations script \
            --project "$INFRASTRUCTURE_PROJECT" \
            --startup-project "$STARTUP_PROJECT" \
            --output "migrations.sql"
        echo "✓ SQL script saved to migrations.sql"
        ;;
    *)
        echo "Usage: ./migrate.sh <command>"
        echo ""
        echo "Commands:"
        echo "  add <name>  - Add a new migration"
        echo "  update      - Apply pending migrations"
        echo "  remove      - Remove last migration"
        echo "  list        - List all migrations"
        echo "  script      - Generate SQL script"
        ;;
esac
MIGRATE_EOF

chmod +x migrate.sh
echo "  ✓ Created migrate.sh"

# =============================================================================
# Final verification build
# =============================================================================
echo ""
echo "=============================================="
echo "  Building and Testing"
echo "=============================================="

echo "Restoring packages..."
dotnet restore MyDesktopApplication.slnx

echo ""
echo "Building solution..."
if dotnet build MyDesktopApplication.slnx --configuration Release --no-restore; then
    echo ""
    echo "✓ Build succeeded!"
    
    echo ""
    echo "Running tests..."
    if dotnet test MyDesktopApplication.slnx --configuration Release --no-build --verbosity minimal; then
        echo ""
        echo "✓ All tests passed!"
    else
        echo ""
        echo "⚠ Some tests failed - check output above"
    fi
else
    echo ""
    echo "✗ Build failed - check errors above"
    exit 1
fi

echo ""
echo "=============================================="
echo "  Fix Complete!"
echo "=============================================="
echo ""
echo "Summary of changes:"
echo "  • Unified solution: MyDesktopApplication.slnx (8 projects)"
echo "  • Fixed AppDbContext with GameStates DbSet"
echo "  • Replaced FluentAssertions with Shouldly (BSD-3-Clause)"
echo "  • Removed all silo scripts (preserved in git history)"
echo "  • Created migrate.sh for EF Core migrations"
echo ""
echo "Next steps:"
echo "  1. Run: ./migrate.sh add InitialCreate"
echo "  2. Run: ./migrate.sh update"
echo "  3. Commit changes: git add -A && git commit -m 'Unify project structure'"
echo ""


================================================================================
FILE: .gitattributes
SIZE: .48 KB
MODIFIED: 2025-12-20 02:16:50
================================================================================

# Auto detect text files and perform LF normalization
* text=auto

# Source code
*.cs text diff=csharp
*.csproj text
*.slnx text
*.sln text
*.props text
*.targets text

# XAML
*.axaml text
*.xaml text

# Config
*.json text
*.yml text
*.yaml text
*.xml text

# Scripts
*.sh text eol=lf
*.ps1 text eol=crlf
*.cmd text eol=crlf
*.bat text eol=crlf

# Documentation
*.md text
*.txt text

# Binary
*.png binary
*.jpg binary
*.jpeg binary
*.gif binary
*.ico binary
*.ttf binary
*.woff binary
*.woff2 binary


================================================================================
FILE: .github/dependabot.yml
SIZE: .81 KB
MODIFIED: 2025-12-21 15:35:39
================================================================================

version: 2
updates:
  - package-ecosystem: "nuget"
    directory: "/"
    schedule:
      interval: "weekly"
    open-pull-requests-limit: 10
    groups:
      avalonia:
        patterns:
          - "Avalonia*"
      microsoft:
        patterns:
          - "Microsoft.*"
      opentelemetry:
        patterns:
          - "OpenTelemetry*"
      testing:
        patterns:
          - "xunit*"
          - "Shouldly*"
          - "NSubstitute*"
          - "Bogus"
          - "coverlet*"
          - "Testcontainers*"
    ignore:
      # Ignore FluentAssertions (commercial license)
      - dependency-name: "FluentAssertions"
      # Ignore Moq (compromised)
      - dependency-name: "Moq"
      
  - package-ecosystem: "github-actions"
    directory: "/"
    schedule:
      interval: "weekly"
    open-pull-requests-limit: 5


================================================================================
FILE: .github/workflows/build.yml
SIZE: 4.89 KB
MODIFIED: 2025-12-21 15:35:39
================================================================================

name: Build

on:
  push:
    branches: [master, main, develop]
    
concurrency:
  group: build-${{ github.ref }}
  cancel-in-progress: true

jobs:
  build-desktop:
    name: Build Desktop (${{ matrix.os }})
    runs-on: ${{ matrix.os }}
    strategy:
      fail-fast: false
      matrix:
        include:
          - os: ubuntu-latest
            rid: linux-x64
            artifact: linux-x64
          - os: ubuntu-24.04-arm
            rid: linux-arm64
            artifact: linux-arm64
          - os: windows-latest
            rid: win-x64
            artifact: win-x64
          - os: windows-11-arm
            rid: win-arm64
            artifact: win-arm64
          - os: macos-latest
            rid: osx-arm64
            artifact: osx-arm64
          - os: macos-13
            rid: osx-x64
            artifact: osx-x64
            
    steps:
      - name: Checkout
        uses: actions/checkout@v6
        
      - name: Setup .NET
        uses: actions/setup-dotnet@v5
        with:
          dotnet-version: '10.0.x'
          
      - name: Cache NuGet packages
        uses: actions/cache@v5
        with:
          path: ~/.nuget/packages
          key: ${{ runner.os }}-nuget-${{ hashFiles('**/Directory.Packages.props') }}
          restore-keys: |
            ${{ runner.os }}-nuget-
            
      - name: Restore
        run: dotnet restore src/MyDesktopApplication.Desktop/MyDesktopApplication.Desktop.csproj
        
      - name: Publish
        run: |
          dotnet publish src/MyDesktopApplication.Desktop/MyDesktopApplication.Desktop.csproj \
            -c Release \
            -r ${{ matrix.rid }} \
            --self-contained true \
            -p:PublishSingleFile=true \
            -p:IncludeNativeLibrariesForSelfExtract=true \
            -o ./publish/${{ matrix.artifact }}
            
      - name: Upload Artifact
        uses: actions/upload-artifact@v6
        with:
          name: desktop-${{ matrix.artifact }}
          path: ./publish/${{ matrix.artifact }}
          retention-days: 5

  build-android:
    name: Build Android
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout
        uses: actions/checkout@v6
        
      - name: Setup .NET
        uses: actions/setup-dotnet@v5
        with:
          dotnet-version: '10.0.x'
          
      - name: Setup Java
        uses: actions/setup-java@v5
        with:
          distribution: 'temurin'
          java-version: '21'
          
      - name: Install Android Workload
        run: dotnet workload install android
        
      - name: Cache NuGet packages
        uses: actions/cache@v5
        with:
          path: ~/.nuget/packages
          key: ${{ runner.os }}-android-nuget-${{ hashFiles('**/Directory.Packages.props') }}
          restore-keys: |
            ${{ runner.os }}-android-nuget-
            
      - name: Restore
        run: dotnet restore src/MyDesktopApplication.Android/MyDesktopApplication.Android.csproj
        
      - name: Build APK
        run: |
          dotnet build src/MyDesktopApplication.Android/MyDesktopApplication.Android.csproj \
            -c Release \
            -p:AndroidAapt2DaemonEnabled=false
            
      - name: Upload APK
        uses: actions/upload-artifact@v6
        with:
          name: android-apk
          path: src/MyDesktopApplication.Android/bin/Release/**/**.apk
          retention-days: 5

  create-prerelease:
    name: Create Pre-release
    needs: [build-desktop, build-android]
    runs-on: ubuntu-latest
    if: github.ref == 'refs/heads/master' || github.ref == 'refs/heads/main'
    
    steps:
      - name: Download All Artifacts
        uses: actions/download-artifact@v7
        with:
          path: ./artifacts
          pattern: '*'
          merge-multiple: false
          
      - name: Create Archives
        run: |
          cd artifacts
          for dir in */; do
            name="${dir%/}"
            if [[ "$name" == *"win"* ]]; then
              zip -r "../${name}.zip" "$dir"
            else
              tar -czvf "../${name}.tar.gz" "$dir"
            fi
          done
          
      - name: Delete Previous Dev Release
        uses: dev-drprasad/delete-tag-and-release@v1.1
        with:
          tag_name: dev
          github_token: ${{ secrets.GITHUB_TOKEN }}
          delete_release: true
        continue-on-error: true
        
      - name: Create Dev Release
        uses: softprops/action-gh-release@v2
        with:
          tag_name: dev
          name: Development Build
          prerelease: true
          body: |
            🚧 **Development Build**
            
            This is an automatically generated pre-release from the latest commit on `${{ github.ref_name }}`.
            
            **Commit:** ${{ github.sha }}
            **Date:** ${{ github.event.head_commit.timestamp }}
            
            ⚠️ This build may be unstable. Use at your own risk.
          files: |
            *.zip
            *.tar.gz


================================================================================
FILE: .github/workflows/ci.yml
SIZE: 1.96 KB
MODIFIED: 2025-12-21 15:35:39
================================================================================

name: CI

on:
  push:
    branches: [master, main, develop]
  pull_request:
    branches: [master, main, develop]

concurrency:
  group: ${{ github.workflow }}-${{ github.ref }}
  cancel-in-progress: true

jobs:
  build-and-test:
    name: Build & Test
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout
        uses: actions/checkout@v6
        
      - name: Setup .NET
        uses: actions/setup-dotnet@v5
        with:
          dotnet-version: '10.0.x'
          
      - name: Cache NuGet packages
        uses: actions/cache@v5
        with:
          path: ~/.nuget/packages
          key: ${{ runner.os }}-nuget-${{ hashFiles('**/Directory.Packages.props') }}
          restore-keys: |
            ${{ runner.os }}-nuget-
            
      - name: Restore (Desktop only)
        run: |
          dotnet restore src/MyDesktopApplication.Core/MyDesktopApplication.Core.csproj
          dotnet restore src/MyDesktopApplication.Infrastructure/MyDesktopApplication.Infrastructure.csproj
          dotnet restore src/MyDesktopApplication.Shared/MyDesktopApplication.Shared.csproj
          dotnet restore src/MyDesktopApplication.Desktop/MyDesktopApplication.Desktop.csproj
          dotnet restore tests/MyDesktopApplication.Core.Tests/MyDesktopApplication.Core.Tests.csproj
          dotnet restore tests/MyDesktopApplication.Integration.Tests/MyDesktopApplication.Integration.Tests.csproj
          dotnet restore tests/MyDesktopApplication.UI.Tests/MyDesktopApplication.UI.Tests.csproj
          
      - name: Build
        run: |
          dotnet build src/MyDesktopApplication.Desktop/MyDesktopApplication.Desktop.csproj --no-restore -c Release
          
      - name: Test
        run: |
          dotnet test tests/MyDesktopApplication.Core.Tests/MyDesktopApplication.Core.Tests.csproj --no-restore -c Release --verbosity normal
          dotnet test tests/MyDesktopApplication.Integration.Tests/MyDesktopApplication.Integration.Tests.csproj --no-restore -c Release --verbosity normal


================================================================================
FILE: .github/workflows/release.yml
SIZE: 4.03 KB
MODIFIED: 2025-12-21 15:35:39
================================================================================

name: Release

on:
  push:
    tags: ['v*']

jobs:
  build-desktop:
    name: Build Desktop (${{ matrix.os }})
    runs-on: ${{ matrix.os }}
    strategy:
      fail-fast: false
      matrix:
        include:
          - os: ubuntu-latest
            rid: linux-x64
            artifact: linux-x64
          - os: ubuntu-24.04-arm
            rid: linux-arm64
            artifact: linux-arm64
          - os: windows-latest
            rid: win-x64
            artifact: win-x64
          - os: windows-11-arm
            rid: win-arm64
            artifact: win-arm64
          - os: macos-latest
            rid: osx-arm64
            artifact: osx-arm64
          - os: macos-13
            rid: osx-x64
            artifact: osx-x64
            
    steps:
      - name: Checkout
        uses: actions/checkout@v6
        
      - name: Setup .NET
        uses: actions/setup-dotnet@v5
        with:
          dotnet-version: '10.0.x'
          
      - name: Cache NuGet packages
        uses: actions/cache@v5
        with:
          path: ~/.nuget/packages
          key: ${{ runner.os }}-nuget-${{ hashFiles('**/Directory.Packages.props') }}
          restore-keys: |
            ${{ runner.os }}-nuget-
            
      - name: Restore
        run: dotnet restore src/MyDesktopApplication.Desktop/MyDesktopApplication.Desktop.csproj
        
      - name: Publish
        run: |
          dotnet publish src/MyDesktopApplication.Desktop/MyDesktopApplication.Desktop.csproj \
            -c Release \
            -r ${{ matrix.rid }} \
            --self-contained true \
            -p:PublishSingleFile=true \
            -p:IncludeNativeLibrariesForSelfExtract=true \
            -o ./publish/${{ matrix.artifact }}
            
      - name: Upload Artifact
        uses: actions/upload-artifact@v6
        with:
          name: desktop-${{ matrix.artifact }}
          path: ./publish/${{ matrix.artifact }}

  build-android:
    name: Build Android
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout
        uses: actions/checkout@v6
        
      - name: Setup .NET
        uses: actions/setup-dotnet@v5
        with:
          dotnet-version: '10.0.x'
          
      - name: Setup Java
        uses: actions/setup-java@v5
        with:
          distribution: 'temurin'
          java-version: '21'
          
      - name: Install Android Workload
        run: dotnet workload install android
        
      - name: Cache NuGet packages
        uses: actions/cache@v5
        with:
          path: ~/.nuget/packages
          key: ${{ runner.os }}-android-nuget-${{ hashFiles('**/Directory.Packages.props') }}
          restore-keys: |
            ${{ runner.os }}-android-nuget-
            
      - name: Restore
        run: dotnet restore src/MyDesktopApplication.Android/MyDesktopApplication.Android.csproj
        
      - name: Build APK
        run: |
          dotnet build src/MyDesktopApplication.Android/MyDesktopApplication.Android.csproj \
            -c Release \
            -p:AndroidAapt2DaemonEnabled=false
            
      - name: Upload APK
        uses: actions/upload-artifact@v6
        with:
          name: android-apk
          path: src/MyDesktopApplication.Android/bin/Release/**/**.apk

  create-release:
    name: Create Release
    needs: [build-desktop, build-android]
    runs-on: ubuntu-latest
    
    steps:
      - name: Download All Artifacts
        uses: actions/download-artifact@v7
        with:
          path: ./artifacts
          pattern: '*'
          merge-multiple: false
          
      - name: Create Archives
        run: |
          cd artifacts
          for dir in */; do
            name="${dir%/}"
            if [[ "$name" == *"win"* ]]; then
              zip -r "../${name}.zip" "$dir"
            else
              tar -czvf "../${name}.tar.gz" "$dir"
            fi
          done
          
      - name: Create GitHub Release
        uses: softprops/action-gh-release@v2
        with:
          name: Release ${{ github.ref_name }}
          generate_release_notes: true
          files: |
            *.zip
            *.tar.gz


================================================================================
FILE: .gitignore
SIZE: .40 KB
MODIFIED: 2025-12-21 10:33:59
================================================================================

# Build outputs
bin/
obj/
out/

# IDE
.vs/
.vscode/
.idea/
*.user
*.suo
*.userosscache
*.sln.docstates

# NuGet
*.nupkg
packages/
project.lock.json
project.fragment.lock.json

# Test results
TestResults/
coverage/
*.coverage
*.coveragexml

# OS files
.DS_Store
Thumbs.db

# Logs
*.log
logs/

# Local settings
appsettings.local.json
appsettings.*.local.json

# LLM export (optional - uncomment to ignore)
# docs/llm/


================================================================================
FILE: migrate.sh
SIZE: 2.70 KB
MODIFIED: 2025-12-21 16:41:27
================================================================================

#!/bin/bash
set -e

# =============================================================================
# migrate.sh - Entity Framework Core Migration Helper
# =============================================================================
# Usage:
#   ./migrate.sh add <MigrationName>  - Add a new migration
#   ./migrate.sh update               - Apply pending migrations
#   ./migrate.sh remove               - Remove last migration
#   ./migrate.sh list                 - List all migrations
#   ./migrate.sh script               - Generate SQL script
# =============================================================================

PROJECT_ROOT="$(cd "$(dirname "$0")" && pwd)"
cd "$PROJECT_ROOT"

INFRASTRUCTURE_PROJECT="src/MyDesktopApplication.Infrastructure"
STARTUP_PROJECT="src/MyDesktopApplication.Desktop"
MIGRATIONS_DIR="Data/Migrations"

# Ensure dotnet-ef is installed
if ! command -v dotnet-ef &> /dev/null; then
    echo "Installing dotnet-ef tool..."
    dotnet tool install --global dotnet-ef
fi

case "$1" in
    add)
        if [ -z "$2" ]; then
            echo "Usage: ./migrate.sh add <MigrationName>"
            exit 1
        fi
        echo "Adding migration: $2"
        dotnet ef migrations add "$2" \
            --project "$INFRASTRUCTURE_PROJECT" \
            --startup-project "$STARTUP_PROJECT" \
            --output-dir "$MIGRATIONS_DIR"
        echo "✓ Migration '$2' created"
        ;;
    update)
        echo "Applying pending migrations..."
        dotnet ef database update \
            --project "$INFRASTRUCTURE_PROJECT" \
            --startup-project "$STARTUP_PROJECT"
        echo "✓ Database updated"
        ;;
    remove)
        echo "Removing last migration..."
        dotnet ef migrations remove \
            --project "$INFRASTRUCTURE_PROJECT" \
            --startup-project "$STARTUP_PROJECT"
        echo "✓ Last migration removed"
        ;;
    list)
        echo "Listing migrations..."
        dotnet ef migrations list \
            --project "$INFRASTRUCTURE_PROJECT" \
            --startup-project "$STARTUP_PROJECT"
        ;;
    script)
        echo "Generating SQL script..."
        dotnet ef migrations script \
            --project "$INFRASTRUCTURE_PROJECT" \
            --startup-project "$STARTUP_PROJECT" \
            --output "migrations.sql"
        echo "✓ SQL script saved to migrations.sql"
        ;;
    *)
        echo "Usage: ./migrate.sh <command>"
        echo ""
        echo "Commands:"
        echo "  add <name>  - Add a new migration"
        echo "  update      - Apply pending migrations"
        echo "  remove      - Remove last migration"
        echo "  list        - List all migrations"
        echo "  script      - Generate SQL script"
        ;;
esac


================================================================================
FILE: MyDesktopApplication.slnx
SIZE: .85 KB
MODIFIED: 2025-12-21 16:41:27
================================================================================

<Solution>
  <Folder Name="/src/">
    <Project Path="src/MyDesktopApplication.Android/MyDesktopApplication.Android.csproj" />
    <Project Path="src/MyDesktopApplication.Core/MyDesktopApplication.Core.csproj" />
    <Project Path="src/MyDesktopApplication.Desktop/MyDesktopApplication.Desktop.csproj" />
    <Project Path="src/MyDesktopApplication.Infrastructure/MyDesktopApplication.Infrastructure.csproj" />
    <Project Path="src/MyDesktopApplication.Shared/MyDesktopApplication.Shared.csproj" />
  </Folder>
  <Folder Name="/tests/">
    <Project Path="tests/MyDesktopApplication.Core.Tests/MyDesktopApplication.Core.Tests.csproj" />
    <Project Path="tests/MyDesktopApplication.Integration.Tests/MyDesktopApplication.Integration.Tests.csproj" />
    <Project Path="tests/MyDesktopApplication.UI.Tests/MyDesktopApplication.UI.Tests.csproj" />
  </Folder>
</Solution>


================================================================================
FILE: README.md
SIZE: 2.68 KB
MODIFIED: 2025-12-20 02:30:21
================================================================================

# MyDesktopApplication

[![CI](https://github.com/kusl/MyDesktopApplication/actions/workflows/ci.yml/badge.svg)](https://github.com/kusl/MyDesktopApplication/actions/workflows/ci.yml)
[![Release](https://github.com/kusl/MyDesktopApplication/actions/workflows/release.yml/badge.svg)](https://github.com/kusl/MyDesktopApplication/actions/workflows/release.yml)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

Cross-platform application built with **Avalonia UI** and **.NET 10**.

## Downloads

| Platform | Architecture | Download |
|----------|--------------|----------|
| Windows | x64 | [Download](https://github.com/kusl/MyDesktopApplication/releases/latest) |
| Windows | ARM64 | [Download](https://github.com/kusl/MyDesktopApplication/releases/latest) |
| Linux | x64 | [Download](https://github.com/kusl/MyDesktopApplication/releases/latest) |
| Linux | ARM64 | [Download](https://github.com/kusl/MyDesktopApplication/releases/latest) |
| macOS | x64 (Intel) | [Download](https://github.com/kusl/MyDesktopApplication/releases/latest) |
| macOS | ARM64 (Apple Silicon) | [Download](https://github.com/kusl/MyDesktopApplication/releases/latest) |
| Android | APK | [Download](https://github.com/kusl/MyDesktopApplication/releases/latest) |

## Quick Start

### Desktop

```bash
dotnet restore
dotnet build
dotnet run --project src/MyDesktopApplication.Desktop
```

### Android (requires Android workload)

```bash
# Install Android workload (one-time)
dotnet workload install android

# Build APK
dotnet build src/MyDesktopApplication.Android -c Release
```

## Run Tests

```bash
dotnet test
```

## Create Release

Push a tag to create a release with binaries for all platforms:

```bash
git tag v1.0.0
git push origin v1.0.0
```

## Project Structure

```
├── src/
│   ├── MyDesktopApplication.Core/          # Domain logic
│   ├── MyDesktopApplication.Infrastructure/ # Data access
│   ├── MyDesktopApplication.Shared/        # Shared ViewModels
│   ├── MyDesktopApplication.Desktop/       # Desktop (Windows/Linux/macOS)
│   └── MyDesktopApplication.Android/       # Android
└── tests/
    ├── MyDesktopApplication.Core.Tests/
    ├── MyDesktopApplication.Integration.Tests/
    └── MyDesktopApplication.UI.Tests/
```

## Supported Platforms

| Platform | Status |
|----------|--------|
| Windows x64 | ✅ |
| Windows ARM64 | ✅ |
| Linux x64 | ✅ |
| Linux ARM64 | ✅ |
| macOS x64 | ✅ |
| macOS ARM64 | ✅ |
| Android | ✅ |
| iOS | ❌ (requires Apple Developer account - $99/year) |

## License

MIT License - Free for any use.

All dependencies are MIT, Apache-2.0, BSD, or Public Domain licensed.


================================================================================
FILE: repair-project.sh
SIZE: 26.43 KB
MODIFIED: 2025-12-21 16:50:25
================================================================================

#!/bin/bash
set -e

# =============================================================================
# repair-project.sh - Fix All 50 Compiler Errors
# =============================================================================
# This script fixes:
# 1. Missing xUnit using directives in test files
# 2. GameState entity missing properties (CorrectAnswers, TotalQuestions, Accuracy)
# 3. GameState.RecordAnswer method
# 4. QuestionType missing GetValue/FormatValue extension methods
# 5. GameStateRepository required member initialization
# 6. CountryQuizViewModel string-to-int conversion error
# 7. Ensures Shouldly (not FluentAssertions) for all tests
# =============================================================================

echo "=============================================="
echo "  Repair Project - Fix All Compiler Errors"
echo "=============================================="
echo ""

PROJECT_ROOT="$(cd "$(dirname "$0")" && pwd)"
cd "$PROJECT_ROOT"

# -----------------------------------------------------------------------------
# Step 1: Kill stuck processes
# -----------------------------------------------------------------------------
echo "[Step 1/8] Killing stuck build processes..."
pkill -f aapt2 2>/dev/null || true
pkill -f VBCSCompiler 2>/dev/null || true
dotnet build-server shutdown 2>/dev/null || true
sleep 1
echo "  ✓ Processes cleaned"

# -----------------------------------------------------------------------------
# Step 2: Clean build artifacts
# -----------------------------------------------------------------------------
echo "[Step 2/8] Cleaning build artifacts..."
rm -rf src/*/bin src/*/obj tests/*/bin tests/*/obj 2>/dev/null || true
echo "  ✓ Build artifacts cleaned"

# -----------------------------------------------------------------------------
# Step 3: Fix GameState entity with ALL required properties
# -----------------------------------------------------------------------------
echo "[Step 3/8] Fixing GameState entity..."

mkdir -p src/MyDesktopApplication.Core/Entities

cat > src/MyDesktopApplication.Core/Entities/GameState.cs << 'EOF'
namespace MyDesktopApplication.Core.Entities;

/// <summary>
/// Game state for tracking quiz progress and scores.
/// Used by CountryQuizViewModel for persistent game data.
/// </summary>
public class GameState : EntityBase
{
    // UserId is NOT required - use default value to avoid CS9035 error
    public string UserId { get; set; } = "default";
    
    // Score tracking
    public int CurrentScore { get; set; }
    public int HighScore { get; set; }
    public int CurrentStreak { get; set; }
    public int BestStreak { get; set; }
    
    // Statistics used by CountryQuizViewModel
    public int CorrectAnswers { get; set; }
    public int TotalQuestions { get; set; }
    public int TotalCorrect { get; set; }
    public int TotalAnswered { get; set; }
    
    // Question type selection
    public int SelectedQuestionType { get; set; }
    public DateTime? LastPlayedAt { get; set; }

    /// <summary>
    /// Accuracy as a percentage (0-100).
    /// Used by CountryQuizViewModel for stats display.
    /// </summary>
    public double Accuracy => TotalQuestions > 0 
        ? (double)CorrectAnswers / TotalQuestions * 100 
        : 0;

    /// <summary>
    /// Alternative accuracy calculation for compatibility.
    /// </summary>
    public double AccuracyPercentage => Accuracy;

    /// <summary>
    /// Record an answer - used by CountryQuizViewModel.
    /// </summary>
    public void RecordAnswer(bool isCorrect)
    {
        TotalQuestions++;
        TotalAnswered++;
        
        if (isCorrect)
        {
            CorrectAnswers++;
            TotalCorrect++;
            CurrentScore++;
            CurrentStreak++;
            
            if (CurrentScore > HighScore)
                HighScore = CurrentScore;
            
            if (CurrentStreak > BestStreak)
                BestStreak = CurrentStreak;
        }
        else
        {
            CurrentScore = 0;
            CurrentStreak = 0;
        }
        
        LastPlayedAt = DateTime.UtcNow;
        UpdatedAt = DateTime.UtcNow;
    }

    /// <summary>
    /// Record a correct answer - convenience method.
    /// </summary>
    public void RecordCorrectAnswer() => RecordAnswer(true);

    /// <summary>
    /// Record a wrong answer - convenience method.
    /// </summary>
    public void RecordWrongAnswer() => RecordAnswer(false);

    /// <summary>
    /// Reset current game but preserve high scores.
    /// </summary>
    public void Reset()
    {
        CurrentScore = 0;
        CurrentStreak = 0;
        // Keep HighScore, BestStreak, CorrectAnswers, TotalQuestions for stats
        UpdatedAt = DateTime.UtcNow;
    }

    /// <summary>
    /// Full reset including statistics.
    /// </summary>
    public void FullReset()
    {
        CurrentScore = 0;
        CurrentStreak = 0;
        HighScore = 0;
        BestStreak = 0;
        CorrectAnswers = 0;
        TotalQuestions = 0;
        TotalCorrect = 0;
        TotalAnswered = 0;
        UpdatedAt = DateTime.UtcNow;
    }
}
EOF

echo "  ✓ GameState entity fixed with all required properties"

# -----------------------------------------------------------------------------
# Step 4: Fix QuestionType with GetValue and FormatValue extension methods
# -----------------------------------------------------------------------------
echo "[Step 4/8] Fixing QuestionType with extension methods..."

cat > src/MyDesktopApplication.Core/Entities/QuestionType.cs << 'EOF'
using MyDesktopApplication.Core.Entities;

namespace MyDesktopApplication.Core.Entities;

/// <summary>
/// Types of quiz questions available
/// </summary>
public enum QuestionType
{
    Population = 0,
    Area = 1,
    GdpTotal = 2,
    GdpPerCapita = 3,
    PopulationDensity = 4,
    LiteracyRate = 5,
    Hdi = 6,
    LifeExpectancy = 7
}

/// <summary>
/// Extension methods for QuestionType used by CountryQuizViewModel
/// </summary>
public static class QuestionTypeExtensions
{
    public static string GetDisplayName(this QuestionType type) => type switch
    {
        QuestionType.Population => "Population",
        QuestionType.Area => "Area (km²)",
        QuestionType.GdpTotal => "GDP (Total)",
        QuestionType.GdpPerCapita => "GDP per Capita",
        QuestionType.PopulationDensity => "Population Density",
        QuestionType.LiteracyRate => "Literacy Rate",
        QuestionType.Hdi => "Human Development Index",
        QuestionType.LifeExpectancy => "Life Expectancy",
        _ => type.ToString()
    };

    public static string GetQuestion(this QuestionType type) => type switch
    {
        QuestionType.Population => "Which country has a higher population?",
        QuestionType.Area => "Which country has a larger area?",
        QuestionType.GdpTotal => "Which country has a higher GDP?",
        QuestionType.GdpPerCapita => "Which country has a higher GDP per capita?",
        QuestionType.PopulationDensity => "Which country has higher population density?",
        QuestionType.LiteracyRate => "Which country has a higher literacy rate?",
        QuestionType.Hdi => "Which country has a higher HDI?",
        QuestionType.LifeExpectancy => "Which country has higher life expectancy?",
        _ => "Which country is greater?"
    };

    /// <summary>
    /// Get the value for a specific question type from a Country object.
    /// Used by CountryQuizViewModel for comparisons.
    /// </summary>
    public static double GetValue(this QuestionType type, Country country) => type switch
    {
        QuestionType.Population => country.Population,
        QuestionType.Area => country.Area,
        QuestionType.GdpTotal => country.GdpTotal,
        QuestionType.GdpPerCapita => country.GdpPerCapita,
        QuestionType.PopulationDensity => country.PopulationDensity,
        QuestionType.LiteracyRate => country.LiteracyRate,
        QuestionType.Hdi => country.Hdi,
        QuestionType.LifeExpectancy => country.LifeExpectancy,
        _ => 0
    };

    /// <summary>
    /// Format a value for display based on question type.
    /// Used by CountryQuizViewModel for showing results.
    /// </summary>
    public static string FormatValue(this QuestionType type, double value) => type switch
    {
        QuestionType.Population => FormatLargeNumber(value),
        QuestionType.Area => $"{value:N0} km²",
        QuestionType.GdpTotal => FormatCurrency(value),
        QuestionType.GdpPerCapita => $"${value:N0}",
        QuestionType.PopulationDensity => $"{value:N1}/km²",
        QuestionType.LiteracyRate => $"{value:N1}%",
        QuestionType.Hdi => $"{value:N3}",
        QuestionType.LifeExpectancy => $"{value:N1} years",
        _ => value.ToString("N0")
    };

    private static string FormatLargeNumber(double value)
    {
        if (value >= 1_000_000_000)
            return $"{value / 1_000_000_000:N2}B";
        if (value >= 1_000_000)
            return $"{value / 1_000_000:N2}M";
        if (value >= 1_000)
            return $"{value / 1_000:N1}K";
        return value.ToString("N0");
    }

    private static string FormatCurrency(double value)
    {
        if (value >= 1_000_000_000_000)
            return $"${value / 1_000_000_000_000:N2}T";
        if (value >= 1_000_000_000)
            return $"${value / 1_000_000_000:N2}B";
        if (value >= 1_000_000)
            return $"${value / 1_000_000:N2}M";
        return $"${value:N0}";
    }
}
EOF

echo "  ✓ QuestionType fixed with GetValue and FormatValue"

# -----------------------------------------------------------------------------
# Step 5: Ensure Country class exists with all required properties
# -----------------------------------------------------------------------------
echo "[Step 5/8] Ensuring Country class exists..."

cat > src/MyDesktopApplication.Core/Entities/Country.cs << 'EOF'
namespace MyDesktopApplication.Core.Entities;

/// <summary>
/// Country data model with statistics for the quiz game.
/// </summary>
public class Country
{
    public required string Name { get; init; }
    public required string Code { get; init; }
    public required string Continent { get; init; }
    public required string Flag { get; init; }
    
    // Statistics
    public double Population { get; init; }
    public double Area { get; init; }
    public double GdpTotal { get; init; }
    public double GdpPerCapita { get; init; }
    public double PopulationDensity { get; init; }
    public double LiteracyRate { get; init; }
    public double Hdi { get; init; }
    public double LifeExpectancy { get; init; }
}
EOF

echo "  ✓ Country class verified"

# -----------------------------------------------------------------------------
# Step 6: Fix GameStateRepository - no required member issue
# -----------------------------------------------------------------------------
echo "[Step 6/8] Fixing GameStateRepository..."

mkdir -p src/MyDesktopApplication.Infrastructure/Repositories

cat > src/MyDesktopApplication.Infrastructure/Repositories/GameStateRepository.cs << 'EOF'
using Microsoft.EntityFrameworkCore;
using MyDesktopApplication.Core.Entities;
using MyDesktopApplication.Core.Interfaces;
using MyDesktopApplication.Infrastructure.Data;

namespace MyDesktopApplication.Infrastructure.Repositories;

/// <summary>
/// Repository for GameState persistence
/// </summary>
public class GameStateRepository : Repository<GameState>, IGameStateRepository
{
    public GameStateRepository(AppDbContext context) : base(context)
    {
    }

    public async Task<GameState?> GetByUserIdAsync(string userId, CancellationToken ct = default)
    {
        return await Context.GameStates
            .AsNoTracking()
            .FirstOrDefaultAsync(g => g.UserId == userId, ct);
    }

    public async Task<GameState> GetOrCreateAsync(string userId, CancellationToken ct = default)
    {
        var existing = await Context.GameStates
            .FirstOrDefaultAsync(g => g.UserId == userId, ct);
            
        if (existing != null)
            return existing;

        // Create new - UserId now has default value so no CS9035 error
        var newState = new GameState
        {
            UserId = userId,
            CurrentScore = 0,
            HighScore = 0,
            CurrentStreak = 0,
            BestStreak = 0,
            CorrectAnswers = 0,
            TotalQuestions = 0,
            TotalCorrect = 0,
            TotalAnswered = 0,
            SelectedQuestionType = 0
        };

        await Context.GameStates.AddAsync(newState, ct);
        await Context.SaveChangesAsync(ct);
        
        return newState;
    }

    public async Task UpdateGameStateAsync(GameState gameState, CancellationToken ct = default)
    {
        Context.GameStates.Update(gameState);
        await Context.SaveChangesAsync(ct);
    }
}
EOF

echo "  ✓ GameStateRepository fixed"

# -----------------------------------------------------------------------------
# Step 7: Fix CountryQuizViewModel - string to int conversion
# -----------------------------------------------------------------------------
echo "[Step 7/8] Fixing CountryQuizViewModel..."

# Check if CountryQuizViewModel exists and fix the string-to-int error
VIEWMODEL_PATH="src/MyDesktopApplication.Shared/ViewModels/CountryQuizViewModel.cs"

if [ -f "$VIEWMODEL_PATH" ]; then
    # Fix line 73: Convert int to string properly using .ToString() not ReadOnlySpan<char>
    # The error is: cannot convert from 'int' to 'System.ReadOnlySpan<char>'
    # This typically happens when using string.Concat or similar with an int
    
    # Create a fixed version of CountryQuizViewModel
    cat > "$VIEWMODEL_PATH" << 'EOF'
using System.Collections.ObjectModel;
using CommunityToolkit.Mvvm.ComponentModel;
using CommunityToolkit.Mvvm.Input;
using MyDesktopApplication.Core.Entities;
using MyDesktopApplication.Shared.Data;

namespace MyDesktopApplication.Shared.ViewModels;

/// <summary>
/// ViewModel for the Country Quiz game.
/// </summary>
public partial class CountryQuizViewModel : ViewModelBase
{
    private readonly Random _random = new();
    private Country? _country1;
    private Country? _country2;
    private Country? _correctCountry;
    
    [ObservableProperty]
    private GameState _gameState = new();

    [ObservableProperty]
    private QuestionType _currentQuestionType = QuestionType.Population;

    [ObservableProperty]
    private string _questionText = "";

    [ObservableProperty]
    private string _country1Name = "";

    [ObservableProperty]
    private string _country2Name = "";

    [ObservableProperty]
    private string _country1Flag = "";

    [ObservableProperty]
    private string _country2Flag = "";

    [ObservableProperty]
    private string _feedbackMessage = "";

    [ObservableProperty]
    private string _country1Value = "";

    [ObservableProperty]
    private string _country2Value = "";

    [ObservableProperty]
    private bool _showValues;

    [ObservableProperty]
    private bool _isCorrect;

    [ObservableProperty]
    private string _motivationalMessage = "";

    [ObservableProperty]
    private string _statsText = "";

    public ObservableCollection<QuestionType> QuestionTypes { get; } = new(
        Enum.GetValues<QuestionType>()
    );

    public CountryQuizViewModel()
    {
        GenerateNewQuestion();
        UpdateStats();
    }

    partial void OnCurrentQuestionTypeChanged(QuestionType value)
    {
        GameState.SelectedQuestionType = (int)value;
        GenerateNewQuestion();
    }

    [RelayCommand]
    private void SelectCountry1()
    {
        CheckAnswer(_country1);
    }

    [RelayCommand]
    private void SelectCountry2()
    {
        CheckAnswer(_country2);
    }

    [RelayCommand]
    private void NextQuestion()
    {
        ShowValues = false;
        GenerateNewQuestion();
    }

    [RelayCommand]
    private void ResetGame()
    {
        GameState.Reset();
        ShowValues = false;
        FeedbackMessage = "";
        MotivationalMessage = MotivationalMessages.GetResetMessage();
        UpdateStats();
        GenerateNewQuestion();
    }

    private void GenerateNewQuestion()
    {
        var countries = CountryData.Countries;
        
        // Pick two different random countries
        var index1 = _random.Next(countries.Count);
        var index2 = _random.Next(countries.Count);
        while (index2 == index1)
        {
            index2 = _random.Next(countries.Count);
        }

        _country1 = countries[index1];
        _country2 = countries[index2];

        Country1Name = _country1.Name;
        Country2Name = _country2.Name;
        Country1Flag = _country1.Flag;
        Country2Flag = _country2.Flag;

        // Determine correct answer
        var value1 = CurrentQuestionType.GetValue(_country1);
        var value2 = CurrentQuestionType.GetValue(_country2);
        _correctCountry = value1 > value2 ? _country1 : _country2;

        QuestionText = CurrentQuestionType.GetQuestion();
        
        // Prepare values for reveal
        Country1Value = CurrentQuestionType.FormatValue(value1);
        Country2Value = CurrentQuestionType.FormatValue(value2);
    }

    private void CheckAnswer(Country? selectedCountry)
    {
        if (selectedCountry == null || _correctCountry == null)
            return;

        IsCorrect = selectedCountry == _correctCountry;
        GameState.RecordAnswer(IsCorrect);
        ShowValues = true;

        if (IsCorrect)
        {
            FeedbackMessage = "✓ Correct!";
            MotivationalMessage = MotivationalMessages.GetCorrectMessage(GameState.CurrentStreak);
        }
        else
        {
            FeedbackMessage = $"✗ Wrong! It was {_correctCountry.Name}";
            MotivationalMessage = MotivationalMessages.GetIncorrectMessage();
        }

        UpdateStats();
    }

    private void UpdateStats()
    {
        var accuracy = GameState.TotalQuestions > 0 
            ? (double)GameState.CorrectAnswers / GameState.TotalQuestions * 100 
            : 0;
            
        StatsText = $"Score: {GameState.CurrentScore} | " +
                   $"High: {GameState.HighScore} | " +
                   $"Streak: {GameState.CurrentStreak} (Best: {GameState.BestStreak}) | " +
                   $"Accuracy: {accuracy:F1}%";
    }
}
EOF
    echo "  ✓ CountryQuizViewModel fixed"
else
    echo "  ⚠ CountryQuizViewModel not found - creating minimal version"
fi

# -----------------------------------------------------------------------------
# Step 8: Fix test files with proper using directives
# -----------------------------------------------------------------------------
echo "[Step 8/8] Fixing test files..."

# Fix Core.Tests
cat > tests/MyDesktopApplication.Core.Tests/TodoItemTests.cs << 'EOF'
using Xunit;
using Shouldly;
using MyDesktopApplication.Core.Entities;

namespace MyDesktopApplication.Core.Tests;

public class TodoItemTests
{
    [Fact]
    public void TodoItem_ShouldInitialize_WithDefaults()
    {
        var item = new TodoItem { Title = "Test" };
        
        item.Id.ShouldNotBe(Guid.Empty);
        item.Title.ShouldBe("Test");
        item.IsCompleted.ShouldBeFalse();
        item.CompletedAt.ShouldBeNull();
        item.Priority.ShouldBe(0);
    }

    [Fact]
    public void MarkComplete_ShouldSetIsCompletedAndCompletedAt()
    {
        var item = new TodoItem { Title = "Test" };
        
        item.MarkComplete();
        
        item.IsCompleted.ShouldBeTrue();
        item.CompletedAt.ShouldNotBeNull();
    }

    [Fact]
    public void MarkIncomplete_ShouldClearIsCompletedAndCompletedAt()
    {
        var item = new TodoItem { Title = "Test" };
        item.MarkComplete();
        
        item.MarkIncomplete();
        
        item.IsCompleted.ShouldBeFalse();
        item.CompletedAt.ShouldBeNull();
    }

    [Fact]
    public void Priority_ShouldBeSettable()
    {
        var item = new TodoItem { Title = "Test", Priority = 5 };
        
        item.Priority.ShouldBe(5);
    }
}
EOF

cat > tests/MyDesktopApplication.Core.Tests/GameStateTests.cs << 'EOF'
using Xunit;
using Shouldly;
using MyDesktopApplication.Core.Entities;

namespace MyDesktopApplication.Core.Tests;

public class GameStateTests
{
    [Fact]
    public void RecordAnswer_Correct_ShouldIncrementScoresAndStreak()
    {
        var state = new GameState { UserId = "test" };
        
        state.RecordAnswer(true);
        
        state.CurrentScore.ShouldBe(1);
        state.HighScore.ShouldBe(1);
        state.CurrentStreak.ShouldBe(1);
        state.BestStreak.ShouldBe(1);
        state.CorrectAnswers.ShouldBe(1);
        state.TotalQuestions.ShouldBe(1);
    }

    [Fact]
    public void RecordAnswer_Wrong_ShouldResetCurrentScoreAndStreak()
    {
        var state = new GameState { UserId = "test" };
        state.RecordAnswer(true);
        state.RecordAnswer(true);
        
        state.RecordAnswer(false);
        
        state.CurrentScore.ShouldBe(0);
        state.CurrentStreak.ShouldBe(0);
        state.HighScore.ShouldBe(2);
        state.BestStreak.ShouldBe(2);
    }

    [Fact]
    public void Reset_ShouldKeepHighScoreAndBestStreak()
    {
        var state = new GameState { UserId = "test" };
        state.RecordAnswer(true);
        state.RecordAnswer(true);
        state.RecordAnswer(true);
        
        state.Reset();
        
        state.CurrentScore.ShouldBe(0);
        state.CurrentStreak.ShouldBe(0);
        state.HighScore.ShouldBe(3);
        state.BestStreak.ShouldBe(3);
    }

    [Fact]
    public void Accuracy_ShouldCalculateCorrectly()
    {
        var state = new GameState { UserId = "test" };
        state.RecordAnswer(true);
        state.RecordAnswer(true);
        state.RecordAnswer(false);
        state.RecordAnswer(true);
        
        state.Accuracy.ShouldBe(75.0);
    }
}
EOF

cat > tests/MyDesktopApplication.Core.Tests/QuestionTypeTests.cs << 'EOF'
using Xunit;
using Shouldly;
using MyDesktopApplication.Core.Entities;

namespace MyDesktopApplication.Core.Tests;

public class QuestionTypeTests
{
    [Theory]
    [InlineData(QuestionType.Population, "Population")]
    [InlineData(QuestionType.Area, "Area (km²)")]
    [InlineData(QuestionType.GdpTotal, "GDP (Total)")]
    [InlineData(QuestionType.GdpPerCapita, "GDP per Capita")]
    public void GetDisplayName_ShouldReturnCorrectName(QuestionType type, string expected)
    {
        type.GetDisplayName().ShouldBe(expected);
    }

    [Theory]
    [InlineData(QuestionType.Population, "Which country has a higher population?")]
    [InlineData(QuestionType.Area, "Which country has a larger area?")]
    public void GetQuestion_ShouldReturnCorrectQuestion(QuestionType type, string expected)
    {
        type.GetQuestion().ShouldBe(expected);
    }

    [Fact]
    public void GetValue_ShouldReturnCorrectPropertyValue()
    {
        var country = new Country
        {
            Name = "Test",
            Code = "TS",
            Continent = "Test",
            Flag = "🏳",
            Population = 1000000,
            Area = 50000,
            GdpTotal = 100000000000,
            GdpPerCapita = 50000,
            PopulationDensity = 20,
            LiteracyRate = 99.5,
            Hdi = 0.95,
            LifeExpectancy = 80.5
        };

        QuestionType.Population.GetValue(country).ShouldBe(1000000);
        QuestionType.Area.GetValue(country).ShouldBe(50000);
        QuestionType.GdpPerCapita.GetValue(country).ShouldBe(50000);
    }

    [Fact]
    public void FormatValue_ShouldFormatCorrectly()
    {
        QuestionType.Population.FormatValue(1500000000).ShouldBe("1.50B");
        QuestionType.Population.FormatValue(50000000).ShouldBe("50.00M");
        QuestionType.LiteracyRate.FormatValue(99.5).ShouldBe("99.5%");
        QuestionType.LifeExpectancy.FormatValue(80.5).ShouldBe("80.5 years");
    }
}
EOF

# Update test project files to ensure xunit reference
cat > tests/MyDesktopApplication.Core.Tests/MyDesktopApplication.Core.Tests.csproj << 'EOF'
<Project Sdk="Microsoft.NET.Sdk">
  <PropertyGroup>
    <TargetFramework>net10.0</TargetFramework>
    <ImplicitUsings>enable</ImplicitUsings>
    <Nullable>enable</Nullable>
    <IsPackable>false</IsPackable>
    <IsTestProject>true</IsTestProject>
  </PropertyGroup>
  <ItemGroup>
    <PackageReference Include="Microsoft.NET.Test.Sdk" />
    <PackageReference Include="xunit" />
    <PackageReference Include="xunit.runner.visualstudio" />
    <PackageReference Include="Shouldly" />
    <PackageReference Include="NSubstitute" />
    <PackageReference Include="Bogus" />
    <PackageReference Include="coverlet.collector" />
  </ItemGroup>
  <ItemGroup>
    <ProjectReference Include="..\..\src\MyDesktopApplication.Core\MyDesktopApplication.Core.csproj" />
  </ItemGroup>
</Project>
EOF

echo "  ✓ All test files fixed with proper using directives"

# =============================================================================
# Verification Build
# =============================================================================
echo ""
echo "=============================================="
echo "  Building and Verifying"
echo "=============================================="

echo "Restoring packages..."
dotnet restore MyDesktopApplication.slnx --verbosity minimal

echo ""
echo "Building solution..."
BUILD_OUTPUT=$(dotnet build MyDesktopApplication.slnx --configuration Release --no-restore 2>&1)
BUILD_EXIT_CODE=$?

echo "$BUILD_OUTPUT"

# Count errors
ERROR_COUNT=$(echo "$BUILD_OUTPUT" | grep -c "error CS" || true)

echo ""
if [ $BUILD_EXIT_CODE -eq 0 ] && [ "$ERROR_COUNT" -eq 0 ]; then
    echo "=============================================="
    echo "  ✓ BUILD SUCCEEDED - Zero Errors!"
    echo "=============================================="
    
    echo ""
    echo "Running tests..."
    if dotnet test MyDesktopApplication.slnx --configuration Release --no-build --verbosity minimal; then
        echo ""
        echo "✓ All tests passed!"
    else
        echo ""
        echo "⚠ Some tests failed - check output above"
    fi
else
    echo "=============================================="
    echo "  ✗ BUILD FAILED - $ERROR_COUNT error(s)"
    echo "=============================================="
    echo ""
    echo "Errors found:"
    echo "$BUILD_OUTPUT" | grep "error CS"
    exit 1
fi

echo ""
echo "=============================================="
echo "  Repair Complete!"
echo "=============================================="
echo ""
echo "Fixed issues:"
echo "  • GameState entity: Added CorrectAnswers, TotalQuestions, Accuracy, RecordAnswer"
echo "  • QuestionType: Added GetValue() and FormatValue() extension methods"
echo "  • GameStateRepository: Fixed required member initialization"
echo "  • CountryQuizViewModel: Fixed string-to-int conversion"
echo "  • Test files: Added 'using Xunit;' and 'using Shouldly;'"
echo "  • No FluentAssertions - only Shouldly (BSD-3-Clause)"
echo ""


================================================================================
FILE: src/MyDesktopApplication.Android/AndroidManifest.xml
SIZE: .49 KB
MODIFIED: 2025-12-21 10:17:25
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android">
    <application 
        android:allowBackup="true" 
        android:icon="@drawable/icon" 
        android:label="@string/app_name"
        android:supportsRtl="true"
        android:theme="@style/MyTheme.NoActionBar">
    </application>
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.INTERNET" />
</manifest>


================================================================================
FILE: src/MyDesktopApplication.Android/App.axaml
SIZE: .25 KB
MODIFIED: 2025-12-21 10:17:25
================================================================================

<Application xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             x:Class="MyDesktopApplication.Android.App">
    <Application.Styles>
        <FluentTheme />
    </Application.Styles>
</Application>


================================================================================
FILE: src/MyDesktopApplication.Android/App.cs
SIZE: 1.45 KB
MODIFIED: 2025-12-21 12:33:54
================================================================================

using Avalonia;
using Avalonia.Controls.ApplicationLifetimes;
using Avalonia.Markup.Xaml;
using Microsoft.Extensions.DependencyInjection;
using MyDesktopApplication.Android.Views;
using MyDesktopApplication.Core.Interfaces;
using MyDesktopApplication.Infrastructure;
using MyDesktopApplication.Shared.ViewModels;

namespace MyDesktopApplication.Android;

public class App : Avalonia.Application
{
    private IServiceProvider? _services;
    
    public override void Initialize()
    {
        AvaloniaXamlLoader.Load(this);
    }
    
    public override async void OnFrameworkInitializationCompleted()
    {
        var services = new ServiceCollection();
        
        var dbPath = Path.Combine(
            Environment.GetFolderPath(Environment.SpecialFolder.LocalApplicationData),
            "countryquiz.db");
        
        services.AddInfrastructure(dbPath);
        services.AddTransient<CountryQuizViewModel>();
        
        _services = services.BuildServiceProvider();
        
        await DependencyInjection.InitializeDatabaseAsync(_services);
        
        if (ApplicationLifetime is ISingleViewApplicationLifetime singleViewLifetime)
        {
            var vm = _services.GetRequiredService<CountryQuizViewModel>();
            var mainView = new MainView { DataContext = vm };
            singleViewLifetime.MainView = mainView;
            
            _ = vm.InitializeAsync();
        }
        
        base.OnFrameworkInitializationCompleted();
    }
}


================================================================================
FILE: src/MyDesktopApplication.Android/MainActivity.cs
SIZE: .58 KB
MODIFIED: 2025-12-21 10:25:16
================================================================================

using Android.App;
using Android.Content.PM;
using Avalonia;
using Avalonia.Android;

namespace MyDesktopApplication.Android;

[Activity(
    Label = "MyDesktopApplication",
    Theme = "@style/MyTheme.NoActionBar",
    Icon = "@drawable/icon",
    MainLauncher = true,
    ConfigurationChanges = ConfigChanges.Orientation | ConfigChanges.ScreenSize | ConfigChanges.UiMode)]
public class MainActivity : AvaloniaMainActivity<App>
{
    protected override AppBuilder CustomizeAppBuilder(AppBuilder builder)
    {
        return base.CustomizeAppBuilder(builder)
            .LogToTrace();
    }
}


================================================================================
FILE: src/MyDesktopApplication.Android/MyDesktopApplication.Android.csproj
SIZE: 1.11 KB
MODIFIED: 2025-12-21 12:48:54
================================================================================

<Project Sdk="Microsoft.NET.Sdk">
  <PropertyGroup>
    <TargetFramework>net10.0-android</TargetFramework>
    <Nullable>enable</Nullable>
    <ApplicationId>com.mycompany.countryquiz</ApplicationId>
    <ApplicationVersion>1</ApplicationVersion>
    <ApplicationDisplayVersion>1.0.0</ApplicationDisplayVersion>
    <AndroidPackageFormat>apk</AndroidPackageFormat>
    <AvaloniaUseCompiledBindingsByDefault>true</AvaloniaUseCompiledBindingsByDefault>
  </PropertyGroup>
  <ItemGroup>
    <ProjectReference Include="..\MyDesktopApplication.Core\MyDesktopApplication.Core.csproj" />
    <ProjectReference Include="..\MyDesktopApplication.Infrastructure\MyDesktopApplication.Infrastructure.csproj" />
    <ProjectReference Include="..\MyDesktopApplication.Shared\MyDesktopApplication.Shared.csproj" />
  </ItemGroup>
  <ItemGroup>
    <PackageReference Include="Avalonia" />
    <PackageReference Include="Avalonia.Android" />
    <PackageReference Include="Avalonia.Themes.Fluent" />
    <PackageReference Include="CommunityToolkit.Mvvm" />
    <PackageReference Include="Microsoft.Extensions.DependencyInjection" />
  </ItemGroup>
</Project>


================================================================================
FILE: src/MyDesktopApplication.Android/Resources/drawable/icon.xml
SIZE: .41 KB
MODIFIED: 2025-12-21 10:17:25
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="108dp"
    android:height="108dp"
    android:viewportWidth="108"
    android:viewportHeight="108">
    <path
        android:fillColor="#3F51B5"
        android:pathData="M0,0h108v108h-108z"/>
    <path
        android:fillColor="#FFFFFF"
        android:pathData="M54,27 L81,81 L27,81 Z"/>
</vector>


================================================================================
FILE: src/MyDesktopApplication.Android/Resources/values/strings.xml
SIZE: .11 KB
MODIFIED: 2025-12-21 10:17:25
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="app_name">MyDesktopApplication</string>
</resources>


================================================================================
FILE: src/MyDesktopApplication.Android/Resources/values/styles.xml
SIZE: .40 KB
MODIFIED: 2025-12-21 11:20:44
================================================================================

<?xml version="1.0" encoding="utf-8"?>
<resources>
    <style name="MyTheme" parent="Theme.AppCompat.Light.DarkActionBar">
    </style>
    <style name="MyTheme.NoActionBar" parent="Theme.AppCompat.Light.NoActionBar">
        <item name="android:windowBackground">@android:color/white</item>
        <item name="windowActionBar">false</item>
        <item name="windowNoTitle">true</item>
    </style>
</resources>


================================================================================
FILE: src/MyDesktopApplication.Android/Views/MainView.axaml
SIZE: 7.07 KB
MODIFIED: 2025-12-21 12:33:54
================================================================================

<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:MyDesktopApplication.Shared.ViewModels"
             xmlns:conv="using:MyDesktopApplication.Desktop.Converters"
             xmlns:core="using:MyDesktopApplication.Core.Entities"
             x:Class="MyDesktopApplication.Android.Views.MainView"
             x:DataType="vm:CountryQuizViewModel"
             Background="#0f172a">
    
    <UserControl.Resources>
        <conv:QuestionTypeLabelConverter x:Key="QuestionTypeLabelConverter"/>
    </UserControl.Resources>
    
    <UserControl.Styles>
        <Style Selector="Button.country-card">
            <Setter Property="Background" Value="#1e293b"/>
            <Setter Property="BorderBrush" Value="#374151"/>
            <Setter Property="BorderThickness" Value="2"/>
            <Setter Property="CornerRadius" Value="12"/>
            <Setter Property="Padding" Value="12"/>
            <Setter Property="HorizontalContentAlignment" Value="Center"/>
        </Style>
        <Style Selector="Button.country-card:pointerover">
            <Setter Property="Background" Value="#334155"/>
        </Style>
        <Style Selector="Button.correct">
            <Setter Property="Background" Value="#14532d"/>
            <Setter Property="BorderBrush" Value="#22c55e"/>
        </Style>
        <Style Selector="Button.wrong">
            <Setter Property="Background" Value="#7f1d1d"/>
            <Setter Property="BorderBrush" Value="#ef4444"/>
        </Style>
    </UserControl.Styles>
    
    <ScrollViewer HorizontalScrollBarVisibility="Disabled" VerticalScrollBarVisibility="Auto">
        <Grid RowDefinitions="Auto,Auto,Auto,Auto,*,Auto,Auto" Margin="12">
            
            <!-- Title -->
            <TextBlock Grid.Row="0" Text="🌍 Country Quiz" 
                       FontSize="24" FontWeight="Bold" Foreground="White"
                       HorizontalAlignment="Center" Margin="0,8,0,12"/>
            
            <!-- Controls -->
            <Grid Grid.Row="1" ColumnDefinitions="*,Auto" Margin="0,0,0,8">
                <ComboBox ItemsSource="{Binding QuestionTypes}"
                          SelectedItem="{Binding SelectedQuestionType}"
                          Background="#1e293b" Foreground="White">
                    <ComboBox.ItemTemplate>
                        <DataTemplate x:DataType="core:QuestionType">
                            <TextBlock Text="{Binding Converter={StaticResource QuestionTypeLabelConverter}}"/>
                        </DataTemplate>
                    </ComboBox.ItemTemplate>
                </ComboBox>
                <Button Grid.Column="1" Content="Reset" 
                        Command="{Binding ResetGameCommand}"
                        Background="#dc2626" Foreground="White"
                        Padding="10,6" Margin="8,0,0,0"/>
            </Grid>
            
            <!-- Score -->
            <WrapPanel Grid.Row="2" HorizontalAlignment="Center" Margin="0,0,0,8">
                <TextBlock Foreground="White" FontSize="14" Margin="0,0,12,0">
                    <Run Text="Score: "/><Run Text="{Binding ScoreText}" FontWeight="Bold"/>
                </TextBlock>
                <TextBlock Text="{Binding StreakText}" Foreground="#f97316" FontWeight="Bold"/>
                <TextBlock Text="{Binding BestStreakText}" Foreground="#fbbf24" Margin="12,0,0,0"/>
            </WrapPanel>
            
            <!-- Accuracy -->
            <TextBlock Grid.Row="3" Text="{Binding AccuracyText}"
                       Foreground="#94a3b8" FontSize="12"
                       HorizontalAlignment="Center" Margin="0,0,0,12"
                       IsVisible="{Binding AccuracyText, Converter={x:Static StringConverters.IsNotNullOrEmpty}}"/>
            
            <!-- Question and Cards -->
            <StackPanel Grid.Row="4" Spacing="12">
                <TextBlock Text="{Binding QuestionText}" Foreground="White"
                           FontSize="16" FontWeight="SemiBold"
                           TextWrapping="Wrap" TextAlignment="Center"/>
                
                <Grid ColumnDefinitions="*,Auto,*">
                    <Button Grid.Column="0" Classes="country-card"
                            Command="{Binding SelectCountryCommand}" CommandParameter="1"
                            IsEnabled="{Binding !HasAnswered}">
                        <StackPanel Spacing="6">
                            <TextBlock Text="{Binding Country1.Flag}" FontSize="40" HorizontalAlignment="Center"/>
                            <TextBlock Text="{Binding Country1.Name}" Foreground="White"
                                       FontSize="12" TextWrapping="Wrap" TextAlignment="Center"/>
                            <TextBlock Text="{Binding Country1Value}" Foreground="#22c55e"
                                       FontSize="11" HorizontalAlignment="Center"
                                       IsVisible="{Binding HasAnswered}"/>
                        </StackPanel>
                    </Button>
                    
                    <Border Grid.Column="1" Background="#3b82f6" CornerRadius="16"
                            Padding="8,4" VerticalAlignment="Center" Margin="6,0">
                        <TextBlock Text="VS" Foreground="White" FontWeight="Bold" FontSize="12"/>
                    </Border>
                    
                    <Button Grid.Column="2" Classes="country-card"
                            Command="{Binding SelectCountryCommand}" CommandParameter="2"
                            IsEnabled="{Binding !HasAnswered}">
                        <StackPanel Spacing="6">
                            <TextBlock Text="{Binding Country2.Flag}" FontSize="40" HorizontalAlignment="Center"/>
                            <TextBlock Text="{Binding Country2.Name}" Foreground="White"
                                       FontSize="12" TextWrapping="Wrap" TextAlignment="Center"/>
                            <TextBlock Text="{Binding Country2Value}" Foreground="#22c55e"
                                       FontSize="11" HorizontalAlignment="Center"
                                       IsVisible="{Binding HasAnswered}"/>
                        </StackPanel>
                    </Button>
                </Grid>
            </StackPanel>
            
            <!-- Result -->
            <Border Grid.Row="5" Background="#1e293b" CornerRadius="8"
                    Padding="12" Margin="0,12,0,0"
                    IsVisible="{Binding HasAnswered}">
                <TextBlock Text="{Binding ResultMessage}" Foreground="White"
                           FontSize="14" TextWrapping="Wrap" TextAlignment="Center"/>
            </Border>
            
            <!-- Next -->
            <Button Grid.Row="6" Content="Next →"
                    Command="{Binding NextRoundCommand}"
                    Background="#3b82f6" Foreground="White"
                    FontSize="14" FontWeight="SemiBold"
                    Padding="20,10" HorizontalAlignment="Center"
                    Margin="0,12,0,8" IsVisible="{Binding HasAnswered}"/>
        </Grid>
    </ScrollViewer>
</UserControl>


================================================================================
FILE: src/MyDesktopApplication.Android/Views/MainView.axaml.cs
SIZE: .18 KB
MODIFIED: 2025-12-21 12:33:54
================================================================================

using Avalonia.Controls;

namespace MyDesktopApplication.Android.Views;

public partial class MainView : UserControl
{
    public MainView()
    {
        InitializeComponent();
    }
}


================================================================================
FILE: src/MyDesktopApplication.Core/Entities/Country.cs
SIZE: .65 KB
MODIFIED: 2025-12-21 17:15:21
================================================================================

namespace MyDesktopApplication.Core.Entities;

/// <summary>
/// Represents a country with statistical data for the quiz game.
/// </summary>
public class Country
{
    public required string Code { get; init; }
    public required string Name { get; init; }
    public string? Iso2 { get; init; }
    public string? Continent { get; init; }
    public long Population { get; init; }
    public double Area { get; init; }
    public double Gdp { get; init; }
    public double GdpPerCapita { get; init; }
    public double Density { get; init; }
    public double Literacy { get; init; }
    public double Hdi { get; init; }
    public double LifeExpectancy { get; init; }
}


================================================================================
FILE: src/MyDesktopApplication.Core/Entities/EntityBase.cs
SIZE: .33 KB
MODIFIED: 2025-12-21 16:41:27
================================================================================

namespace MyDesktopApplication.Core.Entities;

/// <summary>
/// Base class for all entities with common properties
/// </summary>
public abstract class EntityBase
{
    public Guid Id { get; set; } = Guid.NewGuid();
    public DateTime CreatedAt { get; set; } = DateTime.UtcNow;
    public DateTime UpdatedAt { get; set; } = DateTime.UtcNow;
}


================================================================================
FILE: src/MyDesktopApplication.Core/Entities/GameState.cs
SIZE: 1.29 KB
MODIFIED: 2025-12-21 17:15:21
================================================================================

namespace MyDesktopApplication.Core.Entities;

/// <summary>
/// Represents the persistent game state for a user.
/// </summary>
public class GameState : EntityBase
{
    public string UserId { get; set; } = "default";
    public int Score { get; set; }
    public int CurrentStreak { get; set; }
    public int BestStreak { get; set; }
    public int TotalAnswered { get; set; }
    public int TotalCorrect { get; set; }
    public string SelectedQuestionType { get; set; } = "Population";
    
    // Calculated properties
    public int TotalQuestions => TotalAnswered;
    public int CorrectAnswers => TotalCorrect;
    public double Accuracy => TotalAnswered > 0 ? (double)TotalCorrect / TotalAnswered : 0;
    public double AccuracyPercentage => Accuracy * 100;
    
    public void RecordAnswer(bool isCorrect)
    {
        TotalAnswered++;
        if (isCorrect)
        {
            TotalCorrect++;
            Score++;
            CurrentStreak++;
            if (CurrentStreak > BestStreak)
                BestStreak = CurrentStreak;
        }
        else
        {
            CurrentStreak = 0;
        }
    }
    
    public void Reset()
    {
        Score = 0;
        CurrentStreak = 0;
        TotalAnswered = 0;
        TotalCorrect = 0;
        // Preserve BestStreak and SelectedQuestionType
    }
}


================================================================================
FILE: src/MyDesktopApplication.Core/Entities/QuestionType.cs
SIZE: 3.83 KB
MODIFIED: 2025-12-21 17:23:53
================================================================================

using MyDesktopApplication.Core.Entities;

namespace MyDesktopApplication.Core.Entities;

/// <summary>
/// Types of quiz questions available
/// </summary>
public enum QuestionType
{
    Population = 0,
    Area = 1,
    GdpTotal = 2,
    GdpPerCapita = 3,
    PopulationDensity = 4,
    LiteracyRate = 5,
    Hdi = 6,
    LifeExpectancy = 7
}

/// <summary>
/// Extension methods for QuestionType used by CountryQuizViewModel
/// </summary>
public static class QuestionTypeExtensions
{
    public static string GetDisplayName(this QuestionType type) => type switch
    {
        QuestionType.Population => "Population",
        QuestionType.Area => "Area (km²)",
        QuestionType.GdpTotal => "GDP (Total)",
        QuestionType.GdpPerCapita => "GDP per Capita",
        QuestionType.PopulationDensity => "Population Density",
        QuestionType.LiteracyRate => "Literacy Rate",
        QuestionType.Hdi => "Human Development Index",
        QuestionType.LifeExpectancy => "Life Expectancy",
        _ => type.ToString()
    };

    public static string GetQuestion(this QuestionType type) => type switch
    {
        QuestionType.Population => "Which country has a higher population?",
        QuestionType.Area => "Which country has a larger area?",
        QuestionType.GdpTotal => "Which country has a higher GDP?",
        QuestionType.GdpPerCapita => "Which country has a higher GDP per capita?",
        QuestionType.PopulationDensity => "Which country has higher population density?",
        QuestionType.LiteracyRate => "Which country has a higher literacy rate?",
        QuestionType.Hdi => "Which country has a higher HDI?",
        QuestionType.LifeExpectancy => "Which country has higher life expectancy?",
        _ => "Which country is greater?"
    };

    /// <summary>
    /// Get the value for a specific question type from a Country object.
    /// Used by CountryQuizViewModel for comparisons.
    /// </summary>
    public static double GetValue(this QuestionType type, Country country) => type switch
    {
        QuestionType.Population => country.Population,
        QuestionType.Area => country.Area,
        QuestionType.GdpTotal => country.Gdp,
        QuestionType.GdpPerCapita => country.GdpPerCapita,
        QuestionType.PopulationDensity => country.Density,
        QuestionType.LiteracyRate => country.Literacy,
        QuestionType.Hdi => country.Hdi,
        QuestionType.LifeExpectancy => country.LifeExpectancy,
        _ => 0
    };

    /// <summary>
    /// Format a value for display based on question type.
    /// Used by CountryQuizViewModel for showing results.
    /// </summary>
    public static string FormatValue(this QuestionType type, double value) => type switch
    {
        QuestionType.Population => FormatLargeNumber(value),
        QuestionType.Area => $"{value:N0} km²",
        QuestionType.GdpTotal => FormatCurrency(value),
        QuestionType.GdpPerCapita => $"${value:N0}",
        QuestionType.PopulationDensity => $"{value:N1}/km²",
        QuestionType.LiteracyRate => $"{value:N1}%",
        QuestionType.Hdi => $"{value:N3}",
        QuestionType.LifeExpectancy => $"{value:N1} years",
        _ => value.ToString("N0")
    };

    private static string FormatLargeNumber(double value)
    {
        if (value >= 1_000_000_000)
            return $"{value / 1_000_000_000:N2}B";
        if (value >= 1_000_000)
            return $"{value / 1_000_000:N2}M";
        if (value >= 1_000)
            return $"{value / 1_000:N1}K";
        return value.ToString("N0");
    }

    private static string FormatCurrency(double value)
    {
        if (value >= 1_000_000_000_000)
            return $"${value / 1_000_000_000_000:N2}T";
        if (value >= 1_000_000_000)
            return $"${value / 1_000_000_000:N2}B";
        if (value >= 1_000_000)
            return $"${value / 1_000_000:N2}M";
        return $"${value:N0}";
    }
}


================================================================================
FILE: src/MyDesktopApplication.Core/Entities/TodoItem.cs
SIZE: .68 KB
MODIFIED: 2025-12-21 16:41:27
================================================================================

namespace MyDesktopApplication.Core.Entities;

/// <summary>
/// Todo item domain entity
/// </summary>
public class TodoItem : EntityBase
{
    public required string Title { get; set; }
    public string? Description { get; set; }
    public int Priority { get; set; }
    public bool IsCompleted { get; set; }
    public DateTime? CompletedAt { get; set; }
    public DateTime? DueDate { get; set; }
    
    public void MarkComplete()
    {
        IsCompleted = true;
        CompletedAt = DateTime.UtcNow;
        UpdatedAt = DateTime.UtcNow;
    }
    
    public void MarkIncomplete()
    {
        IsCompleted = false;
        CompletedAt = null;
        UpdatedAt = DateTime.UtcNow;
    }
}


================================================================================
FILE: src/MyDesktopApplication.Core/Interfaces/IGameStateRepository.cs
SIZE: .51 KB
MODIFIED: 2025-12-21 17:15:21
================================================================================

using MyDesktopApplication.Core.Entities;

namespace MyDesktopApplication.Core.Interfaces;

/// <summary>
/// Repository interface for game state persistence.
/// </summary>
public interface IGameStateRepository
{
    Task<GameState?> GetByUserIdAsync(string userId, CancellationToken ct = default);
    Task<GameState> GetOrCreateAsync(string userId, CancellationToken ct = default);
    Task SaveAsync(GameState gameState, CancellationToken ct = default);
    Task ResetAsync(string userId, CancellationToken ct = default);
}


================================================================================
FILE: src/MyDesktopApplication.Core/Interfaces/IRepository.cs
SIZE: .74 KB
MODIFIED: 2025-12-20 01:51:45
================================================================================

using System.Linq.Expressions;
using MyDesktopApplication.Core.Entities;

namespace MyDesktopApplication.Core.Interfaces;

/// <summary>
/// Generic repository interface for data access
/// </summary>
public interface IRepository<T> where T : EntityBase
{
    Task<T?> GetByIdAsync(Guid id, CancellationToken ct = default);
    Task<IReadOnlyList<T>> GetAllAsync(CancellationToken ct = default);
    Task<IReadOnlyList<T>> FindAsync(Expression<Func<T, bool>> predicate, CancellationToken ct = default);
    Task<T> AddAsync(T entity, CancellationToken ct = default);
    Task UpdateAsync(T entity, CancellationToken ct = default);
    Task DeleteAsync(T entity, CancellationToken ct = default);
    Task<bool> ExistsAsync(Guid id, CancellationToken ct = default);
}


================================================================================
FILE: src/MyDesktopApplication.Core/Interfaces/ITodoRepository.cs
SIZE: .46 KB
MODIFIED: 2025-12-20 01:51:45
================================================================================

using MyDesktopApplication.Core.Entities;

namespace MyDesktopApplication.Core.Interfaces;

/// <summary>
/// Repository interface specific to TodoItems
/// </summary>
public interface ITodoRepository : IRepository<TodoItem>
{
    Task<IReadOnlyList<TodoItem>> GetCompletedAsync(CancellationToken ct = default);
    Task<IReadOnlyList<TodoItem>> GetPendingAsync(CancellationToken ct = default);
    Task<IReadOnlyList<TodoItem>> GetOverdueAsync(CancellationToken ct = default);
}


================================================================================
FILE: src/MyDesktopApplication.Core/MyDesktopApplication.Core.csproj
SIZE: .20 KB
MODIFIED: 2025-12-21 12:48:54
================================================================================

<Project Sdk="Microsoft.NET.Sdk">
  <PropertyGroup>
    <TargetFramework>net10.0</TargetFramework>
    <ImplicitUsings>enable</ImplicitUsings>
    <Nullable>enable</Nullable>
  </PropertyGroup>
</Project>


================================================================================
FILE: src/MyDesktopApplication.Desktop/App.axaml
SIZE: .30 KB
MODIFIED: 2025-12-20 01:51:45
================================================================================

<Application xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             x:Class="MyDesktopApplication.Desktop.App"
             RequestedThemeVariant="Default">
    <Application.Styles>
        <FluentTheme />
    </Application.Styles>
</Application>


================================================================================
FILE: src/MyDesktopApplication.Desktop/App.axaml.cs
SIZE: 1.15 KB
MODIFIED: 2025-12-21 12:33:54
================================================================================

using Avalonia;
using Avalonia.Controls.ApplicationLifetimes;
using Avalonia.Markup.Xaml;
using Microsoft.Extensions.DependencyInjection;
using MyDesktopApplication.Desktop.ViewModels;
using MyDesktopApplication.Desktop.Views;
using MyDesktopApplication.Infrastructure;

namespace MyDesktopApplication.Desktop;

public partial class App : Avalonia.Application
{
    private IServiceProvider? _services;
    
    public override void Initialize()
    {
        AvaloniaXamlLoader.Load(this);
    }
    
    public override async void OnFrameworkInitializationCompleted()
    {
        var services = new ServiceCollection();
        services.AddInfrastructure();
        services.AddTransient<MainWindowViewModel>();
        
        _services = services.BuildServiceProvider();
        
        await DependencyInjection.InitializeDatabaseAsync(_services);
        
        if (ApplicationLifetime is IClassicDesktopStyleApplicationLifetime desktop)
        {
            var vm = _services.GetRequiredService<MainWindowViewModel>();
            desktop.MainWindow = new MainWindow { DataContext = vm };
        }
        
        base.OnFrameworkInitializationCompleted();
    }
}


================================================================================
FILE: src/MyDesktopApplication.Desktop/app.manifest
SIZE: .92 KB
MODIFIED: 2025-12-20 01:03:15
================================================================================

﻿<?xml version="1.0" encoding="utf-8"?>
<assembly manifestVersion="1.0" xmlns="urn:schemas-microsoft-com:asm.v1">
  <!-- This manifest is used on Windows only.
       Don't remove it as it might cause problems with window transparency and embedded controls.
       For more details visit https://learn.microsoft.com/en-us/windows/win32/sbscs/application-manifests -->
  <assemblyIdentity version="1.0.0.0" name="MyDesktopApplication.Desktop.Desktop"/>

  <compatibility xmlns="urn:schemas-microsoft-com:compatibility.v1">
    <application>
      <!-- A list of the Windows versions that this application has been tested on
           and is designed to work with. Uncomment the appropriate elements
           and Windows will automatically select the most compatible environment. -->

      <!-- Windows 10 -->
      <supportedOS Id="{8e0f7a12-bfb3-4fe8-b9a5-48fd50a15a9a}" />
    </application>
  </compatibility>
</assembly>


================================================================================
FILE: src/MyDesktopApplication.Desktop/appsettings.json
SIZE: .17 KB
MODIFIED: 2025-12-20 01:51:45
================================================================================

{
  "Application": {
    "Name": "MyDesktopApplication",
    "Version": "1.0.0"
  },
  "Database": {
    "Provider": "SQLite"
  },
  "Logging": {
    "Level": "Information"
  }
}


================================================================================
FILE: src/MyDesktopApplication.Desktop/Assets/avalonia-logo.ico
SIZE: 171.75 KB
MODIFIED: 2025-12-20 01:03:15
================================================================================

   	      h          	               00     %  .  @@     (B  D  HH     T    ``              ( .p        6  Vx (                                    n n n n nn)nCnHnHnHnHnIn8nn  n n nnEnnnnnnnnnnmm n n nnwnnnnnnnnnnnn
n n ninnnnnSnTnnfnMnnnnn n'nnnn1n n n n n n n}nnnn nxnnn=n n
n=n;nn n nnnnnnnnnnnnnnnn nnnnnnnnWn%n.nnnnn(n nnnnnnnnUn%n.nnnnn)n nnnn
nnnnnnnnnnnnnnnnn nxnnn=n n
n>n<nn nEnnnfn n n(nnnn0n n n n n5nnnnn n n ninnnnnRnSnnnnnYn o n n nnwnnnnnnnnninn n  n n nnEnnnnnnn=o n n         o n n n nn(nCnBn%nn n n                                                                  (      0           	                                  n n n n n on	nnnnnnnn
nn n n             p n n n n	n=n|nnnnnnnnnnnn-n n         n n n o n?nnnnnnnnnnnnnnnnn         n n nnpnnnnnnnnnnnnnnnnn;n     n n nnxnnnnnnnnnnnnnnnnnnAn p k n nTnnnnnnfn)nnn+nhn;nnnYnnnnAn n n nnnnnnnn n n n n n n n n nHnnnnBn o n nmnnnnnn o n n n n n n n n nInnnnCn n nnnnnn.n n n n&n_n\n"n n n n nInnnnCn n n*nnnnj
 n n nMnnnnnCn e n nInnnnCn n nJnnnnnn nnnnnnnnn n nInnnnCn n n\nnn,nGnNn nFnnnnnnn9n n nInnnnDn n n\nnn*nEnNn nFnnnnnnn9n n nNnnnnBn n nJnnnnnn nnnnnnnnn n nknnnn3n n n*nnnnj n n nNnnnnnDn n nnnnnnn n nnnnnn.n n m n'n`n^n"n o n n9nnnnnn p n nmnnnnnn o n n n n p n nnnnnnSn n o n nnnnnnnn n n n n n nnnnnnnn o p j	 n nTnnnnnnen(nnn*nknnnnnn>n n         n n nnxnnnnnnnnnnnnnnnam n n             n n nnpnnnnnnnnnnnnn\on n                 o n n q n?nnnnnnnnnnn2n n n t                     p n n n n	n<n|nnnnnun5nn n n c+                                 o n n n n on	n	on n n n m                                                                                                      (       @                                                             o n n n n n n n n n n n n n n n n n n n n p                                 o n n n onn;nXnfnhnhnhnhnhnhnhnhnhnhncn7nn n                      o n n n n	nHnnnnnnnnnnnnnnnnnn}nn o                 l n n n n8nnnnnnnnnnnnnnnnnnnnnJn o             o n n nnfnnnnnnnnnnnnnnnnnnnnnnn o             n n nnznnnnnnnnnnnnnnnnnnnnnnnj o         o n l nknnnnnnnnnnnnnnnnnnnnnnnnk o     p n n n?nnnnnnnnJnqn n onnQn+n m n nnnnnnk o     n n nnnnnnnnunn n o o o o n n n l o n nnnnnng o     n n n\nnnnnnjpn n o v o o m n n o n p n nnnnnna o o n n
nnnnnnnn n n n n n n n n n n         n nnnnnnb o o n n3nnnnnn$n n n n nnMnn~nGn	n n p     n nnnnnnb o l n nhnnnnnm n n n nnnnnnnnn n     n nnnnnnb o n m nnnnnnUn m n nnnnnnnnnon 
 n nnnnnnb o n nnnnnnnn+n n n3nnnnnnnnn%n p n nnnnnn] o n n	nnnnFn nBnun n n\nnnnnnnnnIn p n nnnnnno n n n
nnnnDn n@nvn n n\nnnnnnnnnIn p n n!nnnnnj n n nnnnnnnn,n n n3nnnnnnnnn%n o n n1nnnnnn n n m nnnnnnVn m n nnnnnnnnnon n n nYnnnnnpn r o n ninnnnnm o n n nnnnnnnnn n n onnnnnnFn n o n n3nnnnnn#n n n n nnOnnnHn	n n n n n1nnnnnnn n o n n
nnnnnnnn n n n n n n n n n n n n	nnnnnnon         m n n\nnnnnnhp n n n p o o m o n n onynnnnnn<n n         o n nnnnnnnntnn n o p o n n n nnnnnnnnon n         p n n n@nnnnnnnnHns n n onnPnnnnnnnn'n n                 o n k nknnnnnnnnnnnnnnnnnnnnnMn p n                     n n nnznnnnnnnnnnnnnnnnnnn\k
 n n                         o n n nnfnnnnnnnnnnnnnnnnnNj
 n n N                             k n n m n7nnnnnnnnnnnnnnn(n n n q
                                     p n n n n
nHnnnnnnnnnnn:nn o n m                                                 o n n n nnn;nWnfndnSn5nk n n n o                                                                 n n n n n n n n n n n n n n                                                                                                                               (   0   `           $                                                                                      p n n q o n n n n n n n n n n n n n n n n n o n n                                                                             q o o o n n n n m n n n n n n n n n n n n n n n n n n n n n m                                                             t o n n n m nn2nVnvnnnnnnnnnnnnnnnnnnnwn5nn n o                                                     o n n n n	n>nnnnnnnnnnnnnnnnnnnnnnnnnn|n	n o                                             n n n n nnJnnnnnnnnnnnnnnnnnnnnnnnnnnnnnqk o o                                     n o n n n)nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn#n l                                 p n n pnSnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnXn n                             p n n onpnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnmn o                         p n n nnynnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn o                         n n  ninnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn o                     r l n nHnnnnnnnnnnnnnHn nnn	nn$nOnnnzoooooonnnnnnnnnn o                     n n nnnnnnnnnnnnznl n n n n n n n n rn*n*n o o o o n nnnnnnnnnn o                 p o onnnnnnnnnnn7m n o o n	 o         p q n o n n n r	         n n nnnnnnnnpn o                 n n n6nnnnnnnnnnn n n o                                 n n o v q         n n nnnnnnnnrn o             n o onnnnnnnnnnn m o                                                                     n n nnnnnnnnrn o             n n n+nnnnnnnnn1n n p         p o ق o n n o n o p                         n n nnnnnnnnrn o             o n nqnnnnnnnnln n o     @ o n n n pn
o	x n n n o                  n n nnnnnnnnrn o         p n n	nnnnnnnnnn n     A n " n nnWnnnnnLn	n n o                 n n nnnnnnnnrn o         o n n&nnnnnnnnnn i p     p n n n+nnnnnnnnnn n q             n n nnnnnnnnrn o         o n nLnnnnnnnn)n o       n n n#nnnnnnnnnnnn o             n n nnnnnnnnrn o         j n nsnnnnnnnnn n n o n nnnnnnnnnnnnn~i
 o p         n n nnnnnnnnrn o         o m nnnnnnnnnnn n n n n2nnnnnnnnnnnnnn n         n n nnnnnnnnrn o         o pnnnnnnRnnnnn n o n njnnnnnnnnnnnnnMn n         n n nnnnnnnnun n         n nnnnnnon n n7nnn n n nnnnnnnnnnnnnnjn g	         n n nnnnnnnnwn n         n nnnnnnon n n6nnn n n nnnnnnnnnnnnnnkn f	         o n nnnnnnnnun n         o onnnnnnNonnnon o n njnnnnnnnnnnnnnMn n         n n nnnnnnnnln n         o m nnnnnnnnnnn n n n n2nnnnnnnnnnnnnn n       n nnnnnnnnnYn n         { n nrnnnnnnnnn n n o n nnnnnnnnnnnnn  o p     n n nnnnnnnnn?n o         o n nMnnnnnnnn)n o         n n n$nnnnnnnnnnnn o         n n nAnnnnnnnn"n m         l n n&nnnnnnnnmn O  o     p k
 n n-nnnnnnnnnn n p     n o l nnnnnnnnn
n p         p o o	nnnnnnnnnn n     R$ o u n nnZnnnnnNn
n n o         n n n$nnnnnnnnn n                 n n nqnnnnnnnnjn n n       o n n n poo
qn n n o !     n o rnnnnnnnnn?n n                 n n n*nnnnnnnnn0n n o         p o r o o o o o o p         o q n nEnnnnnnnnnn l                 o o onnnnnnnnnnn m o                                             p n q n n)nnnnnnnnncn n ]                     n n n7nnnnnnnnnnn o n o                                 p n n n n)nnnnnnnnnnn n                         p o pnnnnnnnnnnn5m n o n m p         p p n o n pnEnnnnnnnnnnXn f
 p                             n n nnnnnnnnnnnnxnm n n o n n n n n s n&nnnnnnnnnnnnn o                                 r
 k	 n nGnnnnnnnnnnnnnEnonnnn#nMnnnnnnnnnnnnn#n n o                                     o n 4 ninnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn?n h	 o                                         p n n nnynnnnnnnnnnnnnnnnnnnnnnnnnnnnnMm o o                                                 p n n onpnnnnnnnnnnnnnnnnnnnnnnnnnnnIm n n                                                       p n n pnSnnnnnnnnnnnnnnnnnnnnnnnnn3n n n j
                                                             o o o n n(nnnnnnnnnnnnnnnnnnnnnnnn n n q                                                                     o n o n onKnnnnnnnnnnnnnnnnnnn3q n n o p                                                                                 o n n n n	n<nnnnnnnnnnnnnnun,nn n n l                                                                                             q	 o m n n n nn1nVnunnnnnnnMn(n
n n n n m                                                                                                             q n n n n n n n m m m m n n n n p o o g                                                                                                                                 p n o q o n o o j o o                                                                                                                                                `   `   ?   `                    `     `     `     `     `     `     @     @                    `    ?                                 ?      ?                            ?    (   @              @                                                                                                                                                                                                                                                                                                                                                                              p q n n o o o n n n n n n n n n n n n n n n n n n n n n n o o o l s                                                                                                         p n o o o n n n h oon
n
n
n
n
n
n
n
n
n
n
n
n
n
n
n
n
n
n
n
n
n
om n n n e                                                                                             o o n o n n o	n&nMnsnnnnnnnnnnnnnnnnnnnnnnnnnnn}n1on n o                                                                                 n o n o n on1ntnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnwn
n n m	                                                                         u n n n onKnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn o                                                                 m n o n onBnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnMn b p                                                         p n n n nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnno	n n                                                     o n n l nAnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn*n n                                                 c o n nnannnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnCn o                                             q n n ontnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnFn o                                         m o n nnwnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnFn o                                     p o o z ngnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnFn o                                     n o n nJnnnnnnnnnnnnnnnnnnbn?n-n$n%n0nEnknnnnnn7n7n8n8n8n8n8n6nQnnnnnnnnnnFn o                                 o n n n&nnnnnnnnnnnnnnnnMnu n n n n n n n n pnn\nnm n n n n n n n nnnnnnnnnnnFn o                                 o n o	nnnnnnnnnnnnnnnFnn n n i p o     p n o s o n n nn!qp                     n n!nnnnnnnnnnFn o                             o p n nYnnnnnnnnnnnnn}nn n m o n                             J! o n l n n r o                     n n!nnnnnnnnnnHn o                             o n onnnnnnnnnnnnnYpn n n p                                                 o o o o p                     n n!nnnnnnnnnnKn o                         n p m nnnnnnnnnnnnnnMm o o q                                                                                                 n n!nnnnnnnnnnKn o                         o n onnnnnnnnnnnn\n n o n                                                                                                     n n!nnnnnnnnnnKn o                     p q n n^nnnnnnnnnnnon n q
                                                                                                         n n!nnnnnnnnnnKn o                     p n nnnnnnnnnnnnnn n o                     n o p n n n n n n i n p                                         n n!nnnnnnnnnnKn o                     n n n.nnnnnnnnnnnNn m s                 o n n n n onn+n)non n n o n                                 n n!nnnnnnnnnnKn o                     n n njnnnnnnnnnnn	n n                 2 o o n nn_nnnnnnnOo
n  o p                             n n!nnnnnnnnnnKn o                 p n onnnnnnnnnnnTn m q             n	 n n m n8nnnnnnnnnnn%n o m                             n n!nnnnnnnnnnKn o                 o n nnnnnnnnnnnnn o                 o n n nCnnnnnnnnnnnnn+n n r                         n n!nnnnnnnnnnKn o                 o n n2nnnnnnnnnn o p             p n n n'nnnnnnnnnnnnnnnn o                         n n!nnnnnnnnnnKn o                 o n nRnnnnnnnnnnpl o n ^         m n nnnnnnnnnnnnnnnnnpm o o                     n n!nnnnnnnnnnKn o                 o n nmnnnnnnnnnnnyon n p     n n n/nnnnnnnnnnnnnnnnnn n                     n n!nnnnnnnnnnKn o                 o n nnnnnnnn~n*n&nunnrr n o     o n nnnnnnnnnnnnnnnnnnnHn n                     n n!nnnnnnnnnnLn o                 o k nnnnnnnon n g nnnn o     n pnnnnnnnnnnnnnnnnnntn o                     n n!nnnnnnnnnnPn n                 n pnnnnnnnEn n o n n3nn?n o     n nnnnnnnnnnnnnnnnnnnm o                     n n!nnnnnnnnnnPn n                 n pnnnnnnnCn n n n n2nn?n o     n nnnnnnnnnnnnnnnnnnnm o                 p n n!nnnnnnnnnnPn n                 o j
 nnnnnnnqn n n nznnn o     n onnnnnnnnnnnnnnnnnntn n                 p n n(nnnnnnnnnnIn n                 o n nnnnnnnnxn$o nmnnup n o     o n nmnnnnnnnnnnnnnnnnnIn n                 n n n9nnnnnnnnnn=n n                 o n nmnnnnnnnnnnn}on n p     n n n/nnnnnnnnnnnnnnnnnn n                 o n nUnnnnnnnnnn,n o                 l n nQnnnnnnnnnnqm n n m         n n onnnnnnnnnnnnnnnnsl o n             p o m nnnnnnnnnnnn o                 n n n2nnnnnnnnnnS  o o             l n n n(nnnnnnnnnnnnnnnn o                 m n n
nnnnnnnnnnn
n p                 n n nnnnnnnnnnnnn o                 o o n nEnnnnnnnnnnnnn-n n q                 n n n/nnnnnnnnnnl n                     r
 n onnnnnnnnnnnRn m q             u n o l n;nnnnnnnnnnn'n p n                 l
 o n nxnnnnnnnnnn^n m                         q n nknnnnnnnnnnn
n n                 j o o n nncnnnnnnnRnn s o p             j o o onnnnnnnnnnn+n n                         o n n/nnnnnnnnnnnMn n r                 n o n n n onn-n,nnn n n o n	                 o o m nqnnnnnnnnnnn	n p                         p o onnnnnnnnnnnnn n n                     o n n o n n n n n v n m                     o n n n*nnnnnnnnnnnjn o p                         k  n n^nnnnnnnnnnnon n q                                                                                 o n n onnnnnnnnnnnn$n n                                 o n nnnnnnnnnnnnnZn n n n                                                                         d o o on{nnnnnnnnnnnpn o                                 o p m npnnnnnnnnnnnnJn n n s                                                                 q n n qnjnnnnnnnnnnnn0n n                                         o n onnnnnnnnnnnnnVon n o p                                                 p o ` n nnrnnnnnnnnnnnnqo q                                         o p n nYnnnnnnnnnnnnnynn n n o p                                 o o m o n nnnnnnnnnnnnnnn#n o p                                             o n o	nnnnnnnnnnnnnnnCnn n o k p p         o o p
 o n n onUnnnnnnnnnnnnnn_m p o                                                 o n n n'nnnnnnnnnnnnnnnnJnh n n n n n n n n pnnYnnnnnnnnnnnnnnnon o m                                                     n p n nJnnnnnnnnnnnnnnnnnn_n=n+n"n#n-nBngnnnnnnnnnnnnnnnnnnn n p                                                         p o o v ngnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn2n n o                                                                 n o n nnvnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn>n o n                                                                         o n n onsnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn>n o o r                                                                             j o n nnannnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn4n o o q                                                                                     o n n j	 n@nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn n o q
                                                                                             o o o n nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnbn	n o n o                                                                                                     n n l
 n onBnnnnnnnnnnnnnnnnnnnnnnnnnnn$n n n o p                                                                                                                 s
 o o n onKnnnnnnnnnnnnnnnnnnnnnnn.mn n n o                                                                                                                             p o n o n nn0nsnnnnnnnnnnnnnnnnn\n" n n n P                                                                                                                                             o n o n n n o	n%nLnrnnnnnnnnnfn>non n o o m l                                                                                                                                                         } n n n o n n n j	 oon
n	opm n n n n t o o                                                                                                                                                                                     p r o o o o o n n o o o t o n r                                                                                                                                                                                                                                                                                                                                                                     ?                                                                            ?                       <  ?  8  ?                                          8  <  <  <    x    p                 ?          ?      ?                                                  (   H              Q                                                                                                                                                                                                                                                                                                                                                                                                                                      p r o o o n n n n n n n n n n n n n n n n n n n n n n n n n o q p                                                                                                                                     & o p n p o n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n o 3                                                                                                                 p n n o n n m onn.nEnXndnininininininininininininininininininininininininfnMn"nn q
 n n                                                                                                     p o m n n ;  nnEn~nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn#n n n y                                                                                         p p n n n n	n=nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn:n p o                                                                                     l
 n n n n
nLnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn(n n p                                                                         m m o n on=nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnoo o                                                                     p n n n nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn4n o                                                                 n n n n n8nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnqn s                                                             p n n onXnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnt o                                                         n o n onnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnro                                                     p n n onynnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnro                                                 n n n nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnro                                                 n n m nZnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnro                                             l o n n;nnnnnnnnnnnnnnnnnnnnn:noopponn nCnznnnnooooooooo
onnnnnnnnnnnro                                         o n n nnnnnnnnnnnnnnnnnnn4nn n n o o o o o n n n m onDnnqo o o o o o o n nnnnnnnnnnnnro                                         o n onnnnnnnnnnnnnnnnn0on n n o n p                 p t o p o n nnoo                         n nnnnnnnnnnnnro                                     p n n nDnnnnnnnnnnnnnnn^nn n n q p                                         p o n n n o o                         n nnnnnnnnnnnnpo                                     o o onnnnnnnnnnnnnnn7m n n k p                                                         o o o o o                         n nnnnnnnnnnnnqo                                 p s n nYnnnnnnnnnnnnnn(n n n o                                                                                                             n nnnnnnnnnnnnqo                                 n o onnnnnnnnnnnnnn+n o n q                                                                                                                 n nnnnnnnnnnnnqo                             q o n nPnnnnnnnnnnnnn@n o o p                                                                                                                     n nnnnnnnnnnnnqo                             g n nnnnnnnnnnnnnnlj
 o n n                                 p n o o o p p p                                                         n nnnnnnnnnnnnqo                             n n n,nnnnnnnnnnnnnn o s                         x p n o n n n n n n n n m p                                             n nnnnnnnnnnnnqo                         p o n nknnnnnnnnnnnnAn n o                     n p n n n rnn2nDnAn,nn n n n }                                         n nnnnnnnnnnnnqo                         m n nnnnnnnnnnnnnnn o p                     o n n on6nnnnnnnn~n'm n n h                                     n nnnnnnnnnnnnqo                         o n n!nnnnnnnnnnnnIn n p                 \ j n n nnnnnnnnnnnnncnn n o                                 n nnnnnnnnnnnnqo                         o n nHnnnnnnnnnnnnn o                     m o n nnnnnnnnnnnnnnnon n n                             n nnnnnnnnnnnnqo                         i n nsnnnnnnnnnnnm o n                     n o onnnnnnnnnnnnnnnnnmn o                             n nnnnnnnnnnnnqo                         o qnnnnnnnnnnnnDn m o n             p o n nZnnnnnnnnnnnnnnnnn7n n u                         n nnnnnnnnnnnnqo                     p n n
nnnnnnnnnnnnnn f m             o n nnnnnnnnnnnnnnnnnnnoo n                         n nnnnnnnnnnnnqo                     o n onnnnnnnnnnnnnn(n n m         l n nMnnnnnnnnnnnnnnnnnnn*n n                         n nnnnnnnnnnnnqo                     p n nnnnnnnnnnt onPnnn	n k         n m nnnnnnnnnnnnnnnnnnnn^n p                         n nnnnnnnnnnnnoo                     o n n&nnnnnnnon o o m ntnn7n n         n onnnnnnnnnnnnnnnnnnnnm o                         n nnnnnnnnnnnnnn                     n n n+nnnnnnn|n q n o n n3nn_n n         n nnnnnnnnnnnnnnnnnnnnnro                         n nnnnnnnnnnnnnn                     n n n+nnnnnnnzn q o o n n2nn_n n         n nnnnnnnnnnnnnnnnnnnnnro                         n nnnnnnnnnnnnnn                     o n n&nnnnnnnon p o n nonn9n n         n nnnnnnnnnnnnnnnnnnnnnn n                         o onnnnnnnnnnnoo                     p n nnnnnnnnn~nk pnGnnn
n n         n l nnnnnnnnnnnnnnnnnnnn_n n                     o n nnnnnnnnnnnnn n                     p n nnnnnnnnnnnnnnn*n m n         m n nMnnnnnnnnnnnnnnnnnnn+n n                     p n n$nnnnnnnnnnnn p                     I
 o o	nnnnnnnnnnnnnn v p             n n nnnnnnnnnnnnnnnnnnnoo n                     n n nAnnnnnnnnnnnin n                         n onnnnnnnnnnnnDn l
 o n             l p n n]nnnnnnnnnnnnnnnnn9n m y                 o n n npnnnnnnnnnnnKn o                         o n nsnnnnnnnnnnnm o m                     o o o	nnnnnnnnnnnnnnnnqpo o                     n o onnnnnnnnnnnn,n n                         o n nInnnnnnnnnnnnn o                     l o o onnnnnnnnnnnnnno	n o n                     n n n(nnnnnnnnnnnnn t                         o n n!nnnnnnnnnnnnFn n p                 p m n n nnnnnnnnnnnnngon n p                     n o n nonnnnnnnnnnnnn p                         l o onnnnnnnnnnnnon o p                     p n n on:nnnnnnnnn)l n n C                      r o o onnnnnnnnnnnn^n o                             p o n nlnnnnnnnnnnnn@n n o                     o o n n n oon6nFnDn0nl
 n o o {  \                     y o n ngnnnnnnnnnnnn(n n                                 p n n,nnnnnnnnnnnnnn n K                          q q n n o n n n n n n n l
 m                         o n n n!nnnnnnnnnnnnon n                                 q o onnnnnnnnnnnnnil n n n                                 p y o o o o o p                                 p n n onnnnnnnnnnnnnYn l o                                 p n n nQnnnnnnnnnnnnn=n n o p                                                                                         q o o n n`nnnnnnnnnnnnnn q                                         y o onnnnnnnnnnnnnn)n n m r                                                                                 n o o m nEnnnnnnnnnnnnnqm p m                                         p u n nZnnnnnnnnnnnnnn&n n n n                                                                         k o o m o@nnnnnnnnnnnnnoo o                                                o o onnnnnnnnnnnnnnn5n n n x p                                                         p p n n snPnnnnnnnnnnnnnnkm p o                                                 p n n nCnnnnnnnnnnnnnnnZon n n p p                                         p p o o n nnvnnnnnnnnnnnnnnnn o                                                         o n onnnnnnnnnnnnnnnnn.nn o }	 o n p                 p k o o o n pn?nnnnnnnnnnnnnnnnBn l p                                                         o n n nnnnnnnnnnnnnnnnnnn1on n n o o n n o o n n m on@nnnnnnnnnnnnnnnnn{po o m                                                             m n n n:nnnnnnnnnnnnnnnnnnnin7oopoooonn@nwnnnnnnnnnnnnnnnnnnnn n p                                                                     o o m nZnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn#n n k                                                                         n n n nnmnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn4n A  p                                                                                 p n n onynnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn9n p o p                                                                                     o o o onmnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn7n o o r                                                                                             p o o onYnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn)n o o q
                                                                                                     n n n m n8nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn o o q                                                                                                             p o o n nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnSnn n n n                                                                                                                     n n n n pn<nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn n n p p                                                                                                                                 k n o n o
nMnnnnnnnnnnnnnnnnnnnnnnnnnnn+ln p o o                                                                                                                                             2 r n o n n	n;nnnnnnnnnnnnnnnnnnnnnnkn$mn n n n p                                                                                                                                                         p o ] n n l nnDn|nnnnnnnnnnnnnnngn2on n n n l m                                                                                                                                                                         k o o n n n m onn-nDnWncnhngn_nPn;n%non n o s o n q                                                                                                                                                                                          n p o o o n n n n n n n n n n n n n o o o p                                                                                                                                                                                                                             p u o o o n n o o p p p                                                                                                                                                                                                                                                                                                                                                                                                                                       ?                                                                                                                                  <                         ?                                                                                                                                                                                                          ?                ?             <                                                                               ?                                ?         ?      (   `                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                p p o o o n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n o p p p                                                                                                                                                                                             p p p o o q n o o n o n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n o o n p                                                                                                                                                                         q n o j o o o n m noo n.o8n>n@n@n@n@n@n@n@n@n@n@n@n@n@n@n@n@n@n@n@n@n@n@n@n@n@n@n@n@n@n@n@n@n<o*nl n n n n	 p                                                                                                                                                         p p o o n n roo5n^nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn{n)l n n n                                                                                                                                             p   o m n n rnnNnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnjn
n n m q*                                                                                                                                 o o n o n n
o<nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn n o                                                                                                                         n p m n n onLnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnon o p                                                                                                             p o o o n onFnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnLn d  p                                                                                                         q k o n l n+nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnoo o                                                                                                     o n l
 o nnennnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnHn i                                                                                                 o o o o n$nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnQ  o                                                                                             n n n d  n?nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn
n                                                                                         r n n nn[nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnoo                                                                                 n o o o onjnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnoo                                                                                 m n n onxnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnoo                                                                             o o n nnqnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnoo                                                                         l n o pnbnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnoo                                                                     m p o n nKnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnoo                                                                     n k
 m n/nnnnnnnnnnnnnnnnnnnnnnnnnn\n1no	ozm l	 toonn;nknnnnnnoooooooooooopn*nnnnnnnnnnnnnnoo                                                                 p n n nnnnnnnnnnnnnnnnnnnnnnnnnSnon n n o o o o o o o n n n n oo&ninnnoo o o o o o o o o o o n n#nnnnnnnnnnnnnnoo                                                                 o n on}nnnnnnnnnnnnnnnnnnnnnn>on n n o p p p                         p o p  o n m nn]noo p                                 n n n#nnnnnnnnnnnnnnoo                                                             o r n nCnnnnnnnnnnnnnnnnnnnnnLon o m o o
 o                                                 p v! o q n n n	oo p                                 n n n#nnnnnnnnnnnnnnoo                                                         p o o onnnnnnnnnnnnnnnnnnnnnn o n	 o p                                                                     p o n n n o o p                                 n n n#nnnnnnnnnnnnnnoo                                                         o o j nnnnnnnnnnnnnnnnnnnnn[on p o o                                                                                                                                             n n n#nnnnnnnnnnnnnnoo                                                     p o o o#nnnnnnnnnnnnnnnnnnnDl	 n n k p                                                                                                                                                 n n n#nnnnnnnnnnnnnnoo                                                     p p unnnnnnnnnnnnnnnnnnn8m o o n	                                                                                                                                                         n n n#nnnnnnnnnnnnnnoo                                                 p n o o&nnnnnnnnnnnnnnnnnn?m o o p                                                                                                                                                             n n n#nnnnnnnnnnnnnnoo                                                 n o g nynnnnnnnnnnnnnnnnnSo n o m                                                                                                                                                                 n n n#nnnnnnnnnnnnnnoo                                             q n n nnnnnnnnnnnnnnnnnnypn n n                                                                                                                                                                     n n n#nnnnnnnnnnnnnnoo                                             n x n n[nnnnnnnnnnnnnnnnnn n o                                                                                                                                                                         n n n#nnnnnnnnnnnnnnoo                                             o n onnnnnnnnnnnnnnnnn8n o n p                                             p o o m p o o o o o q n n |                                                                     n n n#nnnnnnnnnnnnnnoo                                             l n n*nnnnnnnnnnnnnnnnpo n p                                         p o n o o n n   ppj n n n w
 o o o                                                             n n n#nnnnnnnnnnnnnnoo                                             p n nennnnnnnnnnnnnnnn"n n n                                         q m n n m on<nknnnnn^n0n
n n o m
 p                                                         n n n#nnnnnnnnnnnnnnoo                                         o n onnnnnnnnnnnnnnnnyn	 n o                                     p o o n o nnmnnnnnnnnnnnUon n n o                                                     n n n#nnnnnnnnnnnnnnoo                                         o n nnnnnnnnnnnnnnnnn+n o n                                     o o o onMnnnnnnnnnnnnnnn/o n o p                                                 n n n#nnnnnnnnnnnnnnoo                                         n n nCnnnnnnnnnnnnnnnnn n                                     m n n onpnnnnnnnnnnnnnnnnnKqn n m                                             n n n#nnnnnnnnnnnnnnoo                                         o n nonnnnnnnnnnnnnnnSn  p                                 p o n mnvnnnnnnnnnnnnnnnnnnnLn n n                                             n n n#nnnnnnnnnnnnnnoo                                     k o onnnnnnnnnnnnnnnnn o                                 p m o k nYnnnnnnnnnnnnnnnnnnnnn/n o p                                         n n n#nnnnnnnnnnnnnnoo                                     n o onnnnnnnnnnnnnnnoo q m                             o n n o(nnnnnnnnnnnnnnnnnnnnnnon p p                                     n n n#nnnnnnnnnnnnnnoo                                     n n nnnnnnnnnnnnnnnno	n p o j                         o	 n nnnnnnnnnnnnnnnnnnnnnnnnnSn w n                                     n n n#nnnnnnnnnnnnnnoo                                     n n n1nnnnnnnnnnnnnnnnn1j o m m                 p o n n*nnnnnnnnnnnnnnnnnnnnnnnnnn o                                     n n n#nnnnnnnnnnnnnnoo                                     o n nCnnnnnnnnnnnnn~nnnnn:o i n                 p p m nknnnnnnnnnnnnnnnnnnnnnnnnn7n n                                     n n n#nnnnnnnnnnnnnnoo                                     k
 n nSnnnnnnnnnnn/on rn$nnnnn n                 p n onnnnnnnnnnnnnnnnnnnnnnnnnnnn p p                                 n n n#nnnnnnnnnnnnnnoo                                     p n n`nnnnnnnnnn)n o o o n onnn^n o                 n n nnnnnnnnnnnnnnnnnnnnnnnnnnnon p                                 n n n#nnnnnnnnnnnnnnnn                                     p m njnnnnnnnnnk
 p p m p P n nbnnnn                 o o o*nnnnnnnnnnnnnnnnnnnnnnnnnno
o p                                 n n n#nnnnnnnnnnnnnnnn                                     n n nqnnnnnnnnnRn \
 i     o r n n5nnoo                 n n n1nnnnnnnnnnnnnnnnnnnnnnnnnnoo p                                 n n n#nnnnnnnnnnnnnnnn                                     n n nqnnnnnnnnnPn q l     o u n n5nnon                 n n n2nnnnnnnnnnnnnnnnnnnnnnnnnnoo p                                 n n n#nnnnnnnnnnnnnnnn                                     p m njnnnnnnnnn|l p p p o l n n]nnon                 n n n*nnnnnnnnnnnnnnnnnnnnnnnnnnn
n p                                 o o o'nnnnnnnnnnnnnnnn                                     p n nannnnnnnnnn%n o o o o onnncn o                 n n nnnnnnnnnnnnnnnnnnnnnnnnnnnnn p                                 o n n0nnnnnnnnnnnnnnon                                     l
 n nSnnnnnnnnnnn)qn g	 onnnnn n                 p n onnnnnnnnnnnnnnnnnnnnnnnnnnpn p p                                 n n nBnnnnnnnnnnnnnnnn                                     n n nDnnnnnnnnnnnnnonnnnn>n   m                 p q n nknnnnnnnnnnnnnnnnnnnnnnnnn8n n                                     n n n[nnnnnnnnnnnnnnon                                     o n n1nnnnnnnnnnnnnnnnn5^  o p o                 p n n n*nnnnnnnnnnnnnnnnnnnnnnnnnn n                                     n n nnnnnnnnnnnnnnnro                                     p n nnnnnnnnnnnnnnnnnn o o r                         k o onnnnnnnnnnnnnnnnnnnnnnnnZm r n                                 p o onnnnnnnnnnnnnnnxn n                                     p n nnnnnnnnnnnnnnnnoo p n                             n n o o*nnnnnnnnnnnnnnnnnnnnnnoo p p                                 p o onnnnnnnnnnnnnnnWn h                                     p n onnnnnnnnnnnnnnnnn p                                 p j
 p i n[nnnnnnnnnnnnnnnnnnnnn1n n p                                 p k n nInnnnnnnnnnnnnnn6n n                                         p m npnnnnnnnnnnnnnnnRn 0 p                                 p o o onznnnnnnnnnnnnnnnnnnnOl o o                                     o o u nnnnnnnnnnnnnnnnn p                                         n n nDnnnnnnnnnnnnnnnnn n                                     m n o o	nwnnnnnnnnnnnnnnnnnOr o o n                                 p o n nnnnnnnnnnnnnnnnnn p                                         o n nnnnnnnnnnnnnnnnn(n n n                                     o o o onQnnnnnnnnnnnnnnn3l o o p                                     s n n nVnnnnnnnnnnnnnnnun o p                                         o p pnnnnnnnnnnnnnnnn{U  o o                                     p n n n n onsnnnnnnnnnnnZon o o n                                     p o o onnnnnnnnnnnnnnnn>n o                                                 o n nfnnnnnnnnnnnnnnnn#n n n                                         q n n n k
 nnAnpnnnnncn3on o m
 p p                                         o n o nMnnnnnnnnnnnnnnnnn n                                                 r n n+nnnnnnnnnnnnnnnnpn n p                                         p o o p n n m qppP  n n n z o n o                                         p n n nnnnnnnnnnnnnnnnnon o                                                 o o onnnnnnnnnnnnnnnnn5n n o p                                             o m n p p o o o o p e n n r                                             o p o l nennnnnnnnnnnnnnnnCn o n                                                 o | n nZnnnnnnnnnnnnnnnnnn o q                                                                                                                                                 n n n n-nnnnnnnnnnnnnnnnnn p                                                     p p o onnnnnnnnnnnnnnnnnvqo n n                                                                                                                                         l o o onnnnnnnnnnnnnnnnnln n p                                                         p o g nznnnnnnnnnnnnnnnnnOp n o                                                                                                                                p p o o onnnnnnnnnnnnnnnnnn"n n                                                                 o o o(nnnnnnnnnnnnnnnnnn;m o o o                                                                                                                         o o o rnennnnnnnnnnnnnnnnn}~ p o                                                                 o p wnnnnnnnnnnnnnnnnnnn4m n n o                                                                                                             p p o o ro_nnnnnnnnnnnnnnnnno&n o p                                                                 p o o o%nnnnnnnnnnnnnnnnnnn@n n n k p                                                                                                 n p n o onennnnnnnnnnnnnnnnnn{ o n                                                                         o p l nmnnnnnnnnnnnnnnnnnnnWnn ` o p                                                                                         n n o n onnnnnnnnnnnnnnnnnnnnn o p                                                                         p o o onnnnnnnnnnnnnnnnnnnnnn n m o q                                                                         p p t o m n,nnnnnnnnnnnnnnnnnnnnZn n p                                                                                 o o n nCnnnnnnnnnnnnnnnnnnnnnHnn n m o n p                                                 p p	 o o o n onennnnnnnnnnnnnnnnnnnnon n                                                                                         o n onnnnnnnnnnnnnnnnnnnnnnn<nn n o n p p p                         p o o m o n n ooRnnnnnnnnnnnnnnnnnnnnnn+n n n                                                                                         p n n nnnnnnnnnnnnnnnnnnnnnnnnnNnrn n o o o o n n o o o o n n oo$ndnnnnnnnnnnnnnnnnnnnnnnnVl p h r                                                                                             n l n n.nnnnnnnnnnnnnnnnnnnnnnnnnnXn.ooqj
 n n  oo
on7nfnnnnnnnnnnnnnnnnnnnnnnnnnoo o w                                                                                                  n p o n nKnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn n n                                                                                                         n n o qnbnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnon n c                                                                                                                  o o n nnonnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn&n  n p                                                                                                                     n n o onxnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn)n q o q                                                                                                                         n o o o onjnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn'n r	 o s                                                                                                                                     r o n nn[nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnno n q p q
                                                                                                                                             o n n U n?nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn d  o o	                                                                                                                                                     o o o o o#nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnYon n n p                                                                                                                                                             o n n n ondnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn-m n n h m                                                                                                                                                                     r m o o l n*nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn]nn o o p                                                                                                                                                                                 p o o o n onFnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnynl o o m m                                                                                                                                                                                             n p m o n onNnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnzn#t n p o v o                                                                                                                                                                                                         p p h o n nn:nnnnnnnnnnnnnnnnnnnnnnnnnnnnnn_nu n m n m m                                                                                                                                                                                                                     p <  o j n n onnLnnnnnnnnnnnnnnnnnnnnnnnnon1o
n n m m m m                                                                                                                                                                                                                                         o o l n n n soo3n]nnnnnnnnnnnnnnnnpnGn!nm n o o o n r                                                                                                                                                                                                                                                         r n n r o o n n m oonn-o7n=n@n?o:o2o%ooqn n n n o n s p                                                                                                                                                                                                                                                                                 p p p o o q o o n n o n n n o o o n o p n n o n p                                                                                                                                                                                                                                                                                                                     p q o o o n n n o o o p q  p                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   ?       ?                                                                                                                                ?                    ?                                  ?                ?      ?            ?                                                                                                            ?            ?      ?                ?    ?  ?      ?    ?                       ?                   ?                                         ?        ?                                              ?                        ?     (                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               p i o n n t
 o o o n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n n o o i
 o k q                                                                                                                                                                                                                                                                 p
 o p n p o n n n m m l \ s nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnZ  m n n n n s p                                                                                                                                                                                                                                         o r n { o o o o l onn#o6nLncntonnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnen<n[) n n m d
  q                                                                                                                                                                                                                     p o p l p n n m oooEnonnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnrn"t:  n o m
 n                                                                                                                                                                                                         p o p s o n l no/ngnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn]o	n n n n                                                                                                                                                                                             p r n p n m pn)nhnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn m s y                                                                                                                                                                                 r n n o o n nnEnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn m o                                                                                                                                                                             p n r n n ooOnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn|oo o p                                                                                                                                                                 p o o n o nnHnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnKm o o                                                                                                                                                         p o o n o po6nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnoo o p                                                                                                                                                 q j o n n onwnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnVm p o                                                                                                                                             n n \  o onBnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnno
o o                                                                                                                                     p o o o n onsnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn)n n                                                                                                                                     k o o n n&nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnMn p                                                                                                                             n n n n  o=nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnmn n                                                                                                                         p t n n nnWnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnvj o                                                                                                                     p p n n nnbnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnvj o                                                                                                                 n p o o o	nsnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnvj o                                                                                                                 m n o oownnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnvj o                                                                                                         p p n n nninnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnvj o                                                                                                         o o n n	n^nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnvj o                                                                                                     n n o f nInnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnvj o                                                                                                 m o m o n2nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnun[nGo8n/n&n*o1o=nOnfnnnnnnnnnnnnooVoWoWoWoWoWoWoWoWoWoWoWoWoWoWoWoVnqnnnnnnnnnnnnnnnnnnnvj o                                                                                                 b  i
 m nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn]o/oom n n n n n n n n n n y) o	oo>nqnnnnnnno=n n n n n n n n n n n n n n n n n n%nnnnnnnnnnnnnnnnnnnvj o                                                                                             n n n n
nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnZn#nn o o n o o o q x m j t p o o o n o n j oo2nvnnnno?n p o o o o o o o o o o o o o r
 n n'nnnnnnnnnnnnnnnnnnnvj o                                                                                         n o o h n]nnnnnnnnnnnnnnnnnnnnnnnnnnnnnn@on n n n o p p p                                         p o p n p o n } on_nno@n r                                                     n n n'nnnnnnnnnnnnnnnnnnnvj o                                                                                         g   n n/nnnnnnnnnnnnnnnnnnnnnnnnnnnnn=on o o n n n p                                                                 p o p j o n m nnTo"n q                                                     n n n'nnnnnnnnnnnnnnnnnnnvj o                                                                                     r n n nnnnnnnnnnnnnnnnnnnnnnnnnnnnnVon n p o s p                                                                                     p p o n n n n p  g  p                                                     n n n'nnnnnnnnnnnnnnnnnnnvj o                                                                                 p q p d n\nnnnnnnnnnnnnnnnnnnnnnnnnnn%l o r o o p                                                                                                         z l n o o n q                                                     n n n'nnnnnnnnnnnnnnnnnnnwj o                                                                                 p n n n"nnnnnnnnnnnnnnnnnnnnnnnnnndon o o q t                                                                                                                                                                                                 n n n'nnnnnnnnnnnnnnnnnnna o                                                                             p p o qnnnnnnnnnnnnnnnnnnnnnnnnnnCsn j
 o o p                                                                                                                                                                                                     n n n'nnnnnnnnnnnnnnnnnnoB o                                                                             o l n o0nnnnnnnnnnnnnnnnnnnnnnnnn5o o n l n                                                                                                                                                                                                             n n n'nnnnnnnnnnnnnnnnnnoF o                                                                             p o pnnnnnnnnnnnnnnnnnnnnnnnno(m o n o p                                                                                                                                                                                                                 n n n'nnnnnnnnnnnnnnnnnnoF o                                                                         p s n o7nnnnnnnnnnnnnnnnnnnnnnnn*m p o p                                                                                                                                                                                                                         n n n'nnnnnnnnnnnnnnnnnnoF o                                                                     p q o pnnnnnnnnnnnnnnnnnnnnnnnn7n o o q
                                                                                                                                                                                                                             n n n'nnnnnnnnnnnnnnnnnnoF o                                                                     n n n o/nnnnnnnnnnnnnnnnnnnnnnnLm o n p                                                                                                                                                                                                                                 n n n'nnnnnnnnnnnnnnnnnnoF o                                                                     o n nnynnnnnnnnnnnnnnnnnnnnnnppo n n ?                                                                                                                                                                                                                                 n n n'nnnnnnnnnnnnnnnnnnoF o                                                                 q n n nnnnnnnnnnnnnnnnnnnnnnnoo n n                                                                                                                                                                                                                                         n n n'nnnnnnnnnnnnnnnnnnoF o                                                                 n o n nVnnnnnnnnnnnnnnnnnnnnnn-o j q p                                                                                                                                                                                                                                         n n n'nnnnnnnnnnnnnnnnnnoF o                                                                 o n onnnnnnnnnnnnnnnnnnnnnng]  o o p                                                                                 p p p p o o o o p p p                                                                                                                 n n n'nnnnnnnnnnnnnnnnnnoF o                                                                 g
 n n'nnnnnnnnnnnnnnnnnnnnnoo o o                                                                     p o o m p o n o n n n n n o o n n q p                                                                                                 n n n'nnnnnnnnnnnnnnnnnnoF o                                                             r o n n_nnnnnnnnnnnnnnnnnnnnnKm p o p                                                                 o p m n n n ono&n9oCn@o3ootn n p o m s                                                                                         n n n'nnnnnnnnnnnnnnnnnnoF o                                                             l o onnnnnnnnnnnnnnnnnnnnnnn o p                                                             p o o n n oooWnnnnnnnnnnnBol o m
 n p                                                                                     n n n'nnnnnnnnnnnnnnnnnnoF o                                                             n n n nnnnnnnnnnnnnnnnnnnnnIn o q                                                             n o n o i  n$nxnnnnnnnnnnnnnnoZoo n n n m                                                                             n n n'nnnnnnnnnnnnnnnnnnoF o                                                         p k n nLnnnnnnnnnnnnnnnnnnnnoo o o                                                         p o q n pn_nnnnnnnnnnnnnnnnnnn7mn n q p                                                                         n n n'nnnnnnnnnnnnnnnnnnoF o                                                         p n 0  n{nnnnnnnnnnnnnnnnnnnnhn n l                                                         n n o n nnnnnnnnnnnnnnnnnnnnnnn\on n q                                                                         n n n'nnnnnnnnnnnnnnnnnnoF o                                                         q o o	nnnnnnnnnnnnnnnnnnnnn'n n p                                                     q m o n o#nnnnnnnnnnnnnnnnnnnnnnnnvo
n n q p                                                                 n n n'nnnnnnnnnnnnnnnnnnoF o                                                         o n onnnnnnnnnnnnnnnnnnnnon q                                                         q q n nnnnnnnnnnnnnnnnnnnnnnnnnnnpoo n o                                                                 n n n'nnnnnnnnnnnnnnnnnnoF o                                                         m n n9nnnnnnnnnnnnnnnnnnnn^m o p                                                     p o o onnnnnnnnnnnnnnnnnnnnnnnnnnnnQm
 n o                                                                 n n n'nnnnnnnnnnnnnnnnnnoF o                                                     r p m n\nnnnnnnnnnnnnnnnnnnn*n d                                                     p p p 4 o_nnnnnnnnnnnnnnnnnnnnnnnnnnnnn*n p p                                                             n n n'nnnnnnnnnnnnnnnnnnoF o                                                     l o a nnnnnnnnnnnnnnnnnnnnoo n h m                                             o m n n&nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnoo p p                                                         n n n'nnnnnnnnnnnnnnnnnnoF o                                                     n n nnnnnnnnnnnnnnnnnnnnnoi n k
 p p                                     p p n on}nnnnnnnnnnnnnnnnnnnnnnnnnnnnnno:n { n                                                         n n n'nnnnnnnnnnnnnnnnnnoF o                                                     n n nnnnnnnnnnnnnnnnnnnnnnn]nn m o m                                 p m n n&nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnoo o                                                         n n n'nnnnnnnnnnnnnnnnnnoF o                                                     o n onnnnnnnnnnnnnnnnnnnnnnnon m m                                 y o m nennnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn(n n p                                                     n n n'nnnnnnnnnnnnnnnnnnoF o                                                     o o o"nnnnnnnnnnnnnnnnJn&n"n<nnnnnm	n m m                             o o o
nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn]n n o                                                     n n n'nnnnnnnnnnnnnnnnnnoE o                                                     g n n-nnnnnnnnnnnnnn]nn n n n ooHnnnnKn l n                             m n n#nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnon o                                                     n n n'nnnnnnnnnnnnnnnnnnn{ o                                                     q n n8nnnnnnnnnnnnnrpn r n n  o l	 oQnnnnn n                             n n nCnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn n                                                     n n n'nnnnnnnnnnnnnnnnnnnnn                                                     o n nBnnnnnnnnnnnnoo n m
 m p o o o p	nnnn4n k                             o n nannnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnno"n o                                                     n n n'nnnnnnnnnnnnnnnnnnnnn                                                     o n nGnnnnnnnnnnnn| o y
 p         p o p n nZnnnZn n                             o n nvnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn/n l
                                                     n n n'nnnnnnnnnnnnnnnnnnnnn                                                     n n nNnnnnnnnnnnnnbn n q                 p n n n:nnnsm o                             n n n~nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnno9n t                                                     n n n'nnnnnnnnnnnnnnnnnnnnn                                                     n n nNnnnnnnnnnnnn`n o q                 p o n o;nnnrm o                             n n n~nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnno9n t                                                     n n n'nnnnnnnnnnnnnnnnnnnnn                                                     o n nGnnnnnnnnnnnn}h o m p             o o n nWnnnZn n                             n n nwnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn/n l
                                                     n n n)nnnnnnnnnnnnnnnnnnnon                                                     o n nBnnnnnnnnnnnnoo n n
 p p n n o pnnnn4n k                             n n nbnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn"n n                                                     o o o0nnnnnnnnnnnnnnnnnnn o                                                     q n n9nnnnnnnnnnnnnhun P  n o n o o nGnnnnn n                             n n nDnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn n                                                     n n n:nnnnnnnnnnnnnnnnnnnxk o                                                     k n n,nnnnnnnnnnnnnnVon o o n un9nnnnQn n l
                             m n n#nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnon o                                                 p n n nMnnnnnnnnnnnnnnnnnnnkn n                                                     n n n"nnnnnnnnnnnnnnnn;ooo0oznnnno	o n p                             o n o
nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn`n n o                                                 p n n ndnnnnnnnnnnnnnnnnnnn[n n                                                     n n nnnnnnnnnnnnnnnnnnnnnnnnon m
 n                                 m n n nennnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn)n n p                                                 q o 5 nnnnnnnnnnnnnnnnnnnnFn g                                                     o o onnnnnnnnnnnnnnnnnnnnnndon P  p p                                 q p n n&nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnoo n                                                     n n n	nnnnnnnnnnnnnnnnnnnn5n n                                                     p o pnnnnnnnnnnnnnnnnnnnnnt  n d p p                                         n o pnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnoCn r n                                                     n n nnnnnnnnnnnnnnnnnnnnn%n n                                                     p n l	 n}nnnnnnnnnnnnnnnnnnnnn m c n                                             o k	 n o*nnnnnnnnnnnnnnnnnnnnnnnnnnnnnno	o p p                                                 p q n o:nnnnnnnnnnnnnnnnnnnoo o                                                     p
 n n n[nnnnnnnnnnnnnnnnnnno)n g                                                     p p p uoannnnnnnnnnnnnnnnnnnnnnnnnnnnn*n    p                                                     p n n nknnnnnnnnnnnnnnnnnnnon t                                                         n n n:nnnnnnnnnnnnnnnnnnnn]n o p                                                     p o o onnnnnnnnnnnnnnnnnnnnnnnnnnnnUj o o                                                         r n o	nnnnnnnnnnnnnnnnnnnnzm  n p                                                         o o onnnnnnnnnnnnnnnnnnnnon                                                          q q o onnnnnnnnnnnnnnnnnnnnnnnnnnupo o o                                                     q o o o(nnnnnnnnnnnnnnnnnnnnSn <                                                              p o o
nnnnnnnnnnnnnnnnnnnno&n o q                                                     p n p n o%nnnnnnnnnnnnnnnnnnnnnnnnxo
n o q p                                                     n n n nbnnnnnnnnnnnnnnnnnnnn-n n                                                             p n V n|nnnnnnnnnnnnnnnnnnnncn n m	                                                         o o p n onnnnnnnnnnnnnnnnnnnnnndo	n m p p                                                     p o o onnnnnnnnnnnnnnnnnnnnnn o                                                             p l n nInnnnnnnnnnnnnnnnnnnnoo o p                                                         p o p o oncnnnnnnnnnnnnnnnnnnn;on m q p                                                         n n n n<nnnnnnnnnnnnnnnnnnnnnn o                                                                 p o o nnnnnnnnnnnnnnnnnnnnnMm p o                                                             o n o n o o)nnnnnnnnnnnnnnnn`on o n ` s                                                         p n o pnnnnnnnnnnnnnnnnnnnnnSn o p                                                                 o o pnnnnnnnnnnnnnnnnnnnnnnn o p                                                             p o o n n qn"n^nnnnnnnnnnnDon o p o p                                                                 o o o o2nnnnnnnnnnnnnnnnnnnnn%n l                                                                     p
 o n n`nnnnnnnnnnnnnnnnnnnnnKm p p p                                                                 p p l
 o n n poo,n>oEoDn9o#onn o n p x s                                                                 q o n nnnnnnnnnnnnnnnnnnnnnnn	n n                                                                         t n n'nnnnnnnnnnnnnnnnnnnnnoo o o                                                                     p p o q o o o n n o o n o o n o o q p                                                                     p m r n n>nnnnnnnnnnnnnnnnnnnnnan n m                                                                         o o pnnnnnnnnnnnnnnnnnnnnnnck n o p                                                                                 p p p o o o o o p p p p                                                                                 n o o onnnnnnnnnnnnnnnnnnnnno&o o q                                                                         o p n nVnnnnnnnnnnnnnnnnnnnnnn)n i q
 p                                                                                                                                                                                                         q p o wndnnnnnnnnnnnnnnnnnnnnnoo p                                                                             p o o onnnnnnnnnnnnnnnnnnnnnnoo o o                                                                                                                                                                                                     n o q n n2nnnnnnnnnnnnnnnnnnnnnnLn p p                                                                                 f o vn{nnnnnnnnnnnnnnnnnnnnnnlqo n n                                                                                                                                                                                          p x n o onnnnnnnnnnnnnnnnnnnnnnnn o p                                                                                 p n n o.nnnnnnnnnnnnnnnnnnnnnnnGo n o p                                                                                                                                                                                     p k n n n	nnnnnnnnnnnnnnnnnnnnnnngm o n                                                                                         q o onnnnnnnnnnnnnnnnnnnnnnnn5m o o q                                                                                                                                                                             p o o o pnhnnnnnnnnnnnnnnnnnnnnnnoo l z                                                                                         p t n o7nnnnnnnnnnnnnnnnnnnnnnnn%n p o p                                                                                                                                                                     p N  o o roXnnnnnnnnnnnnnnnnnnnnnnnmA o p                                                                                                 p o pnnnnnnnnnnnnnnnnnnnnnnnnn%m n n o p                                                                                                                                                         n n o o roWnnnnnnnnnnnnnnnnnnnnnnnoo n p                                                                                                 o ^ n o5nnnnnnnnnnnnnnnnnnnnnnnnn0p n n l
 m                                                                                                                                                 p p l	 o poZnnnnnnnnnnnnnnnnnnnnnnnnl[ p r p                                                                                                 p p o qn}nnnnnnnnnnnnnnnnnnnnnnnnn?{ n l
 o o p                                                                                                                                 n j n o n nnrnnnnnnnnnnnnnnnnnnnnnnnnon o p                                                                                                         p n n o#nnnnnnnnnnnnnnnnnnnnnnnnnn^n	n o n n s                                                                                                                         o q m n o onnnnnnnnnnnnnnnnnnnnnnnnnnSn n v                                                                                                             p q p _	 n[nnnnnnnnnnnnnnnnnnnnnnnnnnn n o i
 o o p                                                                                                         p p p p n on@nnnnnnnnnnnnnnnnnnnnnnnnnnoo o q                                                                                                                 q o n nnnnnnnnnnnnnnnnnnnnnnnnnnnnnPo
n n o n 2 p                                                                                     p o o o p o l onynnnnnnnnnnnnnnnnnnnnnnnnnnn.n w                                                                                                                           j _  n n.nnnnnnnnnnnnnnnnnnnnnnnnnnnnn;nn n q n q p                                                                     p o o m o o m ooWnnnnnnnnnnnnnnnnnnnnnnnnnnnnb" o p q	                                                                                                                         n o o T  n_nnnnnnnnnnnnnnnnnnnnnnnnnnnnnn;o	m n o r o p p p                                         p o o n o o n e ooVnnnnnnnnnnnnnnnnnnnnnnnnnnnnnoo o p                                                                                                                                 n n o o
nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnSnon n o o o o p s m n n i q o o o o n n m oo.nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn%n j `                                                                                                                                          j l
 n nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnUn,opm n n n n n n n n n n j onn:njnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnoDn o o p                                                                                                                                         n o n o o3nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnqnVoBo2n(n$n$n*o8nIn_n|nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnndro o n                                                                                                                                                 n n o f nKnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn}n	n o o                                                                                                                                                         o o o on]nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnon m т  p                                                                                                                                                         p p
 n n nngnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnon l	 p m                                                                                                                                                                     n n o oownnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnon s p q                                                                                                                                                                         n n n o o	nqnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnon s
 p q                                                                                                                                                                                 p p n o pnbnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnon r p p                                                                                                                                                                                         p u n n nnVnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnon s p q
                                                                                                                                                                                                 o m n n yo?nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnin	n l
 o q                                                                                                                                                                                                             j o o m n&nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnHoo n q p                                                                                                                                                                                                                 p o
 o p n onrnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn(n n o e n                                                                                                                                                                                                                             o o p	 o on@nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnninn o n d p                                                                                                                                                                                                                                     r m o o n onunnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn0on A  p p                                                                                                                                                                                                                                                 p o o o o qo5nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnSnn n m i	 m                                                                                                                                                                                                                                                             p o o o o o
nKnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnhnm n l n n n                                                                                                                                                                                                                                                                         p o n n m ooQnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnhnp n o o o p                                                                                                                                                                                                                                                                                      n o p o m on@nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn[nq n m n i m                                                                                                                                                                                                                                                                                                     p r o p o n on&ngnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn~n9nm n m n m m                                                                                                                                                                                                                                                                                                                     p o n l o n n nn.nhnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn|nAosn n p n n m                                                                                                                                                                                                                                                                                                                                     p p p o n n n m pooCnmnnnnnnnnnnnnnnnnnnnnnnynQn)nv, n o o f	 n m v                                                                                                                                                                                                                                                                                                                                                         o g  n d o o o o l
 onn"o4nKnanronnnnnonwnfnQn<o)oog  n n n n p n p p p                                                                                                                                                                                                                                                                                                                                                                                 p o
 p o p o n n n n m l ` ~ nnnv R  k m m n o o o o k o s p                                                                                                                                                                                                                                                                                                                                                                                                                     p j o o o u o o o o n n n o o o o r m o o q p                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    ?                                                                                                                                                                                                                                                                                                                      ?                                                             ?        ?                               ?     ?                                                                       `                        p                                                                             ?              ?                          ?          ?                                                                       ?                                     ?        ?                                                                                                            ?                                                             ?                                  ?                   PNG

   IHDR         \rf   orNTϢw  6gIDATxyeEyOsowO/0Î  -*h\i[LbYMܢ"_\MQ5qPadgzz~na>/~nSoUPSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSӃljo9@W?G⟌	
h21^@-;O-\ybOTg R~Z6)gQ6x>dhOg$$(7Va'1!F:eq(þ6E@k&)?Uf$<p̔aĵo nD.ͭ,.@ZNTѱΉŗӗsdt< `}N77
2\
i3ZlB(LŠzH		و%hmNosdXm]p0 \tC?vFFGl_FVfb^H-!1"q isX4ʶ{	 (a໒kx~/'#A",UbԽeFLH kEDs!>wm:L"}Ia*DR{J]bq?1yI`:^{.OW2"/:f_BbM0'1F6}I?<bOk`+pb(fhHdBW{C$vx=L-"KyɳҲm[QWYFrsg )FHGM}!izk" ,Z [|F"eiC(zjLWp9!d"jr\o^H~9r6Zž
iz{LlBDy O`=<'}d '_ ݧwíRy<t`lrLq`1͝3롽;Խt,N B <8ljns>E5Y]Sh$hF`_hG{*3|O
W>#җڱ;k!D  >ljvk/`'D[!3uo,0pӡpmMJ:&!(A={bt̤V4Foaӯm@_ߙ/v=sjXe9}p# :zo%+[0F\Hy`N39?oR+Ig$¹蘓35muPM1/*۶eKH{7WxdSqЧH쾁w6O>^}HgbێiʌD{EkGL3H4_<^of3ͷoo: \08"isl: A߳^/W?!'$Av|54|!@R?ܺ]\hhBXxW]5ZIg&Wlݢzy<zliDWƸW\7X
`)bkjv6 z.k_hl3=r3SYƪ$aFםl&˶'ɀIL21B֊s(`U ќ_o'HټsǪ}M,38ZWT6//gY1|ɊO/o+yvUzt',mEsnH!5&(JftYqcd7bӁ=l4B̬~S'MwyJ~Y6hOғ򵘽glS *ۮtJ7RbY`0^{毩'$oMvӞ@	XVe[.ۦx4=GBo: XT-z/٫G	V콧=4iXG_ROYq<0PٜHu?f}0/"EIsB=,&Dm^Hog)&0+q7!o5\SoH1q?À`FH:aК*`?u2p>{z	0OCFS揩'pppYEpbEF{8;h16;~e[rF&PY˜`t4po;DxmSwH61#҅̽ot{#πK._ :wl			b[WE6Xt"Q.J׃t ;UT\ V,#M0pB6-3A>D[bƬ Iv9 đ_<9_ g8(~,[mxjZ7dE#mo=6Ϩ&ė1_'1*OQ&	9	>k@Qȓ?dex<e۹LL`&*TIbtc^W,_:ܺ셻^(`bpG!ƿWxW kglx};eE+?!xuo$	2.cY1"y$54lxK]^\g~ʊwFFh X~-<SO8ּF4BbЍ h9p0#aC̃YB!}؊%B>+e?0
݆mSȁ _2G^pf`XMIWe;}e=tos{lG~h_o}gJY4:f&&gx*bǏ> ϯOS'YJz͋ʶÜ+UBu '|8l:9ć·M!nr(	I#1C~:澐R%Ooa!aYY2$6%yp#')%n!G	gHj% E3<gR;[~c~]Ȉ\wF=wfۙB̈́l+F3%X}`П<ET^=P(3!B;{0+Z"uOF}nW?3Ăǈ7<.11xPeƛc>KH6JM	Se[#Lm.&MY&S˱^mt*0fGIoSUuxj@HyZYIHlsɛz]JD,I4 {o(M }%L|)pXٝ&g"?'	)ge19HFP\*HӰ@VroݎoE+W5[5&ō!bz3S*FЖ-o'ʢˈ6͐y1\+`<&YwųЬ?m%ߣ7E~6a>)<V\3Ǖ{˧IN<e{AZ67PӬ/M#Ie۵4ľC(XvːEc(ӛ NkC`z/ps<՞:G,ۮ=(̳ch7J Ć1*{$^{7c_Jk9|>#%U]${, ,Á- f/I=Kbb\Hf~(tw({S}ϸ1@)".2_CVtE`1`S?\P]cS/x13i;c̿,iiד",L!?Ft|	蘉?ײriL0[ĸɑ[`!J[	=HW'L24j
x;ܭ3M7cE FLt$:)mADM@}_qE f$)zegZ=Ζ0ll`ni\3[/h&=?6,-ʶi7ـFhZ_u(~#);ǣ3l%ًoLR1ۂv`K6/ZQ惊޽FOI,'O{q5wR:1~|vU(2wwu
>yeS	I岸bx`m3͓Ce۴xBL]Zt %Ç^-5`k+us$|a	a!&e9 ̑f}2կ>})4H1[pت̽37[ C_,	kǏfLՋknx(EAħ,ۦ89ȻtM "&	z8|qY'Idps\<#=&7
<Z1yr2b4Y.$EcvW4}8Eq֪ĆLt{_"G jMGIIu"xY[ ~ Llm@w6ACot'J*/Sc8	EYIĸXsvyu진Aھ<Qnt5'?5W!7MMJʶeIj@HV$ Pc7(EQ`zïlo73W5H"ID
G1Q?<m#,ΎugkHB}D׻i_:'ѳzq1Ҏ7F@m+0ِaS.Ɯ|h<5EwԽgb'<qytn(O^#ajflCFǌo]?COch/1-WnǯK\Li)Ei^2>H/Q}9mt+\+'q~65i^PuV,/M7\?G?8	;Np并Y56syomb & p"N=~`2Wב6vmg읁;p3IY?y>?;V`L>BrI괜ؗޘgd2 .*۞]i=rwhUo%swo#a1@iDj'ؠ۴Z=1)\#QjxPV7RueJq\Ev }5qk#T&3$ 2	x	'Wiyom8`&++L@n(T5.`퇵Z+gHC8<D^YJ|r<zS=b#<ʃh8MIjoZ- @r;e۳,eG :c<ذ\sɀE91Vz3#_DuV	&#~N"Ϸ#]\$	HgוmӝЇyDgX:bE" _Wwd.*}*esmDw7˓Ve;+W(ʶgc<$Bn"gpzrq·Uo3a.mI\cWy/O(ʊx$ ~L5b[u	CE*2 *ېbd̵S>? .ۦ=d5,Wj!Ү"`C|l{}BuL B-w&ۂ?+c#"3z®XϗHl3rJWYĸPEq+˶NXe}#X~Tw)p~Tq/QYvu7f1N#SYoF:"=\X?bm7(Q0x}E4Zh!qۨ%
rG5V<|2;Ɯo'ʶ)Ej[xD= (ZݠmdˑTiyNt iֈCjm&E l{;,tD !PUkpIʭcfǪ+lK%ż@Rte3IeXtl| U|oszPTFg_#kp|ٶtՆS#Ӏ;ߧz =cxXY7 j[{r#@l
r`P߼umR?Y\VqIF$eSN1I:_FoMMg aj.WKՋ0q4[Ȗ, 		N8BbV/	03ÍrcV.{'T8"A HHzx6۟B+yN䄑}YFZn>) T*BpETP tҨolbv%"?^U_-fNz {Dgֻ qB|V>Ml0Menr_ϔ|T,,*y tT:uZ7?<γX/A
^=c@K~"<>5u-@Z"*n2~q;1;BC0\;8Ur3"x;e˶vM41ٙٶdP[P쵗ƟWgH2l	pMWMxw	KH:M6b?ܕbP9Xd{ k$+.ae ?6~3P|o{p77SqocR<?v~:NvE&MgUa\G"s)Pol$|Ufs}SݠԛG<ϿW^m܇m< f|1c(" *Ն"!F>lɣ}jrI#t-UamA@`ffF䎯Ƽ0Unw@*+eC'WMGZ-wѩٶdXfT*nyȯZ5	~b\uH=;kh&B:WpU~꺧$!J
htYK En
$⣫s)=3֫ȉ7[>8v>SJǼ;^@#Vl`߯}ՋB*` 	Bb*W6rѩK<is]AH=O=0B'"};~w!]iX$aTpsY""w;1_=Aҡ{ӥ}JB>0HkSۿ+&ƅ1}V5>}UՅZW9ݿ]0Lmۣjϻ"wɬGeDϩ 5Dm(ugnЅld}`gP$,ێ06ݬ@Q(GX,~~9|j߃;x\AI5;!idj:smA灎td< IZ7V\	:u1~fuw|>J={VMzta6&!}[g_A72q-7 K۴酁ޝ;~f/Sp'#{=v,'F'+j=#5b1fw .^uG QB}Yn$\sމt*]$Z^Zwr$p0N0r7%J:ѹax,E,)&\7R$(B*qqrg ֞I9<<A?o_vg\_C͕ɵB},s|<Qto@a?	8ax	<pIc@[G]^˺{H7ڦW2KFbuۥ=:گt$U3ag\mC*JݝSjXľLl]jvNmb]'{gt̤hRb"K\|itg%rbb3k#_žE~pRstt`.I RRstE;FV1Vѱ"twy-l&UTJĲP/혜 vԹ`%u y杍$=9ظ~6=!0o\nw\|uw+c I	[2lxdl;zi
hw$	 ;7]($Bk٘YW6*093H+ùn|"g#Cޔ<÷1'uzs0@5 [%q1)bq[=ܡE<lךE?oLz<|w+E;iYI"c6iS{y4.=cJ{wOX"\b+\h_s6+ӣdP`js5_lte쳪q[yi/Jt6FHgnom6́n|[ .T["@:.+XON_Ę_,Єv N)y!&	DG;:ǮbE"\/gۇCHfHƲҷ9%qq}S&K@Oe7fl^d'1Keh8cY;iE|nǿA_"K>/pڷ9/Vdf)wi! RnxV6-#W}d~^Ke[x3ITb	X%!떬e31.E_}\^fkx
se09S^?_f$	
:[n&pGGo@ё!,7Wݠ;5>W횉x3pqٶtiwU7;ә%QDU}vGѡdb\\6	JHz+šJ$>YU@B <B5߹zlȒ04.ۖ;0Έ#!~T,Ϧ' 6`+Ohzskل`bl:̏L\jDG`kn.8Hugp.	5V'pxP6vJtn6 5e7j:	ۀӛF\oʶklD"૚;1Hg7R]` xK.2A_#a/`܋9}d+YtL 7 o(RE	1<$Ӫ;$xU>xl:bFIrn5 LduЗ+8Yfmc|sWi?I>FRGUEEbQ'x|]ɳE&EtNtFH$Π};tt<ENbHK~^Hgɵ%e7.8ځ@cI*(=s(0U-C|mn0WYiW
mt>0Qvvv_<HNQ}2`]@0stRP~1_c7 m77@)px#iFnb:1^݅
`]aq%<O~i@O~X!	gPl;oߏw񨘐_J|Si$WWؙ鳚4 Soɯ<xe; ST#^ߕ74$%l<kK#~yCurEAFJ;[yFZx* }QEl7_$kug~qCcm>[&+ K,5:`t4dy> 'e?`^hob&œ6
ߢUp#/]KgvĩX:ʦME(Ve7r3o	E2L67ۗ7ZK
rp̰w܌U*Y8CF繝'?,Bw@<g{:zcQ-kesgp1<k(uWi*RLq__Ϛ=+nӁyfnmh]^km}\
|F/ F6ijj
" 9 &6䯔ywWrf%1D'-7лxNF#
] #|)pv3</$>s9
Ԭ|& Sb8__/:gS
ԬxBdy?
lr#gTٶt
xk~|&9HNX਩Cxn
nUL}2f [K`f;$A!|8&_Iԓ'g	jV&]tp۱Mz/'gUfYr=1.?[vwYY,kP+/zIjSrk!Y!, L7(2qReA|Y,0חVÇ(P
ÆXIjRRޚ=cޣ2$.*eN!OkY	, LXIrW zG7^woڒ?F8L[gV"kzeHs.0Yv'EX0rJ9355%y BX*F5< T_x+'*e}35`VJ}# >|W5ƛo yM4o  8)x;c	~[S:tt4s&E}RUI0U֞Z@M[wf\-FhԚo#1'a[fN 5xO;UÛ򘪨\Y"S@S34}ILw:WdLk#çSS:"e D̷.dtHhھqxڀB`75ՠ- \Kۀa?"7J`?vNTۛ"#HBQ^~oĸر9!WvmW b@7fԽ3_kl l~zJUs1ǁ۷wj`}̯Nhذ洕/cĳ}Gsxn"!9yȩ,',2=ddc%1<l5~j;_yM9
]^	蘋xv-[	_SϤsT\5iS) ر9augp>)X_]]` 8|h?]K|Lebzjfd`#s4coDZYN5:4~>p0dn$hOS9 DޠӁ>x>#?Db&ߺ=,9sJ%dl>Xk*@%`b\"'k*y/pɬCqa?I?2e7!01'IBeNGL?0CĘ<Fis> 9'mk  LdpWk9 {C@(ۮebwTpvvSܶbrο7:2$	o+'  W" ,Y4me!RmZf{/#\&Ʌ[r=1GR![&	mf@		i5G`z)-4ͣ۟JB߁X!6}m?)w	Z%ؾ$;7(0T@01$l3: 0Fyy J4m|,:%O1i
Ûʿ
̒Y`eo;{qCƎoy1,ۮ
fwr2W[l`ְ6А/}" b=p H`_I޿OH $~k6ķ N+O33y$ћ%K _gqk?jߗ>v*s?T@ ;ӊ*0=l*Lr+Atĸ}cnj9eUS ,25ޠopևomUzN H+)
%eTSӋ Lmn 0d#g\W]55FO
 " Dc飒T]55D
  !hݒJ-55MO &u~Al-ۮ^ 
XH:1JljjΊ (Bڲlۥ1>|AvT# b$g?oj'eVSSUV ,29mߦN9USsV @qE8ANF|6//۶*"`f%	.ۮ=ƴQgW 4BJAo?./ۮ=d+NmhW LV59eVS\á3
 
	$Y3)i-AMo%4ԙW"SD[6ljjvk%]6IU'2Ts%!}Z!j%͝IWy ;bKd?m[M.QNa/ ($!e"/I\HT܀817ќ{mlcSxSAeM%RcÍ;;7끽iHE&(Rk|"~MMYlC|"Ʀ:f"9sZy{:&l_!Fܲk97(|&	Y_[`x,@"x
phٶ5L#4?P" ChdU#@'(۶M6(h&.ysk- L,!E(Ћ1O8(\m$l v,Jo7Rf%Kyd嗵Y)lu3I~<ݠ^P$IlxˀX5+qoqd@oT`	B b4!,}x256\ -R@3AEb4#e=ÁeXSyn3*Xݢ3:Vrr<!rx00'Vkzoe&?5 PYh$Á2ǀO2<8Hv!=!I7L~댎9[<duq}pXmsͲI?3:wlT2ThMŨ̈c+A6kB/Gǳ67.ܔ&"L/W9'/	cmV< zK~hc`2iB B.bV!+?E~Ⰾ: 'LjrO¬3
yNh02CZacփրV	MAjdw~}5̅KQmW4pO-m32B.P!
`&^SkCLV .%2g1yuۇ 21̲Z V : PEK5;!r-ͯYqW1]7>    IENDB`

================================================================================
FILE: src/MyDesktopApplication.Desktop/Converters/Converters.cs
SIZE: 2.05 KB
MODIFIED: 2025-12-21 12:33:54
================================================================================

using System;
using System.Globalization;
using Avalonia.Data.Converters;
using Avalonia.Media;
using MyDesktopApplication.Core.Entities;

namespace MyDesktopApplication.Desktop.Converters;

public class QuestionTypeLabelConverter : IValueConverter
{
    public object? Convert(object? value, Type targetType, object? parameter, CultureInfo culture)
    {
        return value is QuestionType qt ? qt.GetLabel() : value?.ToString();
    }
    
    public object? ConvertBack(object? value, Type targetType, object? parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }
}

public class BoolToColorConverter : IValueConverter
{
    public IBrush? TrueBrush { get; set; }
    public IBrush? FalseBrush { get; set; }
    public IBrush? DefaultBrush { get; set; }
    
    public object? Convert(object? value, Type targetType, object? parameter, CultureInfo culture)
    {
        if (value is bool b)
        {
            return b ? TrueBrush : FalseBrush;
        }
        return DefaultBrush;
    }
    
    public object? ConvertBack(object? value, Type targetType, object? parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }
}

public class SelectedToBorderConverter : IMultiValueConverter
{
    public object? Convert(IList<object?> values, Type targetType, object? parameter, CultureInfo culture)
    {
        if (values.Count >= 4 && 
            values[0] is bool hasAnswered &&
            values[1] is int selected &&
            values[2] is bool isCorrect &&
            parameter is string cardNum &&
            int.TryParse(cardNum, out var cardNumber))
        {
            if (!hasAnswered) return new SolidColorBrush(Color.FromRgb(55, 65, 81)); // Gray border
            if (selected != cardNumber) return new SolidColorBrush(Color.FromRgb(55, 65, 81));
            return isCorrect 
                ? new SolidColorBrush(Color.FromRgb(34, 197, 94))   // Green
                : new SolidColorBrush(Color.FromRgb(239, 68, 68)); // Red
        }
        return new SolidColorBrush(Color.FromRgb(55, 65, 81));
    }
}


================================================================================
FILE: src/MyDesktopApplication.Desktop/MyDesktopApplication.Desktop.csproj
SIZE: 1.48 KB
MODIFIED: 2025-12-21 14:28:11
================================================================================

<Project Sdk="Microsoft.NET.Sdk">
  <PropertyGroup>
    <OutputType>WinExe</OutputType>
    <TargetFramework>net10.0</TargetFramework>
    <Nullable>enable</Nullable>
    <BuiltInComInteropSupport>true</BuiltInComInteropSupport>
    <ApplicationManifest>app.manifest</ApplicationManifest>
    <AvaloniaUseCompiledBindingsByDefault>true</AvaloniaUseCompiledBindingsByDefault>
    <ApplicationIcon>Assets\avalonia-logo.ico</ApplicationIcon>
  </PropertyGroup>
  <ItemGroup>
    <ProjectReference Include="..\MyDesktopApplication.Core\MyDesktopApplication.Core.csproj" />
    <ProjectReference Include="..\MyDesktopApplication.Infrastructure\MyDesktopApplication.Infrastructure.csproj" />
    <ProjectReference Include="..\MyDesktopApplication.Shared\MyDesktopApplication.Shared.csproj" />
  </ItemGroup>
  <ItemGroup>
    <PackageReference Include="Avalonia" />
    <PackageReference Include="Avalonia.Desktop" />
    <PackageReference Include="Avalonia.Themes.Fluent" />
    <PackageReference Include="Avalonia.Fonts.Inter" />
    <PackageReference Include="Avalonia.Diagnostics" Condition="'$(Configuration)' == 'Debug'" />
    <PackageReference Include="CommunityToolkit.Mvvm" />
    <PackageReference Include="Microsoft.EntityFrameworkCore.Design">
      <IncludeAssets>runtime; build; native; contentfiles; analyzers; buildtransitive</IncludeAssets>
      <PrivateAssets>all</PrivateAssets>
    </PackageReference>
    <PackageReference Include="Microsoft.Extensions.DependencyInjection" />
  </ItemGroup>
</Project>


================================================================================
FILE: src/MyDesktopApplication.Desktop/Program.cs
SIZE: .39 KB
MODIFIED: 2025-12-20 01:27:19
================================================================================

using Avalonia;
using System;

namespace MyDesktopApplication.Desktop;

sealed class Program
{
    [STAThread]
    public static void Main(string[] args) => BuildAvaloniaApp()
        .StartWithClassicDesktopLifetime(args);

    public static AppBuilder BuildAvaloniaApp()
        => AppBuilder.Configure<App>()
            .UsePlatformDetect()
            .WithInterFont()
            .LogToTrace();
}


================================================================================
FILE: src/MyDesktopApplication.Desktop/ViewModels/MainWindowViewModel.cs
SIZE: 8.05 KB
MODIFIED: 2025-12-21 12:33:54
================================================================================

using System.Collections.ObjectModel;
using CommunityToolkit.Mvvm.ComponentModel;
using CommunityToolkit.Mvvm.Input;
using MyDesktopApplication.Core.Entities;
using MyDesktopApplication.Core.Interfaces;
using MyDesktopApplication.Shared.Data;
using MyDesktopApplication.Shared.ViewModels;

namespace MyDesktopApplication.Desktop.ViewModels;

public partial class MainWindowViewModel : ViewModelBase
{
    private readonly IGameStateRepository _repository;
    private readonly Random _random = new();
    private GameState? _gameState;
    private Country? _correctCountry;
    
    [ObservableProperty]
    private string _questionText = "Loading...";
    
    [ObservableProperty]
    private Country? _country1;
    
    [ObservableProperty]
    private Country? _country2;
    
    [ObservableProperty]
    private string _scoreText = "0/0";
    
    [ObservableProperty]
    private string _streakText = "";
    
    [ObservableProperty]
    private string _bestStreakText = "";
    
    [ObservableProperty]
    private string _accuracyText = "";
    
    [ObservableProperty]
    private string _resultMessage = "";
    
    [ObservableProperty]
    private bool _hasAnswered;
    
    [ObservableProperty]
    private bool _isCorrectAnswer;
    
    [ObservableProperty]
    private int _selectedCountry;
    
    [ObservableProperty]
    private string _country1Value = "";
    
    [ObservableProperty]
    private string _country2Value = "";
    
    [ObservableProperty]
    private QuestionType _selectedQuestionType = QuestionType.Population;
    
    // Computed properties for UI styling
    public bool IsCountry1Correct => HasAnswered && SelectedCountry == 1 && IsCorrectAnswer;
    public bool IsCountry1Wrong => HasAnswered && SelectedCountry == 1 && !IsCorrectAnswer;
    public bool IsCountry2Correct => HasAnswered && SelectedCountry == 2 && IsCorrectAnswer;
    public bool IsCountry2Wrong => HasAnswered && SelectedCountry == 2 && !IsCorrectAnswer;
    
    public ObservableCollection<QuestionType> QuestionTypes { get; } = new(Enum.GetValues<QuestionType>());
    
    public MainWindowViewModel(IGameStateRepository repository)
    {
        _repository = repository;
    }
    
    partial void OnHasAnsweredChanged(bool value)
    {
        OnPropertyChanged(nameof(IsCountry1Correct));
        OnPropertyChanged(nameof(IsCountry1Wrong));
        OnPropertyChanged(nameof(IsCountry2Correct));
        OnPropertyChanged(nameof(IsCountry2Wrong));
    }
    
    partial void OnSelectedCountryChanged(int value)
    {
        OnPropertyChanged(nameof(IsCountry1Correct));
        OnPropertyChanged(nameof(IsCountry1Wrong));
        OnPropertyChanged(nameof(IsCountry2Correct));
        OnPropertyChanged(nameof(IsCountry2Wrong));
    }
    
    partial void OnIsCorrectAnswerChanged(bool value)
    {
        OnPropertyChanged(nameof(IsCountry1Correct));
        OnPropertyChanged(nameof(IsCountry1Wrong));
        OnPropertyChanged(nameof(IsCountry2Correct));
        OnPropertyChanged(nameof(IsCountry2Wrong));
    }
    
    public async Task InitializeAsync()
    {
        IsBusy = true;
        try
        {
            _gameState = await _repository.GetOrCreateAsync();
            
            if (Enum.TryParse<QuestionType>(_gameState.SelectedQuestionType, out var qt))
            {
                SelectedQuestionType = qt;
            }
            
            UpdateScoreDisplay();
            await NextRoundAsync();
        }
        finally
        {
            IsBusy = false;
        }
    }
    
    partial void OnSelectedQuestionTypeChanged(QuestionType value)
    {
        if (_gameState != null && !IsBusy)
        {
            _gameState.SelectedQuestionType = value.ToString();
            _ = SaveAndNextRoundAsync();
        }
    }
    
    private async Task SaveAndNextRoundAsync()
    {
        if (_gameState != null)
        {
            await _repository.SaveAsync(_gameState);
        }
        await NextRoundAsync();
    }
    
    private (Country, Country)? GetRandomPair()
    {
        var valid = CountryData.Countries
            .Where(c => SelectedQuestionType.GetValue(c) != null)
            .ToList();
        
        if (valid.Count < 2) return null;
        
        for (int i = 0; i < 100; i++)
        {
            var c1 = valid[_random.Next(valid.Count)];
            var c2 = valid[_random.Next(valid.Count)];
            var v1 = SelectedQuestionType.GetValue(c1);
            var v2 = SelectedQuestionType.GetValue(c2);
            
            if (c1.Name != c2.Name && v1 != null && v2 != null && Math.Abs(v1.Value - v2.Value) > 0.001)
            {
                return (c1, c2);
            }
        }
        return null;
    }
    
    [RelayCommand]
    private async Task NextRoundAsync()
    {
        HasAnswered = false;
        SelectedCountry = 0;
        ResultMessage = "";
        Country1Value = "";
        Country2Value = "";
        
        var pair = GetRandomPair();
        if (pair == null)
        {
            QuestionText = "Not enough data for this question type.";
            return;
        }
        
        (Country1, Country2) = pair.Value;
        QuestionText = SelectedQuestionType.GetQuestion();
        
        var v1 = SelectedQuestionType.GetValue(Country1!);
        var v2 = SelectedQuestionType.GetValue(Country2!);
        _correctCountry = v1 > v2 ? Country1 : Country2;
    }
    
    [RelayCommand]
    private async Task SelectCountryAsync(string countryNumberStr)
    {
        if (!int.TryParse(countryNumberStr, out var countryNumber)) return;
        if (HasAnswered || _gameState == null || _correctCountry == null) return;
        
        HasAnswered = true;
        SelectedCountry = countryNumber;
        
        var selectedCountry = countryNumber == 1 ? Country1 : Country2;
        var isCorrect = selectedCountry?.Name == _correctCountry.Name;
        IsCorrectAnswer = isCorrect;
        
        var wasNewBest = _gameState.CurrentStreak == _gameState.BestStreak && isCorrect;
        _gameState.RecordAnswer(isCorrect);
        var isNewBest = _gameState.CurrentStreak == _gameState.BestStreak && _gameState.CurrentStreak > 1;
        
        if (Country1 != null)
        {
            var v1 = SelectedQuestionType.GetValue(Country1);
            Country1Value = v1.HasValue ? SelectedQuestionType.FormatValue(v1.Value) : "N/A";
        }
        if (Country2 != null)
        {
            var v2 = SelectedQuestionType.GetValue(Country2);
            Country2Value = v2.HasValue ? SelectedQuestionType.FormatValue(v2.Value) : "N/A";
        }
        
        var message = isCorrect 
            ? MotivationalMessages.GetCorrectMessage()
            : MotivationalMessages.GetIncorrectMessage();
        
        if (isCorrect && isNewBest && !wasNewBest && _gameState.CurrentStreak >= 3)
        {
            message += "\n" + MotivationalMessages.GetNewBestMessage(_gameState.BestStreak);
        }
        else if (isCorrect && _gameState.CurrentStreak >= 3)
        {
            var streakMsg = MotivationalMessages.GetStreakMessage(_gameState.CurrentStreak);
            if (!string.IsNullOrEmpty(streakMsg)) message += "\n" + streakMsg;
        }
        
        ResultMessage = message;
        UpdateScoreDisplay();
        await _repository.SaveAsync(_gameState);
    }
    
    [RelayCommand]
    private async Task ResetGameAsync()
    {
        if (_gameState == null) return;
        
        _gameState.Reset();
        await _repository.SaveAsync(_gameState);
        
        ResultMessage = MotivationalMessages.GetResetMessage();
        UpdateScoreDisplay();
        await NextRoundAsync();
    }
    
    private void UpdateScoreDisplay()
    {
        if (_gameState == null) return;
        
        ScoreText = $"{_gameState.CorrectAnswers}/{_gameState.TotalQuestions}";
        StreakText = _gameState.CurrentStreak > 0 ? $"🔥 {_gameState.CurrentStreak}" : "";
        BestStreakText = _gameState.BestStreak > 0 ? $"⭐ Best: {_gameState.BestStreak}" : "";
        AccuracyText = _gameState.TotalQuestions > 0 
            ? $"{_gameState.Accuracy}% {MotivationalMessages.GetAccuracyComment(_gameState.Accuracy)}"
            : "";
    }
}


================================================================================
FILE: src/MyDesktopApplication.Desktop/ViewModels/ViewModelBase.cs
SIZE: .27 KB
MODIFIED: 2025-12-21 12:33:54
================================================================================

using CommunityToolkit.Mvvm.ComponentModel;

namespace MyDesktopApplication.Desktop.ViewModels;

public abstract partial class ViewModelBase : ObservableObject
{
    [ObservableProperty]
    private bool _isBusy;
    
    [ObservableProperty]
    private string? _errorMessage;
}


================================================================================
FILE: src/MyDesktopApplication.Desktop/Views/MainWindow.axaml
SIZE: 10.87 KB
MODIFIED: 2025-12-21 12:33:54
================================================================================

<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:MyDesktopApplication.Desktop.ViewModels"
        xmlns:conv="using:MyDesktopApplication.Desktop.Converters"
        xmlns:core="using:MyDesktopApplication.Core.Entities"
        x:Class="MyDesktopApplication.Desktop.Views.MainWindow"
        x:DataType="vm:MainWindowViewModel"
        Title="🌍 Country Quiz"
        MinWidth="320" MinHeight="480"
        Width="500" Height="700"
        Background="#0f172a">
    
    <Window.Resources>
        <conv:QuestionTypeLabelConverter x:Key="QuestionTypeLabelConverter"/>
    </Window.Resources>
    
    <Window.Styles>
        <!-- Base button style -->
        <Style Selector="Button.country-card">
            <Setter Property="Background" Value="#1e293b"/>
            <Setter Property="BorderBrush" Value="#374151"/>
            <Setter Property="BorderThickness" Value="2"/>
            <Setter Property="CornerRadius" Value="12"/>
            <Setter Property="Padding" Value="16"/>
            <Setter Property="HorizontalContentAlignment" Value="Center"/>
            <Setter Property="Cursor" Value="Hand"/>
        </Style>
        <Style Selector="Button.country-card:pointerover">
            <Setter Property="Background" Value="#334155"/>
            <Setter Property="BorderBrush" Value="#3b82f6"/>
        </Style>
        <Style Selector="Button.country-card:disabled">
            <Setter Property="Opacity" Value="1"/>
        </Style>
        
        <!-- Correct answer style -->
        <Style Selector="Button.correct">
            <Setter Property="Background" Value="#14532d"/>
            <Setter Property="BorderBrush" Value="#22c55e"/>
        </Style>
        
        <!-- Wrong answer style -->
        <Style Selector="Button.wrong">
            <Setter Property="Background" Value="#7f1d1d"/>
            <Setter Property="BorderBrush" Value="#ef4444"/>
        </Style>
        
        <!-- ComboBox styling -->
        <Style Selector="ComboBox">
            <Setter Property="Background" Value="#1e293b"/>
            <Setter Property="BorderBrush" Value="#374151"/>
            <Setter Property="Foreground" Value="White"/>
        </Style>
    </Window.Styles>
    
    <ScrollViewer HorizontalScrollBarVisibility="Disabled" VerticalScrollBarVisibility="Auto">
        <Grid RowDefinitions="Auto,Auto,Auto,Auto,*,Auto,Auto" 
              Margin="16" MaxWidth="600">
            
            <!-- Title -->
            <TextBlock Grid.Row="0" 
                       Text="🌍 Country Quiz" 
                       FontSize="28" FontWeight="Bold"
                       Foreground="White"
                       HorizontalAlignment="Center"
                       Margin="0,8,0,16"/>
            
            <!-- Controls Row -->
            <Grid Grid.Row="1" ColumnDefinitions="*,Auto" Margin="0,0,0,12">
                <ComboBox ItemsSource="{Binding QuestionTypes}"
                          SelectedItem="{Binding SelectedQuestionType}"
                          HorizontalAlignment="Stretch">
                    <ComboBox.ItemTemplate>
                        <DataTemplate x:DataType="core:QuestionType">
                            <TextBlock Text="{Binding Converter={StaticResource QuestionTypeLabelConverter}}"/>
                        </DataTemplate>
                    </ComboBox.ItemTemplate>
                </ComboBox>
                <Button Grid.Column="1" 
                        Content="Reset" 
                        Command="{Binding ResetGameCommand}"
                        Background="#dc2626"
                        Foreground="White"
                        Padding="12,8"
                        Margin="8,0,0,0"/>
            </Grid>
            
            <!-- Score Display -->
            <StackPanel Grid.Row="2" Orientation="Horizontal" 
                        HorizontalAlignment="Center" 
                        Spacing="16" Margin="0,0,0,12">
                <TextBlock Foreground="White" FontSize="16">
                    <Run Text="Score: "/>
                    <Run Text="{Binding ScoreText}" FontWeight="Bold"/>
                </TextBlock>
                <TextBlock Text="{Binding StreakText}" 
                           Foreground="#f97316" FontWeight="Bold" FontSize="16"
                           IsVisible="{Binding StreakText, Converter={x:Static StringConverters.IsNotNullOrEmpty}}"/>
                <TextBlock Text="{Binding BestStreakText}" 
                           Foreground="#fbbf24" FontSize="14"
                           IsVisible="{Binding BestStreakText, Converter={x:Static StringConverters.IsNotNullOrEmpty}}"/>
            </StackPanel>
            
            <!-- Accuracy -->
            <TextBlock Grid.Row="3" 
                       Text="{Binding AccuracyText}"
                       Foreground="#94a3b8"
                       FontSize="14"
                       HorizontalAlignment="Center"
                       Margin="0,0,0,16"
                       IsVisible="{Binding AccuracyText, Converter={x:Static StringConverters.IsNotNullOrEmpty}}"/>
            
            <!-- Question and Countries -->
            <StackPanel Grid.Row="4" Spacing="16">
                <!-- Question Text -->
                <TextBlock Text="{Binding QuestionText}"
                           Foreground="White"
                           FontSize="18" FontWeight="SemiBold"
                           TextWrapping="Wrap"
                           HorizontalAlignment="Center"
                           TextAlignment="Center"
                           Margin="0,0,0,8"/>
                
                <!-- Country Cards Container -->
                <Grid ColumnDefinitions="*,Auto,*" RowDefinitions="Auto">
                    <!-- Country 1 -->
                    <Button Grid.Column="0"
                            Classes="country-card"
                            Classes.correct="{Binding IsCountry1Correct}"
                            Classes.wrong="{Binding IsCountry1Wrong}"
                            Command="{Binding SelectCountryCommand}"
                            CommandParameter="1"
                            IsEnabled="{Binding !HasAnswered}"
                            HorizontalAlignment="Stretch">
                        <StackPanel HorizontalAlignment="Center" Spacing="8">
                            <TextBlock Text="{Binding Country1.Flag}" 
                                       FontSize="48" 
                                       HorizontalAlignment="Center"/>
                            <TextBlock Text="{Binding Country1.Name}" 
                                       Foreground="White"
                                       FontSize="14" FontWeight="SemiBold"
                                       TextWrapping="Wrap"
                                       TextAlignment="Center"
                                       MaxWidth="120"/>
                            <TextBlock Text="{Binding Country1Value}"
                                       Foreground="#22c55e"
                                       FontSize="12" FontWeight="Bold"
                                       HorizontalAlignment="Center"
                                       IsVisible="{Binding HasAnswered}"/>
                        </StackPanel>
                    </Button>
                    
                    <!-- VS Badge -->
                    <Border Grid.Column="1" 
                            Background="#3b82f6" 
                            CornerRadius="20"
                            Padding="12,8"
                            VerticalAlignment="Center"
                            Margin="8,0">
                        <TextBlock Text="VS" 
                                   Foreground="White" 
                                   FontWeight="Bold"
                                   FontSize="14"/>
                    </Border>
                    
                    <!-- Country 2 -->
                    <Button Grid.Column="2"
                            Classes="country-card"
                            Classes.correct="{Binding IsCountry2Correct}"
                            Classes.wrong="{Binding IsCountry2Wrong}"
                            Command="{Binding SelectCountryCommand}"
                            CommandParameter="2"
                            IsEnabled="{Binding !HasAnswered}"
                            HorizontalAlignment="Stretch">
                        <StackPanel HorizontalAlignment="Center" Spacing="8">
                            <TextBlock Text="{Binding Country2.Flag}" 
                                       FontSize="48" 
                                       HorizontalAlignment="Center"/>
                            <TextBlock Text="{Binding Country2.Name}" 
                                       Foreground="White"
                                       FontSize="14" FontWeight="SemiBold"
                                       TextWrapping="Wrap"
                                       TextAlignment="Center"
                                       MaxWidth="120"/>
                            <TextBlock Text="{Binding Country2Value}"
                                       Foreground="#22c55e"
                                       FontSize="12" FontWeight="Bold"
                                       HorizontalAlignment="Center"
                                       IsVisible="{Binding HasAnswered}"/>
                        </StackPanel>
                    </Button>
                </Grid>
            </StackPanel>
            
            <!-- Result Message -->
            <Border Grid.Row="5" 
                    Background="#1e293b"
                    CornerRadius="8"
                    Padding="16"
                    Margin="0,16,0,0"
                    IsVisible="{Binding HasAnswered}">
                <TextBlock Text="{Binding ResultMessage}"
                           Foreground="White"
                           FontSize="16"
                           TextWrapping="Wrap"
                           TextAlignment="Center"/>
            </Border>
            
            <!-- Next Button -->
            <Button Grid.Row="6"
                    Content="Next →"
                    Command="{Binding NextRoundCommand}"
                    Background="#3b82f6"
                    Foreground="White"
                    FontSize="16" FontWeight="SemiBold"
                    Padding="24,12"
                    HorizontalAlignment="Center"
                    Margin="0,16,0,8"
                    IsVisible="{Binding HasAnswered}"/>
            
            <!-- Loading Indicator -->
            <StackPanel Grid.Row="4" 
                        HorizontalAlignment="Center" 
                        VerticalAlignment="Center"
                        IsVisible="{Binding IsBusy}">
                <TextBlock Text="Loading..." 
                           Foreground="White" 
                           FontSize="18"/>
            </StackPanel>
        </Grid>
    </ScrollViewer>
</Window>


================================================================================
FILE: src/MyDesktopApplication.Desktop/Views/MainWindow.axaml.cs
SIZE: .44 KB
MODIFIED: 2025-12-21 12:33:54
================================================================================

using Avalonia.Controls;
using MyDesktopApplication.Desktop.ViewModels;

namespace MyDesktopApplication.Desktop.Views;

public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
    }
    
    protected override async void OnOpened(EventArgs e)
    {
        base.OnOpened(e);
        
        if (DataContext is MainWindowViewModel vm)
        {
            await vm.InitializeAsync();
        }
    }
}


================================================================================
FILE: src/MyDesktopApplication.Infrastructure/Data/AppDbContext.cs
SIZE: 1.42 KB
MODIFIED: 2025-12-21 17:15:21
================================================================================

using Microsoft.EntityFrameworkCore;
using MyDesktopApplication.Core.Entities;

namespace MyDesktopApplication.Infrastructure.Data;

/// <summary>
/// Entity Framework Core database context for the application.
/// </summary>
public class AppDbContext : DbContext
{
    public AppDbContext(DbContextOptions<AppDbContext> options) : base(options)
    {
    }

    // Required for design-time migrations
    public AppDbContext() : base(new DbContextOptionsBuilder<AppDbContext>()
        .UseSqlite("Data Source=app.db")
        .Options)
    {
    }

    public DbSet<TodoItem> TodoItems => Set<TodoItem>();
    public DbSet<GameState> GameStates => Set<GameState>();

    protected override void OnModelCreating(ModelBuilder modelBuilder)
    {
        base.OnModelCreating(modelBuilder);

        modelBuilder.Entity<TodoItem>(entity =>
        {
            entity.HasKey(e => e.Id);
            entity.Property(e => e.Title).IsRequired().HasMaxLength(200);
            entity.Property(e => e.Description).HasMaxLength(1000);
            entity.HasIndex(e => e.IsCompleted);
            entity.HasIndex(e => e.DueDate);
        });

        modelBuilder.Entity<GameState>(entity =>
        {
            entity.HasKey(e => e.Id);
            entity.Property(e => e.UserId).IsRequired().HasMaxLength(100);
            entity.HasIndex(e => e.UserId).IsUnique();
            entity.Property(e => e.SelectedQuestionType).HasMaxLength(50);
        });
    }
}


================================================================================
FILE: src/MyDesktopApplication.Infrastructure/Data/DesignTimeDbContextFactory.cs
SIZE: 1.14 KB
MODIFIED: 2025-12-21 15:00:14
================================================================================

using Microsoft.EntityFrameworkCore;
using Microsoft.EntityFrameworkCore.Design;

namespace MyDesktopApplication.Infrastructure.Data;

/// <summary>
/// Factory for creating AppDbContext at design time (for EF migrations).
/// This is required because the Desktop app uses Avalonia's startup,
/// not the standard ASP.NET Core host that EF tools expect.
/// </summary>
public class DesignTimeDbContextFactory : IDesignTimeDbContextFactory<AppDbContext>
{
    public AppDbContext CreateDbContext(string[] args)
    {
        var optionsBuilder = new DbContextOptionsBuilder<AppDbContext>();
        
        // Use SQLite for migrations - this creates the migration files
        // The actual connection string at runtime comes from DI
        var dbPath = Path.Combine(
            Environment.GetFolderPath(Environment.SpecialFolder.LocalApplicationData),
            "MyDesktopApplication",
            "app.db");
        
        // Ensure directory exists
        Directory.CreateDirectory(Path.GetDirectoryName(dbPath)!);
        
        optionsBuilder.UseSqlite($"Data Source={dbPath}");
        
        return new AppDbContext(optionsBuilder.Options);
    }
}


================================================================================
FILE: src/MyDesktopApplication.Infrastructure/DependencyInjection.cs
SIZE: 1.33 KB
MODIFIED: 2025-12-21 12:33:54
================================================================================

using Microsoft.EntityFrameworkCore;
using Microsoft.Extensions.DependencyInjection;
using MyDesktopApplication.Core.Interfaces;
using MyDesktopApplication.Infrastructure.Data;
using MyDesktopApplication.Infrastructure.Repositories;

namespace MyDesktopApplication.Infrastructure;

public static class DependencyInjection
{
    public static IServiceCollection AddInfrastructure(this IServiceCollection services, string? dbPath = null)
    {
        var path = dbPath ?? Path.Combine(
            Environment.GetFolderPath(Environment.SpecialFolder.LocalApplicationData),
            "CountryQuiz",
            "countryquiz.db");
        
        var directory = Path.GetDirectoryName(path);
        if (!string.IsNullOrEmpty(directory) && !Directory.Exists(directory))
        {
            Directory.CreateDirectory(directory);
        }
        
        services.AddDbContext<AppDbContext>(options =>
            options.UseSqlite($"Data Source={path}"));
        
        services.AddScoped<IGameStateRepository, GameStateRepository>();
        
        return services;
    }
    
    public static async Task InitializeDatabaseAsync(IServiceProvider services)
    {
        using var scope = services.CreateScope();
        var context = scope.ServiceProvider.GetRequiredService<AppDbContext>();
        await context.Database.EnsureCreatedAsync();
    }
}


================================================================================
FILE: src/MyDesktopApplication.Infrastructure/MyDesktopApplication.Infrastructure.csproj
SIZE: .55 KB
MODIFIED: 2025-12-21 12:48:54
================================================================================

<Project Sdk="Microsoft.NET.Sdk">
  <PropertyGroup>
    <TargetFramework>net10.0</TargetFramework>
    <ImplicitUsings>enable</ImplicitUsings>
    <Nullable>enable</Nullable>
  </PropertyGroup>
  <ItemGroup>
    <ProjectReference Include="..\MyDesktopApplication.Core\MyDesktopApplication.Core.csproj" />
  </ItemGroup>
  <ItemGroup>
    <PackageReference Include="Microsoft.EntityFrameworkCore" />
    <PackageReference Include="Microsoft.EntityFrameworkCore.Sqlite" />
    <PackageReference Include="Microsoft.Extensions.DependencyInjection" />
  </ItemGroup>
</Project>


================================================================================
FILE: src/MyDesktopApplication.Infrastructure/Repositories/GameStateRepository.cs
SIZE: 2.59 KB
MODIFIED: 2025-12-21 17:15:21
================================================================================

using Microsoft.EntityFrameworkCore;
using MyDesktopApplication.Core.Entities;
using MyDesktopApplication.Core.Interfaces;
using MyDesktopApplication.Infrastructure.Data;

namespace MyDesktopApplication.Infrastructure.Repositories;

/// <summary>
/// Repository for persisting game state to the database.
/// </summary>
public class GameStateRepository : IGameStateRepository
{
    private readonly AppDbContext _context;

    public GameStateRepository(AppDbContext context)
    {
        _context = context;
    }

    public async Task<GameState?> GetByUserIdAsync(string userId, CancellationToken ct = default)
    {
        return await _context.GameStates
            .AsNoTracking()
            .FirstOrDefaultAsync(g => g.UserId == userId, ct);
    }

    public async Task<GameState> GetOrCreateAsync(string userId, CancellationToken ct = default)
    {
        var existing = await _context.GameStates
            .FirstOrDefaultAsync(g => g.UserId == userId, ct);
        
        if (existing != null)
            return existing;

        var newState = new GameState
        {
            UserId = userId,
            Score = 0,
            CurrentStreak = 0,
            BestStreak = 0,
            TotalAnswered = 0,
            TotalCorrect = 0,
            SelectedQuestionType = "Population"
        };
        
        _context.GameStates.Add(newState);
        await _context.SaveChangesAsync(ct);
        return newState;
    }

    public async Task SaveAsync(GameState gameState, CancellationToken ct = default)
    {
        var existing = await _context.GameStates
            .FirstOrDefaultAsync(g => g.UserId == gameState.UserId, ct);
        
        if (existing == null)
        {
            _context.GameStates.Add(gameState);
        }
        else
        {
            existing.Score = gameState.Score;
            existing.CurrentStreak = gameState.CurrentStreak;
            existing.BestStreak = gameState.BestStreak;
            existing.TotalAnswered = gameState.TotalAnswered;
            existing.TotalCorrect = gameState.TotalCorrect;
            existing.SelectedQuestionType = gameState.SelectedQuestionType;
            existing.UpdatedAt = DateTime.UtcNow;
        }
        
        await _context.SaveChangesAsync(ct);
    }

    public async Task ResetAsync(string userId, CancellationToken ct = default)
    {
        var state = await _context.GameStates
            .FirstOrDefaultAsync(g => g.UserId == userId, ct);
        
        if (state != null)
        {
            state.Reset();
            state.UpdatedAt = DateTime.UtcNow;
            await _context.SaveChangesAsync(ct);
        }
    }
}


================================================================================
FILE: src/MyDesktopApplication.Infrastructure/Repositories/Repository.cs
SIZE: 1.76 KB
MODIFIED: 2025-12-20 01:51:45
================================================================================

using System.Linq.Expressions;
using Microsoft.EntityFrameworkCore;
using MyDesktopApplication.Core.Entities;
using MyDesktopApplication.Core.Interfaces;
using MyDesktopApplication.Infrastructure.Data;

namespace MyDesktopApplication.Infrastructure.Repositories;

/// <summary>
/// Generic repository implementation using Entity Framework Core
/// </summary>
public class Repository<T> : IRepository<T> where T : EntityBase
{
    protected readonly AppDbContext Context;
    protected readonly DbSet<T> DbSet;

    public Repository(AppDbContext context)
    {
        Context = context;
        DbSet = context.Set<T>();
    }

    public virtual async Task<T?> GetByIdAsync(Guid id, CancellationToken ct = default)
        => await DbSet.FindAsync([id], ct);

    public virtual async Task<IReadOnlyList<T>> GetAllAsync(CancellationToken ct = default)
        => await DbSet.AsNoTracking().ToListAsync(ct);

    public virtual async Task<IReadOnlyList<T>> FindAsync(
        Expression<Func<T, bool>> predicate, CancellationToken ct = default)
        => await DbSet.AsNoTracking().Where(predicate).ToListAsync(ct);

    public virtual async Task<T> AddAsync(T entity, CancellationToken ct = default)
    {
        await DbSet.AddAsync(entity, ct);
        await Context.SaveChangesAsync(ct);
        return entity;
    }

    public virtual async Task UpdateAsync(T entity, CancellationToken ct = default)
    {
        DbSet.Update(entity);
        await Context.SaveChangesAsync(ct);
    }

    public virtual async Task DeleteAsync(T entity, CancellationToken ct = default)
    {
        DbSet.Remove(entity);
        await Context.SaveChangesAsync(ct);
    }

    public virtual async Task<bool> ExistsAsync(Guid id, CancellationToken ct = default)
        => await DbSet.AnyAsync(e => e.Id == id, ct);
}


================================================================================
FILE: src/MyDesktopApplication.Infrastructure/Repositories/TodoRepository.cs
SIZE: 1.26 KB
MODIFIED: 2025-12-20 01:51:45
================================================================================

using Microsoft.EntityFrameworkCore;
using MyDesktopApplication.Core.Entities;
using MyDesktopApplication.Core.Interfaces;
using MyDesktopApplication.Infrastructure.Data;

namespace MyDesktopApplication.Infrastructure.Repositories;

/// <summary>
/// TodoItem-specific repository implementation
/// </summary>
public class TodoRepository : Repository<TodoItem>, ITodoRepository
{
    public TodoRepository(AppDbContext context) : base(context)
    {
    }

    public async Task<IReadOnlyList<TodoItem>> GetCompletedAsync(CancellationToken ct = default)
        => await DbSet.AsNoTracking()
            .Where(t => t.IsCompleted)
            .OrderByDescending(t => t.UpdatedAt)
            .ToListAsync(ct);

    public async Task<IReadOnlyList<TodoItem>> GetPendingAsync(CancellationToken ct = default)
        => await DbSet.AsNoTracking()
            .Where(t => !t.IsCompleted)
            .OrderBy(t => t.DueDate)
            .ThenByDescending(t => t.Priority)
            .ToListAsync(ct);

    public async Task<IReadOnlyList<TodoItem>> GetOverdueAsync(CancellationToken ct = default)
        => await DbSet.AsNoTracking()
            .Where(t => !t.IsCompleted && t.DueDate != null && t.DueDate < DateTime.UtcNow)
            .OrderBy(t => t.DueDate)
            .ToListAsync(ct);
}


================================================================================
FILE: src/MyDesktopApplication.Shared/Data/CountryData.cs
SIZE: 16.61 KB
MODIFIED: 2025-12-21 17:15:21
================================================================================

using MyDesktopApplication.Core.Entities;

namespace MyDesktopApplication.Shared.Data;

/// <summary>
/// Static country data for the quiz game.
/// Data sources: World Bank, UN, IMF, UNDP (2023/2024 estimates).
/// </summary>
public static class CountryData
{
    public static IReadOnlyList<Country> Countries { get; } = new List<Country>
    {
        // Africa
        new() { Code = "NGA", Name = "Nigeria", Iso2 = "NG", Continent = "Africa", Population = 223800000, Area = 923769, Gdp = 477000000000, GdpPerCapita = 2131, Density = 242, Literacy = 62, Hdi = 0.539, LifeExpectancy = 53.9 },
        new() { Code = "ETH", Name = "Ethiopia", Iso2 = "ET", Continent = "Africa", Population = 126500000, Area = 1104300, Gdp = 156000000000, GdpPerCapita = 1233, Density = 115, Literacy = 52, Hdi = 0.498, LifeExpectancy = 67.8 },
        new() { Code = "EGY", Name = "Egypt", Iso2 = "EG", Continent = "Africa", Population = 105000000, Area = 1002450, Gdp = 476700000000, GdpPerCapita = 4538, Density = 105, Literacy = 71, Hdi = 0.731, LifeExpectancy = 72.1 },
        new() { Code = "ZAF", Name = "South Africa", Iso2 = "ZA", Continent = "Africa", Population = 60000000, Area = 1219090, Gdp = 405000000000, GdpPerCapita = 6750, Density = 49, Literacy = 95, Hdi = 0.713, LifeExpectancy = 65.3 },
        new() { Code = "KEN", Name = "Kenya", Iso2 = "KE", Continent = "Africa", Population = 54000000, Area = 580367, Gdp = 113400000000, GdpPerCapita = 2100, Density = 93, Literacy = 82, Hdi = 0.575, LifeExpectancy = 67.5 },
        new() { Code = "MAR", Name = "Morocco", Iso2 = "MA", Continent = "Africa", Population = 37500000, Area = 446550, Gdp = 142900000000, GdpPerCapita = 3810, Density = 84, Literacy = 74, Hdi = 0.683, LifeExpectancy = 77.4 },
        new() { Code = "GHA", Name = "Ghana", Iso2 = "GH", Continent = "Africa", Population = 33500000, Area = 238535, Gdp = 77590000000, GdpPerCapita = 2316, Density = 140, Literacy = 79, Hdi = 0.632, LifeExpectancy = 64.9 },
        
        // Asia
        new() { Code = "CHN", Name = "China", Iso2 = "CN", Continent = "Asia", Population = 1411750000, Area = 9596961, Gdp = 17963000000000, GdpPerCapita = 12720, Density = 147, Literacy = 97, Hdi = 0.768, LifeExpectancy = 78.2 },
        new() { Code = "IND", Name = "India", Iso2 = "IN", Continent = "Asia", Population = 1428630000, Area = 3287263, Gdp = 3730000000000, GdpPerCapita = 2612, Density = 435, Literacy = 77, Hdi = 0.644, LifeExpectancy = 70.4 },
        new() { Code = "IDN", Name = "Indonesia", Iso2 = "ID", Continent = "Asia", Population = 277500000, Area = 1904569, Gdp = 1319000000000, GdpPerCapita = 4752, Density = 146, Literacy = 96, Hdi = 0.713, LifeExpectancy = 72.3 },
        new() { Code = "PAK", Name = "Pakistan", Iso2 = "PK", Continent = "Asia", Population = 235800000, Area = 881913, Gdp = 376500000000, GdpPerCapita = 1597, Density = 267, Literacy = 59, Hdi = 0.544, LifeExpectancy = 67.3 },
        new() { Code = "BGD", Name = "Bangladesh", Iso2 = "BD", Continent = "Asia", Population = 172000000, Area = 147570, Gdp = 460200000000, GdpPerCapita = 2676, Density = 1166, Literacy = 75, Hdi = 0.661, LifeExpectancy = 73.4 },
        new() { Code = "JPN", Name = "Japan", Iso2 = "JP", Continent = "Asia", Population = 124500000, Area = 377975, Gdp = 4231000000000, GdpPerCapita = 33973, Density = 329, Literacy = 99, Hdi = 0.920, LifeExpectancy = 84.6 },
        new() { Code = "PHL", Name = "Philippines", Iso2 = "PH", Continent = "Asia", Population = 115600000, Area = 300000, Gdp = 404300000000, GdpPerCapita = 3498, Density = 385, Literacy = 98, Hdi = 0.699, LifeExpectancy = 72.1 },
        new() { Code = "VNM", Name = "Vietnam", Iso2 = "VN", Continent = "Asia", Population = 100000000, Area = 331212, Gdp = 449000000000, GdpPerCapita = 4490, Density = 302, Literacy = 96, Hdi = 0.726, LifeExpectancy = 75.8 },
        new() { Code = "TUR", Name = "Turkey", Iso2 = "TR", Continent = "Asia", Population = 85300000, Area = 783356, Gdp = 905500000000, GdpPerCapita = 10618, Density = 109, Literacy = 97, Hdi = 0.838, LifeExpectancy = 78.6 },
        new() { Code = "IRN", Name = "Iran", Iso2 = "IR", Continent = "Asia", Population = 87900000, Area = 1648195, Gdp = 388500000000, GdpPerCapita = 4420, Density = 53, Literacy = 88, Hdi = 0.774, LifeExpectancy = 77.3 },
        new() { Code = "THA", Name = "Thailand", Iso2 = "TH", Continent = "Asia", Population = 71800000, Area = 513120, Gdp = 495300000000, GdpPerCapita = 6900, Density = 140, Literacy = 94, Hdi = 0.800, LifeExpectancy = 79.3 },
        new() { Code = "MMR", Name = "Myanmar", Iso2 = "MM", Continent = "Asia", Population = 54200000, Area = 676578, Gdp = 59400000000, GdpPerCapita = 1096, Density = 80, Literacy = 90, Hdi = 0.585, LifeExpectancy = 69.1 },
        new() { Code = "KOR", Name = "South Korea", Iso2 = "KR", Continent = "Asia", Population = 51700000, Area = 100210, Gdp = 1665000000000, GdpPerCapita = 32220, Density = 516, Literacy = 99, Hdi = 0.925, LifeExpectancy = 83.7 },
        new() { Code = "MYS", Name = "Malaysia", Iso2 = "MY", Continent = "Asia", Population = 33940000, Area = 330803, Gdp = 407000000000, GdpPerCapita = 11993, Density = 103, Literacy = 95, Hdi = 0.803, LifeExpectancy = 76.9 },
        new() { Code = "SAU", Name = "Saudi Arabia", Iso2 = "SA", Continent = "Asia", Population = 36400000, Area = 2149690, Gdp = 1069000000000, GdpPerCapita = 29369, Density = 17, Literacy = 98, Hdi = 0.875, LifeExpectancy = 76.9 },
        new() { Code = "NPL", Name = "Nepal", Iso2 = "NP", Continent = "Asia", Population = 30900000, Area = 147181, Gdp = 40830000000, GdpPerCapita = 1321, Density = 210, Literacy = 68, Hdi = 0.602, LifeExpectancy = 71.7 },
        new() { Code = "ARE", Name = "United Arab Emirates", Iso2 = "AE", Continent = "Asia", Population = 9440000, Area = 83600, Gdp = 498000000000, GdpPerCapita = 52757, Density = 113, Literacy = 98, Hdi = 0.911, LifeExpectancy = 78.7 },
        new() { Code = "ISR", Name = "Israel", Iso2 = "IL", Continent = "Asia", Population = 9730000, Area = 20770, Gdp = 525000000000, GdpPerCapita = 53969, Density = 468, Literacy = 98, Hdi = 0.915, LifeExpectancy = 83.5 },
        new() { Code = "SGP", Name = "Singapore", Iso2 = "SG", Continent = "Asia", Population = 5450000, Area = 733, Gdp = 501400000000, GdpPerCapita = 91990, Density = 7438, Literacy = 97, Hdi = 0.939, LifeExpectancy = 84.1 },
        
        // Europe
        new() { Code = "RUS", Name = "Russia", Iso2 = "RU", Continent = "Europe", Population = 144400000, Area = 17098242, Gdp = 2240000000000, GdpPerCapita = 15512, Density = 8, Literacy = 100, Hdi = 0.822, LifeExpectancy = 73.2 },
        new() { Code = "DEU", Name = "Germany", Iso2 = "DE", Continent = "Europe", Population = 83200000, Area = 357022, Gdp = 4259000000000, GdpPerCapita = 51203, Density = 233, Literacy = 99, Hdi = 0.942, LifeExpectancy = 81.9 },
        new() { Code = "GBR", Name = "United Kingdom", Iso2 = "GB", Continent = "Europe", Population = 67000000, Area = 242495, Gdp = 3070000000000, GdpPerCapita = 45820, Density = 276, Literacy = 99, Hdi = 0.929, LifeExpectancy = 82.0 },
        new() { Code = "FRA", Name = "France", Iso2 = "FR", Continent = "Europe", Population = 67750000, Area = 643801, Gdp = 2937000000000, GdpPerCapita = 43343, Density = 105, Literacy = 99, Hdi = 0.903, LifeExpectancy = 83.0 },
        new() { Code = "ITA", Name = "Italy", Iso2 = "IT", Continent = "Europe", Population = 58900000, Area = 301340, Gdp = 2107000000000, GdpPerCapita = 35776, Density = 196, Literacy = 99, Hdi = 0.895, LifeExpectancy = 84.0 },
        new() { Code = "ESP", Name = "Spain", Iso2 = "ES", Continent = "Europe", Population = 47420000, Area = 505990, Gdp = 1492000000000, GdpPerCapita = 31468, Density = 94, Literacy = 98, Hdi = 0.905, LifeExpectancy = 84.4 },
        new() { Code = "UKR", Name = "Ukraine", Iso2 = "UA", Continent = "Europe", Population = 37000000, Area = 603550, Gdp = 160500000000, GdpPerCapita = 4338, Density = 61, Literacy = 100, Hdi = 0.773, LifeExpectancy = 73.6 },
        new() { Code = "POL", Name = "Poland", Iso2 = "PL", Continent = "Europe", Population = 37700000, Area = 312696, Gdp = 688200000000, GdpPerCapita = 18258, Density = 121, Literacy = 99, Hdi = 0.876, LifeExpectancy = 78.8 },
        new() { Code = "ROU", Name = "Romania", Iso2 = "RO", Continent = "Europe", Population = 19050000, Area = 238397, Gdp = 312800000000, GdpPerCapita = 16422, Density = 80, Literacy = 99, Hdi = 0.821, LifeExpectancy = 76.6 },
        new() { Code = "NLD", Name = "Netherlands", Iso2 = "NL", Continent = "Europe", Population = 17590000, Area = 41543, Gdp = 1009000000000, GdpPerCapita = 57371, Density = 423, Literacy = 99, Hdi = 0.946, LifeExpectancy = 82.8 },
        new() { Code = "BEL", Name = "Belgium", Iso2 = "BE", Continent = "Europe", Population = 11590000, Area = 30528, Gdp = 578200000000, GdpPerCapita = 49887, Density = 380, Literacy = 99, Hdi = 0.937, LifeExpectancy = 82.2 },
        new() { Code = "GRC", Name = "Greece", Iso2 = "GR", Continent = "Europe", Population = 10360000, Area = 131957, Gdp = 218000000000, GdpPerCapita = 21044, Density = 79, Literacy = 98, Hdi = 0.887, LifeExpectancy = 82.2 },
        new() { Code = "CZE", Name = "Czechia", Iso2 = "CZ", Continent = "Europe", Population = 10510000, Area = 78867, Gdp = 290900000000, GdpPerCapita = 27683, Density = 133, Literacy = 99, Hdi = 0.889, LifeExpectancy = 79.9 },
        new() { Code = "PRT", Name = "Portugal", Iso2 = "PT", Continent = "Europe", Population = 10330000, Area = 92212, Gdp = 255850000000, GdpPerCapita = 24775, Density = 112, Literacy = 96, Hdi = 0.866, LifeExpectancy = 82.7 },
        new() { Code = "SWE", Name = "Sweden", Iso2 = "SE", Continent = "Europe", Population = 10540000, Area = 450295, Gdp = 585940000000, GdpPerCapita = 55603, Density = 23, Literacy = 99, Hdi = 0.947, LifeExpectancy = 83.3 },
        new() { Code = "HUN", Name = "Hungary", Iso2 = "HU", Continent = "Europe", Population = 9600000, Area = 93028, Gdp = 188500000000, GdpPerCapita = 19635, Density = 103, Literacy = 99, Hdi = 0.846, LifeExpectancy = 77.0 },
        new() { Code = "AUT", Name = "Austria", Iso2 = "AT", Continent = "Europe", Population = 9040000, Area = 83871, Gdp = 471400000000, GdpPerCapita = 52152, Density = 108, Literacy = 99, Hdi = 0.916, LifeExpectancy = 82.0 },
        new() { Code = "CHE", Name = "Switzerland", Iso2 = "CH", Continent = "Europe", Population = 8770000, Area = 41285, Gdp = 884940000000, GdpPerCapita = 100916, Density = 212, Literacy = 99, Hdi = 0.962, LifeExpectancy = 84.4 },
        new() { Code = "BGR", Name = "Bulgaria", Iso2 = "BG", Continent = "Europe", Population = 6870000, Area = 110879, Gdp = 89040000000, GdpPerCapita = 12960, Density = 62, Literacy = 98, Hdi = 0.795, LifeExpectancy = 75.1 },
        new() { Code = "DNK", Name = "Denmark", Iso2 = "DK", Continent = "Europe", Population = 5910000, Area = 43094, Gdp = 395400000000, GdpPerCapita = 66914, Density = 137, Literacy = 99, Hdi = 0.948, LifeExpectancy = 81.6 },
        new() { Code = "FIN", Name = "Finland", Iso2 = "FI", Continent = "Europe", Population = 5540000, Area = 338145, Gdp = 300190000000, GdpPerCapita = 54188, Density = 16, Literacy = 99, Hdi = 0.940, LifeExpectancy = 82.2 },
        new() { Code = "NOR", Name = "Norway", Iso2 = "NO", Continent = "Europe", Population = 5470000, Area = 323802, Gdp = 485510000000, GdpPerCapita = 88783, Density = 17, Literacy = 99, Hdi = 0.961, LifeExpectancy = 83.2 },
        new() { Code = "IRL", Name = "Ireland", Iso2 = "IE", Continent = "Europe", Population = 5130000, Area = 70273, Gdp = 504180000000, GdpPerCapita = 98268, Density = 73, Literacy = 99, Hdi = 0.945, LifeExpectancy = 82.8 },
        
        // North America
        new() { Code = "USA", Name = "United States", Iso2 = "US", Continent = "North America", Population = 331900000, Area = 9833517, Gdp = 27360000000000, GdpPerCapita = 82422, Density = 34, Literacy = 99, Hdi = 0.921, LifeExpectancy = 79.1 },
        new() { Code = "MEX", Name = "Mexico", Iso2 = "MX", Continent = "North America", Population = 128900000, Area = 1964375, Gdp = 1811000000000, GdpPerCapita = 14050, Density = 66, Literacy = 95, Hdi = 0.758, LifeExpectancy = 75.0 },
        new() { Code = "CAN", Name = "Canada", Iso2 = "CA", Continent = "North America", Population = 40100000, Area = 9984670, Gdp = 2139000000000, GdpPerCapita = 53340, Density = 4, Literacy = 99, Hdi = 0.936, LifeExpectancy = 82.7 },
        new() { Code = "GTM", Name = "Guatemala", Iso2 = "GT", Continent = "North America", Population = 18090000, Area = 108889, Gdp = 95000000000, GdpPerCapita = 5251, Density = 166, Literacy = 83, Hdi = 0.627, LifeExpectancy = 74.3 },
        new() { Code = "CUB", Name = "Cuba", Iso2 = "CU", Continent = "North America", Population = 11100000, Area = 109884, Gdp = 107400000000, GdpPerCapita = 9676, Density = 101, Literacy = 100, Hdi = 0.764, LifeExpectancy = 79.2 },
        new() { Code = "DOM", Name = "Dominican Republic", Iso2 = "DO", Continent = "North America", Population = 11230000, Area = 48671, Gdp = 113640000000, GdpPerCapita = 10119, Density = 231, Literacy = 95, Hdi = 0.767, LifeExpectancy = 74.1 },
        new() { Code = "HND", Name = "Honduras", Iso2 = "HN", Continent = "North America", Population = 10280000, Area = 112492, Gdp = 31720000000, GdpPerCapita = 3086, Density = 91, Literacy = 89, Hdi = 0.621, LifeExpectancy = 75.3 },
        new() { Code = "HTI", Name = "Haiti", Iso2 = "HT", Continent = "North America", Population = 11720000, Area = 27750, Gdp = 19710000000, GdpPerCapita = 1682, Density = 422, Literacy = 62, Hdi = 0.535, LifeExpectancy = 64.9 },
        
        // South America
        new() { Code = "BRA", Name = "Brazil", Iso2 = "BR", Continent = "South America", Population = 214300000, Area = 8515767, Gdp = 2126000000000, GdpPerCapita = 9921, Density = 25, Literacy = 93, Hdi = 0.760, LifeExpectancy = 76.4 },
        new() { Code = "COL", Name = "Colombia", Iso2 = "CO", Continent = "South America", Population = 51870000, Area = 1141748, Gdp = 363500000000, GdpPerCapita = 7007, Density = 45, Literacy = 95, Hdi = 0.752, LifeExpectancy = 77.3 },
        new() { Code = "ARG", Name = "Argentina", Iso2 = "AR", Continent = "South America", Population = 45810000, Area = 2780400, Gdp = 641100000000, GdpPerCapita = 13996, Density = 16, Literacy = 99, Hdi = 0.842, LifeExpectancy = 77.1 },
        new() { Code = "PER", Name = "Peru", Iso2 = "PE", Continent = "South America", Population = 34050000, Area = 1285216, Gdp = 267600000000, GdpPerCapita = 7859, Density = 26, Literacy = 95, Hdi = 0.762, LifeExpectancy = 77.4 },
        new() { Code = "VEN", Name = "Venezuela", Iso2 = "VE", Continent = "South America", Population = 28400000, Area = 916445, Gdp = 92100000000, GdpPerCapita = 3243, Density = 31, Literacy = 97, Hdi = 0.691, LifeExpectancy = 72.1 },
        new() { Code = "CHL", Name = "Chile", Iso2 = "CL", Continent = "South America", Population = 19490000, Area = 756102, Gdp = 335500000000, GdpPerCapita = 17218, Density = 26, Literacy = 97, Hdi = 0.855, LifeExpectancy = 80.7 },
        new() { Code = "ECU", Name = "Ecuador", Iso2 = "EC", Continent = "South America", Population = 18190000, Area = 256369, Gdp = 118850000000, GdpPerCapita = 6534, Density = 71, Literacy = 94, Hdi = 0.765, LifeExpectancy = 77.9 },
        new() { Code = "BOL", Name = "Bolivia", Iso2 = "BO", Continent = "South America", Population = 12080000, Area = 1098581, Gdp = 44010000000, GdpPerCapita = 3644, Density = 11, Literacy = 94, Hdi = 0.692, LifeExpectancy = 72.1 },
        new() { Code = "PRY", Name = "Paraguay", Iso2 = "PY", Continent = "South America", Population = 6780000, Area = 406752, Gdp = 42000000000, GdpPerCapita = 6195, Density = 17, Literacy = 95, Hdi = 0.717, LifeExpectancy = 74.5 },
        new() { Code = "URY", Name = "Uruguay", Iso2 = "UY", Continent = "South America", Population = 3420000, Area = 176215, Gdp = 71180000000, GdpPerCapita = 20813, Density = 19, Literacy = 99, Hdi = 0.830, LifeExpectancy = 78.4 },
        
        // Oceania
        new() { Code = "AUS", Name = "Australia", Iso2 = "AU", Continent = "Oceania", Population = 26440000, Area = 7692024, Gdp = 1675000000000, GdpPerCapita = 63360, Density = 3, Literacy = 99, Hdi = 0.951, LifeExpectancy = 84.5 },
        new() { Code = "PNG", Name = "Papua New Guinea", Iso2 = "PG", Continent = "Oceania", Population = 10140000, Area = 462840, Gdp = 30600000000, GdpPerCapita = 3018, Density = 22, Literacy = 65, Hdi = 0.558, LifeExpectancy = 65.4 },
        new() { Code = "NZL", Name = "New Zealand", Iso2 = "NZ", Continent = "Oceania", Population = 5120000, Area = 268021, Gdp = 247700000000, GdpPerCapita = 48379, Density = 19, Literacy = 99, Hdi = 0.937, LifeExpectancy = 82.5 },
        new() { Code = "FJI", Name = "Fiji", Iso2 = "FJ", Continent = "Oceania", Population = 930000, Area = 18274, Gdp = 5310000000, GdpPerCapita = 5710, Density = 51, Literacy = 99, Hdi = 0.730, LifeExpectancy = 67.4 },
    };
}


================================================================================
FILE: src/MyDesktopApplication.Shared/Data/MotivationalMessages.cs
SIZE: 2.71 KB
MODIFIED: 2025-12-21 12:33:54
================================================================================

namespace MyDesktopApplication.Shared.Data;

/// <summary>
/// Provides encouraging messages based on player performance.
/// </summary>
public static class MotivationalMessages
{
    private static readonly Random _random = new();
    
    private static readonly string[] CorrectMessages =
    [
        "🎉 Correct! You're on fire!",
        "✨ Brilliant! Keep it up!",
        "🌟 Amazing knowledge!",
        "💪 You really know your geography!",
        "🎯 Spot on! Nice work!",
        "🏆 Champion answer!",
        "📚 Well studied!",
        "🌍 World expert in the making!"
    ];
    
    private static readonly string[] IncorrectMessages =
    [
        "Not quite, but you're learning!",
        "Good try! Now you know!",
        "Interesting fact to remember!",
        "Keep going, you've got this!",
        "Every answer is a learning opportunity!",
        "Don't give up, you're improving!",
        "That's a tricky one!",
        "You'll get the next one!"
    ];
    
    private static readonly string[] StreakMessages =
    [
        "🔥 {0} in a row!",
        "🔥 {0} streak! Incredible!",
        "🔥 {0} consecutive! You're unstoppable!",
        "🔥 {0} correct answers! Amazing run!"
    ];
    
    private static readonly string[] NewBestMessages =
    [
        "🏆 NEW PERSONAL BEST! {0} streak!",
        "⭐ NEW RECORD! {0} in a row!",
        "🎊 PERSONAL BEST! {0} streak!"
    ];
    
    private static readonly string[] ResetMessages =
    [
        "Fresh start! Good luck! 🍀",
        "Ready for a new challenge! 💪",
        "Let's see what you've got! 🌟",
        "New game, new opportunities! 🎯"
    ];
    
    public static string GetCorrectMessage() => 
        CorrectMessages[_random.Next(CorrectMessages.Length)];
    
    public static string GetIncorrectMessage() => 
        IncorrectMessages[_random.Next(IncorrectMessages.Length)];
    
    public static string GetStreakMessage(int streak)
    {
        if (streak < 3) return string.Empty;
        var template = StreakMessages[_random.Next(StreakMessages.Length)];
        return string.Format(template, streak);
    }
    
    public static string GetNewBestMessage(int streak)
    {
        var template = NewBestMessages[_random.Next(NewBestMessages.Length)];
        return string.Format(template, streak);
    }
    
    public static string GetResetMessage() => 
        ResetMessages[_random.Next(ResetMessages.Length)];
    
    public static string GetAccuracyComment(double accuracy) => accuracy switch
    {
        >= 90 => "🏅 Geography genius!",
        >= 75 => "📊 Great accuracy!",
        >= 60 => "👍 Solid knowledge!",
        >= 40 => "📈 Room to grow!",
        _ => "🌱 Keep learning!"
    };
}


================================================================================
FILE: src/MyDesktopApplication.Shared/DTOs/TodoItemDto.cs
SIZE: .64 KB
MODIFIED: 2025-12-20 01:51:45
================================================================================

using CommunityToolkit.Mvvm.ComponentModel;

namespace MyDesktopApplication.Shared.DTOs;

/// <summary>
/// Data transfer object for TodoItem, used in ViewModels
/// </summary>
public partial class TodoItemDto : ObservableObject
{
    public Guid Id { get; set; }

    [ObservableProperty]
    private string _title = string.Empty;

    [ObservableProperty]
    private string? _description;

    [ObservableProperty]
    private bool _isCompleted;

    [ObservableProperty]
    private DateTime? _dueDate;

    [ObservableProperty]
    private int _priority;

    public bool IsOverdue => DueDate.HasValue && DueDate.Value < DateTime.UtcNow && !IsCompleted;
}


================================================================================
FILE: src/MyDesktopApplication.Shared/MyDesktopApplication.Shared.csproj
SIZE: .45 KB
MODIFIED: 2025-12-21 12:48:54
================================================================================

<Project Sdk="Microsoft.NET.Sdk">
  <PropertyGroup>
    <TargetFramework>net10.0</TargetFramework>
    <ImplicitUsings>enable</ImplicitUsings>
    <Nullable>enable</Nullable>
  </PropertyGroup>
  <ItemGroup>
    <ProjectReference Include="..\MyDesktopApplication.Core\MyDesktopApplication.Core.csproj" />
  </ItemGroup>
  <ItemGroup>
    <PackageReference Include="CommunityToolkit.Mvvm" />
    <PackageReference Include="FluentValidation" />
  </ItemGroup>
</Project>


================================================================================
FILE: src/MyDesktopApplication.Shared/ViewModels/CountryQuizViewModel.cs
SIZE: 7.22 KB
MODIFIED: 2025-12-21 17:15:21
================================================================================

using System.Collections.ObjectModel;
using CommunityToolkit.Mvvm.ComponentModel;
using CommunityToolkit.Mvvm.Input;
using MyDesktopApplication.Core.Entities;
using MyDesktopApplication.Core.Interfaces;
using MyDesktopApplication.Shared.Data;

namespace MyDesktopApplication.Shared.ViewModels;

/// <summary>
/// ViewModel for the Country Quiz game.
/// </summary>
public partial class CountryQuizViewModel : ObservableObject
{
    private readonly IGameStateRepository? _gameStateRepository;
    private readonly Random _random = new();
    private Country? _country1;
    private Country? _country2;
    private GameState _gameState = new();
    private string _selectedQuestionType = "Population";
    
    [ObservableProperty] private string _questionText = "Loading...";
    [ObservableProperty] private string _country1Name = "";
    [ObservableProperty] private string _country2Name = "";
    [ObservableProperty] private string _resultMessage = "";
    [ObservableProperty] private string _motivationalMessage = "";
    [ObservableProperty] private bool _showResult;
    [ObservableProperty] private bool _isCorrect;
    [ObservableProperty] private int _score;
    [ObservableProperty] private int _streak;
    [ObservableProperty] private int _bestStreak;
    [ObservableProperty] private double _accuracy;
    [ObservableProperty] private string _country1Value = "";
    [ObservableProperty] private string _country2Value = "";

    public ObservableCollection<string> QuestionTypes { get; } = new()
    {
        "Population", "Area", "GDP", "GDP per Capita", 
        "Density", "Literacy", "HDI", "Life Expectancy"
    };

    public string SelectedQuestionType
    {
        get => _selectedQuestionType;
        set
        {
            if (SetProperty(ref _selectedQuestionType, value))
            {
                GenerateNewQuestion();
            }
        }
    }

    public CountryQuizViewModel() : this(null) { }

    public CountryQuizViewModel(IGameStateRepository? gameStateRepository)
    {
        _gameStateRepository = gameStateRepository;
        _ = InitializeAsync();
    }

    private async Task InitializeAsync()
    {
        if (_gameStateRepository != null)
        {
            _gameState = await _gameStateRepository.GetOrCreateAsync("default");
            UpdateScoreDisplay();
        }
        GenerateNewQuestion();
    }

    private void GenerateNewQuestion()
    {
        var countries = CountryData.Countries.ToList();
        var idx1 = _random.Next(countries.Count);
        int idx2;
        do { idx2 = _random.Next(countries.Count); } while (idx2 == idx1);

        _country1 = countries[idx1];
        _country2 = countries[idx2];

        Country1Name = _country1.Name;
        Country2Name = _country2.Name;
        QuestionText = GetQuestionText();
        ShowResult = false;
        ResultMessage = "";
        MotivationalMessage = "";
        Country1Value = "";
        Country2Value = "";
    }

    private string GetQuestionText() => SelectedQuestionType switch
    {
        "Population" => "Which country has a higher population?",
        "Area" => "Which country is larger by area?",
        "GDP" => "Which country has a higher GDP?",
        "GDP per Capita" => "Which country has a higher GDP per capita?",
        "Density" => "Which country has a higher population density?",
        "Literacy" => "Which country has a higher literacy rate?",
        "HDI" => "Which country has a higher Human Development Index?",
        "Life Expectancy" => "Which country has a higher life expectancy?",
        _ => "Which country has a higher population?"
    };

    private double GetValue(Country country) => SelectedQuestionType switch
    {
        "Population" => country.Population,
        "Area" => country.Area,
        "GDP" => country.Gdp,
        "GDP per Capita" => country.GdpPerCapita,
        "Density" => country.Density,
        "Literacy" => country.Literacy,
        "HDI" => country.Hdi,
        "Life Expectancy" => country.LifeExpectancy,
        _ => country.Population
    };

    private string FormatValue(double value) => SelectedQuestionType switch
    {
        "Population" => value >= 1_000_000_000 ? $"{value / 1_000_000_000:F2}B" :
                        value >= 1_000_000 ? $"{value / 1_000_000:F1}M" :
                        value >= 1_000 ? $"{value / 1_000:F1}K" : $"{value:N0}",
        "Area" => $"{value:N0} km²",
        "GDP" => value >= 1_000_000_000_000 ? $"${value / 1_000_000_000_000:F2}T" :
                 value >= 1_000_000_000 ? $"${value / 1_000_000_000:F1}B" : $"${value / 1_000_000:F0}M",
        "GDP per Capita" => $"${value:N0}",
        "Density" => $"{value:N1}/km²",
        "Literacy" => $"{value:F1}%",
        "HDI" => $"{value:F3}",
        "Life Expectancy" => $"{value:F1} years",
        _ => value.ToString("N0")
    };

    [RelayCommand]
    private async Task SelectCountry1Async()
    {
        await ProcessAnswerAsync(1);
    }

    [RelayCommand]
    private async Task SelectCountry2Async()
    {
        await ProcessAnswerAsync(2);
    }

    private async Task ProcessAnswerAsync(int selection)
    {
        if (_country1 == null || _country2 == null || ShowResult) return;

        var val1 = GetValue(_country1);
        var val2 = GetValue(_country2);
        var correct = val1 > val2 ? 1 : 2;

        IsCorrect = selection == correct;
        _gameState.RecordAnswer(IsCorrect);

        Country1Value = FormatValue(val1);
        Country2Value = FormatValue(val2);

        if (IsCorrect)
        {
            ResultMessage = "✓ Correct!";
            MotivationalMessage = GetCorrectMessage(_gameState.CurrentStreak, _gameState.BestStreak);
        }
        else
        {
            ResultMessage = "✗ Incorrect";
            MotivationalMessage = GetIncorrectMessage();
        }

        ShowResult = true;
        UpdateScoreDisplay();

        if (_gameStateRepository != null)
        {
            await _gameStateRepository.SaveAsync(_gameState);
        }
    }

    private string GetCorrectMessage(int streak, int bestStreak)
    {
        if (streak == bestStreak && streak > 1)
            return $"🏆 NEW RECORD! {streak} in a row!";
        if (streak >= 10) return $"🔥🔥🔥 UNSTOPPABLE! {streak} streak!";
        if (streak >= 5) return $"🔥🔥 On fire! {streak} in a row!";
        if (streak >= 3) return $"🔥 Hot streak! {streak} correct!";
        return new[] { "Great job!", "Well done!", "You got it!", "Excellent!", "Nice one!" }[_random.Next(5)];
    }

    private string GetIncorrectMessage()
    {
        return new[] { 
            "Keep trying!", "You'll get the next one!", 
            "Learning every day!", "Don't give up!", "Almost had it!" 
        }[_random.Next(5)];
    }

    private void UpdateScoreDisplay()
    {
        Score = _gameState.Score;
        Streak = _gameState.CurrentStreak;
        BestStreak = _gameState.BestStreak;
        Accuracy = _gameState.AccuracyPercentage;
    }

    [RelayCommand]
    private void NextQuestion()
    {
        GenerateNewQuestion();
    }

    [RelayCommand]
    private async Task ResetAsync()
    {
        _gameState.Reset();
        UpdateScoreDisplay();
        GenerateNewQuestion();

        if (_gameStateRepository != null)
        {
            await _gameStateRepository.SaveAsync(_gameState);
        }
    }
}


================================================================================
FILE: src/MyDesktopApplication.Shared/ViewModels/MainViewModel.cs
SIZE: 1.85 KB
MODIFIED: 2025-12-20 02:30:20
================================================================================

using CommunityToolkit.Mvvm.ComponentModel;
using CommunityToolkit.Mvvm.Input;
using MyDesktopApplication.Core.Entities;
using System.Collections.ObjectModel;
using System.Threading.Tasks;

namespace MyDesktopApplication.Shared.ViewModels;

/// <summary>
/// Main ViewModel shared between Desktop and Android
/// </summary>
public partial class MainViewModel : ViewModelBase
{
    [ObservableProperty]
    private string _greeting = "Welcome to Avalonia!";

    [ObservableProperty]
    private int _counter;

    [ObservableProperty]
    private ObservableCollection<TodoItem> _todoItems = [];

    [ObservableProperty]
    private string _newTodoTitle = string.Empty;

    [RelayCommand]
    private void IncrementCounter()
    {
        Counter++;
        Greeting = Counter switch
        {
            1 => "You clicked once!",
            < 5 => $"You clicked {Counter} times",
            < 10 => $"Wow, {Counter} clicks! Keep going!",
            _ => $"Amazing! {Counter} clicks!"
        };
    }

    [RelayCommand]
    private async Task LoadDataAsync()
    {
        IsBusy = true;
        ClearError();
        try
        {
            // Simulate loading
            await Task.Delay(1000);
        }
        catch (System.Exception ex)
        {
            SetError($"Failed to load: {ex.Message}");
        }
        finally
        {
            IsBusy = false;
        }
    }

    [RelayCommand]
    private void AddTodo()
    {
        if (string.IsNullOrWhiteSpace(NewTodoTitle))
            return;

        var todo = new TodoItem { Title = NewTodoTitle.Trim() };
        TodoItems.Add(todo);
        NewTodoTitle = string.Empty;
    }

    [RelayCommand]
    private void ToggleTodo(TodoItem? todo)
    {
        if (todo is null)
            return;

        if (todo.IsCompleted)
            todo.MarkIncomplete();
        else
            todo.MarkComplete();
    }
}


================================================================================
FILE: src/MyDesktopApplication.Shared/ViewModels/ViewModelBase.cs
SIZE: 1.26 KB
MODIFIED: 2025-12-21 15:35:39
================================================================================

using System.ComponentModel;
using CommunityToolkit.Mvvm.ComponentModel;

namespace MyDesktopApplication.Shared.ViewModels;

/// <summary>
/// Base class for all ViewModels with common functionality
/// </summary>
public abstract partial class ViewModelBase : ObservableObject
{
    [ObservableProperty]
    private bool _isBusy;
    
    [ObservableProperty]
    private string? _errorMessage;
    
    [ObservableProperty]
    private bool _hasError;
    
    /// <summary>
    /// Clears any error state
    /// </summary>
    protected void ClearError()
    {
        ErrorMessage = null;
        HasError = false;
    }
    
    /// <summary>
    /// Sets an error message
    /// </summary>
    protected void SetError(string message)
    {
        ErrorMessage = message;
        HasError = true;
    }
    
    /// <summary>
    /// Executes an async operation with busy state management
    /// </summary>
    protected async Task ExecuteBusyAsync(Func<Task> operation)
    {
        if (IsBusy) return;
        
        try
        {
            IsBusy = true;
            ClearError();
            await operation();
        }
        catch (Exception ex)
        {
            SetError(ex.Message);
        }
        finally
        {
            IsBusy = false;
        }
    }
}


================================================================================
FILE: tests/MyDesktopApplication.Core.Tests/GameStateTests.cs
SIZE: 1.72 KB
MODIFIED: 2025-12-21 16:51:26
================================================================================

using Xunit;
using Shouldly;
using MyDesktopApplication.Core.Entities;

namespace MyDesktopApplication.Core.Tests;

public class GameStateTests
{
    [Fact]
    public void RecordAnswer_Correct_ShouldIncrementScoresAndStreak()
    {
        var state = new GameState { UserId = "test" };
        
        state.RecordAnswer(true);
        
        state.CurrentScore.ShouldBe(1);
        state.HighScore.ShouldBe(1);
        state.CurrentStreak.ShouldBe(1);
        state.BestStreak.ShouldBe(1);
        state.CorrectAnswers.ShouldBe(1);
        state.TotalQuestions.ShouldBe(1);
    }

    [Fact]
    public void RecordAnswer_Wrong_ShouldResetCurrentScoreAndStreak()
    {
        var state = new GameState { UserId = "test" };
        state.RecordAnswer(true);
        state.RecordAnswer(true);
        
        state.RecordAnswer(false);
        
        state.CurrentScore.ShouldBe(0);
        state.CurrentStreak.ShouldBe(0);
        state.HighScore.ShouldBe(2);
        state.BestStreak.ShouldBe(2);
    }

    [Fact]
    public void Reset_ShouldKeepHighScoreAndBestStreak()
    {
        var state = new GameState { UserId = "test" };
        state.RecordAnswer(true);
        state.RecordAnswer(true);
        state.RecordAnswer(true);
        
        state.Reset();
        
        state.CurrentScore.ShouldBe(0);
        state.CurrentStreak.ShouldBe(0);
        state.HighScore.ShouldBe(3);
        state.BestStreak.ShouldBe(3);
    }

    [Fact]
    public void Accuracy_ShouldCalculateCorrectly()
    {
        var state = new GameState { UserId = "test" };
        state.RecordAnswer(true);
        state.RecordAnswer(true);
        state.RecordAnswer(false);
        state.RecordAnswer(true);
        
        state.Accuracy.ShouldBe(75.0);
    }
}


================================================================================
FILE: tests/MyDesktopApplication.Core.Tests/MyDesktopApplication.Core.Tests.csproj
SIZE: .76 KB
MODIFIED: 2025-12-21 16:51:26
================================================================================

<Project Sdk="Microsoft.NET.Sdk">
  <PropertyGroup>
    <TargetFramework>net10.0</TargetFramework>
    <ImplicitUsings>enable</ImplicitUsings>
    <Nullable>enable</Nullable>
    <IsPackable>false</IsPackable>
    <IsTestProject>true</IsTestProject>
  </PropertyGroup>
  <ItemGroup>
    <PackageReference Include="Microsoft.NET.Test.Sdk" />
    <PackageReference Include="xunit" />
    <PackageReference Include="xunit.runner.visualstudio" />
    <PackageReference Include="Shouldly" />
    <PackageReference Include="NSubstitute" />
    <PackageReference Include="Bogus" />
    <PackageReference Include="coverlet.collector" />
  </ItemGroup>
  <ItemGroup>
    <ProjectReference Include="..\..\src\MyDesktopApplication.Core\MyDesktopApplication.Core.csproj" />
  </ItemGroup>
</Project>


================================================================================
FILE: tests/MyDesktopApplication.Core.Tests/QuestionTypeTests.cs
SIZE: 1.89 KB
MODIFIED: 2025-12-21 17:24:51
================================================================================

using Xunit;
using Shouldly;
using MyDesktopApplication.Core.Entities;

namespace MyDesktopApplication.Core.Tests;

public class QuestionTypeTests
{
    [Theory]
    [InlineData(QuestionType.Population, "Population")]
    [InlineData(QuestionType.Area, "Area (km²)")]
    [InlineData(QuestionType.GdpTotal, "GDP (Total)")]
    [InlineData(QuestionType.GdpPerCapita, "GDP per Capita")]
    public void GetDisplayName_ShouldReturnCorrectName(QuestionType type, string expected)
    {
        type.GetDisplayName().ShouldBe(expected);
    }

    [Theory]
    [InlineData(QuestionType.Population, "Which country has a higher population?")]
    [InlineData(QuestionType.Area, "Which country has a larger area?")]
    public void GetQuestion_ShouldReturnCorrectQuestion(QuestionType type, string expected)
    {
        type.GetQuestion().ShouldBe(expected);
    }

    [Fact]
    public void GetValue_ShouldReturnCorrectPropertyValue()
    {
        var country = new Country
        {
            Name = "Test",
            Code = "TS",
            Continent = "Test",
            Flag = "🏳",
            Population = 1000000,
            Area = 50000,
            Gdp = 100000000000,
            GdpPerCapita = 50000,
            PopulationDensity = 20,
            LiteracyRate = 99.5,
            Hdi = 0.95,
            LifeExpectancy = 80.5
        };

        QuestionType.Population.GetValue(country).ShouldBe(1000000);
        QuestionType.Area.GetValue(country).ShouldBe(50000);
        QuestionType.GdpPerCapita.GetValue(country).ShouldBe(50000);
    }

    [Fact]
    public void FormatValue_ShouldFormatCorrectly()
    {
        QuestionType.Population.FormatValue(1500000000).ShouldBe("1.50B");
        QuestionType.Population.FormatValue(50000000).ShouldBe("50.00M");
        QuestionType.LiteracyRate.FormatValue(99.5).ShouldBe("99.5%");
        QuestionType.LifeExpectancy.FormatValue(80.5).ShouldBe("80.5 years");
    }
}


================================================================================
FILE: tests/MyDesktopApplication.Core.Tests/TodoItemTests.cs
SIZE: 1.21 KB
MODIFIED: 2025-12-21 16:51:26
================================================================================

using Xunit;
using Shouldly;
using MyDesktopApplication.Core.Entities;

namespace MyDesktopApplication.Core.Tests;

public class TodoItemTests
{
    [Fact]
    public void TodoItem_ShouldInitialize_WithDefaults()
    {
        var item = new TodoItem { Title = "Test" };
        
        item.Id.ShouldNotBe(Guid.Empty);
        item.Title.ShouldBe("Test");
        item.IsCompleted.ShouldBeFalse();
        item.CompletedAt.ShouldBeNull();
        item.Priority.ShouldBe(0);
    }

    [Fact]
    public void MarkComplete_ShouldSetIsCompletedAndCompletedAt()
    {
        var item = new TodoItem { Title = "Test" };
        
        item.MarkComplete();
        
        item.IsCompleted.ShouldBeTrue();
        item.CompletedAt.ShouldNotBeNull();
    }

    [Fact]
    public void MarkIncomplete_ShouldClearIsCompletedAndCompletedAt()
    {
        var item = new TodoItem { Title = "Test" };
        item.MarkComplete();
        
        item.MarkIncomplete();
        
        item.IsCompleted.ShouldBeFalse();
        item.CompletedAt.ShouldBeNull();
    }

    [Fact]
    public void Priority_ShouldBeSettable()
    {
        var item = new TodoItem { Title = "Test", Priority = 5 };
        
        item.Priority.ShouldBe(5);
    }
}


================================================================================
FILE: tests/MyDesktopApplication.Integration.Tests/MyDesktopApplication.Integration.Tests.csproj
SIZE: .92 KB
MODIFIED: 2025-12-21 16:41:27
================================================================================

<Project Sdk="Microsoft.NET.Sdk">
  <PropertyGroup>
    <TargetFramework>net10.0</TargetFramework>
    <ImplicitUsings>enable</ImplicitUsings>
    <Nullable>enable</Nullable>
    <IsPackable>false</IsPackable>
    <IsTestProject>true</IsTestProject>
  </PropertyGroup>
  <ItemGroup>
    <PackageReference Include="Microsoft.NET.Test.Sdk" />
    <PackageReference Include="xunit" />
    <PackageReference Include="xunit.runner.visualstudio" />
    <PackageReference Include="Shouldly" />
    <PackageReference Include="Bogus" />
    <PackageReference Include="Microsoft.EntityFrameworkCore.Sqlite" />
    <PackageReference Include="Testcontainers" />
    <PackageReference Include="Testcontainers.PostgreSql" />
    <PackageReference Include="coverlet.collector" />
  </ItemGroup>
  <ItemGroup>
    <ProjectReference Include="..\..\src\MyDesktopApplication.Infrastructure\MyDesktopApplication.Infrastructure.csproj" />
  </ItemGroup>
</Project>


================================================================================
FILE: tests/MyDesktopApplication.Integration.Tests/TodoRepositoryTests.cs
SIZE: 1.91 KB
MODIFIED: 2025-12-21 12:48:54
================================================================================

using Microsoft.EntityFrameworkCore;
using MyDesktopApplication.Core.Entities;
using MyDesktopApplication.Infrastructure.Data;
using MyDesktopApplication.Infrastructure.Repositories;
using Shouldly;
using Xunit;

namespace MyDesktopApplication.Integration.Tests;

public class TodoRepositoryTests : IDisposable
{
    private readonly AppDbContext _context;
    private readonly TodoRepository _repository;
    
    public TodoRepositoryTests()
    {
        var options = new DbContextOptionsBuilder<AppDbContext>()
            .UseInMemoryDatabase(databaseName: Guid.NewGuid().ToString())
            .Options;
        
        _context = new AppDbContext(options);
        _repository = new TodoRepository(_context);
    }
    
    [Fact]
    public async Task AddAsync_SavesTodoItem()
    {
        var todo = new TodoItem { Title = "Test Todo" };
        
        await _repository.AddAsync(todo);
        await _context.SaveChangesAsync();
        
        var saved = await _context.TodoItems.FirstOrDefaultAsync();
        saved.ShouldNotBeNull();
        saved.Title.ShouldBe("Test Todo");
    }
    
    [Fact]
    public async Task GetByIdAsync_ReturnsCorrectItem()
    {
        var todo = new TodoItem { Title = "Find Me" };
        _context.TodoItems.Add(todo);
        await _context.SaveChangesAsync();
        
        var found = await _repository.GetByIdAsync(todo.Id);
        
        found.ShouldNotBeNull();
        found.Title.ShouldBe("Find Me");
    }
    
    [Fact]
    public async Task GetAllAsync_ReturnsAllItems()
    {
        _context.TodoItems.AddRange(
            new TodoItem { Title = "Todo 1" },
            new TodoItem { Title = "Todo 2" },
            new TodoItem { Title = "Todo 3" }
        );
        await _context.SaveChangesAsync();
        
        var all = await _repository.GetAllAsync();
        
        all.Count().ShouldBe(3);
    }
    
    public void Dispose()
    {
        _context.Dispose();
    }
}


================================================================================
FILE: tests/MyDesktopApplication.UI.Tests/MainWindowViewModelTests.cs
SIZE: 1.37 KB
MODIFIED: 2025-12-21 12:48:54
================================================================================

using MyDesktopApplication.Core.Entities;
using MyDesktopApplication.Core.Interfaces;
using NSubstitute;
using Shouldly;
using Xunit;

namespace MyDesktopApplication.UI.Tests;

public class MainWindowViewModelTests
{
    [Fact]
    public async Task GameState_InitializesFromRepository()
    {
        // Arrange
        var mockRepo = Substitute.For<IGameStateRepository>();
        var gameState = new GameState 
        { 
            CorrectAnswers = 5, 
            TotalQuestions = 10,
            BestStreak = 3
        };
        mockRepo.GetOrCreateAsync(Arg.Any<CancellationToken>()).Returns(gameState);
        
        // Act - verify the mock works
        var result = await mockRepo.GetOrCreateAsync();
        
        // Assert
        result.ShouldNotBeNull();
        result.CorrectAnswers.ShouldBe(5);
        result.TotalQuestions.ShouldBe(10);
    }
    
    [Fact]
    public async Task SaveAsync_IsCalled_WhenAnswerRecorded()
    {
        // Arrange
        var mockRepo = Substitute.For<IGameStateRepository>();
        var gameState = new GameState();
        mockRepo.GetOrCreateAsync(Arg.Any<CancellationToken>()).Returns(gameState);
        
        // Act
        gameState.RecordAnswer(true);
        await mockRepo.SaveAsync(gameState);
        
        // Assert
        await mockRepo.Received(1).SaveAsync(Arg.Any<GameState>(), Arg.Any<CancellationToken>());
    }
}


================================================================================
FILE: tests/MyDesktopApplication.UI.Tests/MyDesktopApplication.UI.Tests.csproj
SIZE: .95 KB
MODIFIED: 2025-12-21 16:41:27
================================================================================

<Project Sdk="Microsoft.NET.Sdk">
  <PropertyGroup>
    <TargetFramework>net10.0</TargetFramework>
    <ImplicitUsings>enable</ImplicitUsings>
    <Nullable>enable</Nullable>
    <IsPackable>false</IsPackable>
    <IsTestProject>true</IsTestProject>
  </PropertyGroup>
  <ItemGroup>
    <PackageReference Include="Microsoft.NET.Test.Sdk" />
    <PackageReference Include="xunit" />
    <PackageReference Include="xunit.runner.visualstudio" />
    <PackageReference Include="Shouldly" />
    <PackageReference Include="NSubstitute" />
    <PackageReference Include="Avalonia.Headless" />
    <PackageReference Include="Avalonia.Headless.XUnit" />
    <PackageReference Include="coverlet.collector" />
  </ItemGroup>
  <ItemGroup>
    <ProjectReference Include="..\..\src\MyDesktopApplication.Desktop\MyDesktopApplication.Desktop.csproj" />
    <ProjectReference Include="..\..\src\MyDesktopApplication.Shared\MyDesktopApplication.Shared.csproj" />
  </ItemGroup>
</Project>


===============================================================================
EXPORT COMPLETED: Sun Dec 21 05:35:46 PM CST 2025
Total Files Found: 69
Files Exported: 69
Files Skipped: 0 (binary or large files)
Output File: /home/kushal/src/dotnet/MyDesktopApplication/docs/llm/dump.txt
===============================================================================
